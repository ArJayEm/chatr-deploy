/*! For license information please see main.daa38993.js.LICENSE.txt */
!function(){var e={4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var r=n(3589),i=n(7297),o=n(9301),a=n(9774),u=n(1804),s=n(9145),c=n(5411),l=n(6789),f=n(4531),h=n(6569),d=n(6261);e.exports=function(e){return new Promise((function(t,n){var p,v=e.data,m=e.headers,y=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(v)&&r.isStandardBrowserEnv()&&delete m["Content-Type"];var w=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",k=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(b+":"+k)}var _=u(e.baseURL,e.url);function E(){if(w){var r="getAllResponseHeaders"in w?s(w.getAllResponseHeaders()):null,o={data:y&&"text"!==y&&"json"!==y?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:r,config:e,request:w};i((function(e){t(e),g()}),(function(e){n(e),g()}),o),w=null}}if(w.open(e.method.toUpperCase(),a(_,e.params,e.paramsSerializer),!0),w.timeout=e.timeout,"onloadend"in w?w.onloadend=E:w.onreadystatechange=function(){w&&4===w.readyState&&(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))&&setTimeout(E)},w.onabort=function(){w&&(n(new f("Request aborted",f.ECONNABORTED,e,w)),w=null)},w.onerror=function(){n(new f("Network Error",f.ERR_NETWORK,e,w,w)),w=null},w.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new f(t,r.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,e,w)),w=null},r.isStandardBrowserEnv()){var I=(e.withCredentials||c(_))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;I&&(m[e.xsrfHeaderName]=I)}"setRequestHeader"in w&&r.forEach(m,(function(e,t){"undefined"===typeof v&&"content-type"===t.toLowerCase()?delete m[t]:w.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(w.withCredentials=!!e.withCredentials),y&&"json"!==y&&(w.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&w.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&w.upload&&w.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){w&&(n(!e||e&&e.type?new h:e),w.abort(),w=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),v||(v=null);var A=d(_);A&&-1===["http","https","file"].indexOf(A)?n(new f("Unsupported protocol "+A+":",f.ERR_BAD_REQUEST,e)):w.send(v)}))}},8036:function(e,t,n){"use strict";var r=n(3589),i=n(4049),o=n(3773),a=n(777);var u=function e(t){var n=new o(t),u=i(o.prototype.request,n);return r.extend(u,o.prototype,n),r.extend(u,n),u.create=function(n){return e(a(t,n))},u}(n(1709));u.Axios=o,u.CanceledError=n(6569),u.CancelToken=n(6857),u.isCancel=n(5517),u.VERSION=n(7600).version,u.toFormData=n(1397),u.AxiosError=n(4531),u.Cancel=u.CanceledError,u.all=function(e){return Promise.all(e)},u.spread=n(8089),u.isAxiosError=n(9580),e.exports=u,e.exports.default=u},6857:function(e,t,n){"use strict";var r=n(6569);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},6569:function(e,t,n){"use strict";var r=n(4531);function i(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(3589).inherits(i,r,{__CANCEL__:!0}),e.exports=i},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var r=n(3589),i=n(9774),o=n(7470),a=n(2733),u=n(777),s=n(1804),c=n(7835),l=c.validators;function f(e){this.defaults=e,this.interceptors={request:new o,response:new o}}f.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=u(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,s=[];if(this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)})),!i){var f=[a,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(s),o=Promise.resolve(t);f.length;)o=o.then(f.shift(),f.shift());return o}for(var h=t;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(v){p(v);break}}try{o=a(h)}catch(v){return Promise.reject(v)}for(;s.length;)o=o.then(s.shift(),s.shift());return o},f.prototype.getUri=function(e){e=u(this.defaults,e);var t=s(e.baseURL,e.url);return i(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){f.prototype[e]=function(t,n){return this.request(u(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(u(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}f.prototype[e]=t(),f.prototype[e+"Form"]=t(!0)})),e.exports=f},4531:function(e,t,n){"use strict";var r=n(3589);function i(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var o=i.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){a[e]={value:e}})),Object.defineProperties(i,a),Object.defineProperty(o,"isAxiosError",{value:!0}),i.from=function(e,t,n,a,u,s){var c=Object.create(o);return r.toFlatObject(e,c,(function(e){return e!==Error.prototype})),i.call(c,e.message,t,n,a,u),c.name=e.name,s&&Object.assign(c,s),c},e.exports=i},7470:function(e,t,n){"use strict";var r=n(3589);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},1804:function(e,t,n){"use strict";var r=n(4044),i=n(9549);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},2733:function(e,t,n){"use strict";var r=n(3589),i=n(2693),o=n(5517),a=n(1709),u=n(6569);function s(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new u}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},777:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function u(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function s(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:s};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||o,i=t(e);r.isUndefined(i)&&t!==s||(n[e]=i)})),n}},7297:function(e,t,n){"use strict";var r=n(4531);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var r=n(3589),i=n(1709);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},1709:function(e,t,n){"use strict";var r=n(3589),i=n(4341),o=n(4531),a=n(6789),u=n(1397),s={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:a,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){if(i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,o=r.isObject(e),a=t&&t["Content-Type"];if((n=r.isFileList(e))||o&&"multipart/form-data"===a){var s=this.env&&this.env.FormData;return u(n?{"files[]":e}:e,s&&new s)}return o||"application/json"===a?(c(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(u){if(a){if("SyntaxError"===u.name)throw o.from(u,o.ERR_BAD_RESPONSE,this,null,this.response);throw u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(s)})),e.exports=l},6789:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:function(e){e.exports={version:"0.27.2"}},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:function(e,t,n){"use strict";var r=n(3589);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var u=e.indexOf("#");-1!==u&&(e=e.slice(0,u)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(i)&&u.push("path="+i),r.isString(o)&&u.push("domain="+o),!0===a&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},9580:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},3035:function(e){e.exports=null},9145:function(e,t,n){"use strict";var r=n(3589),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},6261:function(e){"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},1397:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||new FormData;var n=[];function i(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(o,a){if(r.isPlainObject(o)||r.isArray(o)){if(-1!==n.indexOf(o))throw Error("Circular reference detected in "+a);n.push(o),r.forEach(o,(function(n,o){if(!r.isUndefined(n)){var u,s=a?a+"."+o:o;if(n&&!a&&"object"===typeof n)if(r.endsWith(o,"{}"))n=JSON.stringify(n);else if(r.endsWith(o,"[]")&&(u=r.toArray(n)))return void u.forEach((function(e){!r.isUndefined(e)&&t.append(s,i(e))}));e(n,s)}})),n.pop()}else t.append(a,i(o))}(e),t}},7835:function(e,t,n){"use strict";var r=n(7600).version,i=n(4531),o={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){o[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var a={};o.transitional=function(e,t,n){function o(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,u){if(!1===e)throw new i(o(r," has been removed"+(t?" in "+t:"")),i.ERR_DEPRECATED);return t&&!a[r]&&(a[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,u)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),o=r.length;o-- >0;){var a=r[o],u=t[a];if(u){var s=e[a],c=void 0===s||u(s,a,e);if(!0!==c)throw new i("option "+a+" must be "+c,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+a,i.ERR_BAD_OPTION)}},validators:o}},3589:function(e,t,n){"use strict";var r,i=n(4049),o=Object.prototype.toString,a=(r=Object.create(null),function(e){var t=o.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function u(e){return e=e.toLowerCase(),function(t){return a(t)===e}}function s(e){return Array.isArray(e)}function c(e){return"undefined"===typeof e}var l=u("ArrayBuffer");function f(e){return null!==e&&"object"===typeof e}function h(e){if("object"!==a(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var d=u("Date"),p=u("File"),v=u("Blob"),m=u("FileList");function y(e){return"[object Function]"===o.call(e)}var g=u("URLSearchParams");function w(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),s(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var b,k=(b="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return b&&e instanceof b});e.exports={isArray:s,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||o.call(e)===t||y(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:f,isPlainObject:h,isUndefined:c,isDate:d,isFile:p,isBlob:v,isFunction:y,isStream:function(e){return f(e)&&y(e.pipe)},isURLSearchParams:g,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:w,merge:function e(){var t={};function n(n,r){h(t[r])&&h(n)?t[r]=e(t[r],n):h(n)?t[r]=e({},n):s(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)w(arguments[r],n);return t},extend:function(e,t,n){return w(t,(function(t,r){e[r]=n&&"function"===typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,i,o,a={};t=t||{};do{for(i=(r=Object.getOwnPropertyNames(e)).length;i-- >0;)a[o=r[i]]||(t[o]=e[o],a[o]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:a,kindOfTest:u,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(c(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:k,isFileList:m}},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},2176:function(e){"use strict";e.exports=function(e,t,n,r,i,o,a,u){if(!e){var s;if(void 0===t)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,u],l=0;(s=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6925:function(e,t,n){var r=n(7436);function i(e){this.mode=r.MODE_8BIT_BYTE,this.data=e}i.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},e.exports=i},4477:function(e){function t(){this.buffer=new Array,this.length=0}t.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},2959:function(e){e.exports={L:1,M:0,Q:3,H:2}},932:function(e,t,n){var r=n(1745);function i(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}i.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var o=0;o<e.getLength();o++)t[n+o]^=r.gexp(r.glog(this.get(n))+r.glog(e.get(o)));return new i(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=r.glog(this.get(0))-r.glog(e.get(0)),n=new Array(this.getLength()),o=0;o<this.getLength();o++)n[o]=this.get(o);for(o=0;o<e.getLength();o++)n[o]^=r.gexp(r.glog(e.get(o))+t);return new i(n,0).mod(e)}},e.exports=i},5809:function(e,t,n){var r=n(6925),i=n(9841),o=n(4477),a=n(4444),u=n(932);function s(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var c=s.prototype;c.addData=function(e){var t=new r(e);this.dataList.push(t),this.dataCache=null},c.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},c.getModuleCount=function(){return this.moduleCount},c.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=i.getRSBlocks(e,this.errorCorrectLevel),n=new o,r=0,u=0;u<t.length;u++)r+=t[u].dataCount;for(u=0;u<this.dataList.length;u++){var s=this.dataList[u];n.put(s.mode,4),n.put(s.getLength(),a.getLengthInBits(s.mode,e)),s.write(n)}if(n.getLengthInBits()<=8*r)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},c.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[n][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=s.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},c.setupPositionProbePattern=function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},c.getBestMaskPattern=function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=a.getLostPoint(this);(0==n||e>r)&&(e=r,t=n)}return t},c.createMovieClip=function(e,t,n){var r=e.createEmptyMovieClip(t,n);this.make();for(var i=0;i<this.modules.length;i++)for(var o=1*i,a=0;a<this.modules[i].length;a++){var u=1*a;this.modules[i][a]&&(r.beginFill(0,100),r.moveTo(u,o),r.lineTo(u+1,o),r.lineTo(u+1,o+1),r.lineTo(u,o+1),r.endFill())}return r},c.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},c.setupPositionAdjustPattern=function(){for(var e=a.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(null==this.modules[r][i])for(var o=-2;o<=2;o++)for(var u=-2;u<=2;u++)this.modules[r+o][i+u]=-2==o||2==o||-2==u||2==u||0==o&&0==u}},c.setupTypeNumber=function(e){for(var t=a.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++){r=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},c.setupTypeInfo=function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=a.getBCHTypeInfo(n),i=0;i<15;i++){var o=!e&&1==(r>>i&1);i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(i=0;i<15;i++){o=!e&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!e},c.mapData=function(e,t){for(var n=-1,r=this.moduleCount-1,i=7,o=0,u=this.moduleCount-1;u>0;u-=2)for(6==u&&u--;;){for(var s=0;s<2;s++)if(null==this.modules[r][u-s]){var c=!1;o<e.length&&(c=1==(e[o]>>>i&1)),a.getMask(t,r,u-s)&&(c=!c),this.modules[r][u-s]=c,-1==--i&&(o++,i=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}},s.PAD0=236,s.PAD1=17,s.createData=function(e,t,n){for(var r=i.getRSBlocks(e,t),u=new o,c=0;c<n.length;c++){var l=n[c];u.put(l.mode,4),u.put(l.getLength(),a.getLengthInBits(l.mode,e)),l.write(u)}var f=0;for(c=0;c<r.length;c++)f+=r[c].dataCount;if(u.getLengthInBits()>8*f)throw new Error("code length overflow. ("+u.getLengthInBits()+">"+8*f+")");for(u.getLengthInBits()+4<=8*f&&u.put(0,4);u.getLengthInBits()%8!=0;)u.putBit(!1);for(;!(u.getLengthInBits()>=8*f)&&(u.put(s.PAD0,8),!(u.getLengthInBits()>=8*f));)u.put(s.PAD1,8);return s.createBytes(u,r)},s.createBytes=function(e,t){for(var n=0,r=0,i=0,o=new Array(t.length),s=new Array(t.length),c=0;c<t.length;c++){var l=t[c].dataCount,f=t[c].totalCount-l;r=Math.max(r,l),i=Math.max(i,f),o[c]=new Array(l);for(var h=0;h<o[c].length;h++)o[c][h]=255&e.buffer[h+n];n+=l;var d=a.getErrorCorrectPolynomial(f),p=new u(o[c],d.getLength()-1).mod(d);s[c]=new Array(d.getLength()-1);for(h=0;h<s[c].length;h++){var v=h+p.getLength()-s[c].length;s[c][h]=v>=0?p.get(v):0}}var m=0;for(h=0;h<t.length;h++)m+=t[h].totalCount;var y=new Array(m),g=0;for(h=0;h<r;h++)for(c=0;c<t.length;c++)h<o[c].length&&(y[g++]=o[c][h]);for(h=0;h<i;h++)for(c=0;c<t.length;c++)h<s[c].length&&(y[g++]=s[c][h]);return y},e.exports=s},9841:function(e,t,n){var r=n(2959);function i(e,t){this.totalCount=e,this.dataCount=t}i.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],i.getRSBlocks=function(e,t){var n=i.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,o=new Array,a=0;a<r;a++)for(var u=n[3*a+0],s=n[3*a+1],c=n[3*a+2],l=0;l<u;l++)o.push(new i(s,c));return o},i.getRsBlockTable=function(e,t){switch(t){case r.L:return i.RS_BLOCK_TABLE[4*(e-1)+0];case r.M:return i.RS_BLOCK_TABLE[4*(e-1)+1];case r.Q:return i.RS_BLOCK_TABLE[4*(e-1)+2];case r.H:return i.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},e.exports=i},1745:function(e){for(var t={glog:function(e){if(e<1)throw new Error("glog("+e+")");return t.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},n=0;n<8;n++)t.EXP_TABLE[n]=1<<n;for(n=8;n<256;n++)t.EXP_TABLE[n]=t.EXP_TABLE[n-4]^t.EXP_TABLE[n-5]^t.EXP_TABLE[n-6]^t.EXP_TABLE[n-8];for(n=0;n<255;n++)t.LOG_TABLE[t.EXP_TABLE[n]]=n;e.exports=t},7436:function(e){e.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},4444:function(e,t,n){var r=n(7436),i=n(932),o=n(1745),a=0,u=1,s=2,c=3,l=4,f=5,h=6,d=7,p={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;p.getBCHDigit(t)-p.getBCHDigit(p.G15)>=0;)t^=p.G15<<p.getBCHDigit(t)-p.getBCHDigit(p.G15);return(e<<10|t)^p.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;p.getBCHDigit(t)-p.getBCHDigit(p.G18)>=0;)t^=p.G18<<p.getBCHDigit(t)-p.getBCHDigit(p.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return p.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case a:return(t+n)%2==0;case u:return t%2==0;case s:return n%3==0;case c:return(t+n)%3==0;case l:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case f:return t*n%2+t*n%3==0;case h:return(t*n%2+t*n%3)%2==0;case d:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new i([1],0),n=0;n<e;n++)t=t.multiply(new i([1,o.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:case r.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r++)for(var i=0;i<t;i++){for(var o=0,a=e.isDark(r,i),u=-1;u<=1;u++)if(!(r+u<0||t<=r+u))for(var s=-1;s<=1;s++)i+s<0||t<=i+s||0==u&&0==s||a==e.isDark(r+u,i+s)&&o++;o>5&&(n+=3+o-5)}for(r=0;r<t-1;r++)for(i=0;i<t-1;i++){var c=0;e.isDark(r,i)&&c++,e.isDark(r+1,i)&&c++,e.isDark(r,i+1)&&c++,e.isDark(r+1,i+1)&&c++,0!=c&&4!=c||(n+=3)}for(r=0;r<t;r++)for(i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(i=0;i<t;i++)for(r=0;r<t-6;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);var l=0;for(i=0;i<t;i++)for(r=0;r<t;r++)e.isDark(r,i)&&l++;return n+=10*(Math.abs(100*l/t/t-50)/5)}};e.exports=p},173:function(e,t,n){"use strict";var r,i=n(2791),o=(r=i)&&"object"===typeof r&&"default"in r?r.default:r,a=n(1338),u=new a,s=u.getBrowser(),c=u.getCPU(),l=u.getDevice(),f=u.getEngine(),h=u.getOS(),d=u.getUA(),p=function(e){return u.setUA(e)},v=function(e){if(e){var t=new a(e);return{UA:t,browser:t.getBrowser(),cpu:t.getCPU(),device:t.getDevice(),engine:t.getEngine(),os:t.getOS(),ua:t.getUA(),setUserAgent:function(e){return t.setUA(e)}}}console.error("No userAgent string was provided")},m=Object.freeze({ClientUAInstance:u,browser:s,cpu:c,device:l,engine:f,os:h,ua:d,setUa:p,parseUserAgent:v});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){return g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(){return k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function I(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(s){u=!0,i=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x="mobile",T="tablet",O="smarttv",N="console",R="wearable",D="embedded",P=void 0,M={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},L={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},B={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";return e||t},j=function(){return!("undefined"===typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},U=function(e){var t=j();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)},V=function(e,t,n,r){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{vendor:F(t.vendor),model:F(t.model),os:F(n.name),osVersion:F(n.version),ua:F(r)})};var z=function(e){return e.type===x},H=function(e){return e.type===T},G=function(e){var t=e.type;return t===x||t===T},W=function(e){return e.type===O},q=function(e){return e.type===P},K=function(e){return e.type===R},X=function(e){return e.type===N},Y=function(e){return e.type===D},Q=function(e){var t=e.vendor;return F(t)},Z=function(e){var t=e.model;return F(t)},J=function(e){var t=e.type;return F(t,"browser")},$=function(e){return e.name===L.Android},ee=function(e){return e.name===L.Windows},te=function(e){return e.name===L.MAC_OS},ne=function(e){return e.name===L.WindowsPhone},re=function(e){return e.name===L.IOS},ie=function(e){var t=e.version;return F(t)},oe=function(e){var t=e.name;return F(t)},ae=function(e){return e.name===M.Chrome},ue=function(e){return e.name===M.Firefox},se=function(e){return e.name===M.Chromium},ce=function(e){return e.name===M.Edge},le=function(e){return e.name===M.Yandex},fe=function(e){var t=e.name;return t===M.Safari||t===M.MobileSafari},he=function(e){return e.name===M.MobileSafari},de=function(e){return e.name===M.Opera},pe=function(e){var t=e.name;return t===M.InternetExplorer||t===M.Ie},ve=function(e){return e.name===M.MIUI},me=function(e){return e.name===M.SamsungBrowser},ye=function(e){var t=e.version;return F(t)},ge=function(e){var t=e.major;return F(t)},we=function(e){var t=e.name;return F(t)},be=function(e){var t=e.name;return F(t)},ke=function(e){var t=e.version;return F(t)},_e=function(){var e=j(),t=e&&e.userAgent&&e.userAgent.toLowerCase();return"string"===typeof t&&/electron/.test(t)},Ee=function(e){return"string"===typeof e&&-1!==e.indexOf("Edg/")},Ie=function(){var e=j();return e&&(/iPad|iPhone|iPod/.test(e.platform)||"MacIntel"===e.platform&&e.maxTouchPoints>1)&&!window.MSStream},Ae=function(){return U("iPad")},Ce=function(){return U("iPhone")},Se=function(){return U("iPod")},xe=function(e){return F(e)};function Te(e){var t=e||m,n=t.device,r=t.browser,i=t.os,o=t.engine,a=t.ua;return{isSmartTV:W(n),isConsole:X(n),isWearable:K(n),isEmbedded:Y(n),isMobileSafari:he(r)||Ae(),isChromium:se(r),isMobile:G(n)||Ae(),isMobileOnly:z(n),isTablet:H(n)||Ae(),isBrowser:q(n),isDesktop:q(n),isAndroid:$(i),isWinPhone:ne(i),isIOS:re(i)||Ae(),isChrome:ae(r),isFirefox:ue(r),isSafari:fe(r),isOpera:de(r),isIE:pe(r),osVersion:ie(i),osName:oe(i),fullBrowserVersion:ye(r),browserVersion:ge(r),browserName:we(r),mobileVendor:Q(n),mobileModel:Z(n),engineName:be(o),engineVersion:ke(o),getUA:xe(a),isEdge:ce(r)||Ee(a),isYandex:le(r),deviceType:J(n),isIOS13:Ie(),isIPad13:Ae(),isIPhone13:Ce(),isIPod13:Se(),isElectron:_e(),isEdgeChromium:Ee(a),isLegacyEdge:ce(r)&&!Ee(a),isWindows:ee(i),isMacOs:te(i),isMIUI:ve(r),isSamsungBrowser:me(r)}}var Oe=W(l),Ne=X(l),Re=K(l),De=Y(l),Pe=he(s)||Ae(),Me=se(s),Le=G(l)||Ae(),Be=z(l),Fe=H(l)||Ae(),je=q(l),Ue=q(l),Ve=$(h),ze=ne(h),He=re(h)||Ae(),Ge=ae(s),We=ue(s),qe=fe(s),Ke=de(s),Xe=pe(s),Ye=ie(h),Qe=oe(h),Ze=ye(s),Je=ge(s),$e=we(s),et=Q(l),tt=Z(l),nt=be(f),rt=ke(f),it=xe(d),ot=ce(s)||Ee(d),at=le(s),ut=J(l),st=Ie(),ct=Ae(),lt=Ce(),ft=Se(),ht=_e(),dt=Ee(d),pt=ce(s)&&!Ee(d),vt=ee(h),mt=te(h),yt=ve(s),gt=me(s);function wt(e){var t=e||window.navigator.userAgent;return v(t)}t.nI=Ue,t.tq=Le},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)a.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),S=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,B=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var j=!1;function U(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,u=o.length-1;1<=a&&0<=u&&i[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(i[a]!==o[u]){if(1!==a||1!==u)do{if(a--,0>--u||i[a]!==o[u]){var s="\n"+i[a].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=a&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case A:return"Profiler";case I:return"StrictMode";case T:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){Z(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function oe(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ee=null,Ie=null;function Ae(e){if(e=wi(e)){if("function"!==typeof _e)throw Error(o(280));var t=e.stateNode;t&&(t=ki(t),_e(e.stateNode,e.type,t))}}function Ce(e){Ee?Ie?Ie.push(e):Ie=[e]:Ee=e}function Se(){if(Ee){var e=Ee,t=Ie;if(Ie=Ee=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function xe(e,t){return e(t)}function Te(){}var Oe=!1;function Ne(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return xe(e,t,n)}finally{Oe=!1,(null!==Ee||null!==Ie)&&(Te(),Se())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=ki(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){De=!1}function Me(e,t,n,r,i,o,a,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,Be=null,Fe=!1,je=null,Ue={onError:function(e){Le=!0,Be=e}};function Ve(e,t,n,r,i,o,a,u,s){Le=!1,Be=null,Me.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ge(i),e;if(a===r)return Ge(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Ze=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var u=a&~i;0!==u?r=ft(u):0!==(o&=a)&&(r=ft(o))}else 0!==(a=n&~i)?r=ft(a):0!==o&&(r=ft(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,_t,Et,It,At,Ct=!1,St=[],xt=null,Tt=null,Ot=null,Nt=new Map,Rt=new Map,Dt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void At(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Ct=!1,null!==xt&&Ft(xt)&&(xt=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==Ot&&Ft(Ot)&&(Ot=null),Nt.forEach(jt),Rt.forEach(jt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Vt(t,e)}if(0<St.length){Vt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Vt(xt,e),null!==Tt&&Vt(Tt,e),null!==Ot&&Vt(Ot,e),Nt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Bt(n),null===n.blockedOn&&Dt.shift()}var Ht=b.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=wt,o=Ht.transition;Ht.transition=null;try{wt=1,Kt(e,t,n,r)}finally{wt=i,Ht.transition=o}}function qt(e,t,n,r){var i=wt,o=Ht.transition;Ht.transition=null;try{wt=4,Kt(e,t,n,r)}finally{wt=i,Ht.transition=o}}function Kt(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Xt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Lt(xt,e,t,n,r,i),!0;case"dragenter":return Tt=Lt(Tt,e,t,n,r,i),!0;case"mouseover":return Ot=Lt(Ot,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nt.set(o,Lt(Nt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rt.set(o,Lt(Rt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var o=wi(i);if(null!==o&&kt(o),null===(o=Yt(e,t,n,r))&&Gr(e,t,r,Xt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=gi(e=ke(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=on(cn),fn=B({},cn,{view:0,detail:0}),hn=on(fn),dn=B({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(an=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=an=0,sn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=on(dn),vn=on(B({},dn,{dataTransfer:0})),mn=on(B({},fn,{relatedTarget:0})),yn=on(B({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=B({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=on(gn),bn=on(B({},cn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function An(){return In}var Cn=B({},fn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=on(Cn),xn=on(B({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=on(B({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),On=on(B({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=B({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(Nn),Dn=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Mn=null;l&&"documentMode"in document&&(Mn=document.documentMode);var Ln=l&&"TextEvent"in window&&!Mn,Bn=l&&(!Pn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),jn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Xn(e){Fr(e,0)}function Yn(e){if(K(bi(e)))return e}function Qn(e,t){if("change"===e)return t}var Zn=!1;if(l){var Jn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Jn=$n}else Jn=!1;Zn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Kn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Wn(t,Kn,e,ke(e)),Ne(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=lr(n,o);var a=lr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==mr||mr!==X(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=qr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Er={},Ir={};function Ar(e){if(Er[e])return Er[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Er[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=Ar("animationend"),Sr=Ar("animationiteration"),xr=Ar("animationstart"),Tr=Ar("transitionend"),Or=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Or.set(e,t),s(t,[e])}for(var Dr=0;Dr<Nr.length;Dr++){var Pr=Nr[Dr];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(Sr,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(o(198));var l=Be;Le=!1,Be=null,Fe||(Fe=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var u=r[a],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==o&&i.isPropagationStopped())break e;Br(i,u,c),o=s}else for(a=0;a<r.length;a++){if(s=(u=r[a]).instance,c=u.currentTarget,u=u.listener,s!==o&&i.isPropagationStopped())break e;Br(i,u,c),o=s}}}if(Fe)throw e=je,Fe=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Qt(t)){case 1:var i=Wt;break;case 4:i=qt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var s=a.tag;if((3===s||4===s)&&((s=a.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;a=a.return}for(;null!==u;){if(null===(a=gi(u)))return;if(5===(s=a.tag)||6===s){r=o=a;continue e}u=u.parentNode}}r=r.return}Ne((function(){var r=o,i=ke(n),a=[];e:{var u=Or.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Sn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Tn;break;case Cr:case Sr:case xr:s=yn;break;case Tr:s=On;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=xn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Wr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),a.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=xn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Kr(d))p++;for(d=0,v=h;v;v=Kr(v))d++;for(;0<p-d;)l=Kr(l),p--;for(;0<d-p;)h=Kr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Kr(l),h=Kr(h)}l=null}else l=null;null!==s&&Xr(a,u,s,l,!1),null!==c&&null!==f&&Xr(a,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Qn;else if(Gn(u))if(Zn)m=ar;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=or);switch(m&&(m=m(e,r))?Wn(a,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(a,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(a,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Un(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Bn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(g=en()):(Jt="value"in(Zt=i)?Zt.value:Zt.textContent,zn=!0)),0<(y=qr(r,w)).length&&(w=new bn(w,e,null,n,i),a.push({event:w,listeners:y}),g?w.data=g:null!==(g=Vn(n))&&(w.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(jn=!0,Fn);case"textInput":return(e=t.data)===Fn&&jn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Pn&&Un(e,t)?(e=en(),$t=Jt=Zt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=g))}Fr(a,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Re(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Re(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,o))&&a.unshift(Wr(n,s,u)):i||null!=(s=Re(n,o))&&a.push(Wr(n,s,u))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function Jr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(o(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ki(e){return e[di]||null}var _i=[],Ei=-1;function Ii(e){return{current:e}}function Ai(e){0>Ei||(e.current=_i[Ei],_i[Ei]=null,Ei--)}function Ci(e,t){Ei++,_i[Ei]=e.current,e.current=t}var Si={},xi=Ii(Si),Ti=Ii(!1),Oi=Si;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ai(Ti),Ai(xi)}function Pi(e,t,n){if(xi.current!==Si)throw Error(o(168));Ci(xi,t),Ci(Ti,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return B({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Oi=xi.current,Ci(xi,e),Ci(Ti,Ti.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Mi(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,Ai(Ti),Ai(xi),Ci(xi,e)):Ai(Ti),Ci(Ti,n)}var Fi=null,ji=!1,Ui=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=wt;try{var n=Fi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,ji=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke($e,zi),i}finally{wt=t,Ui=!1}}return null}var Hi=[],Gi=0,Wi=null,qi=0,Ki=[],Xi=0,Yi=null,Qi=1,Zi="";function Ji(e,t){Hi[Gi++]=qi,Hi[Gi++]=Wi,Wi=e,qi=t}function $i(e,t,n){Ki[Xi++]=Qi,Ki[Xi++]=Zi,Ki[Xi++]=Yi,Yi=e;var r=Qi;e=Zi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Qi=1<<32-at(t)+i|n<<i|r,Zi=o+e}else Qi=1<<o|n<<i|r,Zi=e}function eo(e){null!==e.return&&(Ji(e,1),$i(e,1,0))}function to(e){for(;e===Wi;)Wi=Hi[--Gi],Hi[Gi]=null,qi=Hi[--Gi],Hi[Gi]=null;for(;e===Yi;)Yi=Ki[--Xi],Ki[Xi]=null,Zi=Ki[--Xi],Ki[Xi]=null,Qi=Ki[--Xi],Ki[Xi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function uo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Qi,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function so(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!uo(e,t)){if(so(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&uo(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(so(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function fo(e){if(e!==no)return!1;if(!io)return lo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(so(e))throw ho(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function vo(e){null===oo?oo=[e]:oo.push(e)}var mo=b.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var go=Ii(null),wo=null,bo=null,ko=null;function _o(){ko=bo=wo=null}function Eo(e){var t=go.current;Ai(go),e._currentValue=t}function Io(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ao(e,t){wo=e,ko=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(ko!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===wo)throw Error(o(308));bo=e,wo.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var So=null;function xo(e){null===So?So=[e]:So.push(e)}function To(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,xo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Oo(e,r)}function Oo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var No=!1;function Ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Po(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&xs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Oo(e,n)}return null===(i=r.interleaved)?(t.next=t,xo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Oo(e,n)}function Lo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Bo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fo(e,t,n,r){var i=e.updateQueue;No=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===a?o=c:a.next=c,a=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==a&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==o){var f=i.baseState;for(a=0,l=c=s=null,u=o;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=B({},f,h);break e;case 2:No=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,a|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ls|=a,e.lanes=a,e.memoizedState=f}}function jo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Uo=(new r.Component).refs;function Vo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zo={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Po(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Mo(e,o,i))&&(nc(t,e,i,r),Lo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Po(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Mo(e,o,i))&&(nc(t,e,i,r),Lo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Po(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Mo(e,i,r))&&(nc(t,e,r,n),Lo(t,e,r))}};function Ho(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,o))}function Go(e,t,n){var r=!1,i=Si,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Ri(t)?Oi:xi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Si),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zo.enqueueReplaceState(t,t.state,null)}function qo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Uo,Ro(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Ri(t)?Oi:xi.current,i.context=Ni(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Vo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zo.enqueueReplaceState(i,i.state,null),Fo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ko(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Uo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Xo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yo(e){return(0,e._init)(e._payload)}function Qo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===E?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&Yo(o)===t.type)?((r=i(t,n.props)).ref=Ko(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=Ko(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Ko(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Xo(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:f(e,t,n,r,null);Xo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return f(t,e=e.get(n)||null,r,i,null);Xo(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),io&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return io&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),io&&Ji(i,v),c}function m(i,u,s,c){var l=M(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var w=d(i,v,g.value,c);if(null===w){null===v&&(v=y);break}e&&v&&null===w.alternate&&t(i,v),u=a(w,u,m),null===f?l=w:f.sibling=w,f=w,v=y}if(g.done)return n(i,v),io&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return io&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),io&&Ji(i,m),l}return function e(r,o,a,s){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case k:e:{for(var c=a.key,l=o;null!==l;){if(l.key===c){if((c=a.type)===E){if(7===l.tag){n(r,l.sibling),(o=i(l,a.props.children)).return=r,r=o;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Yo(c)===l.type){n(r,l.sibling),(o=i(l,a.props)).ref=Ko(r,l,a),o.return=r,r=o;break e}n(r,l);break}t(r,l),l=l.sibling}a.type===E?((o=Mc(a.props.children,r.mode,s,a.key)).return=r,r=o):((s=Pc(a.type,a.key,a.props,null,r.mode,s)).ref=Ko(r,o,a),s.return=r,r=s)}return u(r);case _:e:{for(l=a.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(a,r.mode,s)).return=r,r=o}return u(r);case R:return e(r,o,(l=a._init)(a._payload),s)}if(te(a))return v(r,o,a,s);if(M(a))return m(r,o,a,s);Xo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Bc(a,r.mode,s)).return=r,r=o),u(r)):n(r,o)}}var Zo=Qo(!0),Jo=Qo(!1),$o={},ea=Ii($o),ta=Ii($o),na=Ii($o);function ra(e){if(e===$o)throw Error(o(174));return e}function ia(e,t){switch(Ci(na,t),Ci(ta,e),Ci(ea,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(ea),Ci(ea,t)}function oa(){Ai(ea),Ai(ta),Ai(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=se(t,e.type);t!==n&&(Ci(ta,e),Ci(ea,n))}function ua(e){ta.current===e&&(Ai(ea),Ai(ta))}var sa=Ii(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=[];function fa(){for(var e=0;e<la.length;e++)la[e]._workInProgressVersionPrimary=null;la.length=0}var ha=b.ReactCurrentDispatcher,da=b.ReactCurrentBatchConfig,pa=0,va=null,ma=null,ya=null,ga=!1,wa=!1,ba=0,ka=0;function _a(){throw Error(o(321))}function Ea(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Ia(e,t,n,r,i,a){if(pa=a,va=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),wa){a=0;do{if(wa=!1,ba=0,25<=a)throw Error(o(301));a+=1,ya=ma=null,t.updateQueue=null,ha.current=cu,e=n(r,i)}while(wa)}if(ha.current=au,t=null!==ma&&null!==ma.next,pa=0,ya=ma=va=null,ga=!1,t)throw Error(o(300));return e}function Aa(){var e=0!==ba;return ba=0,e}function Ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?va.memoizedState=ya=e:ya=ya.next=e,ya}function Sa(){if(null===ma){var e=va.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ya?va.memoizedState:ya.next;if(null!==t)ya=t,ma=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ya?va.memoizedState=ya=e:ya=ya.next=e}return ya}function xa(e,t){return"function"===typeof t?t(e):t}function Ta(e){var t=Sa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ma,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var s=u=null,c=null,l=a;do{var f=l.lane;if((pa&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,va.lanes|=f,Ls|=f}l=l.next}while(null!==l&&l!==a);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,va.lanes|=a,Ls|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oa(e){var t=Sa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);ur(a,t.memoizedState)||(bu=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Na(){}function Ra(e,t){var n=va,r=Sa(),i=t(),a=!ur(r.memoizedState,i);if(a&&(r.memoizedState=i,bu=!0),r=r.queue,Ga(Ma.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,ja(9,Pa.bind(null,n,r,i,t),void 0,null),null===Ts)throw Error(o(349));0!==(30&pa)||Da(n,t,i)}return i}function Da(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Pa(e,t,n,r){t.value=n,t.getSnapshot=r,La(t)&&Ba(e)}function Ma(e,t,n){return n((function(){La(t)&&Ba(e)}))}function La(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Ba(e){var t=Oo(e,1);null!==t&&nc(t,e,1,-1)}function Fa(e){var t=Ca();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,va,e),[t.memoizedState,e]}function ja(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=va.updateQueue)?(t={lastEffect:null,stores:null},va.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ua(){return Sa().memoizedState}function Va(e,t,n,r){var i=Ca();va.flags|=e,i.memoizedState=ja(1|t,n,void 0,void 0===r?null:r)}function za(e,t,n,r){var i=Sa();r=void 0===r?null:r;var o=void 0;if(null!==ma){var a=ma.memoizedState;if(o=a.destroy,null!==r&&Ea(r,a.deps))return void(i.memoizedState=ja(t,n,o,r))}va.flags|=e,i.memoizedState=ja(1|t,n,o,r)}function Ha(e,t){return Va(8390656,8,e,t)}function Ga(e,t){return za(2048,8,e,t)}function Wa(e,t){return za(4,2,e,t)}function qa(e,t){return za(4,4,e,t)}function Ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,za(4,4,Ka.bind(null,t,e),n)}function Ya(){}function Qa(e,t){var n=Sa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ea(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Za(e,t){var n=Sa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ea(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ja(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),va.lanes|=n,Ls|=n,e.baseState=!0),t)}function $a(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=da.transition;da.transition={};try{e(!1),t()}finally{wt=n,da.transition=r}}function eu(){return Sa().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=To(e,t,n,r))){nc(n,e,r,ec()),ou(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,u=o(a,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,a)){var s=t.interleaved;return null===s?(i.next=i,xo(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=To(e,t,i,r))&&(nc(n,e,r,i=ec()),ou(n,t,r))}}function ru(e){var t=e.alternate;return e===va||null!==t&&t===va}function iu(e,t){wa=ga=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ou(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var au={readContext:Co,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},uu={readContext:Co,useCallback:function(e,t){return Ca().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Ha,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Va(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Va(4194308,4,e,t)},useInsertionEffect:function(e,t){return Va(4,2,e,t)},useMemo:function(e,t){var n=Ca();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ca();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,va,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ca().memoizedState=e},useState:Fa,useDebugValue:Ya,useDeferredValue:function(e){return Ca().memoizedState=e},useTransition:function(){var e=Fa(!1),t=e[0];return e=$a.bind(null,e[1]),Ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=va,i=Ca();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ts)throw Error(o(349));0!==(30&pa)||Da(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ha(Ma.bind(null,r,a,e),[e]),r.flags|=2048,ja(9,Pa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ca(),t=Ts.identifierPrefix;if(io){var n=Zi;t=":"+t+"R"+(n=(Qi&~(1<<32-at(Qi)-1)).toString(32)+n),0<(n=ba++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ka++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Co,useCallback:Qa,useContext:Co,useEffect:Ga,useImperativeHandle:Xa,useInsertionEffect:Wa,useLayoutEffect:qa,useMemo:Za,useReducer:Ta,useRef:Ua,useState:function(){return Ta(xa)},useDebugValue:Ya,useDeferredValue:function(e){return Ja(Sa(),ma.memoizedState,e)},useTransition:function(){return[Ta(xa)[0],Sa().memoizedState]},useMutableSource:Na,useSyncExternalStore:Ra,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Co,useCallback:Qa,useContext:Co,useEffect:Ga,useImperativeHandle:Xa,useInsertionEffect:Wa,useLayoutEffect:qa,useMemo:Za,useReducer:Oa,useRef:Ua,useState:function(){return Oa(xa)},useDebugValue:Ya,useDeferredValue:function(e){var t=Sa();return null===ma?t.memoizedState=e:Ja(t,ma.memoizedState,e)},useTransition:function(){return[Oa(xa)[0],Sa().memoizedState]},useMutableSource:Na,useSyncExternalStore:Ra,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Po(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Ws=r),hu(0,t)},n}function vu(e,t,n){(n=Po(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===qs?qs=new Set([this]):qs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Po(-1,1)).tag=2,Mo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wu=b.ReactCurrentOwner,bu=!1;function ku(e,t,n,r){t.child=null===e?Jo(t,null,n,r):Zo(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var o=t.ref;return Ao(t,i),r=Ia(e,t,n,r,o,i),n=Aa(),null===e||bu?(io&&n&&eo(t),t.flags|=1,ku(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Eu(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Rc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Iu(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(a,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Dc(o,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(sr(o,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Su(e,t,n,r,i)}function Au(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ds,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ds,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Ds,Rs),Rs|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Ds,Rs),Rs|=r;return ku(e,t,i,n),t.child}function Cu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Su(e,t,n,r,i){var o=Ri(n)?Oi:xi.current;return o=Ni(t,o),Ao(t,i),n=Ia(e,t,n,r,o,i),r=Aa(),null===e||bu?(io&&r&&eo(t),t.flags|=1,ku(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function xu(e,t,n,r,i){if(Ri(n)){var o=!0;Li(t)}else o=!1;if(Ao(t,i),null===t.stateNode)Hu(e,t),Go(t,n,r),qo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,u=t.memoizedProps;a.props=u;var s=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Co(c):c=Ni(t,c=Ri(n)?Oi:xi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(u!==r||s!==c)&&Wo(t,a,r,c),No=!1;var h=t.memoizedState;a.state=h,Fo(t,r,a,i),s=t.memoizedState,u!==r||h!==s||Ti.current||No?("function"===typeof l&&(Vo(t,n,l,r),s=t.memoizedState),(u=No||Ho(t,n,u,r,h,s,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),a.props=r,a.state=s,a.context=c,r=u):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Do(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:yo(t.type,u),a.props=c,f=t.pendingProps,h=a.context,"object"===typeof(s=n.contextType)&&null!==s?s=Co(s):s=Ni(t,s=Ri(n)?Oi:xi.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(u!==f||h!==s)&&Wo(t,a,r,s),No=!1,h=t.memoizedState,a.state=h,Fo(t,r,a,i);var p=t.memoizedState;u!==f||h!==p||Ti.current||No?("function"===typeof d&&(Vo(t,n,d,r),p=t.memoizedState),(c=No||Ho(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,s),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=s,r=c):("function"!==typeof a.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Tu(e,t,n,r,o,i)}function Tu(e,t,n,r,i,o){Cu(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Bi(t,n,!1),Gu(e,t,o);r=t.stateNode,wu.current=t;var u=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Zo(t,e.child,null,o),t.child=Zo(t,null,u,o)):ku(e,t,u,o),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function Ou(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ia(e,t.containerInfo)}function Nu(e,t,n,r,i){return po(),vo(i),t.flags|=256,ku(e,t,n,r),t.child}var Ru,Du,Pu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Lu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bu(e,t,n){var r,i=t.pendingProps,a=sa.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ci(sa,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Lc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Lu(n),t.memoizedState=Mu,e):Fu(t,s));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(a=Mc(a,i,u,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Zo(t,e.child,null,u),t.child.memoizedState=Lu(u),t.memoizedState=Mu,a);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(a=Error(o(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ts)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Oo(e,i),nc(r,e,i,-1))}return vc(),ju(e,t,u,r=fu(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Ki[Xi++]=Qi,Ki[Xi++]=Zi,Ki[Xi++]=Yi,Qi=e.id,Zi=e.overflow,Yi=t),(t=Fu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,a,n);if(u){u=i.fallback,s=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?u=Dc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Lu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fu(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&vo(r),Zo(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Io(e.return,t,n)}function Vu(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ku(e,t,r.children,n),0!==(2&(r=sa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uu(e,n,t);else if(19===e.tag)Uu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(sa,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vu(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ca(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vu(t,!0,n,null,o);break;case"together":Vu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ls|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wu(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ku(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qu(t),null;case 1:case 17:return Ri(t.type)&&Di(),qu(t),null;case 3:return r=t.stateNode,oa(),Ai(Ti),Ai(xi),fa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),qu(t),null;case 5:ua(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return qu(t),null}if(e=ra(ea.current),fo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[di]=a,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)jr(Mr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Q(r,a),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},jr("invalid",r);break;case"textarea":ie(r,a),jr("invalid",r)}for(var s in ge(n,a),i=null,a)if(a.hasOwnProperty(s)){var c=a[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":q(r),$(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t),t.stateNode=e;e:{switch(s=we(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)jr(Mr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(a in ge(n,i),c=i)if(c.hasOwnProperty(a)){var l=c[a];"style"===a?me(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===a?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(u.hasOwnProperty(a)?null!=l&&"onScroll"===a&&jr("scroll",e):null!=l&&w(e,a,l,s))}switch(n){case"input":q(e),$(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qu(t),null;case 6:if(e&&null!=t.stateNode)Pu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return qu(t),null;case 13:if(Ai(sa),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))ho(),po(),t.flags|=98560,a=!1;else if(a=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qu(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&sa.current)?0===Ps&&(Ps=3):vc())),null!==t.updateQueue&&(t.flags|=4),qu(t),null);case 4:return oa(),null===e&&zr(t.stateNode.containerInfo),qu(t),null;case 10:return Eo(t.type._context),qu(t),null;case 19:if(Ai(sa),null===(a=t.memoizedState))return qu(t),null;if(r=0!==(128&t.flags),null===(s=a.rendering))if(r)Wu(a,!1);else{if(0!==Ps||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ca(e))){for(t.flags|=128,Wu(a,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(s=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(sa,1&sa.current|2),t.child}e=e.sibling}null!==a.tail&&Ze()>zs&&(t.flags|=128,r=!0,Wu(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wu(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!io)return qu(t),null}else 2*Ze()-a.renderingStartTime>zs&&1073741824!==n&&(t.flags|=128,r=!0,Wu(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=a.last)?n.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ze(),t.sibling=null,n=sa.current,Ci(sa,r?1&n|2:1&n),t):(qu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(qu(t),6&t.subtreeFlags&&(t.flags|=8192)):qu(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xu(e,t){switch(to(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ai(Ti),Ai(xi),fa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ua(t),null;case 13:if(Ai(sa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(sa),null;case 4:return oa(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(o in s)!s.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&s[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(a=a||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),a||s===c||(a=[])):(a=a||[]).push(l,c))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Pu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Qu=!1,Zu="function"===typeof WeakSet?WeakSet:Set,Ju=null;function $u(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&es(t,n,o)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function as(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||as(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Qu||$u(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Qu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&es(n,t,a),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Qu&&($u(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Qu=(r=Qu)||null!==n.memoizedState,hs(e,t,n),Qu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zu),t.forEach((function(t){var r=xc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(o(160));ds(a,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){Ic(e,e.return,m)}try{ns(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&$u(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&$u(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,u=null!==n?n.memoizedProps:a,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===a.type&&null!=a.name&&Z(i,a),we(s,u);var l=we(s,a);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):w(i,f,h,l)}switch(s){case"input":J(i,a);break;case"textarea":oe(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):d!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[di]=a}catch(m){Ic(e,e.return,m)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Ic(e,e.return,m)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Vs=Ze())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Qu=(l=Qu)||f,vs(t,e),Qu=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(p=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:$u(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:$u(d,d.return);break;case 22:if(null!==d.memoizedState){ks(h);continue}}null!==p?(p.return=d,Ju=p):ks(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ys(e),4&r&&ps(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(as(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ss(e,us(e),a);break;default:throw Error(o(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ws(e,t,n)}function ws(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Yu;if(!a){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Qu;u=Yu;var c=Qu;if(Yu=a,(Qu=s)&&!c)for(Ju=i;null!==Ju;)s=(a=Ju).child,22===a.tag&&null!==a.memoizedState?_s(i):null!==s?(s.return=a,Ju=s):_s(i);for(;null!==o;)Ju=o,ws(o,t,n),o=o.sibling;Ju=i,Yu=u,Qu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ju=o):bs(e)}}function bs(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&jo(t,a,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}jo(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(o(163))}Qu||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function ks(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function _s(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}break;case 5:var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var Es,Is=Math.ceil,As=b.ReactCurrentDispatcher,Cs=b.ReactCurrentOwner,Ss=b.ReactCurrentBatchConfig,xs=0,Ts=null,Os=null,Ns=0,Rs=0,Ds=Ii(0),Ps=0,Ms=null,Ls=0,Bs=0,Fs=0,js=null,Us=null,Vs=0,zs=1/0,Hs=null,Gs=!1,Ws=null,qs=null,Ks=!1,Xs=null,Ys=0,Qs=0,Zs=null,Js=-1,$s=0;function ec(){return 0!==(6&xs)?Ze():-1!==Js?Js:Js=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&xs)&&0!==Ns?Ns&-Ns:null!==mo.transition?(0===$s&&($s=vt()),$s):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Qs)throw Qs=0,Zs=null,Error(o(185));yt(e,n,r),0!==(2&xs)&&e===Ts||(e===Ts&&(0===(2&xs)&&(Bs|=n),4===Ps&&uc(e,Ns)),rc(e,r),1===n&&0===xs&&0===(1&t.mode)&&(zs=Ze()+500,ji&&zi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),u=1<<a,s=i[a];-1===s?0!==(u&n)&&0===(u&r)||(i[a]=dt(u,t)):s<=t&&(e.expiredLanes|=u),o&=~u}}(e,t);var r=ht(e,e===Ts?Ns:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){ji=!0,Vi(e)}(sc.bind(null,e)):Vi(sc.bind(null,e)),ai((function(){0===(6&xs)&&zi()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,$s=0,0!==(6&xs))throw Error(o(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ts?Ns:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=xs;xs|=2;var a=pc();for(Ts===e&&Ns===t||(Hs=null,zs=Ze()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}_o(),As.current=a,xs=i,null!==Os?t=0:(Ts=null,Ns=0,t=Ps)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,hc(e,0),uc(e,r),rc(e,Ze()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ur(o(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t))throw n=Ms,hc(e,0),uc(e,r),rc(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:kc(e,Us,Hs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Vs+500-Ze())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(kc.bind(null,e,Us,Hs),t);break}kc(e,Us,Hs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-at(r);a=1<<u,(u=t[u])>i&&(i=u),r&=~a}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(kc.bind(null,e,Us,Hs),r);break}kc(e,Us,Hs);break;default:throw Error(o(329))}}}return rc(e,Ze()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Us,Us=n,null!==t&&ac(t)),e}function ac(e){null===Us?Us=e:Us.push.apply(Us,e)}function uc(e,t){for(t&=~Fs,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&xs))throw Error(o(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Ze()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,hc(e,0),uc(e,t),rc(e,Ze()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Us,Hs),rc(e,Ze()),null}function cc(e,t){var n=xs;xs|=1;try{return e(t)}finally{0===(xs=n)&&(zs=Ze()+500,ji&&zi())}}function lc(e){null!==Xs&&0===Xs.tag&&0===(6&xs)&&_c();var t=xs;xs|=1;var n=Ss.transition,r=wt;try{if(Ss.transition=null,wt=1,e)return e()}finally{wt=r,Ss.transition=n,0===(6&(xs=t))&&zi()}}function fc(){Rs=Ds.current,Ai(Ds)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Os)for(n=Os.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:oa(),Ai(Ti),Ai(xi),fa();break;case 5:ua(r);break;case 4:oa();break;case 13:case 19:Ai(sa);break;case 10:Eo(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ts=e,Os=e=Dc(e.current,null),Ns=Rs=t,Ps=0,Ms=null,Fs=Bs=Ls=0,Us=js=null,null!==So){for(t=0;t<So.length;t++)if(null!==(r=(n=So[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}So=null}return e}function dc(e,t){for(;;){var n=Os;try{if(_o(),ha.current=au,ga){for(var r=va.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ga=!1}if(pa=0,ya=ma=va=null,wa=!1,ba=0,Cs.current=null,null===n||null===n.return){Ps=1,Ms=t,Os=null;break}e:{var a=e,u=n.return,s=n,c=t;if(t=Ns,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(a,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(a,l,t),vc();break e}c=Error(o(426))}else if(io&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),vo(lu(c,s));break e}}a=c=lu(c,s),4!==Ps&&(Ps=2),null===js?js=[a]:js.push(a),a=u;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Bo(a,pu(0,c,t));break e;case 1:s=c;var g=a.type,w=a.stateNode;if(0===(128&a.flags)&&("function"===typeof g.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===qs||!qs.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t,Bo(a,vu(a,s,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Os===n&&null!==n&&(Os=n=n.return);continue}break}}function pc(){var e=As.current;return As.current=au,null===e?au:e}function vc(){0!==Ps&&3!==Ps&&2!==Ps||(Ps=4),null===Ts||0===(268435455&Ls)&&0===(268435455&Bs)||uc(Ts,Ns)}function mc(e,t){var n=xs;xs|=2;var r=pc();for(Ts===e&&Ns===t||(Hs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(_o(),xs=n,As.current=r,null!==Os)throw Error(o(261));return Ts=null,Ns=0,Ps}function yc(){for(;null!==Os;)wc(Os)}function gc(){for(;null!==Os&&!Ye();)wc(Os)}function wc(e){var t=Es(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?bc(e):Os=t,Cs.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ku(n,t,Rs)))return void(Os=n)}else{if(null!==(n=Xu(n,t)))return n.flags&=32767,void(Os=n);if(null===e)return Ps=6,void(Os=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Os=t);Os=t=e}while(null!==t);0===Ps&&(Ps=5)}function kc(e,t,n){var r=wt,i=Ss.transition;try{Ss.transition=null,wt=1,function(e,t,n,r){do{_c()}while(null!==Xs);if(0!==(6&xs))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Ts&&(Os=Ts=null,Ns=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ks||(Ks=!0,Tc(tt,(function(){return _c(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ss.transition,Ss.transition=null;var u=wt;wt=1;var s=xs;xs|=4,Cs.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(k){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==a||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===a&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,w=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:yo(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(k){Ic(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}v=ts,ts=!1}(e,n),ms(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Qe(),xs=s,wt=u,Ss.transition=a}else e.current=n;if(Ks&&(Ks=!1,Xs=e,Ys=i),0===(a=e.pendingLanes)&&(qs=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Ws,Ws=null,e;0!==(1&Ys)&&0!==e.tag&&_c(),0!==(1&(a=e.pendingLanes))?e===Zs?Qs++:(Qs=0,Zs=e):Qs=0,zi()}(e,t,n,r)}finally{Ss.transition=i,wt=r}return null}function _c(){if(null!==Xs){var e=bt(Ys),t=Ss.transition,n=wt;try{if(Ss.transition=null,wt=16>e?16:e,null===Xs)var r=!1;else{if(e=Xs,Xs=null,Ys=0,0!==(6&xs))throw Error(o(331));var i=xs;for(xs|=4,Ju=e.current;null!==Ju;){var a=Ju,u=a.child;if(0!==(16&Ju.flags)){var s=a.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,a)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,p=f.return;if(os(f),f===l){Ju=null;break}if(null!==d){d.return=p,Ju=d;break}Ju=p}}}var v=a.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ju=a}}if(0!==(2064&a.subtreeFlags)&&null!==u)u.return=a,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(a=Ju).flags))switch(a.tag){case 0:case 11:case 15:ns(9,a,a.return)}var g=a.sibling;if(null!==g){g.return=a.return,Ju=g;break e}Ju=a.return}}var w=e.current;for(Ju=w;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=w;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(_){Ic(s,s.return,_)}if(s===u){Ju=null;break e}var k=s.sibling;if(null!==k){k.return=s.return,Ju=k;break e}Ju=s.return}}if(xs=i,zi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{wt=n,Ss.transition=t}}return!1}function Ec(e,t,n){e=Mo(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qs||!qs.has(r))){t=Mo(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ac(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ts===e&&(Ns&n)===n&&(4===Ps||3===Ps&&(130023424&Ns)===Ns&&500>Ze()-Vs?hc(e,0):Fs|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Oo(e,t))&&(yt(e,t,n),rc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function xc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Cc(e,n)}function Tc(e,t){return Ke(e,t)}function Oc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,r){return new Oc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case E:return Mc(n.children,i,a,t);case I:u=8,i|=8;break;case A:return(e=Nc(12,n,t,2|i)).elementType=A,e.lanes=a,e;case T:return(e=Nc(13,n,t,i)).elementType=T,e.lanes=a,e;case O:return(e=Nc(19,n,t,i)).elementType=O,e.lanes=a,e;case D:return Lc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:u=10;break e;case S:u=9;break e;case x:u=11;break e;case N:u=14;break e;case R:u=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Nc(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Mc(e,t,n,r){return(e=Nc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Nc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,o,a,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Nc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ro(o),e}function Vc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return Si;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Mi(e,n,t)}return t}function Hc(e,t,n,r,i,o,a,u,s){return(e=Uc(n,r,!0,e,0,o,0,u,s)).context=zc(null),n=e.current,(o=Po(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Mo(n,o,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Gc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Po(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Mo(i,t,a))&&(nc(e,i,a,o),Lo(e,i,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Ou(t),po();break;case 5:aa(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(go,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(sa,1&sa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bu(e,t,n):(Ci(sa,1&sa.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ci(sa,1&sa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(sa,sa.current),r)break;return null;case 22:case 23:return t.lanes=0,Au(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,io&&0!==(1048576&t.flags)&&$i(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hu(e,t),e=t.pendingProps;var i=Ni(t,xi.current);Ao(t,n),i=Ia(null,t,r,e,i,n);var a=Aa();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ro(t),i.updater=zo,t.stateNode=i,i._reactInternals=t,qo(t,r,e,n),t=Tu(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),ku(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===N)return 14}return 2}(r),e=yo(r,e),i){case 0:t=Su(null,t,r,e,n);break e;case 1:t=xu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=Eu(null,t,r,yo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Su(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(Ou(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Do(e,t),Fo(t,r,null,n);var u=t.memoizedState;if(r=u.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Nu(e,t,r,n,i=lu(Error(o(423)),t));break e}if(r!==i){t=Nu(e,t,r,n,i=lu(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Jo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Gu(e,t,n);break e}ku(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==a&&ni(r,a)&&(t.flags|=32),Cu(e,t),ku(e,t,u,n),t.child;case 6:return null===e&&co(t),null;case 13:return Bu(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zo(t,null,r,n):ku(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return ku(e,t,t.pendingProps,n),t.child;case 8:case 12:return ku(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,u=i.value,Ci(go,r._currentValue),r._currentValue=u,null!==a)if(ur(a.value,u)){if(a.children===i.children&&!Ti.current){t=Gu(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var s=a.dependencies;if(null!==s){u=a.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Po(-1,n&-n)).tag=2;var l=a.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Io(a.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===a.tag)u=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(u=a.return))throw Error(o(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Io(u,n,t),u=a.sibling}else u=a.child;if(null!==u)u.return=a;else for(u=a;null!==u;){if(u===t){u=null;break}if(null!==(a=u.sibling)){a.return=u.return,u=a;break}u=u.return}a=u}ku(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ao(t,n),r=r(i=Co(i)),t.flags|=1,ku(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),Eu(e,t,r,i=yo(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Hu(e,t),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,Ao(t,n),Go(t,r,i),qo(t,r,i,n),Tu(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Au(e,t,n)}throw Error(o(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var u=i;i=function(){var e=Wc(a);u.call(e)}}Gc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(a);o.call(e)}}var a=Hc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=a,e[pi]=a.current,zr(8===e.nodeType?e.parentNode:e),lc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=Uc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),lc((function(){Gc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(a)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Gc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Gc(null,e,null,null)})),t[pi]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Bt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Ze()),0===(6&xs)&&(zs=Ze()+500,zi()))}break;case 13:lc((function(){var t=Oo(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Kc(e,1)}},_t=function(e){if(13===e.tag){var t=Oo(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),n=Oo(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},It=function(){return wt},At=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ki(r);if(!i)throw Error(o(90));K(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=cc,Te=lc;var tl={usingClientEntryPoint:!1,Events:[wi,bi,ki,Ce,Se,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),ot=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(o(200));return Vc(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(o(299));var n=!1,r="",i=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",u=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,a,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Qc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},7908:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(2007)),i=o(n(2791));function o(e){return e&&e.__esModule?e:{default:e}}var a={d:r.default.string.isRequired,fill:r.default.string.isRequired,transformX:r.default.number.isRequired,transformY:r.default.number.isRequired},u=function(e){var t=e.d,n=e.fill,r=e.transformX,o=e.transformY;return i.default.createElement("path",{d:t,fill:n,transform:"matrix("+[1,0,0,1,r,o]+")"})};u.propTypes=a,u.defaultProps={},t.default=u},3446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=a(n(2007)),o=a(n(2791));function a(e){return e&&e.__esModule?e:{default:e}}var u={children:i.default.array.isRequired,size:i.default.number.isRequired,title:i.default.string,xmlns:i.default.string},s={title:void 0,xmlns:"http://www.w3.org/2000/svg"},c=function(e){var t=e.children,n=e.size,i=e.title,a=e.xmlns,u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","size","title","xmlns"]);return o.default.createElement("svg",r({},u,{height:n,width:n,xmlns:a}),i?o.default.createElement("title",null,i):null,t)};c.propTypes=u,c.defaultProps=s,t.default=c},925:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=f(n(5809)),o=f(n(2959)),a=f(n(2007)),u=n(2791),s=f(u),c=f(n(7908)),l=f(n(3446));function f(e){return e&&e.__esModule?e:{default:e}}var h={bgColor:a.default.oneOfType([a.default.object,a.default.string]),fgColor:a.default.oneOfType([a.default.object,a.default.string]),level:a.default.oneOf(["L","M","Q","H"]),size:a.default.number,value:a.default.string.isRequired},d=function(e){var t=e.bgColor,n=e.fgColor,a=e.level,u=e.size,f=e.value,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["bgColor","fgColor","level","size","value"]),d=new i.default(-1,o.default[a]);d.addData(f),d.make();var p=d.modules,v=u/p.length;return s.default.createElement(l.default,r({},h,{size:u}),p.map((function(e,r){return e.map((function(e,i){var o=Math.round(i*v),a=Math.round(r*v),u=Math.round((i+1)*v)-o,l=Math.round((r+1)*v)-a;return s.default.createElement(c.default,{key:"rectangle-"+r+"-"+i,d:"M 0 0 L "+u+" 0 L "+u+" "+l+" L 0 "+l+" Z",fill:e?n:t,transformX:o,transformY:a})}))})))};d.propTypes=h,d.defaultProps={bgColor:"#FFFFFF",fgColor:"#000000",level:"L",size:256},t.Z=(0,u.memo)(d)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!s.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:o,_owner:u.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=w.prototype=new g;b.constructor=w,v(b,y.prototype),b.isPureReactComponent=!0;var k=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,o={},a=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(o[i]=t[i]);var s=arguments.length-2;if(1===s)o.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===o[i]&&(o[i]=s[i]);return{$$typeof:n,type:e,key:a,ref:u,props:o,_owner:E.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,o,a){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return a=a(s=e),e=""===o?"."+x(s,0):o,k(a)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),T(a,t,i,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+e)),t.push(a)),1;if(s=0,o=""===o?".":o+":",k(e))for(var c=0;c<e.length;c++){var l=o+x(u=e[c],c);s+=T(u,t,i,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,i,l=o+x(u,c++),a);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function O(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=w,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,a=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,u=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>o(s,n))c<i&&0>o(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>o(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function k(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&P(k,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(C),C=-1),p=!0;var o=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var a=h.callback;if("function"===typeof a){h.callback=null,d=h.priorityLevel;var u=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&P(k,f.startTime-n),s=!1}return s}finally{h=null,d=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,I=!1,A=null,C=-1,S=5,x=-1;function T(){return!(t.unstable_now()-x<S)}function O(){if(null!==A){var e=t.unstable_now();x=e;var n=!0;try{n=A(!0,e)}finally{n?E():(I=!1,A=null)}}else I=!1}if("function"===typeof w)E=function(){w(O)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,R=N.port2;N.port1.onmessage=O,E=function(){R.postMessage(null)}}else E=function(){y(O,0)};function D(e){A=e,I||(I=!0,E())}function P(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>a?(e.sortIndex=o,n(l,e),null===r(c)&&e===r(l)&&(m?(g(C),C=-1):m=!0,P(k,o-a))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},1338:function(e,t,n){var r;!function(i,o){"use strict";var a="function",u="undefined",s="object",c="string",l="model",f="name",h="type",d="vendor",p="version",v="architecture",m="console",y="mobile",g="tablet",w="smarttv",b="wearable",k="embedded",_="Amazon",E="Apple",I="ASUS",A="BlackBerry",C="Firefox",S="Google",x="Huawei",T="LG",O="Microsoft",N="Motorola",R="Opera",D="Samsung",P="Sony",M="Xiaomi",L="Zebra",B="Facebook",F=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},j=function(e,t){return typeof e===c&&-1!==U(t).indexOf(U(e))},U=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===u?e:e.substring(0,255)},z=function(e,t){for(var n,r,i,u,c,l,f=0;f<t.length&&!c;){var h=t[f],d=t[f+1];for(n=r=0;n<h.length&&!c;)if(c=h[n++].exec(e))for(i=0;i<d.length;i++)l=c[++r],typeof(u=d[i])===s&&u.length>0?2===u.length?typeof u[1]==a?this[u[0]]=u[1].call(this,l):this[u[0]]=u[1]:3===u.length?typeof u[1]!==a||u[1].exec&&u[1].test?this[u[0]]=l?l.replace(u[1],u[2]):o:this[u[0]]=l?u[1].call(this,l,u[2]):o:4===u.length&&(this[u[0]]=l?u[3].call(this,l.replace(u[1],u[2])):o):this[u]=l||o;f+=2}},H=function(e,t){for(var n in t)if(typeof t[n]===s&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(j(t[n][r],e))return"?"===n?o:n}else if(j(t[n],e))return"?"===n?o:n;return e},G={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},W={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,p],[/opios[\/ ]+([\w\.]+)/i],[p,[f,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[p,[f,R]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[f,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[f,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[p,[f,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[f,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[f,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure Browser"],p],[/\bfocus\/([\w\.]+)/i],[p,[f,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[p,[f,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[f,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[f,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[p,[f,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[f,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,B],p],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[f,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[f,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[f,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,"Chrome WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[f,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,p],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[p,[f,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[p,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[p,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[f,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[f,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[f,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,U]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",U]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,U]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[d,D],[h,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[d,D],[h,y]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[d,E],[h,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[d,E],[h,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[d,x],[h,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[l,[d,x],[h,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[d,M],[h,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[d,M],[h,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[d,"OPPO"],[h,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[d,"Vivo"],[h,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[d,"Realme"],[h,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[d,N],[h,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[d,N],[h,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[d,T],[h,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[d,T],[h,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[d,"Lenovo"],[h,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[d,"Nokia"],[h,y]],[/(pixel c)\b/i],[l,[d,S],[h,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[d,S],[h,y]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[d,P],[h,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[d,P],[h,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[d,"OnePlus"],[h,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[d,_],[h,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[d,_],[h,y]],[/(playbook);[-\w\),; ]+(rim)/i],[l,d,[h,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[d,A],[h,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[d,I],[h,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[d,I],[h,y]],[/(nexus 9)/i],[l,[d,"HTC"],[h,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[d,[l,/_/g," "],[h,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[d,"Acer"],[h,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[d,"Meizu"],[h,y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[d,"Sharp"],[h,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,l,[h,y]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,l,[h,g]],[/(surface duo)/i],[l,[d,O],[h,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[d,"Fairphone"],[h,y]],[/(u304aa)/i],[l,[d,"AT&T"],[h,y]],[/\bsie-(\w*)/i],[l,[d,"Siemens"],[h,y]],[/\b(rct\w+) b/i],[l,[d,"RCA"],[h,g]],[/\b(venue[\d ]{2,7}) b/i],[l,[d,"Dell"],[h,g]],[/\b(q(?:mv|ta)\w+) b/i],[l,[d,"Verizon"],[h,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[d,"Barnes & Noble"],[h,g]],[/\b(tm\d{3}\w+) b/i],[l,[d,"NuVision"],[h,g]],[/\b(k88) b/i],[l,[d,"ZTE"],[h,g]],[/\b(nx\d{3}j) b/i],[l,[d,"ZTE"],[h,y]],[/\b(gen\d{3}) b.+49h/i],[l,[d,"Swiss"],[h,y]],[/\b(zur\d{3}) b/i],[l,[d,"Swiss"],[h,g]],[/\b((zeki)?tb.*\b) b/i],[l,[d,"Zeki"],[h,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],l,[h,g]],[/\b(ns-?\w{0,9}) b/i],[l,[d,"Insignia"],[h,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[d,"NextBook"],[h,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],l,[h,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],l,[h,y]],[/\b(ph-1) /i],[l,[d,"Essential"],[h,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[d,"Envizen"],[h,g]],[/\b(trio[-\w\. ]+) b/i],[l,[d,"MachSpeed"],[h,g]],[/\btu_(1491) b/i],[l,[d,"Rotor"],[h,g]],[/(shield[\w ]+) b/i],[l,[d,"Nvidia"],[h,g]],[/(sprint) (\w+)/i],[d,l,[h,y]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[d,O],[h,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[d,L],[h,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[d,L],[h,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,l,[h,m]],[/droid.+; (shield) bui/i],[l,[d,"Nvidia"],[h,m]],[/(playstation [345portablevi]+)/i],[l,[d,P],[h,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[d,O],[h,m]],[/smart-tv.+(samsung)/i],[d,[h,w]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[d,D],[h,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,T],[h,w]],[/(apple) ?tv/i],[d,[l,"Apple TV"],[h,w]],[/crkey/i],[[l,"Chromecast"],[d,S],[h,w]],[/droid.+aft(\w)( bui|\))/i],[l,[d,_],[h,w]],[/\(dtv[\);].+(aquos)/i],[l,[d,"Sharp"],[h,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[d,V],[l,V],[h,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,w]],[/((pebble))app/i],[d,l,[h,b]],[/droid.+; (glass) \d/i],[l,[d,S],[h,b]],[/droid.+; (wt63?0{2,3})\)/i],[l,[d,L],[h,b]],[/(quest( 2)?)/i],[l,[d,B],[h,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[h,k]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[h,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[h,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,g]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[h,y]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[f,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[f,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[f,[p,H,G]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[f,"Windows"],[p,H,G]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,"Mac OS"],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[p,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,p],[/\(bb(10);/i],[p,[f,A]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[f,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[f,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[f,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[f,"Chromium OS"],p],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,p],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[f,p]]},q=function e(t,n){if(typeof t===s&&(n=t,t=o),!(this instanceof e))return new e(t,n).getResult();var r=t||(typeof i!==u&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),a=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(W,n):W;return this.getBrowser=function(){var e,t={};return t.name=o,t.version=o,z.call(t,r,a.browser),t.major=typeof(e=t.version)===c?e.replace(/[^\d\.]/g,"").split(".")[0]:o,t},this.getCPU=function(){var e={};return e.architecture=o,z.call(e,r,a.cpu),e},this.getDevice=function(){var e={};return e.vendor=o,e.model=o,e.type=o,z.call(e,r,a.device),e},this.getEngine=function(){var e={};return e.name=o,e.version=o,z.call(e,r,a.engine),e},this.getOS=function(){var e={};return e.name=o,e.version=o,z.call(e,r,a.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===c&&e.length>255?V(e,255):e,this},this.setUA(r),this};q.VERSION="1.0.2",q.BROWSER=F([f,p,"major"]),q.CPU=F([v]),q.DEVICE=F([l,d,h,m,y,w,g,b,k]),q.ENGINE=q.OS=F([f,p]),typeof t!==u?(e.exports&&(t=e.exports=q),t.UAParser=q):n.amdO?(r=function(){return q}.call(t,n,t,e))===o||(e.exports=r):typeof i!==u&&(i.UAParser=q);var K=typeof i!==u&&(i.jQuery||i.Zepto);if(K&&!K.ua){var X=new q;K.ua=X.getResult(),K.ua.get=function(){return X.getUA()},K.ua.set=function(e){X.setUA(e);var t=X.getResult();for(var n in t)K.ua[n]=t[n]}}}("object"===typeof window?window:this)},2391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Pe},SDK_VERSION:function(){return Wt},_DEFAULT_ENTRY_NAME:function(){return Rt},_addComponent:function(){return Lt},_addOrOverwriteComponent:function(){return Bt},_apps:function(){return Pt},_clearComponents:function(){return Vt},_components:function(){return Mt},_getProvider:function(){return jt},_registerComponent:function(){return Ft},_removeServiceInstance:function(){return Ut},deleteApp:function(){return Yt},getApp:function(){return Kt},getApps:function(){return Xt},initializeApp:function(){return qt},onLog:function(){return Jt},registerVersion:function(){return Zt},setLogLevel:function(){return $t}});var t,r=n(2791),i=n(1250);function o(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(s){u=!0,i=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(e,t)||u(e,t)||s()}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var f=function(e){return e};var h="beforeunload",d="popstate";function p(e){e.preventDefault(),e.returnValue=""}function v(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function m(){return Math.random().toString(36).substr(2,8)}function y(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,o=e.hash,a=void 0===o?"":o;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),a&&"#"!==a&&(n+="#"===a.charAt(0)?a:"#"+a),n}function g(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var w=(0,r.createContext)(null);var b=(0,r.createContext)(null);var k=(0,r.createContext)({outlet:null,matches:[]});function _(e,t){if(!e)throw new Error(t)}function E(e,t,n){void 0===n&&(n="/");var r=N(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;var i=I(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var o=null,a=0;null==o&&a<i.length;++a)o=x(i[a],r);return o}function I(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var o={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(o.relativePath.startsWith(r)||_(!1),o.relativePath=o.relativePath.slice(r.length));var a=R([r,o.relativePath]),u=n.concat(o);e.children&&e.children.length>0&&(!0===e.index&&_(!1),I(e.children,t,u,a)),(null!=e.path||e.index)&&t.push({path:a,score:S(a,e.index),routesMeta:u})})),t}var A=/^:\w+$/,C=function(e){return"*"===e};function S(e,t){var n=e.split("/"),r=n.length;return n.some(C)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!C(e)})).reduce((function(e,t){return e+(A.test(t)?3:""===t?1:10)}),r)}function x(e,t){for(var n=e.routesMeta,r={},i="/",o=[],a=0;a<n.length;++a){var u=n[a],s=a===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=T({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;o.push({params:r,pathname:R([i,l.pathname]),pathnameBase:D(R([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=R([i,l.pathnameBase]))}return o}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=c(n,2),i=r[0],o=r[1],a=t.match(i);if(!a)return null;var u=a[0],s=u.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:o.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function O(e,t,n){var r,i="string"===typeof e?g(e):e,o=""===e||""===i.pathname?"/":i.pathname;if(null==o)r=n;else{var a=t.length-1;if(o.startsWith("..")){for(var u=o.split("/");".."===u[0];)u.shift(),a-=1;i.pathname=u.join("/")}r=a>=0?t[a]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?g(e):e,r=n.pathname,i=n.search,o=void 0===i?"":i,a=n.hash,u=void 0===a?"":a,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:P(o),hash:M(u)}}(i,r);return o&&"/"!==o&&o.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var R=function(e){return e.join("/").replace(/\/\/+/g,"/")},D=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},P=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},M=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function L(e){B()||_(!1);var t=(0,r.useContext)(w),n=t.basename,i=t.navigator,o=V(e),a=o.hash,u=o.pathname,s=o.search,c=u;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?g(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?n+(f?"/":""):R([n,u])}return i.createHref({pathname:c,search:s,hash:a})}function B(){return null!=(0,r.useContext)(b)}function F(){return B()||_(!1),(0,r.useContext)(b).location}function j(){B()||_(!1);var e=(0,r.useContext)(w),t=e.basename,n=e.navigator,i=(0,r.useContext)(k).matches,o=F().pathname,a=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=O(e,JSON.parse(a),o);"/"!==t&&(i.pathname=R([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,a,o]);return s}var U=(0,r.createContext)(null);function V(e){var t=(0,r.useContext)(k).matches,n=F().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return O(e,JSON.parse(i),n)}),[e,i,n])}function z(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,o){return(0,r.createElement)(k.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,o+1))}})}),null)}function H(e){var t=e.to,n=e.replace,i=e.state;B()||_(!1);var o=j();return(0,r.useEffect)((function(){o(t,{replace:n,state:i})})),null}function G(e){return function(e){var t=(0,r.useContext)(k).outlet;return t?(0,r.createElement)(U.Provider,{value:e},t):t}(e.context)}function W(e){_(!1)}function q(e){var n=e.basename,i=void 0===n?"/":n,o=e.children,a=void 0===o?null:o,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;B()&&_(!1);var d=D(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=g(u));var v=u,m=v.pathname,y=void 0===m?"/":m,k=v.search,E=void 0===k?"":k,I=v.hash,A=void 0===I?"":I,C=v.state,S=void 0===C?null:C,x=v.key,T=void 0===x?"default":x,O=(0,r.useMemo)((function(){var e=N(y,d);return null==e?null:{pathname:e,search:E,hash:A,state:S,key:T}}),[d,y,E,A,S,T]);return null==O?null:(0,r.createElement)(w.Provider,{value:p},(0,r.createElement)(b.Provider,{children:a,value:{location:O,navigationType:c}}))}function K(e){var t=e.children,n=e.location;return function(e,t){B()||_(!1);var n,i=(0,r.useContext)(k).matches,o=i[i.length-1],a=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/"),s=(o&&o.route,F());if(t){var c,l="string"===typeof t?g(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||_(!1),n=l}else n=s;var f=n.pathname||"/",h=E(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return z(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:R([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:R([u,e.pathnameBase])})})),i)}(X(t),n)}function X(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==W&&_(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=X(e.props.children)),t.push(n)}else t.push.apply(t,X(e.props.children))})),t}function Y(){return Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(this,arguments)}function Q(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Z=["onClick","reloadDocument","replace","state","target","to"];function J(e){var n=e.basename,i=e.children,o=e.window,a=(0,r.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function o(){var e=r.location,t=e.pathname,n=e.search,o=e.hash,a=i.state||{};return[a.idx,f({pathname:t,search:n,hash:o,state:a.usr||null,key:a.key||"default"})]}var a=null;r.addEventListener(d,(function(){if(a)k.call(a),a=null;else{var e=t.Pop,n=o(),r=n[0],i=n[1];if(k.length){if(null!=r){var u=c-r;u&&(a={action:e,location:i,retry:function(){S(-1*u)}},S(u))}}else C(e)}}));var u=t.Pop,s=o(),c=s[0],w=s[1],b=v(),k=v();function _(e){return"string"===typeof e?e:y(e)}function E(e,t){return void 0===t&&(t=null),f(l({pathname:w.pathname,hash:"",search:""},"string"===typeof e?g(e):e,{state:t,key:m()}))}function I(e,t){return[{usr:e.state,key:e.key,idx:t},_(e)]}function A(e,t,n){return!k.length||(k.call({action:e,location:t,retry:n}),!1)}function C(e){u=e;var t=o();c=t[0],w=t[1],b.call({action:u,location:w})}function S(e){i.go(e)}null==c&&(c=0,i.replaceState(l({},i.state,{idx:c}),""));var x={get action(){return u},get location(){return w},createHref:_,push:function e(n,o){var a=t.Push,u=E(n,o);if(A(a,u,(function(){e(n,o)}))){var s=I(u,c+1),l=s[0],f=s[1];try{i.pushState(l,"",f)}catch(h){r.location.assign(f)}C(a)}},replace:function e(n,r){var o=t.Replace,a=E(n,r);if(A(o,a,(function(){e(n,r)}))){var u=I(a,c),s=u[0],l=u[1];i.replaceState(s,"",l),C(o)}},go:S,back:function(){S(-1)},forward:function(){S(1)},listen:function(e){return b.push(e)},block:function(e){var t=k.push(e);return 1===k.length&&r.addEventListener(h,p),function(){t(),k.length||r.removeEventListener(h,p)}}};return x}({window:o}));var u=a.current,s=c((0,r.useState)({action:u.action,location:u.location}),2),w=s[0],b=s[1];return(0,r.useLayoutEffect)((function(){return u.listen(b)}),[u]),(0,r.createElement)(q,{basename:n,children:i,location:w.location,navigationType:w.action,navigator:u})}var $=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,o=e.replace,a=void 0!==o&&o,u=e.state,s=e.target,c=e.to,l=Q(e,Z),f=L(c),h=function(e,t){var n=void 0===t?{}:t,i=n.target,o=n.replace,a=n.state,u=j(),s=F(),c=V(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!o||y(s)===y(c);u(e,{replace:n,state:a})}}),[s,u,c,o,a,i,e])}(c,{replace:a,state:u,target:s});return(0,r.createElement)("a",Y({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:t,target:s}))}));function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(){te=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(C){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=b(a,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,a),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=s;var l={};function f(){}function h(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(I([])));m&&m!==t&&n.call(m,i)&&(p=m);var y=d.prototype=f.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function r(i,o,a,u){var s=c(e[i],e,o);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==ee(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,u)}),(function(e){r("throw",e,a,u)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return h.prototype=d,u(y,"constructor",d),u(d,"constructor",h),h.displayName=u(d,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new w(s(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(y),u(y,a,"Generator"),u(y,i,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function ne(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function re(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ne(o,r,i,a,u,"next",e)}function u(e){ne(o,r,i,a,u,"throw",e)}a(void 0)}))}}var ie=n(4569),oe=n.n(ie);function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t&&se(e.prototype,t),n&&se(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function le(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function de(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}function ve(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function me(e,t){if(t&&("object"===ee(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fe(e)}function ye(e){var t=ve();return function(){var n,r=pe(e);if(t){var i=pe(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return me(this,n)}}function ge(e,t,n){return ge=ve()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&he(i,n.prototype),i},ge.apply(null,arguments)}function we(e){var t="function"===typeof Map?new Map:void 0;return we=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ge(e,arguments,pe(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),he(n,e)},we(e)}var be=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ke={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,u=a?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=o>>2,f=(3&o)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,a||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(be(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==s)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==u){var l=a<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},_e=function(e){return function(e){var t=be(e);return ke.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ee=function(e){try{return ke.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ie(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ie(e[n],t[n]));return e}var Ae=function(){function e(){var t=this;ue(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return ce(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ce(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(o)),""].join(".")}function Se(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function xe(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function Te(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Oe(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Ne(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Re(){var e=Se();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function De(){return"object"===typeof indexedDB}var Pe=function(e){de(n,e);var t=ye(n);function n(e,r,i){var o;return ue(this,n),(o=t.call(this,r)).code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(fe(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(fe(o),Me.prototype.create),o}return ce(n)}(we(Error)),Me=function(){function e(t,n,r){ue(this,e),this.service=t,this.serviceName=n,this.errors=r}return ce(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Le(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),a=new Pe(n,o,t);return a}}]),e}();function Le(e,t){return e.replace(Be,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Be=/\{\$([^}]+)}/g;function Fe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function je(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var u=e[a],s=t[a];if(Ue(u)&&Ue(s)){if(!je(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ue(e){return null!==e&&"object"===typeof e}function Ve(e){for(var t=[],n=function(){var e=c(i[r],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ze(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=c(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function He(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ge(e,t){var n=new We(e,t);return n.subscribe.bind(n)}var We=function(){function e(t,n){var r=this;ue(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return ce(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=le(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(o){r.e(o)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=qe),void 0===r.error&&(r.error=qe),void 0===r.complete&&(r.complete=qe);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function qe(){}function Ke(e){return e&&e._delegate?e._delegate:e}function Xe(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ye(e){return function(e){if(Array.isArray(e))return a(e)}(e)||Xe(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Qe=function(){function e(t,n,r){ue(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return ce(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ze="[DEFAULT]",Je=function(){function e(t,n){ue(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return ce(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ae;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ze})}catch(s){}var t,n=le(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=c(t.value,2),i=r[0],o=r[1],a=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:a});o.resolve(u)}catch(s){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Ye(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Ye(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,o=this.getOrInitializeService({instanceIdentifier:r,options:n}),a=le(this.instancesDeferred.entries());try{for(a.s();!(i=a.n()).done;){var u=c(i.value,2),s=u[0],l=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&l.resolve(o)}}catch(h){a.e(h)}finally{a.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=le(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;try{o(e,t)}catch(oI){}}}catch(a){i.e(a)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ze?void 0:t),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(oI){}return o||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze;return this.component?this.component.multipleInstances?e:Ze:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var $e,et,tt=function(){function e(t){ue(this,e),this.name=t,this.providers=new Map}return ce(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Je(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),nt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(et||(et={}));var rt={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},it=et.INFO,ot=(ae($e={},et.DEBUG,"log"),ae($e,et.VERBOSE,"log"),ae($e,et.INFO,"info"),ae($e,et.WARN,"warn"),ae($e,et.ERROR,"error"),$e),at=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ot[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,o=arguments.length,a=new Array(o>2?o-2:0),u=2;u<o;u++)a[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(a))}},ut=function(){function e(t){ue(this,e),this.name=t,this._logLevel=it,this._logHandler=at,this._userLogHandler=null,nt.push(this)}return ce(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in et))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?rt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,et.DEBUG].concat(t)),this._logHandler.apply(this,[this,et.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,et.VERBOSE].concat(t)),this._logHandler.apply(this,[this,et.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,et.INFO].concat(t)),this._logHandler.apply(this,[this,et.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,et.WARN].concat(t)),this._logHandler.apply(this,[this,et.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,et.ERROR].concat(t)),this._logHandler.apply(this,[this,et.ERROR].concat(t))}}]),e}();function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt,ft;var ht=new WeakMap,dt=new WeakMap,pt=new WeakMap,vt=new WeakMap,mt=new WeakMap;var yt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return dt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||pt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bt(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function gt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ft||(ft=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(kt(this),n),bt(ht.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bt(e.apply(kt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e.call.apply(e,[kt(this),t].concat(r));return pt.set(o,t.sort?t.sort():[t]),bt(o)}}function wt(e){return"function"===typeof e?gt(e):(e instanceof IDBTransaction&&function(e){if(!dt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=function(){t(),r()},o=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));dt.set(e,t)}}(e),t=e,(lt||(lt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,yt):e);var t}function bt(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",o)},i=function(){t(bt(e.result)),r()},o=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((function(t){t instanceof IDBCursor&&ht.set(t,e)})).catch((function(){})),mt.set(t,e),t}(e);if(vt.has(e))return vt.get(e);var t=wt(e);return t!==e&&(vt.set(e,t),mt.set(t,e)),t}var kt=function(e){return mt.get(e)};var _t,Et,It=["get","getKey","getAll","getAllKeys","count"],At=["put","add","delete","clear"],Ct=new Map;function St(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Ct.get(t))return Ct.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=At.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||It.includes(n))){var o=function(){var e=re(te().mark((function e(t){var o,a,u,s,c,l,f=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=this.transaction(t,i?"readwrite":"readonly"),u=a.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(o=u)[n].apply(o,c),i&&a.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Ct.set(t,o),o}}}yt=function(e){return ct(ct({},e),{},{get:function(t,n,r){return St(t,n)||e.get(t,n,r)},has:function(t,n){return!!St(t,n)||e.has(t,n)}})}(yt);var xt=function(){function e(t){ue(this,e),this.container=t}return ce(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Tt="@firebase/app",Ot="0.7.27",Nt=new ut("@firebase/app"),Rt="[DEFAULT]",Dt=(ae(_t={},Tt,"fire-core"),ae(_t,"@firebase/app-compat","fire-core-compat"),ae(_t,"@firebase/analytics","fire-analytics"),ae(_t,"@firebase/analytics-compat","fire-analytics-compat"),ae(_t,"@firebase/app-check","fire-app-check"),ae(_t,"@firebase/app-check-compat","fire-app-check-compat"),ae(_t,"@firebase/auth","fire-auth"),ae(_t,"@firebase/auth-compat","fire-auth-compat"),ae(_t,"@firebase/database","fire-rtdb"),ae(_t,"@firebase/database-compat","fire-rtdb-compat"),ae(_t,"@firebase/functions","fire-fn"),ae(_t,"@firebase/functions-compat","fire-fn-compat"),ae(_t,"@firebase/installations","fire-iid"),ae(_t,"@firebase/installations-compat","fire-iid-compat"),ae(_t,"@firebase/messaging","fire-fcm"),ae(_t,"@firebase/messaging-compat","fire-fcm-compat"),ae(_t,"@firebase/performance","fire-perf"),ae(_t,"@firebase/performance-compat","fire-perf-compat"),ae(_t,"@firebase/remote-config","fire-rc"),ae(_t,"@firebase/remote-config-compat","fire-rc-compat"),ae(_t,"@firebase/storage","fire-gcs"),ae(_t,"@firebase/storage-compat","fire-gcs-compat"),ae(_t,"@firebase/firestore","fire-fst"),ae(_t,"@firebase/firestore-compat","fire-fst-compat"),ae(_t,"fire-js","fire-js"),ae(_t,"firebase","fire-js-all"),_t),Pt=new Map,Mt=new Map;function Lt(e,t){try{e.container.addComponent(t)}catch(n){Nt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Bt(e,t){e.container.addOrOverwriteComponent(t)}function Ft(e){var t=e.name;if(Mt.has(t))return Nt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Mt.set(t,e);var n,r=le(Pt.values());try{for(r.s();!(n=r.n()).done;){Lt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function jt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ut(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rt;jt(e,t).clearInstance(n)}function Vt(){Mt.clear()}var zt=(ae(Et={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ae(Et,"bad-app-name","Illegal App name: '{$appName}"),ae(Et,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),ae(Et,"app-deleted","Firebase App named '{$appName}' already deleted"),ae(Et,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ae(Et,"invalid-log-argument","First argument to `onLog` must be null or a function."),ae(Et,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),ae(Et,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),ae(Et,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),ae(Et,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Et),Ht=new Me("app","Firebase",zt),Gt=function(){function e(t,n,r){var i=this;ue(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qe("app",(function(){return i}),"PUBLIC"))}return ce(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Ht.create("app-deleted",{appName:this._name})}}]),e}(),Wt="9.8.4";function qt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Rt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ht.create("bad-app-name",{appName:String(i)});var o=Pt.get(i);if(o){if(je(e,o.options)&&je(r,o.config))return o;throw Ht.create("duplicate-app",{appName:i})}var a,u=new tt(i),s=le(Mt.values());try{for(s.s();!(a=s.n()).done;){var c=a.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Gt(e,r,u);return Pt.set(i,l),l}function Kt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=Pt.get(e);if(!t)throw Ht.create("no-app",{appName:e});return t}function Xt(){return Array.from(Pt.values())}function Yt(e){return Qt.apply(this,arguments)}function Qt(){return Qt=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Pt.has(n)){e.next=6;break}return Pt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Qt.apply(this,arguments)}function Zt(e,t,n){var r,i=null!==(r=Dt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&u.push("and"),a&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Nt.warn(u.join(" "))}Ft(new Qe("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Jt(e,t){if(null!==e&&"function"!==typeof e)throw Ht.create("invalid-log-argument");!function(e,t){var n,r=le(nt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=rt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var u=o.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:et[n].toLowerCase(),message:u,args:o,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}(e,t)}function $t(e){var t;t=e,nt.forEach((function(e){e.setLogLevel(t)}))}var en="firebase-heartbeat-store",tn=null;function nn(){return tn||(tn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,o=n.blocking,a=n.terminated,u=indexedDB.open(e,t),s=bt(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(bt(u.result),e.oldVersion,e.newVersion,bt(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){a&&e.addEventListener("close",(function(){return a()})),o&&e.addEventListener("versionchange",(function(){return o()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(en)}}).catch((function(e){throw Ht.create("storage-open",{originalErrorMessage:e.message})}))),tn}function rn(e){return on.apply(this,arguments)}function on(){return on=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nn();case 3:return r=e.sent,e.abrupt("return",r.transaction(en).objectStore(en).get(sn(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Ht.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),on.apply(this,arguments)}function an(e,t){return un.apply(this,arguments)}function un(){return un=re(te().mark((function e(t,n){var r,i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nn();case 3:return i=e.sent,o=i.transaction(en,"readwrite"),a=o.objectStore(en),e.next=8,a.put(n,sn(t));case 8:return e.abrupt("return",o.done);case 11:throw e.prev=11,e.t0=e.catch(0),Ht.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),un.apply(this,arguments)}function sn(e){return"".concat(e.name,"!").concat(e.options.appId)}var cn=function(){function e(t){var n=this;ue(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new pn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return ce(e,[{key:"triggerHeartbeat",value:function(){var e=re(te().mark((function e(){var t,n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ln(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=re(te().mark((function e(){var t,n,r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ln(),n=fn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,o=_e(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ln(){return(new Date).toISOString().substring(0,10)}function fn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),o=le(e);try{var a=function(){var e=t.value,o=r.find((function(t){return t.agent===e.agent}));if(o){if(o.dates.push(e.date),vn(r)>n)return o.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),vn(r)>n)return r.pop(),"break";i=i.slice(1)};for(o.s();!(t=o.n()).done;){var u=a();if("break"===u)break}}catch(s){o.e(s)}finally{o.f()}return{heartbeatsToSend:r,unsentEntries:i}}var hn,dn,pn=function(){function e(t){ue(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return ce(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(De()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(o){t(o)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,rn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",an(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",an(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Ye(r.heartbeats),Ye(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function vn(e){return _e(JSON.stringify({version:2,heartbeats:e})).length}hn="",Ft(new Qe("platform-logger",(function(e){return new xt(e)}),"PRIVATE")),Ft(new Qe("heartbeat",(function(e){return new cn(e)}),"PRIVATE")),Zt(Tt,Ot,hn),Zt(Tt,Ot,"esm2017"),Zt("fire-js","");var mn=function(){function e(t,n){var r=this;ue(this,e),this._delegate=t,this.firebase=n,Lt(t,new Qe("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return ce(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Yt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Lt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Bt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),yn=(ae(dn={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),ae(dn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),dn),gn=new Me("app-compat","Firebase",yn);var wn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=qt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Fe(n,i.name))return n[i.name];var o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:Zt,setLogLevel:$t,onLog:Jt,apps:null,SDK_VERSION:Wt,INTERNAL:{registerComponent:function(e){var n=e.name,o=n.replace("-compat","");if(Ft(e)&&"PUBLIC"===e.type){var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw gn.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&Ie(a,e.serviceProps),r[o]=a,t.prototype[o]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Fe(n,e=e||Rt))throw gn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(mn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ie(n,e)},createSubscribe:Ge,ErrorFactory:Me,deepExtend:Ie}),n}(),bn=new ut("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){bn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var kn=self.firebase.SDK_VERSION;kn&&kn.indexOf("LITE")>=0&&bn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _n=wn;!function(e){Zt("@firebase/app-compat","0.1.28",e)}();function En(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pe(e)););return e}function In(){return In="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=En(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},In.apply(this,arguments)}_n.registerVersion("firebase","9.8.4","app-compat");function An(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Cn;Object.create;var Sn="facebook.com",xn="github.com",Tn="google.com",On="password",Nn="twitter.com",Rn="EMAIL_SIGNIN",Dn="PASSWORD_RESET",Pn="RECOVER_EMAIL",Mn="REVERT_SECOND_FACTOR_ADDITION",Ln="VERIFY_AND_CHANGE_EMAIL",Bn="VERIFY_EMAIL";function Fn(){return ae({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var jn=function(){var e;return ae(e={},"admin-restricted-operation","This operation is restricted to administrators only."),ae(e,"argument-error",""),ae(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),ae(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),ae(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),ae(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),ae(e,"cordova-not-ready","Cordova framework is not ready."),ae(e,"cors-unsupported","This browser is not supported."),ae(e,"credential-already-in-use","This credential is already associated with a different user account."),ae(e,"custom-token-mismatch","The custom token corresponds to a different audience."),ae(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),ae(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),ae(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),ae(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),ae(e,"email-already-in-use","The email address is already in use by another account."),ae(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),ae(e,"expired-action-code","The action code has expired."),ae(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),ae(e,"internal-error","An internal AuthError has occurred."),ae(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),ae(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),ae(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),ae(e,"invalid-auth-event","An internal AuthError has occurred."),ae(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),ae(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),ae(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),ae(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),ae(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),ae(e,"invalid-email","The email address is badly formatted."),ae(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),ae(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),ae(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),ae(e,"invalid-credential","The supplied auth credential is malformed or has expired."),ae(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),ae(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),ae(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),ae(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),ae(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),ae(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),ae(e,"wrong-password","The password is invalid or the user does not have a password."),ae(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),ae(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),ae(e,"invalid-provider-id","The specified provider ID is invalid."),ae(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),ae(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),ae(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),ae(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),ae(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),ae(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),ae(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),ae(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),ae(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),ae(e,"missing-continue-uri","A continue URL must be provided in the request."),ae(e,"missing-iframe-start","An internal AuthError has occurred."),ae(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),ae(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),ae(e,"missing-multi-factor-info","No second factor identifier is provided."),ae(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),ae(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),ae(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),ae(e,"app-deleted","This instance of FirebaseApp has been deleted."),ae(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),ae(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),ae(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),ae(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),ae(e,"no-auth-event","An internal AuthError has occurred."),ae(e,"no-such-provider","User was not linked to an account with the given provider."),ae(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),ae(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),ae(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),ae(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),ae(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),ae(e,"provider-already-linked","User can only be linked to one identity for the given provider."),ae(e,"quota-exceeded","The project's quota for this operation has been exceeded."),ae(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),ae(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),ae(e,"rejected-credential","The request contains malformed or mismatching credentials."),ae(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),ae(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),ae(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),ae(e,"timeout","The operation has timed out."),ae(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),ae(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),ae(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),ae(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),ae(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),ae(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),ae(e,"unverified-email","The operation requires a verified email."),ae(e,"user-cancelled","The user did not grant your application the permissions it requested."),ae(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),ae(e,"user-disabled","The user account has been disabled by an administrator."),ae(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),ae(e,"user-signed-out",""),ae(e,"weak-password","The password must be 6 characters long or more."),ae(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),ae(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Un=Fn,Vn=new Me("auth","Firebase",Fn()),zn=new ut("@firebase/auth");function Hn(e){if(zn.logLevel<=et.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];zn.error.apply(zn,["Auth (".concat(Wt,"): ").concat(e)].concat(n))}}function Gn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Xn.apply(void 0,[e].concat(n))}function Wn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xn.apply(void 0,[e].concat(n))}function qn(e,t,n){var r=Object.assign(Object.assign({},Un()),ae({},t,n));return new Me("auth","Firebase",r).create(t,{appName:e.name})}function Kn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Gn(e,"argument-error"),qn(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Xn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,o=n[0],a=Ye(n.slice(1));return a[0]&&(a[0].appName=e.name),(i=e._errorFactory).create.apply(i,[o].concat(Ye(a)))}return Vn.create.apply(Vn,[e].concat(n))}function Yn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Xn.apply(void 0,[t].concat(r))}}function Qn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Hn(t),new Error(t)}function Zn(e,t){e||Qn(t)}var Jn=new Map;function $n(e){Zn(e instanceof Function,"Expected a class definition");var t=Jn.get(e);return t?(Zn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Jn.set(e,t),t)}function er(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function tr(){return"http:"===nr()||"https:"===nr()}function nr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var rr=function(){function e(t,n){ue(this,e),this.shortDelay=t,this.longDelay=n,Zn(n>t,"Short delay should be less than long delay!"),this.isMobile=xe()||Ne()}return ce(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(tr()||Oe()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ir(e,t){Zn(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var or=function(){function e(){ue(this,e)}return ce(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),ar=(ae(Cn={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),ae(Cn,"MISSING_CUSTOM_TOKEN","internal-error"),ae(Cn,"INVALID_IDENTIFIER","invalid-email"),ae(Cn,"MISSING_CONTINUE_URI","internal-error"),ae(Cn,"INVALID_PASSWORD","wrong-password"),ae(Cn,"MISSING_PASSWORD","internal-error"),ae(Cn,"EMAIL_EXISTS","email-already-in-use"),ae(Cn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),ae(Cn,"INVALID_IDP_RESPONSE","invalid-credential"),ae(Cn,"INVALID_PENDING_TOKEN","invalid-credential"),ae(Cn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),ae(Cn,"MISSING_REQ_TYPE","internal-error"),ae(Cn,"EMAIL_NOT_FOUND","user-not-found"),ae(Cn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),ae(Cn,"EXPIRED_OOB_CODE","expired-action-code"),ae(Cn,"INVALID_OOB_CODE","invalid-action-code"),ae(Cn,"MISSING_OOB_CODE","internal-error"),ae(Cn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),ae(Cn,"INVALID_ID_TOKEN","invalid-user-token"),ae(Cn,"TOKEN_EXPIRED","user-token-expired"),ae(Cn,"USER_NOT_FOUND","user-token-expired"),ae(Cn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),ae(Cn,"INVALID_CODE","invalid-verification-code"),ae(Cn,"INVALID_SESSION_INFO","invalid-verification-id"),ae(Cn,"INVALID_TEMPORARY_PROOF","invalid-credential"),ae(Cn,"MISSING_SESSION_INFO","missing-verification-id"),ae(Cn,"SESSION_EXPIRED","code-expired"),ae(Cn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),ae(Cn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),ae(Cn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),ae(Cn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),ae(Cn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),ae(Cn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),ae(Cn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),ae(Cn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),ae(Cn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),ae(Cn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),ae(Cn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Cn),ur=new rr(3e4,6e4);function sr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function cr(e,t,n,r){return lr.apply(this,arguments)}function lr(){return lr=re(te().mark((function e(t,n,r,i){var o,a=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.length>4&&void 0!==a[4]?a[4]:{},e.abrupt("return",fr(t,o,re(te().mark((function e(){var o,a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},a={},i&&("GET"===n?a=i:o={body:JSON.stringify(i)}),u=Ve(Object.assign({key:t.config.apiKey},a)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",or.fetch()(vr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},o)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),lr.apply(this,arguments)}function fr(e,t,n){return hr.apply(this,arguments)}function hr(){return hr=re(te().mark((function e(t,n,r){var i,o,a,u,s,l,f,h,d,p;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},ar),n),e.prev=2,o=new mr(t),e.next=6,Promise.race([r(),o.promise]);case 6:return a=e.sent,o.clearNetworkTimeout(),e.next=10,a.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw yr(t,"account-exists-with-different-credential",u);case 13:if(!a.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=a.ok?u.errorMessage:u.error.message,l=s.split(" : "),f=c(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw yr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw yr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw yr(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw qn(t,p,d);case 34:Gn(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Pe)){e.next=41;break}throw e.t0;case 41:Gn(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),hr.apply(this,arguments)}function dr(e,t,n,r){return pr.apply(this,arguments)}function pr(){return pr=re(te().mark((function e(t,n,r,i){var o,a,u=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,cr(t,n,r,i,o);case 3:return"mfaPendingCredential"in(a=e.sent)&&Gn(t,"multi-factor-auth-required",{_serverResponse:a}),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)}))),pr.apply(this,arguments)}function vr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ir(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var mr=function(){function e(t){var n=this;ue(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Wn(n.auth,"network-request-failed"))}),ur.get())}))}return ce(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function yr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Wn(e,t,r);return i.customData._tokenResponse=n,i}function gr(e,t){return wr.apply(this,arguments)}function wr(){return wr=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),wr.apply(this,arguments)}function br(e,t){return kr.apply(this,arguments)}function kr(){return kr=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),kr.apply(this,arguments)}function _r(e,t){return Er.apply(this,arguments)}function Er(){return Er=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Er.apply(this,arguments)}function Ir(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ar(){return Ar=re(te().mark((function e(t){var n,r,i,o,a,u,s=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Ke(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Yn((o=Sr(i))&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error"),a="object"===typeof o.firebase?o.firebase:void 0,u=null===a||void 0===a?void 0:a.sign_in_provider,e.abrupt("return",{claims:o,token:i,authTime:Ir(Cr(o.auth_time)),issuedAtTime:Ir(Cr(o.iat)),expirationTime:Ir(Cr(o.exp)),signInProvider:u||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ar.apply(this,arguments)}function Cr(e){return 1e3*Number(e)}function Sr(e){var t,n=c(e.split("."),3),r=n[0],i=n[1],o=n[2];if(void 0===r||void 0===i||void 0===o)return Hn("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ee(i);return a?JSON.parse(a):(Hn("Failed to decode base64 JWT payload"),null)}catch(u){return Hn("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function xr(e,t){return Tr.apply(this,arguments)}function Tr(){return Tr=re(te().mark((function e(t,n){var r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Pe&&Or(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Tr.apply(this,arguments)}function Or(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Nr=function(){function e(t){ue(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return ce(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Rr=function(){function e(t,n){ue(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return ce(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Ir(this.lastLoginAt),this.creationTime=Ir(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Dr(e){return Pr.apply(this,arguments)}function Pr(){return Pr=re(te().mark((function e(t){var n,r,i,o,a,u,s,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,xr(t,_r(r,{idToken:i}));case 6:Yn(null===(o=e.sent)||void 0===o?void 0:o.users.length,r,"internal-error"),a=o.users[0],t._notifyReloadListener(a),u=(null===(n=a.providerUserInfo)||void 0===n?void 0:n.length)?Br(a.providerUserInfo):[],s=Lr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&a.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new Rr(a.createdAt,a.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}function Mr(){return(Mr=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ke(t),e.next=3,Dr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Ye(n),Ye(t))}function Br(e){return e.map((function(e){var t=e.providerId,n=An(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Fr(e,t){return jr.apply(this,arguments)}function jr(){return jr=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr(t,{},re(te().mark((function e(){var r,i,o,a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ve({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,o=i.tokenApiHost,a=i.apiKey,u=vr(t,o,"/v1/token","key=".concat(a)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",or.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}var Ur=function(){function e(){ue(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return ce(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Yn(e.idToken,"internal-error"),Yn("undefined"!==typeof e.idToken,"internal-error"),Yn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Sr(e);return Yn(t,"internal-error"),Yn("undefined"!==typeof t.exp,"internal-error"),Yn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=re(te().mark((function e(t){var n,r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Yn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=re(te().mark((function e(t,n){var r,i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr(t,n);case 2:r=e.sent,i=r.accessToken,o=r.refreshToken,a=r.expiresIn,this.updateTokensAndExpiration(i,o,Number(a));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Qn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,o=n.expirationTime,a=new e;return r&&(Yn("string"===typeof r,"internal-error",{appName:t}),a.refreshToken=r),i&&(Yn("string"===typeof i,"internal-error",{appName:t}),a.accessToken=i),o&&(Yn("number"===typeof o,"internal-error",{appName:t}),a.expirationTime=o),a}}]),e}();function Vr(e,t){Yn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var zr=function(){function e(t){ue(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,o=An(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?Ye(o.providerData):[],this.metadata=new Rr(o.createdAt||void 0,o.lastLoginAt||void 0)}return ce(e,[{key:"getIdToken",value:function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Yn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ar.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Mr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Yn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Yn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=re(te().mark((function e(t){var n,r,i=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Dr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,xr(this,gr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,o,a,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,p=null!==(a=n.photoURL)&&void 0!==a?a:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,w=n.uid,b=n.emailVerified,k=n.isAnonymous,_=n.providerData,E=n.stsTokenManager;Yn(w&&E,t,"internal-error");var I=Ur.fromJSON(this.name,E);Yn("string"===typeof w,t,"internal-error"),Vr(f,t.name),Vr(h,t.name),Yn("boolean"===typeof b,t,"internal-error"),Yn("boolean"===typeof k,t,"internal-error"),Vr(d,t.name),Vr(p,t.name),Vr(v,t.name),Vr(m,t.name),Vr(y,t.name),Vr(g,t.name);var A=new e({uid:w,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:k,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(A.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(A._redirectEventId=m),A}},{key:"_fromIdTokenResponse",value:function(){var t=re(te().mark((function t(n,r){var i,o,a,u=arguments;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(o=new Ur).updateFromServerResponse(r),a=new e({uid:r.localId,auth:n,stsTokenManager:o,isAnonymous:i}),t.next=6,Dr(a);case 6:return t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Hr=function(){function e(){ue(this,e),this.type="NONE",this.storage={}}return ce(e,[{key:"_isAvailable",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Hr.type="NONE";var Gr=Hr;function Wr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var qr=function(){function e(t,n,r){ue(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,o=i.config,a=i.name;this.fullUserKey=Wr(this.userKey,o.apiKey,a),this.fullPersistenceKey=Wr("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return ce(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?zr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=re(te().mark((function t(n,r){var i,o,a,u,s,c,l,f,h,d,p,v=arguments;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e($n(Gr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=t.sent.filter((function(e){return e})),a=o[0]||$n(Gr),u=Wr(i,n.config.apiKey,n.name),s=null,c=le(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=zr._fromJSON(n,h),f!==a&&(s=d),a=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=o.filter((function(e){return e._shouldAllowMigration})),a._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(a,n,i));case 40:if(a=p[0],!s){t.next=44;break}return t.next=44,a._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===a){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(a,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Kr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Zr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Xr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($r(t))return"Blackberry";if(ei(t))return"Webos";if(Yr(t))return"Safari";if((t.includes("chrome/")||Qr(t))&&!t.includes("edge/"))return"Chrome";if(Jr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Xr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/firefox\//i.test(e)}function Yr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/crios\//i.test(e)}function Zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/iemobile/i.test(e)}function Jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/android/i.test(e)}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/blackberry/i.test(e)}function ei(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/webos/i.test(e)}function ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/iphone|ipad|ipod/i.test(e)}function ni(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return ti(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function ri(){return Re()&&10===document.documentMode}function ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return ti(e)||Jr(e)||ei(e)||$r(e)||/windows phone/i.test(e)||Zr(e)}function oi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Kr(Se());break;case"Worker":t="".concat(Kr(Se()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Wt,"/").concat(r)}var ai=function(){function e(t){ue(this,e),this.auth=t,this.queue=[]}return ce(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=re(te().mark((function e(t){var n,r,i,o,a,u,s,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=le(this.queue),e.prev=5,i.s();case 7:if((o=i.n()).done){e.next=14;break}return a=o.value,e.next=11,a(t);case 11:a.onAbort&&r.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=le(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(nR){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ui=function(){function e(t,n,r){ue(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ci(this),this.idTokenSubscription=new ci(this),this.beforeStateQueue=new ai(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Vn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return ce(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=$n(t)),this._initializationPromise=this.queue(re(te().mark((function r(){var i,o;return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,qr.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(o=n.currentUser)||void 0===o?void 0:o.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=re(te().mark((function e(t){var n,r,i,o,a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,o=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return a=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,a&&a!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,o=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!o){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Yn(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Ke(t):null)&&Yn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=re(te().mark((function e(t){var n,r=this,i=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Yn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(re(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence($n(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Me("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Yn(n=t&&$n(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,qr.create(this,[$n(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=re(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var o="function"===typeof t?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return Yn(a,this,"internal-error"),a.then((function(){return o(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Yn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=re(te().mark((function e(){var t,n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ae({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function si(e){return Ke(e)}var ci=function(){function e(t){var n=this;ue(this,e),this.auth=t,this.observer=null,this.addObserver=Ge((function(e){return n.observer=e}))}return ce(e,[{key:"next",get:function(){return Yn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function li(e,t,n){var r=si(e);Yn(r._canInitEmulator,r,"emulator-config-failed"),Yn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=fi(t),a=function(e){var t=fi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var o=i[1];return{host:o,port:hi(r.substr(o.length+1))}}var a=c(r.split(":"),2);return{host:a[0],port:hi(a[1])}}(t),u=a.host,s=a.port,l=null===s?"":":".concat(s);r.config.emulator={url:"".concat(o,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function hi(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var di=function(){function e(t,n){ue(this,e),this.providerId=t,this.signInMethod=n}return ce(e,[{key:"toJSON",value:function(){return Qn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Qn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Qn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Qn("not implemented")}}]),e}();function pi(e,t){return vi.apply(this,arguments)}function vi(){return vi=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:resetPassword",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),vi.apply(this,arguments)}function mi(e,t){return yi.apply(this,arguments)}function yi(){return yi=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),yi.apply(this,arguments)}function gi(e,t){return wi.apply(this,arguments)}function wi(){return wi=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:update",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),wi.apply(this,arguments)}function bi(e,t){return ki.apply(this,arguments)}function ki(){return ki=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithPassword",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ki.apply(this,arguments)}function _i(e,t){return Ei.apply(this,arguments)}function Ei(){return Ei=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:sendOobCode",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ei.apply(this,arguments)}function Ii(e,t){return Ai.apply(this,arguments)}function Ai(){return Ai=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,n));case 1:case"end":return e.stop()}}),e)}))),Ai.apply(this,arguments)}function Ci(e,t){return Si.apply(this,arguments)}function Si(){return Si=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,n));case 1:case"end":return e.stop()}}),e)}))),Si.apply(this,arguments)}function xi(e,t){return Ti.apply(this,arguments)}function Ti(){return Ti=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,n));case 1:case"end":return e.stop()}}),e)}))),Ti.apply(this,arguments)}function Oi(e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,n));case 1:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Ri(e,t){return Di.apply(this,arguments)}function Di(){return Di=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithEmailLink",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Di.apply(this,arguments)}function Pi(e,t){return Mi.apply(this,arguments)}function Mi(){return Mi=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithEmailLink",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mi.apply(this,arguments)}var Li=function(e){de(n,e);var t=ye(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ue(this,n),(o=t.call(this,"password",i))._email=e,o._password=r,o._tenantId=a,o}return ce(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",bi(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ri(t,{email:this._email,oobCode:this._password}));case 5:Gn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",mi(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Pi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Gn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(di);function Bi(e,t){return Fi.apply(this,arguments)}function Fi(){return Fi=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithIdp",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fi.apply(this,arguments)}var ji=function(e){de(n,e);var t=ye(n);function n(){var e;return ue(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return ce(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Bi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Bi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Bi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ve(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,o=An(t,["providerId","signInMethod"]);if(!r||!i)return null;var a=new n(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}}]),n}(di);function Ui(e,t){return Vi.apply(this,arguments)}function Vi(){return Vi=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:sendVerificationCode",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function zi(){return zi=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithPhoneNumber",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),zi.apply(this,arguments)}function Hi(){return Hi=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr(t,"POST","/v1/accounts:signInWithPhoneNumber",sr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw yr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Hi.apply(this,arguments)}var Gi=ae({},"USER_NOT_FOUND","user-not-found");function Wi(){return Wi=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithPhoneNumber",sr(t,r),Gi));case 2:case"end":return e.stop()}}),e)}))),Wi.apply(this,arguments)}var qi=function(e){de(n,e);var t=ye(n);function n(e){var r;return ue(this,n),(r=t.call(this,"phone","phone")).params=e,r}return ce(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return zi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Hi.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Wi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,o=t.phoneNumber,a=t.temporaryProof;return i||r||o||a?new n({verificationId:r,verificationCode:i,phoneNumber:o,temporaryProof:a}):null}}]),n}(di);var Ki=function(){function e(t){var n,r,i,o,a,u;ue(this,e);var s=ze(He(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Yn(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(o=s.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(a=s.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return ce(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ze(He(e)).link,n=t?ze(He(t)).deep_link_id:null,r=ze(He(e)).deep_link_id;return(r?ze(He(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(oI){return null}}}]),e}();var Xi=function(){function e(){ue(this,e),this.providerId=e.PROVIDER_ID}return ce(e,null,[{key:"credential",value:function(e,t){return Li._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ki.parseLink(t);return Yn(n,"argument-error"),Li._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Xi.PROVIDER_ID="password",Xi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Xi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Yi=function(){function e(t){ue(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return ce(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Qi=function(e){de(n,e);var t=ye(n);function n(){var e;return ue(this,n),(e=t.apply(this,arguments)).scopes=[],e}return ce(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Ye(this.scopes)}}]),n}(Yi),Zi=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.apply(this,arguments)}return ce(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Yn(e.idToken||e.accessToken,"argument-error"),ji._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Yn("providerId"in t&&"signInMethod"in t,"argument-error"),ji._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,o=t.oauthTokenSecret,a=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!o&&!r&&!a)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:a})}catch(c){return null}}}]),n}(Qi),Ji=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.call(this,"facebook.com")}return ce(n,null,[{key:"credential",value:function(e){return ji._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(oI){return null}}}]),n}(Qi);Ji.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ji.PROVIDER_ID="facebook.com";var $i=function(e){de(n,e);var t=ye(n);function n(){var e;return ue(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return ce(n,null,[{key:"credential",value:function(e,t){return ji._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(oI){return null}}}]),n}(Qi);$i.GOOGLE_SIGN_IN_METHOD="google.com",$i.PROVIDER_ID="google.com";var eo=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.call(this,"github.com")}return ce(n,null,[{key:"credential",value:function(e){return ji._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(oI){return null}}}]),n}(Qi);eo.GITHUB_SIGN_IN_METHOD="github.com",eo.PROVIDER_ID="github.com";var to=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return ce(n,[{key:"_getIdTokenResponse",value:function(e){return Bi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Bi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Bi(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,o=t.pendingToken;return r&&i&&o&&r===i?new n(r,o):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(di),no=function(e){de(n,e);var t=ye(n);function n(e){return ue(this,n),Yn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return ce(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=to.fromJSON(e);return Yn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return to._create(r,n)}catch(i){return null}}}]),n}(Yi),ro=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.call(this,"twitter.com")}return ce(n,null,[{key:"credential",value:function(e,t){return ji._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(oI){return null}}}]),n}(Qi);function io(e,t){return oo.apply(this,arguments)}function oo(){return oo=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signUp",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),oo.apply(this,arguments)}ro.TWITTER_SIGN_IN_METHOD="twitter.com",ro.PROVIDER_ID="twitter.com";var ao=function(){function e(t){ue(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return ce(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=re(te().mark((function t(n,r,i){var o,a,u,s,c=arguments;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=c.length>3&&void 0!==c[3]&&c[3],t.next=3,zr._fromIdTokenResponse(n,i,o);case 3:return a=t.sent,u=uo(i),s=new e({user:a,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=re(te().mark((function t(n,r,i){var o;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return o=uo(i),t.abrupt("return",new e({user:n,providerId:o,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function uo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function so(){return so=re(te().mark((function e(t){var n,r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=si(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ao({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,io(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ao._fromIdTokenResponse(r,"signIn",i,!0);case 10:return o=e.sent,e.next=13,r._updateCurrentUser(o.user);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),so.apply(this,arguments)}var co=function(e){de(n,e);var t=ye(n);function n(e,r,i,o){var a,u;return ue(this,n),(a=t.call(this,r.code,r.message)).operationType=i,a.user=o,Object.setPrototypeOf(fe(a),n.prototype),a.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},a}return ce(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Pe);function lo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw co._fromErrorAndOperation(e,n,t,r);throw n}))}function fo(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ho(e,t){return po.apply(this,arguments)}function po(){return po=re(te().mark((function e(t,n){var r,i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ke(t),e.next=3,yo(!0,r,n);case 3:return e.t0=br,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,o=i.providerUserInfo,a=fo(o||[]),r.providerData=r.providerData.filter((function(e){return a.has(e.providerId)})),a.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),po.apply(this,arguments)}function vo(e,t){return mo.apply(this,arguments)}function mo(){return mo=re(te().mark((function e(t,n){var r,i,o=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],e.t0=xr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ao._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),mo.apply(this,arguments)}function yo(e,t,n){return go.apply(this,arguments)}function go(){return(go=re(te().mark((function e(t,n,r){var i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(n);case 2:i=fo(n.providerData),o=!1===t?"provider-already-linked":"no-such-provider",Yn(i.has(r)===t,n.auth,o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e,t){return bo.apply(this,arguments)}function bo(){return bo=re(te().mark((function e(t,n){var r,i,o,a,u,s,c,l=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],o=t.auth,a="reauthenticate",e.prev=3,e.next=6,xr(t,lo(o,a,n,t),r);case 6:return Yn((u=e.sent).idToken,o,"internal-error"),Yn(s=Sr(u.idToken),o,"internal-error"),c=s.sub,Yn(t.uid===c,o,"user-mismatch"),e.abrupt("return",ao._forOperation(t,a,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Gn(o,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),bo.apply(this,arguments)}function ko(e,t){return _o.apply(this,arguments)}function _o(){return _o=re(te().mark((function e(t,n){var r,i,o,a,u=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,lo(t,i,n);case 4:return o=e.sent,e.next=7,ao._fromIdTokenResponse(t,i,o);case 7:if(a=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(a.user);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)}))),_o.apply(this,arguments)}function Eo(e,t){return Io.apply(this,arguments)}function Io(){return Io=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ko(si(t),n));case 1:case"end":return e.stop()}}),e)}))),Io.apply(this,arguments)}function Ao(e,t){return Co.apply(this,arguments)}function Co(){return(Co=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ke(t),e.next=3,yo(!1,r,n.providerId);case 3:return e.abrupt("return",vo(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function So(e,t){return xo.apply(this,arguments)}function xo(){return(xo=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wo(Ke(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function To(e,t){return Oo.apply(this,arguments)}function Oo(){return Oo=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dr(t,"POST","/v1/accounts:signInWithCustomToken",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function No(){return No=re(te().mark((function e(t,n){var r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=si(t),e.next=3,To(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ao._fromIdTokenResponse(r,"signIn",i);case 6:return o=e.sent,e.next=9,r._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}var Ro=function(){function e(t,n){ue(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return ce(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Do._fromServerResponse(e,t):Gn(e,"internal-error")}}]),e}(),Do=function(e){de(n,e);var t=ye(n);function n(e){var r;return ue(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return ce(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Ro);function Po(e,t,n){var r;Yn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Yn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Yn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Yn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Mo(){return Mo=re(te().mark((function e(t,n,r){var i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ke(t),o={requestType:"PASSWORD_RESET",email:n},r&&Po(i,o,r),e.next=5,Ci(i,o);case 5:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}function Lo(){return Lo=re(te().mark((function e(t,n,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pi(Ke(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Lo.apply(this,arguments)}function Bo(){return Bo=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gi(Ke(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Bo.apply(this,arguments)}function Fo(e,t){return jo.apply(this,arguments)}function jo(){return jo=re(te().mark((function e(t,n){var r,i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ke(t),e.next=3,pi(r,{oobCode:n});case 3:i=e.sent,Yn(o=i.requestType,r,"internal-error"),e.t0=o,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Yn(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Yn(i.mfaInfo,r,"internal-error");case 13:Yn(i.email,r,"internal-error");case 14:return a=null,i.mfaInfo&&(a=Ro._fromServerResponse(si(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:a},operation:o});case 17:case"end":return e.stop()}}),e)}))),jo.apply(this,arguments)}function Uo(){return Uo=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fo(Ke(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Uo.apply(this,arguments)}function Vo(e,t,n){return zo.apply(this,arguments)}function zo(){return zo=re(te().mark((function e(t,n,r){var i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),e.next=3,io(i,{returnSecureToken:!0,email:n,password:r});case 3:return o=e.sent,e.next=6,ao._fromIdTokenResponse(i,"signIn",o);case 6:return a=e.sent,e.next=9,i._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function Ho(){return Ho=re(te().mark((function e(t,n,r){var i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ke(t),o={requestType:"EMAIL_SIGNIN",email:n},Yn(r.handleCodeInApp,i,"argument-error"),r&&Po(i,o,r),e.next=6,xi(i,o);case 6:case"end":return e.stop()}}),e)}))),Ho.apply(this,arguments)}function Go(){return Go=re(te().mark((function e(t,n,r){var i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ke(t),Yn((o=Xi.credentialWithLink(n,r||er()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Eo(i,o));case 4:case"end":return e.stop()}}),e)}))),Go.apply(this,arguments)}function Wo(e,t){return qo.apply(this,arguments)}function qo(){return qo=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:createAuthUri",sr(t,n)));case 1:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}function Ko(){return Ko=re(te().mark((function e(t,n){var r,i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=tr()?er():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Wo(Ke(t),i);case 4:return o=e.sent,a=o.signinMethods,e.abrupt("return",a||[]);case 7:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}function Xo(){return(Xo=re(te().mark((function e(t,n){var r,i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ke(t),e.next=3,t.getIdToken();case 3:return i=e.sent,o={requestType:"VERIFY_EMAIL",idToken:i},n&&Po(r.auth,o,n),e.next=8,Ii(r.auth,o);case 8:if(a=e.sent,a.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(){return(Yo=re(te().mark((function e(t,n,r){var i,o,a,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ke(t),e.next=3,t.getIdToken();case 3:return o=e.sent,a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:n},r&&Po(i.auth,a,r),e.next=8,Oi(i.auth,a);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qo(e,t){return Zo.apply(this,arguments)}function Zo(){return Zo=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Zo.apply(this,arguments)}function Jo(){return(Jo=re(te().mark((function e(t,n){var r,i,o,a,u,s,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return o=Ke(t),e.next=6,o.getIdToken();case 6:return a=e.sent,u={idToken:a,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,xr(o,Qo(o.auth,u));case 10:return s=e.sent,o.displayName=s.displayName||null,o.photoURL=s.photoUrl||null,(c=o.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=o.displayName,c.photoURL=o.photoURL),e.next=17,o._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $o(e,t,n){return ea.apply(this,arguments)}function ea(){return ea=re(te().mark((function e(t,n,r){var i,o,a,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return o=e.sent,a={idToken:o,returnSecureToken:!0},n&&(a.email=n),r&&(a.password=r),e.next=9,xr(t,mi(i,a));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),ea.apply(this,arguments)}var ta=ce((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ue(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),na=function(e){de(n,e);var t=ye(n);function n(e,r,i,o){var a;return ue(this,n),(a=t.call(this,e,r,i)).username=o,a}return ce(n)}(ta),ra=function(e){de(n,e);var t=ye(n);function n(e,r){return ue(this,n),t.call(this,e,"facebook.com",r)}return ce(n)}(ta),ia=function(e){de(n,e);var t=ye(n);function n(e,r){return ue(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return ce(n)}(na),oa=function(e){de(n,e);var t=ye(n);function n(e,r){return ue(this,n),t.call(this,e,"google.com",r)}return ce(n)}(ta),aa=function(e){de(n,e);var t=ye(n);function n(e,r,i){return ue(this,n),t.call(this,e,"twitter.com",r,i)}return ce(n)}(na);function ua(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var a=null===(n=null===(t=Sr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(a)return new ta(o,"anonymous"!==a&&"custom"!==a?a:null)}if(!r)return null;switch(r){case"facebook.com":return new ra(o,i);case"github.com":return new ia(o,i);case"google.com":return new oa(o,i);case"twitter.com":return new aa(o,i,e.screenName||null);case"custom":case"anonymous":return new ta(o,null);default:return new ta(o,r,i)}}(n)}var sa=function(){function e(t,n){ue(this,e),this.type=t,this.credential=n}return ce(e,[{key:"toJSON",value:function(){return{multiFactorSession:ae({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ca=function(){function e(t,n,r){ue(this,e),this.session=t,this.hints=n,this.signInResolver=r}return ce(e,[{key:"resolveSignIn",value:function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=si(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map((function(e){return Ro._fromServerResponse(r,e)}));Yn(i.mfaPendingCredential,r,"internal-error");var a=sa._fromMfaPendingCredential(i.mfaPendingCredential);return new e(a,o,function(){var e=re(te().mark((function e(t){var o,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,a);case 2:o=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:o.idToken,refreshToken:o.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ao._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Yn(n.user,r,"internal-error"),e.abrupt("return",ao._forOperation(n.user,n.operationType,u));case 17:Gn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function la(e,t){return cr(e,"POST","/v2/accounts/mfaEnrollment:start",sr(e,t))}function fa(e,t){return cr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",sr(e,t))}var ha=function(){function e(t){var n=this;ue(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Ro._fromServerResponse(t.auth,e)})))}))}return ce(e,[{key:"getSession",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=sa,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=re(te().mark((function e(t,n){var r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,xr(this.user,r._process(this.user.auth,i,n));case 6:return o=e.sent,e.next=9,this.user._updateTokensIfNecessary(o);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=re(te().mark((function e(t){var n,r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,xr(this.user,fa(this.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return o=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(o);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),da=new WeakMap;var pa="__sak",va=function(){function e(t,n){ue(this,e),this.storageRetriever=t,this.type=n}return ce(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(pa,"1"),this.storage.removeItem(pa),Promise.resolve(!0)):Promise.resolve(!1)}catch(oI){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ma=function(e){de(n,e);var t=ye(n);function n(){var e;return ue(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Se();return Yr(e)||ti(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ii(),e._shouldAllowMigration=!0,e}return ce(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),o=this.localCache[r];i!==o&&e(r,o,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var o=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},a=this.storage.getItem(r);ri()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,10):o()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=re(te().mark((function e(t,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(pe(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=re(te().mark((function e(t){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(pe(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(pe(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(va);ma.type="LOCAL";var ya=ma,ga=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return ce(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(va);ga.type="SESSION";var wa=ga;function ba(e){return Promise.all(e.map(function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ka=function(){function e(t){ue(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return ce(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=re(te().mark((function e(t){var n,r,i,o,a,u,s,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,o=r.eventType,a=r.data,null===(u=this.handlersMap[o])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),s=Array.from(u).map(function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,a));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ba(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function _a(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ka.receivers=[];var Ea=function(){function e(t){ue(this,e),this.target=t,this.handlers=new Set}return ce(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=re(te().mark((function e(t,n){var r,i,o,a,u=this,s=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=_a("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);a={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),o=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),e(n.data.response);break;default:clearTimeout(l),clearTimeout(o),s(new Error("invalid_response"))}}},u.handlers.add(a),i.port1.addEventListener("message",a.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){a&&u.removeMessageHandler(a)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ia(){return window}function Aa(){return"undefined"!==typeof Ia().WorkerGlobalScope&&"function"===typeof Ia().importScripts}function Ca(){return Sa.apply(this,arguments)}function Sa(){return(Sa=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function xa(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Ta="firebaseLocalStorageDb",Oa="firebaseLocalStorage",Na="fbase_key",Ra=function(){function e(t){ue(this,e),this.request=t}return ce(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Da(e,t){return e.transaction([Oa],t?"readwrite":"readonly").objectStore(Oa)}function Pa(){var e=indexedDB.deleteDatabase(Ta);return new Ra(e).toPromise()}function Ma(){var e=indexedDB.open(Ta,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Oa,{keyPath:Na})}catch(r){n(r)}})),e.addEventListener("success",re(te().mark((function n(){var r;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Oa)){n.next=12;break}return r.close(),n.next=5,Pa();case 5:return n.t0=t,n.next=8,Ma();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function La(e,t,n){return Ba.apply(this,arguments)}function Ba(){return Ba=re(te().mark((function e(t,n,r){var i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Da(t,!0).put((ae(i={},Na,n),ae(i,"value",r),i)),e.abrupt("return",new Ra(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}function Fa(e,t){return ja.apply(this,arguments)}function ja(){return ja=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Da(t,!1).get(n),e.next=3,new Ra(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}function Ua(e,t){var n=Da(e,!0).delete(t);return new Ra(n).toPromise()}var Va=function(){function e(){ue(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return ce(e,[{key:"_openDb",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ma();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aa()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=re(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ka._getInstance(Aa()?self:null),this.receiver._subscribe("keyChanged",function(){var e=re(te().mark((function e(n,r){var i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=re(te().mark((function e(){var t,n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ca();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ea(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&xa()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ma();case 5:return t=e.sent,e.next=8,La(t,pa,"1");case 8:return e.next=10,Ua(t,pa);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=re(te().mark((function e(t,n){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return La(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Fa(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=re(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ua(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=re(te().mark((function e(){var t,n,r,i,o,a,u,s,c,l,f;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Da(e,!1).getAll();return new Ra(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=le(t);try{for(i.s();!(o=i.n()).done;)a=o.value,u=a.fbase_key,s=a.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Va.type="LOCAL";var za=Va;function Ha(e,t){return cr(e,"POST","/v2/accounts/mfaSignIn:start",sr(e,t))}function Ga(e){return Wa.apply(this,arguments)}function Wa(){return Wa=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function qa(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Wn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ka(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Xa=1e12,Ya=function(){function e(t){ue(this,e),this.auth=t,this.counter=Xa,this._widgets=new Map}return ce(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Qa(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Xa;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Xa;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Xa,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Qa=function(){function e(t,n,r){var i=this;ue(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var o="string"===typeof t?document.getElementById(t):t;Yn(o,"argument-error",{appName:n}),this.container=o,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return ce(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Za=Ka("rcb"),Ja=new rr(3e4,6e4),$a="https://www.google.com/recaptcha/api.js?",eu=function(){function e(){ue(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ia().grecaptcha}return ce(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Yn(tu(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ia().grecaptcha):new Promise((function(r,i){var o=Ia().setTimeout((function(){i(Wn(e,"network-request-failed"))}),Ja.get());Ia()[Za]=function(){Ia().clearTimeout(o),delete Ia()[Za];var a=Ia().grecaptcha;if(a){var u=a.render;a.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(a)}else i(Wn(e,"internal-error"))},qa("".concat($a,"?").concat(Ve({onload:Za,render:"explicit",hl:n}))).catch((function(){clearTimeout(o),i(Wn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Ia().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function tu(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var nu=function(){function e(){ue(this,e)}return ce(e,[{key:"load",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ya(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),ru="recaptcha",iu={theme:"light",type:"image"},ou=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},iu),r=arguments.length>2?arguments[2]:void 0;ue(this,e),this.parameters=n,this.type=ru,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=si(r),this.isInvisible="invisible"===this.parameters.size,Yn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Yn(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nu:new eu,this.validateStartingState()}return ce(e,[{key:"verify",value:function(){var e=re(te().mark((function e(){var t,n,r,i=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Yn(!this.parameters.sitekey,this.auth,"argument-error"),Yn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Yn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ia()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Yn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=re(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yn(tr()&&!Aa(),this.auth,"internal-error"),e.next=3,au();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Ga(this.auth);case 8:Yn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Yn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function au(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var uu=function(){function e(t,n){ue(this,e),this.verificationId=t,this.onConfirmation=n}return ce(e,[{key:"confirm",value:function(e){var t=qi._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function su(){return su=re(te().mark((function e(t,n,r){var i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),e.next=3,hu(i,n,Ke(r));case 3:return o=e.sent,e.abrupt("return",new uu(o,(function(e){return Eo(i,e)})));case 5:case"end":return e.stop()}}),e)}))),su.apply(this,arguments)}function cu(e,t,n){return lu.apply(this,arguments)}function lu(){return(lu=re(te().mark((function e(t,n,r){var i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ke(t),e.next=3,yo(!1,i,"phone");case 3:return e.next=5,hu(i.auth,n,Ke(r));case 5:return o=e.sent,e.abrupt("return",new uu(o,(function(e){return Ao(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fu(){return(fu=re(te().mark((function e(t,n,r){var i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ke(t),e.next=3,hu(i.auth,n,Ke(r));case 3:return o=e.sent,e.abrupt("return",new uu(o,(function(e){return So(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hu(e,t,n){return du.apply(this,arguments)}function du(){return du=re(te().mark((function e(t,n,r){var i,o,a,u,s,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(o=e.sent,e.prev=3,Yn("string"===typeof o,t,"argument-error"),Yn(r.type===ru,t,"argument-error"),!("session"in(a="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=a.session,!("phoneNumber"in a)){e.next=17;break}return Yn("enroll"===u.type,t,"internal-error"),e.next=13,la(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Yn("signin"===u.type,t,"internal-error"),Yn(c=(null===(i=a.multiFactorHint)||void 0===i?void 0:i.uid)||a.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Ha(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:o}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ui(t,{phoneNumber:a.phoneNumber,recaptchaToken:o});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),du.apply(this,arguments)}function pu(){return(pu=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vo(Ke(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vu=function(){function e(t){ue(this,e),this.providerId=e.PROVIDER_ID,this.auth=si(t)}return ce(e,[{key:"verifyPhoneNumber",value:function(e,t){return hu(this.auth,e,Ke(t))}}],[{key:"credential",value:function(e,t){return qi._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?qi._fromTokenResponse(n,r):null}}]),e}();function mu(e,t){return t?$n(t):(Yn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}vu.PROVIDER_ID="phone",vu.PHONE_SIGN_IN_METHOD="phone";var yu=function(e){de(n,e);var t=ye(n);function n(e){var r;return ue(this,n),(r=t.call(this,"custom","custom")).params=e,r}return ce(n,[{key:"_getIdTokenResponse",value:function(e){return Bi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Bi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Bi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(di);function gu(e){return ko(e.auth,new yu(e),e.bypassAuthState)}function wu(e){var t=e.auth,n=e.user;return Yn(n,t,"internal-error"),wo(n,new yu(e),e.bypassAuthState)}function bu(e){return ku.apply(this,arguments)}function ku(){return ku=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Yn(r=t.user,n,"internal-error"),e.abrupt("return",vo(r,new yu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),ku.apply(this,arguments)}var _u=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];ue(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return ce(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=re(te().mark((function t(n,r){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=re(te().mark((function e(t){var n,r,i,o,a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,o=t.tenantId,a=t.error,u=t.type,!a){e.next=4;break}return this.reject(a),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gu;case"linkViaPopup":case"linkViaRedirect":return bu;case"reauthViaPopup":case"reauthViaRedirect":return wu;default:Gn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Eu=new rr(2e3,1e4);function Iu(e,t,n){return Au.apply(this,arguments)}function Au(){return Au=re(te().mark((function e(t,n,r){var i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),Kn(t,n,Yi),o=mu(i,r),a=new Tu(i,"signInViaPopup",n,o),e.abrupt("return",a.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Au.apply(this,arguments)}function Cu(){return(Cu=re(te().mark((function e(t,n,r){var i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kn((i=Ke(t)).auth,n,Yi),o=mu(i.auth,r),a=new Tu(i.auth,"reauthViaPopup",n,o,i),e.abrupt("return",a.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Su(e,t,n){return xu.apply(this,arguments)}function xu(){return(xu=re(te().mark((function e(t,n,r){var i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kn((i=Ke(t)).auth,n,Yi),o=mu(i.auth,r),a=new Tu(i.auth,"linkViaPopup",n,o,i),e.abrupt("return",a.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tu=function(e){de(n,e);var t=ye(n);function n(e,r,i,o,a){var u;return ue(this,n),(u=t.call(this,e,r,o,a)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=fe(u),u}return ce(n,[{key:"executeNotNull",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Yn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=re(te().mark((function e(){var t,n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zn(1===this.filter.length,"Popup operations only handle one event"),t=_a(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Wn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Wn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Wn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Eu.get())}()}}]),n}(_u);Tu.currentPopupAction=null;var Ou=new Map,Nu=function(e){de(n,e);var t=ye(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ue(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,o)).eventId=null,i}return ce(n,[{key:"execute",value:function(){var e=re(te().mark((function e(){var t,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ou.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Ru(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,In(pe(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Ou.set(this.auth._key(),t);case 21:return this.bypassAuthState||Ou.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=re(te().mark((function e(t){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",In(pe(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",In(pe(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(_u);function Ru(e,t){return Du.apply(this,arguments)}function Du(){return Du=re(te().mark((function e(t,n){var r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fu(n),i=Bu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,o="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),Du.apply(this,arguments)}function Pu(e,t){return Mu.apply(this,arguments)}function Mu(){return Mu=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bu(t)._set(Fu(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Mu.apply(this,arguments)}function Lu(e,t){Ou.set(e._key(),t)}function Bu(e){return $n(e._redirectPersistence)}function Fu(e){return Wr("pendingRedirect",e.config.apiKey,e.name)}function ju(e,t,n){return function(e,t,n){return Uu.apply(this,arguments)}(e,t,n)}function Uu(){return Uu=re(te().mark((function e(t,n,r){var i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=si(t),Kn(t,n,Yi),o=mu(i,r),e.next=5,Pu(o,i);case 5:return e.abrupt("return",o._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Uu.apply(this,arguments)}function Vu(e,t,n){return function(e,t,n){return zu.apply(this,arguments)}(e,t,n)}function zu(){return(zu=re(te().mark((function e(t,n,r){var i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kn((i=Ke(t)).auth,n,Yi),o=mu(i.auth,r),e.next=5,Pu(o,i.auth);case 5:return e.next=7,Yu(i);case 7:return a=e.sent,e.abrupt("return",o._openRedirect(i.auth,n,"reauthViaRedirect",a));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hu(e,t,n){return function(e,t,n){return Gu.apply(this,arguments)}(e,t,n)}function Gu(){return(Gu=re(te().mark((function e(t,n,r){var i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kn((i=Ke(t)).auth,n,Yi),o=mu(i.auth,r),e.next=5,yo(!1,i,n.providerId);case 5:return e.next=7,Pu(o,i.auth);case 7:return e.next=9,Yu(i);case 9:return a=e.sent,e.abrupt("return",o._openRedirect(i.auth,n,"linkViaRedirect",a));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wu(e,t){return qu.apply(this,arguments)}function qu(){return qu=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,si(t)._initializationPromise;case 2:return e.abrupt("return",Ku(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),qu.apply(this,arguments)}function Ku(e,t){return Xu.apply(this,arguments)}function Xu(){return Xu=re(te().mark((function e(t,n){var r,i,o,a,u,s=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=si(t),o=mu(i,n),a=new Nu(i,o,r),e.next=6,a.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}function Yu(e){return Qu.apply(this,arguments)}function Qu(){return(Qu=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_a("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zu=function(){function e(t){ue(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return ce(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $u(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!$u(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Wn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ju(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ju(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Ju(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function $u(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function es(e){return ts.apply(this,arguments)}function ts(){return ts=re(te().mark((function e(t){var n,r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",cr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}var ns=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rs=/^https?/;function is(){return is=re(te().mark((function e(t){var n,r,i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,es(t);case 4:n=e.sent,r=n.authorizedDomains,i=le(r),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=20;break}if(a=o.value,e.prev=11,!os(a)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Gn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),is.apply(this,arguments)}function os(e){var t=er(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var o=new URL(e);return""===o.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&o.hostname===i}if(!rs.test(r))return!1;if(ns.test(e))return i===e;var a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}var as=new rr(3e4,6e4);function us(){var e=Ia().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Ye(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var ss=null;function cs(e){return ss=ss||function(e){return new Promise((function(t,n){var r,i,o;function a(){us(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){us(),n(Wn(e,"network-request-failed"))},timeout:as.get()})}if(null===(i=null===(r=Ia().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Ia().gapi)||void 0===o?void 0:o.load)){var u=Ka("iframefcb");return Ia()[u]=function(){gapi.load?a():n(Wn(e,"network-request-failed"))},qa("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}a()}})).catch((function(e){throw ss=null,e}))}(e),ss}var ls=new rr(5e3,15e3),fs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ds(e){var t=e.config;Yn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ir(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Wt},i=hs.get(e.config.apiHost);i&&(r.eid=i);var o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(Ve(r).slice(1))}function ps(e){return vs.apply(this,arguments)}function vs(){return vs=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cs(t);case 2:return n=e.sent,Yn(r=Ia().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ds(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fs,dontclear:!0},(function(e){return new Promise(function(){var n=re(te().mark((function n(r,i){var o,a,u;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ia().clearTimeout(a),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:o=Wn(t,"network-request-failed"),a=Ia().setTimeout((function(){i(o)}),ls.get()),e.ping(u).then(u,(function(){i(o)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),vs.apply(this,arguments)}var ms={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ys="_blank",gs="http://localhost",ws=function(){function e(t){ue(this,e),this.window=t,this.associatedEvent=null}return ce(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function bs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},ms),{width:r.toString(),height:i.toString(),top:o,left:a}),l=Se().toLowerCase();n&&(u=Qr(l)?ys:n),Xr(l)&&(t=t||gs,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=c(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(ni(l)&&"_self"!==u)return ks(t||"",u),new ws(null);var h=window.open(t||"",u,f);Yn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new ws(h)}function ks(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var _s="__/auth/handler",Es="emulator/auth/handler";function Is(e,t,n,r,i,o){Yn(e.config.authDomain,e,"auth-domain-config-required"),Yn(e.config.apiKey,e,"invalid-api-key");var a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Wt,eventId:i};if(t instanceof Yi){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(o||{});u<s.length;u++){var l=c(s[u],2),f=l[0],h=l[1];a[f]=h}}if(t instanceof Qi){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);for(var p=a,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(_s);return ir(t,Es)}(e),"?").concat(Ve(p).slice(1))}var As="webStorageSupport",Cs=function(){function e(){ue(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wa,this._completeRedirectFn=Ku,this._overrideRedirectResult=Lu}return ce(e,[{key:"_openPopup",value:function(){var e=re(te().mark((function e(t,n,r,i){var o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zn(null===(o=this.eventManagers[t._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()"),a=Is(t,n,r,er(),i),e.abrupt("return",bs(t,a,_a()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=re(te().mark((function e(t,n,r,i){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return o=Is(t,n,r,er(),i),Ia().location.href=o,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var o}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,o=r.promise;return i?Promise.resolve(i):(Zn(o,"If manager is not set, promise should be"),o)}var a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch((function(){delete t.eventManagers[n]})),a}},{key:"initAndGetManager",value:function(){var e=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ps(t);case 2:return n=e.sent,r=new Zu(t),n.register("authEvent",(function(e){return Yn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(As,{type:As},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Gn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return is.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ii()||Yr()||ti()}}]),e}(),Ss=Cs,xs=function(){function e(t){ue(this,e),this.factorId=t}return ce(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Qn("unexpected MultiFactorSessionType")}}}]),e}(),Ts=function(e){de(n,e);var t=ye(n);function n(e){var r;return ue(this,n),(r=t.call(this,"phone")).credential=e,r}return ce(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return cr(e,"POST","/v2/accounts/mfaEnrollment:finalize",sr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return cr(e,"POST","/v2/accounts/mfaSignIn:finalize",sr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(xs),Os=function(){function e(){ue(this,e)}return ce(e,null,[{key:"assertion",value:function(e){return Ts._fromCredential(e)}}]),e}();Os.FACTOR_ID="phone";var Ns,Rs="@firebase/auth",Ds="0.20.4",Ps=function(){function e(t){ue(this,e),this.auth=t,this.internalListeners=new Map}return ce(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Yn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Ms(){return window}Ns="Browser",Ft(new Qe("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=r.options,a=o.apiKey,u=o.authDomain;return function(e,t){Yn(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),Yn(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:a,authDomain:u,clientPlatform:Ns,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oi(Ns)},i=new ui(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map($n);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Ft(new Qe("auth-internal",(function(e){return function(e){return new Ps(e)}(si(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Zt(Rs,Ds,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ns)),Zt(Rs,Ds,"esm2017");function Ls(e,t,n){return Bs.apply(this,arguments)}function Bs(){return Bs=re(te().mark((function e(t,n,r){var i,o,a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Ms(),a=o.BuildInfo,Zn(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Hs(n.sessionId);case 4:return u=e.sent,s={},ti()?s.ibi=a.packageName:Jr()?s.apn=a.packageName:Gn(t,"operation-not-supported-in-this-environment"),a.displayName&&(s.appDisplayName=a.displayName),s.sessionId=u,e.abrupt("return",Is(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Bs.apply(this,arguments)}function Fs(){return Fs=re(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ms(),r=n.BuildInfo,i={},ti()?i.iosBundleId=r.packageName:Jr()?i.androidPackageName=r.packageName:Gn(t,"operation-not-supported-in-this-environment"),e.next=5,es(t,i);case 5:case"end":return e.stop()}}),e)}))),Fs.apply(this,arguments)}function js(e){var t=Ms().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Us(e,t,n){return Vs.apply(this,arguments)}function Vs(){return Vs=re(te().mark((function e(t,n,r){var i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ms(),o=i.cordova,a=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=o.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Wn(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Jr()&&document.addEventListener("visibilitychange",l,!1),a=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,a(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Vs.apply(this,arguments)}function zs(e){var t,n,r,i,o,a,u,s,c,l,f=Ms();Yn("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Yn("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Yn("function"===typeof(null===(o=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Yn("function"===typeof(null===(s=null===(u=null===(a=null===f||void 0===f?void 0:f.cordova)||void 0===a?void 0:a.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Yn("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Hs(e){return Gs.apply(this,arguments)}function Gs(){return(Gs=re(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ws(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ws(e){if(Zn(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var qs=function(e){de(n,e);var t=ye(n);function n(){var e;return ue(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return ce(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),In(pe(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Zu);function Ks(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Js(),postBody:null,tenantId:e.tenantId,error:Wn(e,"no-auth-event")}}function Xs(e,t){return $s()._set(ec(e),t)}function Ys(e){return Qs.apply(this,arguments)}function Qs(){return Qs=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$s()._get(ec(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,$s()._remove(ec(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Qs.apply(this,arguments)}function Zs(e,t){var n,r,i=function(e){var t=tc(e),n=t.link?decodeURIComponent(t.link):void 0,r=tc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return tc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var o=tc(i),a=o.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(o.firebaseError)):null,u=null===(r=null===(n=null===a||void 0===a?void 0:a.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Wn(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Js(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function $s(){return $n(ya)}function ec(e){return Wr("authEvent",e.config.apiKey,e.name)}function tc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=o(t=n)||Xe(t)||u(t)||s();r[0];return ze(r.slice(1).join("?"))}var nc=function(){function e(){ue(this,e),this._redirectPersistence=wa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ku,this._overrideRedirectResult=Lu}return ce(e,[{key:"_initialize",value:function(){var e=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new qs(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Gn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=re(te().mark((function e(t,n,r,i){var o,a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zs(t),e.next=3,this._initialize(t);case 3:return o=e.sent,e.next=6,o.initialized();case 6:return o.resetRedirect(),Ou.clear(),e.next=10,this._originValidation(t);case 10:return a=Ks(t,r,i),e.next=13,Xs(t,a);case 13:return e.next=15,Ls(t,a,n);case 15:return u=e.sent,e.next=18,js(u);case 18:return s=e.sent,e.abrupt("return",Us(t,o,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Fs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Ms(),r=n.universalLinks,i=n.handleOpenURL,o=n.BuildInfo,a=setTimeout(re(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ys(e);case 2:t.onEvent(ic());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=re(te().mark((function n(r){var i,o;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(a),n.next=3,Ys(e);case 3:i=n.sent,o=null,i&&(null===r||void 0===r?void 0:r.url)&&(o=Zs(i,r.url)),t.onEvent(o||ic());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(o.packageName.toLowerCase(),"://");Ms().handleOpenURL=function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),rc=nc;function ic(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Wn("no-auth-event")}}function oc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ac(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return!("file:"!==oc()&&"ionic:"!==oc()&&"capacitor:"!==oc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function uc(){return Re()&&11===(null===document||void 0===document?void 0:document.documentMode)}function sc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return/Edge\/\d+/.test(e)}function cc(){try{var e=self.localStorage,t=_a();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se();return uc()||sc(e)}()||De()}catch(n){return lc()&&De()}return!1}function lc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function fc(){return("http:"===oc()||"https:"===oc()||Oe()||ac())&&!(Ne()||Te())&&cc()&&!lc()}function hc(){return ac()&&"undefined"!==typeof document}function dc(){return pc.apply(this,arguments)}function pc(){return(pc=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vc={LOCAL:"local",NONE:"none",SESSION:"session"},mc=Yn,yc="persistence";function gc(e,t){mc(Object.values(vc).includes(t),e,"invalid-persistence-type"),Ne()?mc(t!==vc.SESSION,e,"unsupported-persistence-type"):Te()?mc(t===vc.NONE,e,"unsupported-persistence-type"):lc()?mc(t===vc.NONE||t===vc.LOCAL&&De(),e,"unsupported-persistence-type"):mc(t===vc.NONE||cc(),e,"unsupported-persistence-type")}function wc(e){return bc.apply(this,arguments)}function bc(){return bc=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=kc(),r=Wr(yc,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),bc.apply(this,arguments)}function kc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var _c=Yn,Ec=function(){function e(){ue(this,e),this.browserResolver=$n(Ss),this.cordovaResolver=$n(rc),this.underlyingResolver=null,this._redirectPersistence=wa,this._completeRedirectFn=Ku,this._overrideRedirectResult=Lu}return ce(e,[{key:"_initialize",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=re(te().mark((function e(t,n,r,i){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=re(te().mark((function e(t,n,r,i){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return hc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return _c(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,dc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ic(e){return e.unwrap()}function Ac(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new Oc(e,function(e,t){var n,r=Ke(e),i=t;return Yn(t.customData.operationType,r,"argument-error"),Yn(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ca._fromError(r,i)}(e,t));else if(i){var o=Cc(t),a=t;o&&(a.credential=o,a.tenantId=i.tenantId||void 0,a.email=i.email||void 0,a.phoneNumber=i.phoneNumber||void 0)}}function Cc(e){var t=(e instanceof Pe?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Pe)&&"temporaryProof"in t&&"phoneNumber"in t)return vu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===On)return null;switch(r){case Tn:n=$i;break;case Sn:n=Ji;break;case xn:n=eo;break;case Nn:n=ro;break;default:var i=t.oauthIdToken,o=t.oauthAccessToken,a=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return o||a||i||u?u?r.startsWith("saml.")?to._create(r,u):ji._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:o}):new Zi(r).credential({idToken:i,accessToken:o,rawNonce:s}):null}return e instanceof Pe?n.credentialFromError(e):n.credentialFromResult(e)}function Sc(e,t){return t.catch((function(t){throw t instanceof Pe&&Ac(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Cc(t)),additionalUserInfo:ua(e),user:Nc.getOrCreate(r)}}))}function xc(e,t){return Tc.apply(this,arguments)}function Tc(){return Tc=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Sc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Tc.apply(this,arguments)}var Oc=function(){function e(t,n){ue(this,e),this.resolver=n,this.auth=t.wrapped()}return ce(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Sc(Ic(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Nc=function(){function e(t){ue(this,e),this._delegate=t,this.multiFactor=function(e){var t=Ke(e);return da.has(t)||da.set(t,ha._fromUser(t)),da.get(t)}(t)}return ce(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sc(this.auth,Ao(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xc(this.auth,cu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sc(this.auth,Su(this._delegate,t,Ec)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wc(si(this.auth));case 2:return e.abrupt("return",Hu(this._delegate,t,Ec));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sc(this.auth,So(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return xc(this.auth,function(e,t,n){return fu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Sc(this.auth,function(e,t,n){return Cu.apply(this,arguments)}(this._delegate,e,Ec))}},{key:"reauthenticateWithRedirect",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wc(si(this.auth));case 2:return e.abrupt("return",Vu(this._delegate,t,Ec));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Xo.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ho(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return $o(Ke(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return $o(Ke(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return pu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Jo.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Yo.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Nc.USER_MAP=new WeakMap;var Rc=Yn,Dc=function(){function e(t,n){if(ue(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Rc(r,"invalid-api-key",{appName:t.name}),Rc(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Ec:void 0;this._delegate=n.initialize({options:{persistence:Mc(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(jn),this.linkUnderlyingAuth()}return ce(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Nc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){li(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Bo.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Fo(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Lo.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sc(this._delegate,Vo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ko.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ki.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rc(fc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Wu(this._delegate,Ec);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Sc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){si(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Pc(e,t,n),i=r.next,o=r.error,a=r.complete;return this._delegate.onAuthStateChanged(i,o,a)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Pc(e,t,n),i=r.next,o=r.error,a=r.complete;return this._delegate.onIdTokenChanged(i,o,a)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ho.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Mo.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gc(this._delegate,t),e.t0=t,e.next=e.t0===vc.SESSION?4:e.t0===vc.LOCAL?6:e.t0===vc.NONE?11:13;break;case 4:return n=wa,e.abrupt("break",14);case 6:return e.next=8,$n(za)._isAvailable();case 8:return r=e.sent,n=r?za:ya,e.abrupt("break",14);case 11:return n=Gr,e.abrupt("break",14);case 13:return e.abrupt("return",Gn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Sc(this._delegate,function(e){return so.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Sc(this._delegate,Eo(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Sc(this._delegate,function(e,t){return No.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Sc(this._delegate,function(e,t,n){return Eo(Ke(e),Xi.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Sc(this._delegate,function(e,t,n){return Go.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return xc(this._delegate,function(e,t,n){return su.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rc(fc(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Sc(this._delegate,Iu(this._delegate,t,Ec)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rc(fc(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,wc(this._delegate);case 3:return e.abrupt("return",ju(this._delegate,t,Ec));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Uo.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Pc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Nc.getOrCreate(e))},error:t,complete:n}}function Mc(e,t){var n=function(e,t){var n=kc();if(!n)return[];var r=Wr(yc,e,t);switch(n.getItem(r)){case vc.NONE:return[Gr];case vc.LOCAL:return[za,wa];case vc.SESSION:return[wa];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(za)||n.push(za),"undefined"!==typeof window)for(var r=0,i=[ya,wa];r<i.length;r++){var o=i[r];n.includes(o)||n.push(o)}return n.includes(Gr)||n.push(Gr),n}Dc.Persistence=vc;var Lc=function(){function e(){ue(this,e),this.providerId="phone",this._delegate=new vu(Ic(_n.auth()))}return ce(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return vu.credential(e,t)}}]),e}();Lc.PHONE_SIGN_IN_METHOD=vu.PHONE_SIGN_IN_METHOD,Lc.PROVIDER_ID=vu.PROVIDER_ID;var Bc,Fc=Yn,jc=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_n.app();ue(this,e),Fc(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new ou(t,n,i.auth()),this.type=this._delegate.type}return ce(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Bc=_n).INTERNAL.registerComponent(new Qe("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Dc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Rn,PASSWORD_RESET:Dn,RECOVER_EMAIL:Pn,REVERT_SECOND_FACTOR_ADDITION:Mn,VERIFY_AND_CHANGE_EMAIL:Ln,VERIFY_EMAIL:Bn}},EmailAuthProvider:Xi,FacebookAuthProvider:Ji,GithubAuthProvider:eo,GoogleAuthProvider:$i,OAuthProvider:Zi,SAMLAuthProvider:no,PhoneAuthProvider:Lc,PhoneMultiFactorGenerator:Os,RecaptchaVerifier:jc,TwitterAuthProvider:ro,Auth:Dc,AuthCredential:di,Error:Pe}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Bc.registerVersion("@firebase/auth-compat","0.2.17");var Uc,Vc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},zc={},Hc=Hc||{},Gc=Vc||self;function Wc(){}function qc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Kc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Xc="closure_uid_"+(1e9*Math.random()>>>0),Yc=0;function Qc(e,t,n){return e.call.apply(e.bind,arguments)}function Zc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Jc(e,t,n){return(Jc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Qc:Zc).apply(null,arguments)}function $c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function el(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function tl(){this.s=this.s,this.o=this.o}var nl={};tl.prototype.s=!1,tl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Xc)&&e[Xc]||(e[Xc]=++Yc)}(this);delete nl[e]}},tl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var rl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},il=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function ol(e){return Array.prototype.concat.apply([],arguments)}function al(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ul(e){return/^[\s\xa0]*$/.test(e)}var sl,cl=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ll(e,t){return-1!=e.indexOf(t)}function fl(e,t){return e<t?-1:e>t?1:0}e:{var hl=Gc.navigator;if(hl){var dl=hl.userAgent;if(dl){sl=dl;break e}}sl=""}function pl(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function vl(e){var t={};for(var n in e)t[n]=e[n];return t}var ml="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yl(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ml.length;o++)n=ml[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function gl(e){return gl[" "](e),e}gl[" "]=Wc;var wl,bl=ll(sl,"Opera"),kl=ll(sl,"Trident")||ll(sl,"MSIE"),_l=ll(sl,"Edge"),El=_l||kl,Il=ll(sl,"Gecko")&&!(ll(sl.toLowerCase(),"webkit")&&!ll(sl,"Edge"))&&!(ll(sl,"Trident")||ll(sl,"MSIE"))&&!ll(sl,"Edge"),Al=ll(sl.toLowerCase(),"webkit")&&!ll(sl,"Edge");function Cl(){var e=Gc.document;return e?e.documentMode:void 0}e:{var Sl="",xl=function(){var e=sl;return Il?/rv:([^\);]+)(\)|;)/.exec(e):_l?/Edge\/([\d\.]+)/.exec(e):kl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Al?/WebKit\/(\S+)/.exec(e):bl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(xl&&(Sl=xl?xl[1]:""),kl){var Tl=Cl();if(null!=Tl&&Tl>parseFloat(Sl)){wl=String(Tl);break e}}wl=Sl}var Ol,Nl={};function Rl(){return function(e){var t=Nl;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=cl(String(wl)).split("."),n=cl("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=fl(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||fl(0==o[2].length,0==a[2].length)||fl(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}if(Gc.document&&kl){var Dl=Cl();Ol=Dl||(parseInt(wl,10)||void 0)}else Ol=void 0;var Pl=Ol,Ml=function(){if(!Gc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Gc.addEventListener("test",Wc,t),Gc.removeEventListener("test",Wc,t)}catch(KN){}return e}();function Ll(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Bl(e,t){if(Ll.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Il){e:{try{gl(t.nodeName);var i=!0;break e}catch(XN){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Fl[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Bl.Z.h.call(this)}}Ll.prototype.h=function(){this.defaultPrevented=!0},el(Bl,Ll);var Fl={2:"touch",3:"pen",4:"mouse"};Bl.prototype.h=function(){Bl.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var jl="closure_listenable_"+(1e6*Math.random()|0),Ul=0;function Vl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ul,this.ca=this.fa=!1}function zl(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Hl(e){this.src=e,this.g={},this.h=0}function Gl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=rl(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(zl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Wl(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}Hl.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=Wl(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new Vl(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var ql="closure_lm_"+(1e6*Math.random()|0),Kl={};function Xl(e,t,n,r,i){if(r&&r.once)return Ql(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Xl(e,t[o],n,r,i);return null}return n=rf(n),e&&e[jl]?e.N(t,n,Kc(r)?!!r.capture:!!r,i):Yl(e,t,n,!1,r,i)}function Yl(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=Kc(i)?!!i.capture:!!i,u=tf(e);if(u||(e[ql]=u=new Hl(e)),(n=u.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ef;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ml||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($l(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ql(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Ql(e,t[o],n,r,i);return null}return n=rf(n),e&&e[jl]?e.O(t,n,Kc(r)?!!r.capture:!!r,i):Yl(e,t,n,!0,r,i)}function Zl(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Zl(e,t[o],n,r,i);else r=Kc(r)?!!r.capture:!!r,n=rf(n),e&&e[jl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Wl(o=e.g[t],n,r,i))&&(zl(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=tf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Wl(t,n,r,i)),(n=-1<e?t[e]:null)&&Jl(n))}function Jl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[jl])Gl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($l(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=tf(t))?(Gl(n,e),0==n.h&&(n.src=null,t[ql]=null)):zl(e)}}}function $l(e){return e in Kl?Kl[e]:Kl[e]="on"+e}function ef(e,t){if(e.ca)e=!0;else{t=new Bl(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Jl(e),e=n.call(r,t)}return e}function tf(e){return(e=e[ql])instanceof Hl?e:null}var nf="__closure_events_fn_"+(1e9*Math.random()>>>0);function rf(e){return"function"===typeof e?e:(e[nf]||(e[nf]=function(t){return e.handleEvent(t)}),e[nf])}function of(){tl.call(this),this.i=new Hl(this),this.P=this,this.I=null}function af(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Ll(t,e);else if(t instanceof Ll)t.target=t.target||e;else{var i=t;yl(t=new Ll(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=uf(a,r,!0,t)&&i}if(i=uf(a=t.g=e,r,!0,t)&&i,i=uf(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=uf(a=t.g=n[o],r,!1,t)&&i}function uf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var u=a.listener,s=a.ia||a.src;a.fa&&Gl(e.i,a),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}el(of,tl),of.prototype[jl]=!0,of.prototype.removeEventListener=function(e,t,n,r){Zl(this,e,t,n,r)},of.prototype.M=function(){if(of.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)zl(n[r]);delete t.g[e],t.h--}}this.I=null},of.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},of.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var sf=Gc.JSON.stringify;function cf(){var e=yf,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var lf,ff=function(){function e(){ue(this,e),this.h=this.g=null}return ce(e,[{key:"add",value:function(e,t){var n=hf.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),hf=new(function(){function e(t,n){ue(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return ce(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new df}),(function(e){return e.reset()})),df=function(){function e(){ue(this,e),this.next=this.g=this.h=null}return ce(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function pf(e){Gc.setTimeout((function(){throw e}),0)}function vf(e,t){lf||function(){var e=Gc.Promise.resolve(void 0);lf=function(){e.then(gf)}}(),mf||(lf(),mf=!0),yf.add(e,t)}var mf=!1,yf=new ff;function gf(){for(var e;e=cf();){try{e.h.call(e.g)}catch(KN){pf(KN)}var t=hf;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}mf=!1}function wf(e,t){of.call(this),this.h=e||1,this.g=t||Gc,this.j=Jc(this.kb,this),this.l=Date.now()}function bf(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function kf(e,t,n){if("function"===typeof e)n&&(e=Jc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Jc(e.handleEvent,e)}return 2147483647<Number(t)?-1:Gc.setTimeout(e,t||0)}function _f(e){e.g=kf((function(){e.g=null,e.i&&(e.i=!1,_f(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}el(wf,of),(Uc=wf.prototype).da=!1,Uc.S=null,Uc.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),af(this,"tick"),this.da&&(bf(this),this.start()))}},Uc.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Uc.M=function(){wf.Z.M.call(this),bf(this),delete this.g};var Ef=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return ce(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:_f(this)}},{key:"M",value:function(){In(pe(n.prototype),"M",this).call(this),this.g&&(Gc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(tl);function If(e){tl.call(this),this.h=e,this.g={}}el(If,tl);var Af=[];function Cf(e,t,n,r){Array.isArray(n)||(n&&(Af[0]=n.toString()),n=Af);for(var i=0;i<n.length;i++){var o=Xl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Sf(e){pl(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Jl(e)}),e),e.g={}}function xf(){this.g=!0}function Tf(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return sf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}If.prototype.M=function(){If.Z.M.call(this),Sf(this)},If.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xf.prototype.Aa=function(){this.g=!1},xf.prototype.info=function(){};var Of={},Nf=null;function Rf(){return Nf=Nf||new of}function Df(e){Ll.call(this,Of.Ma,e)}function Pf(e){var t=Rf();af(t,new Df(t,e))}function Mf(e,t){Ll.call(this,Of.STAT_EVENT,e),this.stat=t}function Lf(e){var t=Rf();af(t,new Mf(t,e))}function Bf(e,t){Ll.call(this,Of.Na,e),this.size=t}function Ff(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Gc.setTimeout((function(){e()}),t)}Of.Ma="serverreachability",el(Df,Ll),Of.STAT_EVENT="statevent",el(Mf,Ll),Of.Na="timingevent",el(Bf,Ll);var jf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Uf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Vf(){}function zf(e){return e.h||(e.h=e.i())}function Hf(){}Vf.prototype.h=null;var Gf,Wf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function qf(){Ll.call(this,"d")}function Kf(){Ll.call(this,"c")}function Xf(){}function Yf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new If(this),this.P=Zf,e=El?125:void 0,this.W=new wf(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Qf}function Qf(){this.i=null,this.g="",this.h=!1}el(qf,Ll),el(Kf,Ll),el(Xf,Vf),Xf.prototype.g=function(){return new XMLHttpRequest},Xf.prototype.i=function(){return{}},Gf=new Xf;var Zf=45e3,Jf={},$f={};function eh(e,t,n){e.K=1,e.v=Eh(yh(t)),e.s=n,e.U=!0,th(e,null)}function th(e,t){e.F=Date.now(),oh(e),e.A=yh(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Lh(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Qf,e.g=Bd(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ef(Jc(e.Ia,e,e.g),e.O)),Cf(e.V,e.g,"readystatechange",e.gb),t=e.H?vl(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Pf(1),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",u=o.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");a=2<=f.length&&"type"==f[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function nh(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function rh(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=ih(e,n))==$f){4==t&&(e.o=4,Lf(14),i=!1),Tf(e.j,e.m,null,"[Incomplete Response]");break}if(r==Jf){e.o=4,Lf(15),Tf(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Tf(e.j,e.m,r,null),lh(e,r)}nh(e)&&r!=$f&&r!=Jf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Lf(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Td(t),t.L=!0,Lf(11))):(Tf(e.j,e.m,n,"[Invalid Chunked Response]"),ch(e),sh(e))}function ih(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?$f:(n=Number(t.substring(n,r)),isNaN(n)?Jf:(r+=1)+n>t.length?$f:(t=t.substr(r,n),e.C=r+n,t))}function oh(e){e.Y=Date.now()+e.P,ah(e,e.P)}function ah(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ff(Jc(e.eb,e),t)}function uh(e){e.B&&(Gc.clearTimeout(e.B),e.B=null)}function sh(e){0==e.l.G||e.I||Rd(e.l,e)}function ch(e){uh(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,bf(e.W),Sf(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function lh(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Hh(n.i,e)))if(n.I=e.N,!e.J&&Hh(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Nd(n),bd(n)}xd(n),Lf(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ff(Jc(n.ab,n),6e3));if(1>=zh(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Pd(n,11)}else if((e.J||n.g==e)&&Nd(n),!ul(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var u=o[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=o[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(ll(l,"spdy")||ll(l,"quic")||ll(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Gh(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,_h(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Ld(r,r.H?r.la:null,r.W),d.J){Wh(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(uh(p),oh(p)),r.g=d}else Sd(r);0<n.l.length&&Ed(n)}else"stop"!=o[0]&&"close"!=o[0]||Pd(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Pd(n,7):wd(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Pf(4)}catch(o){}}function fh(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(qc(e)||"string"===typeof e)il(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(qc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(qc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function hh(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof hh)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function dh(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];ph(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)ph(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function ph(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Uc=Yf.prototype).setTimeout=function(e){this.P=e},Uc.gb=function(e){e=e.target;var t=this.L;t&&3==pd(e)?t.l():this.Ia(e)},Uc.Ia=function(e){try{if(e==this.g)e:{var t=pd(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||El||this.g&&(this.h.h||this.g.ga()||vd(this.g)))){this.I||4!=t||7==n||Pf(8==n||0>=r?3:2),uh(this);var i=this.g.ba();this.N=i;t:if(nh(this)){var o=vd(this.g);e="";var a=o.length,u=4==pd(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ch(this),sh(this);var s="";break t}this.h.i=new Gc.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:u&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ul(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Lf(12),ch(this),sh(this);break e}Tf(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,lh(this,i)}this.U?(rh(this,t,s),El&&this.i&&3==t&&(Cf(this.V,this.W,"tick",this.fb),this.W.start())):(Tf(this.j,this.m,s,null),lh(this,s)),4==t&&ch(this),this.i&&!this.I&&(4==t?Rd(this.l,this):(this.i=!1,oh(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Lf(12)):(this.o=0,Lf(13)),ch(this),sh(this)}}}catch(t){}},Uc.fb=function(){if(this.g){var e=pd(this.g),t=this.g.ga();this.C<t.length&&(uh(this),rh(this,e,t),this.i&&4!=e&&oh(this))}},Uc.cancel=function(){this.I=!0,ch(this)},Uc.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Pf(3),Lf(17)),ch(this),this.o=2,sh(this)):ah(this,this.Y-e)},(Uc=hh.prototype).R=function(){dh(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Uc.T=function(){return dh(this),this.g.concat()},Uc.get=function(e,t){return ph(this.h,e)?this.h[e]:t},Uc.set=function(e,t){ph(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Uc.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var vh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mh(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof mh){this.g=void 0!==t?t:e.g,gh(this,e.j),this.s=e.s,wh(this,e.i),bh(this,e.m),this.l=e.l,t=e.h;var n=new Rh;n.i=t.i,t.g&&(n.g=new hh(t.g),n.h=t.h),kh(this,n),this.o=e.o}else e&&(n=String(e).match(vh))?(this.g=!!t,gh(this,n[1]||"",!0),this.s=Ih(n[2]||""),wh(this,n[3]||"",!0),bh(this,n[4]),this.l=Ih(n[5]||"",!0),kh(this,n[6]||"",!0),this.o=Ih(n[7]||"")):(this.g=!!t,this.h=new Rh(null,this.g))}function yh(e){return new mh(e)}function gh(e,t,n){e.j=n?Ih(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function wh(e,t,n){e.i=n?Ih(t,!0):t}function bh(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function kh(e,t,n){t instanceof Rh?(e.h=t,function(e,t){t&&!e.j&&(Dh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ph(this,t),Lh(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ah(t,Oh)),e.h=new Rh(t,e.g))}function _h(e,t,n){e.h.set(t,n)}function Eh(e){return _h(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ih(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ah(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ch),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ch(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mh.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ah(t,Sh,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ah(t,Sh,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ah(n,"/"==n.charAt(0)?Th:xh,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ah(n,Nh)),e.join("")};var Sh=/[#\/\?@]/g,xh=/[#\?:]/g,Th=/[#\?]/g,Oh=/[#\?@]/g,Nh=/#/g;function Rh(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Dh(e){e.g||(e.g=new hh,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ph(e,t){Dh(e),t=Bh(e,t),ph(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,ph((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&dh(e)))}function Mh(e,t){return Dh(e),t=Bh(e,t),ph(e.g.h,t)}function Lh(e,t,n){Ph(e,t),0<n.length&&(e.i=null,e.g.set(Bh(e,t),al(n)),e.h+=n.length)}function Bh(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Uc=Rh.prototype).add=function(e,t){Dh(this),this.i=null,e=Bh(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Uc.forEach=function(e,t){Dh(this),this.g.forEach((function(n,r){il(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Uc.T=function(){Dh(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},Uc.R=function(e){Dh(this);var t=[];if("string"===typeof e)Mh(this,e)&&(t=ol(t,this.g.get(Bh(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=ol(t,e[n])}return t},Uc.set=function(e,t){return Dh(this),this.i=null,Mh(this,e=Bh(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Uc.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Uc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var Fh=ce((function e(t,n){ue(this,e),this.h=t,this.g=n}));function jh(e){this.l=e||Uh,Gc.PerformanceNavigationTiming?e=0<(e=Gc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Gc.g&&Gc.g.Ea&&Gc.g.Ea()&&Gc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Uh=10;function Vh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function zh(e){return e.h?1:e.g?e.g.size:0}function Hh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Gh(e,t){e.g?e.g.add(t):e.h=t}function Wh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function qh(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=le(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(o){r.e(o)}finally{r.f()}return n}return al(e.i)}function Kh(){}function Xh(){this.g=new Kh}function Yh(e,t,n){var r=n||"";try{fh(e,(function(e,n){var i=e;Kc(e)&&(i=sf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Qh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(XN){}}function Zh(e){this.l=e.$b||null,this.j=e.ib||!1}function Jh(e,t){of.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=$h,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jh.prototype.cancel=function(){if(this.i=qh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=le(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Kh.prototype.stringify=function(e){return Gc.JSON.stringify(e,void 0)},Kh.prototype.parse=function(e){return Gc.JSON.parse(e,void 0)},el(Zh,Vf),Zh.prototype.g=function(){return new Jh(this.l,this.j)},Zh.prototype.i=function(e){return function(){return e}}({}),el(Jh,of);var $h=0;function ed(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function td(e){e.readyState=4,e.l=null,e.j=null,e.A=null,nd(e)}function nd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Uc=Jh.prototype).open=function(e,t){if(this.readyState!=$h)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,nd(this)},Uc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Gc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Uc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,td(this)),this.readyState=$h},Uc.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,nd(this)),this.g&&(this.readyState=3,nd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Gc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ed(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Uc.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?td(this):nd(this),3==this.readyState&&ed(this)}},Uc.Ua=function(e){this.g&&(this.response=this.responseText=e,td(this))},Uc.Ta=function(e){this.g&&(this.response=e,td(this))},Uc.ha=function(){this.g&&td(this)},Uc.setRequestHeader=function(e,t){this.v.append(e,t)},Uc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Uc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Jh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var rd=Gc.JSON.parse;function id(e){of.call(this),this.headers=new hh,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=od,this.K=this.L=!1}el(id,of);var od="",ad=/^https?$/i,ud=["POST","PUT"];function sd(e){return"content-type"==e.toLowerCase()}function cd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ld(e),hd(e)}function ld(e){e.D||(e.D=!0,af(e,"complete"),af(e,"error"))}function fd(e){if(e.h&&"undefined"!=typeof Hc&&(!e.C[1]||4!=pd(e)||2!=e.ba()))if(e.v&&4==pd(e))kf(e.Fa,0,e);else if(af(e,"readystatechange"),4==pd(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(vh)[1]||null;if(!o&&Gc.self&&Gc.self.location){var a=Gc.self.location.protocol;o=a.substr(0,a.length-1)}i=!ad.test(o?o.toLowerCase():"")}t=i}if(t)af(e,"complete"),af(e,"success");else{e.m=6;try{var u=2<pd(e)?e.g.statusText:""}catch(WN){u=""}e.j=u+" ["+e.ba()+"]",ld(e)}}finally{hd(e)}}}function hd(e,t){if(e.g){dd(e);var n=e.g,r=e.C[0]?Wc:null;e.g=null,e.C=null,t||af(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function dd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Gc.clearTimeout(e.A),e.A=null)}function pd(e){return e.g?e.g.readyState:0}function vd(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case od:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(fR){return null}}function md(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return pl(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):_h(e,t,n))}function yd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function gd(e){this.za=0,this.l=[],this.h=new xf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=yd("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=yd("baseRetryDelayMs",5e3,e),this.$a=yd("retryDelaySeedMs",1e4,e),this.Ya=yd("forwardChannelMaxRetries",2,e),this.ra=yd("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new jh(e&&e.concurrentRequestLimit),this.Ca=new Xh,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function wd(e){if(kd(e),3==e.G){var t=e.V++,n=yh(e.F);_h(n,"SID",e.J),_h(n,"RID",t),_h(n,"TYPE","terminate"),Ad(e,n),(t=new Yf(e,e.h,t,void 0)).K=2,t.v=Eh(yh(n)),n=!1,Gc.navigator&&Gc.navigator.sendBeacon&&(n=Gc.navigator.sendBeacon(t.v.toString(),"")),!n&&Gc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Bd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),oh(t)}Md(e)}function bd(e){e.g&&(Td(e),e.g.cancel(),e.g=null)}function kd(e){bd(e),e.u&&(Gc.clearTimeout(e.u),e.u=null),Nd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Gc.clearTimeout(e.m),e.m=null)}function _d(e,t){e.l.push(new Fh(e.Za++,t)),3==e.G&&Ed(e)}function Ed(e){Vh(e.i)||e.m||(e.m=!0,vf(e.Ha,e),e.C=0)}function Id(e,t){var n;n=t?t.m:e.V++;var r=yh(e.F);_h(r,"SID",e.J),_h(r,"RID",n),_h(r,"AID",e.U),Ad(e,r),e.o&&e.s&&md(r,e.o,e.s),n=new Yf(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Cd(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Gh(e.i,n),eh(n,r,t)}function Ad(e,t){e.j&&fh({},(function(e,n){_h(t,n,e)}))}function Cd(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Jc(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=o))o=Math.max(0,i[s].h-100),u=!1;else try{Yh(l,a,"req"+c+"_")}catch(fp){r&&r(l)}}if(u){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Sd(e){e.g||e.u||(e.Y=1,vf(e.Ga,e),e.A=0)}function xd(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Ff(Jc(e.Ga,e),Dd(e,e.A)),e.A++,!0)}function Td(e){null!=e.B&&(Gc.clearTimeout(e.B),e.B=null)}function Od(e){e.g=new Yf(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=yh(e.oa);_h(t,"RID","rpc"),_h(t,"SID",e.J),_h(t,"CI",e.N?"0":"1"),_h(t,"AID",e.U),Ad(e,t),_h(t,"TYPE","xmlhttp"),e.o&&e.s&&md(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Eh(yh(t)),n.s=null,n.U=!0,th(n,e)}function Nd(e){null!=e.v&&(Gc.clearTimeout(e.v),e.v=null)}function Rd(e,t){var n=null;if(e.g==t){Nd(e),Td(e),e.g=null;var r=2}else{if(!Hh(e.i,t))return;n=t.D,Wh(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;af(r=Rf(),new Bf(r,n,t,i)),Ed(e)}else Sd(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(zh(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Ff(Jc(e.Ha,e,t),Dd(e,e.C)),e.C++,!0))}(e,t)||2==r&&xd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Pd(e,5);break;case 4:Pd(e,10);break;case 3:Pd(e,6);break;default:Pd(e,2)}}function Dd(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Pd(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Jc(e.jb,e);n||(n=new mh("//www.google.com/images/cleardot.gif"),Gc.location&&"http"==Gc.location.protocol||gh(n,"https"),Eh(n)),function(e,t){var n=new xf;if(Gc.Image){var r=new Image;r.onload=$c(Qh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=$c(Qh,n,r,"TestLoadImage: error",!1,t),r.onabort=$c(Qh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=$c(Qh,n,r,"TestLoadImage: timeout",!1,t),Gc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Lf(2);e.G=0,e.j&&e.j.va(t),Md(e),kd(e)}function Md(e){e.G=0,e.I=-1,e.j&&(0==qh(e.i).length&&0==e.l.length||(e.i.i.length=0,al(e.l),e.l.length=0),e.j.ua())}function Ld(e,t,n){var r=function(e){return e instanceof mh?yh(e):new mh(e,void 0)}(n);if(""!=r.i)t&&wh(r,t+"."+r.i),bh(r,r.m);else{var i=Gc.location;r=function(e,t,n,r){var i=new mh(null,void 0);return e&&gh(i,e),t&&wh(i,t),n&&bh(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&pl(e.aa,(function(e,t){_h(r,t,e)})),t=e.D,n=e.sa,t&&n&&_h(r,t,n),_h(r,"VER",e.ma),Ad(e,r),r}function Bd(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new id(new Zh({ib:!0})):new id(e.qa)).L=e.H,t}function Fd(){}function jd(){if(kl&&!(10<=Number(Pl)))throw Error("Environmental error: no available transport.")}function Ud(e,t){of.call(this),this.g=new gd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ul(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ul(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Hd(this)}function Vd(e){qf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function zd(){Kf.call(this),this.status=1}function Hd(e){this.g=e}(Uc=id.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Gf.g(),this.C=this.u?zf(this.u):zf(Gf),this.g.onreadystatechange=Jc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(XN){return void cd(this,XN)}e=n||"";var i=new hh(this.headers);r&&fh(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=sd,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Gc.FormData&&e instanceof Gc.FormData,!(0<=rl(ud,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{dd(this),0<this.B&&((this.K=function(e){return kl&&Rl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jc(this.pa,this)):this.A=kf(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(XN){cd(this,XN)}},Uc.pa=function(){"undefined"!=typeof Hc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,af(this,"timeout"),this.abort(8))},Uc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,af(this,"complete"),af(this,"abort"),hd(this))},Uc.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hd(this,!0)),id.Z.M.call(this)},Uc.Fa=function(){this.s||(this.F||this.v||this.l?fd(this):this.cb())},Uc.cb=function(){fd(this)},Uc.ba=function(){try{return 2<pd(this)?this.g.status:-1}catch(GN){return-1}},Uc.ga=function(){try{return this.g?this.g.responseText:""}catch(GN){return""}},Uc.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),rd(t)}},Uc.Da=function(){return this.m},Uc.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Uc=gd.prototype).ma=8,Uc.G=1,Uc.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(fR){}},Uc.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Yf(this,this.h,e,void 0),n=this.s;if(this.P&&(n?yl(n=vl(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Cd(this,t,r),_h(i=yh(this.F),"RID",e),_h(i,"CVER",22),this.D&&_h(i,"X-HTTP-Session-Id",this.D),Ad(this,i),this.o&&n&&md(i,this.o,n),Gh(this.i,t),this.Ra&&_h(i,"TYPE","init"),this.ja?(_h(i,"$req",r),_h(i,"SID","null"),t.$=!0,eh(t,i,null)):eh(t,i,r),this.G=2}}else 3==this.G&&(e?Id(this,e):0==this.l.length||Vh(this.i)||Id(this))},Uc.Ga=function(){if(this.u=null,Od(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Ff(Jc(this.bb,this),e)}},Uc.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Lf(10),bd(this),Od(this))},Uc.ab=function(){null!=this.v&&(this.v=null,bd(this),xd(this),Lf(19))},Uc.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Lf(2)):(this.h.info("Failed to ping google.com"),Lf(1))},(Uc=Fd.prototype).xa=function(){},Uc.wa=function(){},Uc.va=function(){},Uc.ua=function(){},Uc.Oa=function(){},jd.prototype.g=function(e,t){return new Ud(e,t)},el(Ud,of),Ud.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),vf(Jc(e.hb,e,t))),Lf(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Ld(e,null,e.W),Ed(e)},Ud.prototype.close=function(){wd(this.g)},Ud.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,_d(this.g,t)}else this.v?((t={}).__data__=sf(e),_d(this.g,t)):_d(this.g,e)},Ud.prototype.M=function(){this.g.j=null,delete this.j,wd(this.g),delete this.g,Ud.Z.M.call(this)},el(Vd,qf),el(zd,Kf),el(Hd,Fd),Hd.prototype.xa=function(){af(this.g,"a")},Hd.prototype.wa=function(e){af(this.g,new Vd(e))},Hd.prototype.va=function(e){af(this.g,new zd(e))},Hd.prototype.ua=function(){af(this.g,"b")},jd.prototype.createWebChannel=jd.prototype.g,Ud.prototype.send=Ud.prototype.u,Ud.prototype.open=Ud.prototype.m,Ud.prototype.close=Ud.prototype.close,jf.NO_ERROR=0,jf.TIMEOUT=8,jf.HTTP_ERROR=6,Uf.COMPLETE="complete",Hf.EventType=Wf,Wf.OPEN="a",Wf.CLOSE="b",Wf.ERROR="c",Wf.MESSAGE="d",of.prototype.listen=of.prototype.N,id.prototype.listenOnce=id.prototype.O,id.prototype.getLastError=id.prototype.La,id.prototype.getLastErrorCode=id.prototype.Da,id.prototype.getStatus=id.prototype.ba,id.prototype.getResponseJson=id.prototype.Qa,id.prototype.getResponseText=id.prototype.ga,id.prototype.send=id.prototype.ea;var Gd=zc.createWebChannelTransport=function(){return new jd},Wd=zc.getStatEventTarget=function(){return Rf()},qd=zc.ErrorCode=jf,Kd=zc.EventType=Uf,Xd=zc.Event=Of,Yd=zc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Qd=zc.FetchXmlHttpFactory=Zh,Zd=zc.WebChannel=Hf,Jd=zc.XhrIo=id,$d="@firebase/firestore",ep=function(){function e(t){ue(this,e),this.uid=t}return ce(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ep.UNAUTHENTICATED=new ep(null),ep.GOOGLE_CREDENTIALS=new ep("google-credentials-uid"),ep.FIRST_PARTY=new ep("first-party-uid"),ep.MOCK_USER=new ep("mock-user");var tp="9.8.4",np=new ut("@firebase/firestore");function rp(){return np.logLevel}function ip(e){if(np.logLevel<=et.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(up);np.debug.apply(np,["Firestore (".concat(tp,"): ").concat(e)].concat(Ye(i)))}}function op(e){if(np.logLevel<=et.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(up);np.error.apply(np,["Firestore (".concat(tp,"): ").concat(e)].concat(Ye(i)))}}function ap(e){if(np.logLevel<=et.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(up);np.warn.apply(np,["Firestore (".concat(tp,"): ").concat(e)].concat(Ye(i)))}}function up(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function sp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(tp,") INTERNAL ASSERTION FAILED: ")+e;throw op(t),new Error(t)}function cp(e,t){e||sp()}function lp(e,t){return e}var fp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hp=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return ce(n)}(Pe),dp=ce((function e(){var t=this;ue(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),pp=ce((function e(t,n){ue(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),vp=function(){function e(){ue(this,e)}return ce(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ep.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),mp=function(){function e(t){ue(this,e),this.token=t,this.changeListener=null}return ce(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),yp=function(){function e(t){ue(this,e),this.t=t,this.currentUser=ep.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return ce(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new dp;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new dp,e.enqueueRetryable((function(){return i(n.currentUser)}))};var a=function(){var t=o;e.enqueueRetryable(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){ip("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),a()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(ip("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new dp)}}),0),a()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(ip("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(cp("string"==typeof n.accessToken),new pp(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return cp(null===e||"string"==typeof e),new ep(e)}}]),e}(),gp=ce((function e(t,n,r){ue(this,e),this.type="FirstParty",this.user=ep.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),wp=function(){function e(t,n,r){ue(this,e),this.h=t,this.l=n,this.m=r}return ce(e,[{key:"getToken",value:function(){return Promise.resolve(new gp(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ep.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),bp=ce((function e(t){ue(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),kp=function(){function e(t){ue(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return ce(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&ip("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,ip("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){ip("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):ip("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(cp("string"==typeof t.token),e.p=t.token,new bp(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function _p(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Ep=function(){function e(){ue(this,e)}return ce(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=_p(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Ip(e,t){return e<t?-1:e>t?1:0}function Ap(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Cp(e){return e+"\0"}var Sp=function(){function e(t,n){if(ue(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new hp(fp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new hp(fp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new hp(fp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new hp(fp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return ce(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Ip(this.nanoseconds,e.nanoseconds):Ip(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),xp=function(){function e(t){ue(this,e),this.timestamp=t}return ce(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Sp(0,0))}},{key:"max",value:function(){return new e(new Sp(253402300799,999999999))}}]),e}(),Tp=function(){function e(t,n,r){ue(this,e),void 0===n?n=0:n>t.length&&sp(),void 0===r?r=t.length-n:r>t.length-n&&sp(),this.segments=t,this.offset=n,this.len=r}return ce(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Op=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.apply(this,arguments)}return ce(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var u=a[o];if(u.indexOf("//")>=0)throw new hp(fp.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Ye(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Tp),Np=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Rp=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.apply(this,arguments)}return ce(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Np.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,o=function(){if(0===r.length)throw new hp(fp.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},a=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new hp(fp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new hp(fp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(a=!a,i++):"."!==u||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new hp(fp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Tp),Dp=function(){function e(t){ue(this,e),this.path=t}return ce(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Op.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Op.fromString(t))}},{key:"fromName",value:function(t){return new e(Op.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Op.emptyPath())}},{key:"comparator",value:function(e,t){return Op.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Op(t.slice()))}}]),e}(),Pp=ce((function e(t,n,r,i){ue(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Mp(e){return e.fields.find((function(e){return 2===e.kind}))}function Lp(e){return e.fields.filter((function(e){return 2!==e.kind}))}Pp.UNKNOWN_ID=-1;var Bp=ce((function e(t,n){ue(this,e),this.fieldPath=t,this.kind=n})),Fp=function(){function e(t,n){ue(this,e),this.sequenceNumber=t,this.offset=n}return ce(e,null,[{key:"empty",value:function(){return new e(0,Vp.min())}}]),e}();function jp(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=xp.fromTimestamp(1e9===r?new Sp(n+1,0):new Sp(n,r));return new Vp(i,Dp.empty(),t)}function Up(e){return new Vp(e.readTime,e.key,-1)}var Vp=function(){function e(t,n,r){ue(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return ce(e,null,[{key:"min",value:function(){return new e(xp.min(),Dp.empty(),-1)}},{key:"max",value:function(){return new e(xp.max(),Dp.empty(),-1)}}]),e}();function zp(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Dp.comparator(e.documentKey,t.documentKey))?n:Ip(e.largestBatchId,t.largestBatchId)}var Hp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gp=function(){function e(){ue(this,e),this.onCommittedListeners=[]}return ce(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Wp(e){return qp.apply(this,arguments)}function qp(){return qp=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===fp.FAILED_PRECONDITION&&t.message===Hp){e.next=2;break}throw t;case 2:ip("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),qp.apply(this,arguments)}var Kp=function(){function e(t){var n=this;ue(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return ce(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&sp(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=le(t);try{var o=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,o=new Array(i),a=0,u=function(u){var s=u;n(t[s]).next((function(t){o[s]=t,++a===i&&e(o)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Xp=function(){function e(t,n){var r=this;ue(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new dp,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new Zp(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=nv(e.target.error);r.T.reject(new Zp(t,n))}}return ce(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(ip("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new $p(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Zp(n,t)}}}]),e}(),Yp=function(){function e(t,n,r){ue(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(Se())&&op("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return ce(e,[{key:"k",value:function(){var e=re(te().mark((function e(t){var n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return ip("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Zp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new hp(fp.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new hp(fp.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Zp(t,n))},i.onupgradeneeded=function(e){ip("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.O(t,i.transaction,e.oldVersion,n.version).next((function(){ip("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.M&&(this.db.onversionchange=function(e){return n.M(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.M=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=re(te().mark((function e(t,n,r,i){var o,a,u,s,c,l=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="readonly"===n,a=0;case 2:return++a,e.prev=3,e.delegateYield(te().mark((function e(){var n,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=Xp.open(l.db,t,o?"readonly":"readwrite",r),a=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),Kp.reject(e)})).toPromise(),a.catch((function(){})),e.next=7,n.A;case 7:return e.t0=a,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&a<3,ip("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return ip("SimpleDb","Removing database:",e),ev(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!De())return!1;if(e.S())return!0;var t=Se(),n=e.v(t),r=0<n&&n<10,i=e.D(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyBSMi_Nzq32LJD4mU89qtOedm-OX7fY3nU",REACT_APP_FIREBASE_APP_ID:"1:756607647283:web:60f9cb255b2966e533ed46",REACT_APP_FIREBASE_AUTH_DOMAIN:"chatr-dev-38c4c.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-S61JMWH1XJ",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"756607647283",REACT_APP_FIREBASE_PROJECT_ID:"chatr-dev-38c4c",REACT_APP_FIREBASE_STORAGE_BUCKET:"chatr-dev-38c4c.appspot.com"})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Qp=function(){function e(t){ue(this,e),this.$=t,this.B=!1,this.L=null}return ce(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return ev(this.$.delete())}}]),e}(),Zp=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this,fp.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return ce(n)}(hp);function Jp(e){return"IndexedDbTransactionError"===e.name}var $p=function(){function e(t){ue(this,e),this.store=t}return ce(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(ip("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ip("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),ev(n)}},{key:"add",value:function(e){return ip("SimpleDb","ADD",this.store.name,e,e),ev(this.store.add(e))}},{key:"get",value:function(e){var t=this;return ev(this.store.get(e)).next((function(n){return void 0===n&&(n=null),ip("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return ip("SimpleDb","DELETE",this.store.name,e),ev(this.store.delete(e))}},{key:"count",value:function(){return ip("SimpleDb","COUNT",this.store.name),ev(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var o=this.store.getAll(n.range);return new Kp((function(e,t){o.onerror=function(e){t(e.target.error)},o.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Kp((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){ip("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new Kp((function(n,r){t.onerror=function(e){var t=nv(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new Kp((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new Qp(i),a=t(i.primaryKey,i.value,o);if(a instanceof Kp){var u=a.catch((function(e){return o.done(),Kp.reject(e)}));n.push(u)}o.isDone?r():null===o.U?i.continue():i.continue(o.U)}else r()}})).next((function(){return Kp.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function ev(e){return new Kp((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=nv(e.target.error);n(t)}}))}var tv=!1;function nv(e){var t=Yp.v(Se());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new hp("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return tv||(tv=!0,setTimeout((function(){throw r}),0)),r}}return e}var rv=function(){function e(t,n){ue(this,e),this.asyncQueue=t,this.X=n,this.task=null}return ce(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;ip("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=ip,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Jp(e.t4)){e.next=17;break}ip("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Wp(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),iv=function(){function e(t,n){ue(this,e),this.localStore=t,this.persistence=n}return ce(e,[{key:"tt",value:function(){var e=re(te().mark((function e(){var t,n=this,r=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,o=!0;return Kp.doWhile((function(){return!0===o&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return ip("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));o=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var o=n.changes;return r.localStore.indexManager.updateIndexEntries(e,o).next((function(){return r.st(i,n)})).next((function(n){return ip("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return o.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Up(t);zp(r,n)>0&&(n=r)})),new Vp(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),ov=function(){function e(t,n){var r=this;ue(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return ce(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function av(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function uv(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function sv(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}ov.ot=-1;var cv=function(){function e(t,n){ue(this,e),this.comparator=t,this.root=n||fv.EMPTY}return ce(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,fv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new lv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new lv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new lv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new lv(this.root,e,this.comparator,!0)}}]),e}(),lv=function(){function e(t,n,r,i){ue(this,e),this.isReverse=i,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,n&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return ce(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),fv=function(){function e(t,n,r,i,o){ue(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return ce(e,[{key:"copy",value:function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw sp();if(this.right.isRed())throw sp();var e=this.left.check();if(e!==this.right.check())throw sp();return e+(this.isRed()?0:1)}}]),e}();fv.EMPTY=null,fv.RED=!0,fv.BLACK=!1,fv.EMPTY=new(function(){function e(){ue(this,e),this.size=0}return ce(e,[{key:"key",get:function(){throw sp()}},{key:"value",get:function(){throw sp()}},{key:"color",get:function(){throw sp()}},{key:"left",get:function(){throw sp()}},{key:"right",get:function(){throw sp()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new fv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var hv=function(){function e(t){ue(this,e),this.comparator=t,this.data=new cv(this.comparator)}return ce(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new dv(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new dv(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),dv=function(){function e(t){ue(this,e),this.iter=t}return ce(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function pv(e){return e.hasNext()?e.getNext():void 0}var vv=function(){function e(t){ue(this,e),this.fields=t,t.sort(Rp.comparator)}return ce(e,[{key:"unionWith",value:function(t){var n,r=new hv(Rp.comparator),i=le(this.fields);try{for(i.s();!(n=i.n()).done;){var o=n.value;r=r.add(o)}}catch(c){i.e(c)}finally{i.f()}var a,u=le(t);try{for(u.s();!(a=u.n()).done;){var s=a.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=le(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ap(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var mv=function(e){function t(e){ue(this,t),this.binaryString=e}return ce(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Ip(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();mv.EMPTY_BYTE_STRING=new mv("");var yv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gv(e){if(cp(!!e),"string"==typeof e){var t=0,n=yv.exec(e);if(cp(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:wv(e.seconds),nanos:wv(e.nanos)}}function wv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function bv(e){return"string"==typeof e?mv.fromBase64String(e):mv.fromUint8Array(e)}function kv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function _v(e){var t=e.mapValue.fields.__previous_value__;return kv(t)?_v(t):t}function Ev(e){var t=gv(e.mapValue.fields.__local_write_time__.timestampValue);return new Sp(t.seconds,t.nanos)}var Iv=ce((function e(t,n,r,i,o,a,u,s){ue(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Av=function(){function e(t,n){ue(this,e),this.projectId=t,this.database=n||"(default)"}return ce(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Cv(e){return null==e}function Sv(e){return 0===e&&1/e==-1/0}function xv(e){return"number"==typeof e&&Number.isInteger(e)&&!Sv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Tv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ov={nullValue:"NULL_VALUE"};function Nv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?kv(e)?4:Wv(e)?9007199254740991:10:sp()}function Rv(e,t){if(e===t)return!0;var n=Nv(e);if(n!==Nv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ev(e).isEqual(Ev(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=gv(e.timestampValue),r=gv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return bv(e.bytesValue).isEqual(bv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return wv(e.geoPointValue.latitude)===wv(t.geoPointValue.latitude)&&wv(e.geoPointValue.longitude)===wv(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return wv(e.integerValue)===wv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=wv(e.doubleValue),r=wv(t.doubleValue);return n===r?Sv(n)===Sv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ap(e.arrayValue.values||[],t.arrayValue.values||[],Rv);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(av(n)!==av(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Rv(n[i],r[i])))return!1;return!0}(e,t);default:return sp()}}function Dv(e,t){return void 0!==(e.values||[]).find((function(e){return Rv(e,t)}))}function Pv(e,t){if(e===t)return 0;var n=Nv(e),r=Nv(t);if(n!==r)return Ip(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ip(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=wv(e.integerValue||e.doubleValue),r=wv(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Mv(e.timestampValue,t.timestampValue);case 4:return Mv(Ev(e),Ev(t));case 5:return Ip(e.stringValue,t.stringValue);case 6:return function(e,t){var n=bv(e),r=bv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Ip(n[i],r[i]);if(0!==o)return o}return Ip(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Ip(wv(e.latitude),wv(t.latitude));return 0!==n?n:Ip(wv(e.longitude),wv(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=Pv(n[i],r[i]);if(o)return o}return Ip(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Tv.mapValue&&t===Tv.mapValue)return 0;if(e===Tv.mapValue)return 1;if(t===Tv.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var u=Ip(r[a],o[a]);if(0!==u)return u;var s=Pv(n[r[a]],i[o[a]]);if(0!==s)return s}return Ip(r.length,o.length)}(e.mapValue,t.mapValue);default:throw sp()}}function Mv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ip(e,t);var n=gv(e),r=gv(t),i=Ip(n.seconds,r.seconds);return 0!==i?i:Ip(n.nanos,r.nanos)}function Lv(e){return Bv(e)}function Bv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=gv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?bv(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Dp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=le(e.values||[]);try{for(i.s();!(t=i.n()).done;){var o=t.value;r?r=!1:n+=",",n+=Bv(o)}}catch(a){i.e(a)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=le(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var o=t.value;r?r=!1:n+=",",n+="".concat(o,":").concat(Bv(e.fields[o]))}}catch(a){i.e(a)}finally{i.f()}return n+"}"}(e.mapValue):sp();var t,n}function Fv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function jv(e){return!!e&&"integerValue"in e}function Uv(e){return!!e&&"arrayValue"in e}function Vv(e){return!!e&&"nullValue"in e}function zv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hv(e){return!!e&&"mapValue"in e}function Gv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return uv(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Gv(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Gv(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Wv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function qv(e){return"nullValue"in e?Ov:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Fv(Av.empty(),Dp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:sp()}function Kv(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Fv(Av.empty(),Dp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Tv:sp()}function Xv(e,t){var n=Pv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Yv(e,t){var n=Pv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Qv=function(){function e(t){ue(this,e),this.value=t}return ce(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Hv(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gv(t)}},{key:"setAll",value:function(e){var t=this,n=Rp.emptyPath(),r={},i=[];e.forEach((function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=Gv(e):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Hv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Rv(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Hv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){uv(t,(function(t,n){return e[t]=n}));var r,i=le(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;delete e[o]}}catch(a){i.e(a)}finally{i.f()}}},{key:"clone",value:function(){return new e(Gv(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Zv(e){var t=[];return uv(e.fields,(function(e,n){var r=new Rp([e]);if(Hv(n)){var i=Zv(n.mapValue).fields;if(0===i.length)t.push(r);else{var o,a=le(i);try{for(a.s();!(o=a.n()).done;){var u=o.value;t.push(r.child(u))}}catch(s){a.e(s)}finally{a.f()}}}else t.push(r)})),new vv(t)}var Jv=function(){function e(t,n,r,i,o,a){ue(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=o,this.documentState=a}return ce(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Qv.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Qv.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=xp.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,xp.min(),xp.min(),Qv.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,xp.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,xp.min(),Qv.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,xp.min(),Qv.empty(),2)}}]),e}(),$v=ce((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;ue(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.ut=null}));function em(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new $v(e,t,n,r,i,o,a)}function tm(e){var t=lp(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Lv(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Cv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Lv(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Lv(e)})).join(",")),t.ut=n}return t.ut}function nm(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!gm(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Rv(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!bm(e.startAt,t.startAt)&&bm(e.endAt,t.endAt)}function rm(e){return Dp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function im(e,t){return e.filters.filter((function(e){return e instanceof um&&e.field.isEqual(t)}))}function om(e,t,n){var r,i=Ov,o=!0,a=le(im(e,t));try{for(a.s();!(r=a.n()).done;){var u=r.value,s=Ov,c=!0;switch(u.op){case"<":case"<=":s=qv(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Ov}Xv({value:i,inclusive:o},{value:s,inclusive:c})<0&&(i=s,o=c)}}catch(h){a.e(h)}finally{a.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Xv({value:i,inclusive:o},{value:f,inclusive:n.inclusive})<0&&(i=f,o=n.inclusive);break}return{value:i,inclusive:o}}function am(e,t,n){var r,i=Tv,o=!0,a=le(im(e,t));try{for(a.s();!(r=a.n()).done;){var u=r.value,s=Tv,c=!0;switch(u.op){case">=":case">":s=Kv(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Tv}Yv({value:i,inclusive:o},{value:s,inclusive:c})>0&&(i=s,o=c)}}catch(h){a.e(h)}finally{a.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Yv({value:i,inclusive:o},{value:f,inclusive:n.inclusive})>0&&(i=f,o=n.inclusive);break}return{value:i,inclusive:o}}var um=function(e){de(n,e);var t=ye(n);function n(e,r,i){var o;return ue(this,n),(o=t.call(this)).field=e,o.op=r,o.value=i,o}return ce(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Pv(t,this.value)):null!==t&&Nv(this.value)===Nv(t)&&this.at(Pv(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return sp()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new sm(e,t,r):"array-contains"===t?new hm(e,r):"in"===t?new dm(e,r):"not-in"===t?new pm(e,r):"array-contains-any"===t?new vm(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new cm(e,n):new lm(e,n)}}]),n}(function(){return ce((function e(){ue(this,e)}))}()),sm=function(e){de(n,e);var t=ye(n);function n(e,r,i){var o;return ue(this,n),(o=t.call(this,e,r,i)).key=Dp.fromName(i.referenceValue),o}return ce(n,[{key:"matches",value:function(e){var t=Dp.comparator(e.key,this.key);return this.at(t)}}]),n}(um),cm=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this,e,"in",r)).keys=fm("in",r),i}return ce(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(um),lm=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this,e,"not-in",r)).keys=fm("not-in",r),i}return ce(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(um);function fm(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Dp.fromName(e.referenceValue)}))}var hm=function(e){de(n,e);var t=ye(n);function n(e,r){return ue(this,n),t.call(this,e,"array-contains",r)}return ce(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Uv(t)&&Dv(t.arrayValue,this.value)}}]),n}(um),dm=function(e){de(n,e);var t=ye(n);function n(e,r){return ue(this,n),t.call(this,e,"in",r)}return ce(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Dv(this.value.arrayValue,t)}}]),n}(um),pm=function(e){de(n,e);var t=ye(n);function n(e,r){return ue(this,n),t.call(this,e,"not-in",r)}return ce(n,[{key:"matches",value:function(e){if(Dv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Dv(this.value.arrayValue,t)}}]),n}(um),vm=function(e){de(n,e);var t=ye(n);function n(e,r){return ue(this,n),t.call(this,e,"array-contains-any",r)}return ce(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Uv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Dv(t.value.arrayValue,e)}))}}]),n}(um),mm=ce((function e(t,n){ue(this,e),this.position=t,this.inclusive=n})),ym=ce((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";ue(this,e),this.field=t,this.dir=n}));function gm(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function wm(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?Dp.comparator(Dp.fromName(a.referenceValue),n.key):Pv(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function bm(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Rv(e.position[n],t.position[n]))return!1;return!0}var km=ce((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;ue(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function _m(e,t,n,r,i,o,a,u){return new km(e,t,n,r,i,o,a,u)}function Em(e){return new km(e)}function Im(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Am(e){var t,n=le(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Cm(e){return null!==e.collectionGroup}function Sm(e){var t=lp(e);if(null===t.lt){t.lt=[];var n=Am(t),r=Im(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new ym(n)),t.lt.push(new ym(Rp.keyField(),"asc"));else{var i,o=!1,a=le(t.explicitOrderBy);try{for(a.s();!(i=a.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(o=!0)}}catch(c){a.e(c)}finally{a.f()}if(!o){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new ym(Rp.keyField(),s))}}}return t.lt}function xm(e){var t=lp(e);if(!t.ft)if("F"===t.limitType)t.ft=em(t.path,t.collectionGroup,Sm(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=le(Sm(t));try{for(i.s();!(n=i.n()).done;){var o=n.value,a="desc"===o.dir?"asc":"desc";r.push(new ym(o.field,a))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new mm(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new mm(t.startAt.position,t.startAt.inclusive):null;t.ft=em(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function Tm(e,t,n){return new km(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Om(e,t){return nm(xm(e),xm(t))&&e.limitType===t.limitType}function Nm(e){return"".concat(tm(xm(e)),"|lt:").concat(e.limitType)}function Rm(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Lv(t.value));var t})).join(", "),"]")),Cv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Lv(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Lv(e)})).join(",")),"Target(".concat(t,")")}(xm(e)),"; limitType=").concat(e.limitType,")")}function Dm(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Dp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=le(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(o){r.e(o)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=le(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=wm(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Sm(e),t))&&!(e.endAt&&!function(e,t,n){var r=wm(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Sm(e),t))}(e,t)}function Pm(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Mm(e){return function(t,n){var r,i=!1,o=le(Sm(e));try{for(o.s();!(r=o.n()).done;){var a=r.value,u=Lm(a,t,n);if(0!==u)return u;i=i||a.field.isKeyField()}}catch(s){o.e(s)}finally{o.f()}return 0}}function Lm(e,t,n){var r=e.field.isKeyField()?Dp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Pv(r,i):sp()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sp()}}function Bm(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sv(t)?"-0":t}}function Fm(e){return{integerValue:""+e}}function jm(e,t){return xv(t)?Fm(t):Bm(e,t)}var Um=ce((function e(){ue(this,e),this._=void 0}));function Vm(e,t,n){return e instanceof Gm?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Wm?qm(e,t):e instanceof Km?Xm(e,t):function(e,t){var n=Hm(e,t),r=Qm(n)+Qm(e._t);return jv(n)&&jv(e._t)?Fm(r):Bm(e.wt,r)}(e,t)}function zm(e,t,n){return e instanceof Wm?qm(e,t):e instanceof Km?Xm(e,t):n}function Hm(e,t){return e instanceof Ym?jv(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Gm=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.apply(this,arguments)}return ce(n)}(Um),Wm=function(e){de(n,e);var t=ye(n);function n(e){var r;return ue(this,n),(r=t.call(this)).elements=e,r}return ce(n)}(Um);function qm(e,t){var n,r=Zm(t),i=le(e.elements);try{var o=function(){var e=n.value;r.some((function(t){return Rv(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var Km=function(e){de(n,e);var t=ye(n);function n(e){var r;return ue(this,n),(r=t.call(this)).elements=e,r}return ce(n)}(Um);function Xm(e,t){var n,r=Zm(t),i=le(e.elements);try{var o=function(){var e=n.value;r=r.filter((function(t){return!Rv(t,e)}))};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var Ym=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this)).wt=e,i._t=r,i}return ce(n)}(Um);function Qm(e){return wv(e.integerValue||e.doubleValue)}function Zm(e){return Uv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Jm=ce((function e(t,n){ue(this,e),this.field=t,this.transform=n}));var $m=ce((function e(t,n){ue(this,e),this.version=t,this.transformResults=n})),ey=function(){function e(t,n){ue(this,e),this.updateTime=t,this.exists=n}return ce(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ty(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ny=ce((function e(){ue(this,e)}));function ry(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new vy(e.key,ey.none()):new sy(e.key,e.data,ey.none());var n,r=e.data,i=Qv.empty(),o=new hv(Rp.comparator),a=le(t.fields);try{for(a.s();!(n=a.n()).done;){var u=n.value;if(!o.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),o=o.add(u)}}}catch(c){a.e(c)}finally{a.f()}return new cy(e.key,i,new vv(o.toArray()),ey.none())}function iy(e,t,n){e instanceof sy?function(e,t,n){var r=e.value.clone(),i=fy(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof cy?function(e,t,n){if(ty(e.precondition,t)){var r=fy(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ly(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function oy(e,t,n,r){return e instanceof sy?function(e,t,n,r){if(!ty(e.precondition,t))return n;var i=e.value.clone(),o=hy(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof cy?function(e,t,n,r){if(!ty(e.precondition,t))return n;var i=hy(e.fieldTransforms,r,t),o=t.data;return o.setAll(ly(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return ty(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ay(e,t){var n,r=null,i=le(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=t.data.field(o.field),u=Hm(o.transform,a||null);null!=u&&(null===r&&(r=Qv.empty()),r.set(o.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function uy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ap(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Wm&&t instanceof Wm||e instanceof Km&&t instanceof Km?Ap(e.elements,t.elements,Rv):e instanceof Ym&&t instanceof Ym?Rv(e._t,t._t):e instanceof Gm&&t instanceof Gm}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var sy=function(e){de(n,e);var t=ye(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return ue(this,n),(o=t.call(this)).key=e,o.value=r,o.precondition=i,o.fieldTransforms=a,o.type=0,o}return ce(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ny),cy=function(e){de(n,e);var t=ye(n);function n(e,r,i,o){var a,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return ue(this,n),(a=t.call(this)).key=e,a.data=r,a.fieldMask=i,a.precondition=o,a.fieldTransforms=u,a.type=1,a}return ce(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(ny);function ly(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function fy(e,t,n){var r=new Map;cp(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,u=t.data.field(o.field);r.set(o.field,zm(a,u,n[i]))}return r}function hy(e,t,n){var r,i=new Map,o=le(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,u=a.transform,s=n.data.field(a.field);i.set(a.field,Vm(u,s,t))}}catch(c){o.e(c)}finally{o.f()}return i}var dy,py,vy=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return ce(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ny),my=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return ce(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ny),yy=ce((function e(t){ue(this,e),this.count=t}));function gy(e){switch(e){default:return sp();case fp.CANCELLED:case fp.UNKNOWN:case fp.DEADLINE_EXCEEDED:case fp.RESOURCE_EXHAUSTED:case fp.INTERNAL:case fp.UNAVAILABLE:case fp.UNAUTHENTICATED:return!1;case fp.INVALID_ARGUMENT:case fp.NOT_FOUND:case fp.ALREADY_EXISTS:case fp.PERMISSION_DENIED:case fp.FAILED_PRECONDITION:case fp.ABORTED:case fp.OUT_OF_RANGE:case fp.UNIMPLEMENTED:case fp.DATA_LOSS:return!0}}function wy(e){if(void 0===e)return op("GRPC error has no .code"),fp.UNKNOWN;switch(e){case dy.OK:return fp.OK;case dy.CANCELLED:return fp.CANCELLED;case dy.UNKNOWN:return fp.UNKNOWN;case dy.DEADLINE_EXCEEDED:return fp.DEADLINE_EXCEEDED;case dy.RESOURCE_EXHAUSTED:return fp.RESOURCE_EXHAUSTED;case dy.INTERNAL:return fp.INTERNAL;case dy.UNAVAILABLE:return fp.UNAVAILABLE;case dy.UNAUTHENTICATED:return fp.UNAUTHENTICATED;case dy.INVALID_ARGUMENT:return fp.INVALID_ARGUMENT;case dy.NOT_FOUND:return fp.NOT_FOUND;case dy.ALREADY_EXISTS:return fp.ALREADY_EXISTS;case dy.PERMISSION_DENIED:return fp.PERMISSION_DENIED;case dy.FAILED_PRECONDITION:return fp.FAILED_PRECONDITION;case dy.ABORTED:return fp.ABORTED;case dy.OUT_OF_RANGE:return fp.OUT_OF_RANGE;case dy.UNIMPLEMENTED:return fp.UNIMPLEMENTED;case dy.DATA_LOSS:return fp.DATA_LOSS;default:return sp()}}(py=dy||(dy={}))[py.OK=0]="OK",py[py.CANCELLED=1]="CANCELLED",py[py.UNKNOWN=2]="UNKNOWN",py[py.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",py[py.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",py[py.NOT_FOUND=5]="NOT_FOUND",py[py.ALREADY_EXISTS=6]="ALREADY_EXISTS",py[py.PERMISSION_DENIED=7]="PERMISSION_DENIED",py[py.UNAUTHENTICATED=16]="UNAUTHENTICATED",py[py.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",py[py.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",py[py.ABORTED=10]="ABORTED",py[py.OUT_OF_RANGE=11]="OUT_OF_RANGE",py[py.UNIMPLEMENTED=12]="UNIMPLEMENTED",py[py.INTERNAL=13]="INTERNAL",py[py.UNAVAILABLE=14]="UNAVAILABLE",py[py.DATA_LOSS=15]="DATA_LOSS";var by=function(){function e(t,n){ue(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return ce(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=le(n);try{for(i.s();!(r=i.n()).done;){var o=c(r.value,2),a=o[0],u=o[1];if(this.equalsFn(a,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){uv(this.inner,(function(t,n){var r,i=le(n);try{for(i.s();!(r=i.n()).done;){var o=c(r.value,2),a=o[0],u=o[1];e(a,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return sv(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),ky=new cv(Dp.comparator);function _y(){return ky}var Ey=new cv(Dp.comparator);function Iy(){for(var e=Ey,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=e.insert(a.key,a)}return e}function Ay(e){var t=Ey;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Cy(){return xy()}function Sy(){return xy()}function xy(){return new by((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Ty=new cv(Dp.comparator),Oy=new hv(Dp.comparator);function Ny(){for(var e=Oy,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=e.add(a)}return e}var Ry=new hv(Ip);function Dy(){return Ry}var Py=function(){function e(t,n,r,i,o){ue(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return ce(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,My.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(xp.min(),r,Dy(),_y(),Ny())}}]),e}(),My=function(){function e(t,n,r,i,o){ue(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return ce(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(mv.EMPTY_BYTE_STRING,n,Ny(),Ny(),Ny())}}]),e}(),Ly=ce((function e(t,n,r,i){ue(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),By=ce((function e(t,n){ue(this,e),this.targetId=t,this.It=n})),Fy=ce((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mv.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ue(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),jy=function(){function e(){ue(this,e),this.Tt=0,this.Et=zy(),this.At=mv.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return ce(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=Ny(),t=Ny(),n=Ny();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:sp()}})),new My(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=zy()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),Uy=function(){function e(t){ue(this,e),this.Mt=t,this.Ft=new Map,this.$t=_y(),this.Bt=Vy(),this.Lt=new hv(Ip)}return ce(e,[{key:"Ut",value:function(e){var t,n=le(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,o=le(e.removedTargetIds);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.Kt(a,e.key,e.yt)}}catch(u){o.e(u)}finally{o.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:sp()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(rm(i))if(0===n){var o=new Dp(i.path);this.Kt(t,o,Jv.newNoDocument(o,xp.min()))}else cp(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var o=t.Ht(i);if(o){if(r.current&&rm(o.target)){var a=new Dp(o.target.path);null!==t.$t.get(a)||t.Xt(i,a)||t.Kt(i,a,Jv.newNoDocument(a,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=Ny();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new Py(e,n,this.Lt,this.$t,r);return this.$t=_y(),this.Bt=Vy(),this.Lt=new hv(Ip),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new jy,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new hv(Ip),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||ip("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new jy),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Vy(){return new cv(Dp.comparator)}function zy(){return new cv(Dp.comparator)}var Hy={asc:"ASCENDING",desc:"DESCENDING"},Gy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wy=ce((function e(t,n){ue(this,e),this.databaseId=t,this.dt=n}));function qy(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ky(e,t){return e.dt?t.toBase64():t.toUint8Array()}function Xy(e,t){return qy(e,t.toTimestamp())}function Yy(e){return cp(!!e),xp.fromTimestamp(function(e){var t=gv(e);return new Sp(t.seconds,t.nanos)}(e))}function Qy(e,t){return function(e){return new Op(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Zy(e){var t=Op.fromString(e);return cp(bg(t)),t}function Jy(e,t){return Qy(e.databaseId,t.path)}function $y(e,t){var n=Zy(t);if(n.get(1)!==e.databaseId.projectId)throw new hp(fp.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new hp(fp.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Dp(rg(n))}function eg(e,t){return Qy(e.databaseId,t)}function tg(e){var t=Zy(e);return 4===t.length?Op.emptyPath():rg(t)}function ng(e){return new Op(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rg(e){return cp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ig(e,t,n){return{name:Jy(e,t),fields:n.value.mapValue.fields}}function og(e,t,n){var r=$y(e,t.name),i=Yy(t.updateTime),o=new Qv({mapValue:{fields:t.fields}}),a=Jv.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function ag(e,t){return"found"in t?function(e,t){cp(!!t.found),t.found.name,t.found.updateTime;var n=$y(e,t.found.name),r=Yy(t.found.updateTime),i=new Qv({mapValue:{fields:t.found.fields}});return Jv.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){cp(!!t.missing),cp(!!t.readTime);var n=$y(e,t.missing),r=Yy(t.readTime);return Jv.newNoDocument(n,r)}(e,t):sp()}function ug(e,t){var n;if(t instanceof sy)n={update:ig(e,t.key,t.value)};else if(t instanceof vy)n={delete:Jy(e,t.key)};else if(t instanceof cy)n={update:ig(e,t.key,t.data),updateMask:wg(t.fieldMask)};else{if(!(t instanceof my))return sp();n={verify:Jy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Gm)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Wm)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Km)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ym)return{fieldPath:t.field.canonicalString(),increment:n._t};throw sp()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Xy(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:sp()}(e,t.precondition)),n}function sg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ey.updateTime(Yy(e.updateTime)):void 0!==e.exists?ey.exists(e.exists):ey.none()}(t.currentDocument):ey.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)cp("REQUEST_TIME"===t.setToServerValue),n=new Gm;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Wm(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Km(i)}else"increment"in t?n=new Ym(e,t.increment):sp();var o=Rp.fromServerFormat(t.fieldPath);return new Jm(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=$y(e,t.update.name),o=new Qv({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new vv(t.map((function(e){return Rp.fromServerFormat(e)})))}(t.updateMask);return new cy(i,o,a,n,r)}return new sy(i,o,n,r)}if(t.delete){var u=$y(e,t.delete);return new vy(u,n)}if(t.verify){var s=$y(e,t.verify);return new my(s,n)}return sp()}function cg(e,t){return{documents:[eg(e,t.path)]}}function lg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=eg(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=eg(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(zv(e.value))return{unaryFilter:{field:vg(e.field),op:"IS_NAN"}};if(Vv(e.value))return{unaryFilter:{field:vg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(zv(e.value))return{unaryFilter:{field:vg(e.field),op:"IS_NOT_NAN"}};if(Vv(e.value))return{unaryFilter:{field:vg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vg(e.field),op:pg(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:vg(e.field),direction:dg(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a,u=function(e,t){return e.dt||Cv(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function fg(e){var t=tg(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){cp(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=hg(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new ym(mg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Cv(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new mm(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new mm(n,t)}(n.endAt)),_m(t,i,u,a,s,"F",c,l)}function hg(e){return e?void 0!==e.unaryFilter?[gg(e)]:void 0!==e.fieldFilter?[yg(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return hg(e)})).reduce((function(e,t){return e.concat(t)})):sp():[]}function dg(e){return Hy[e]}function pg(e){return Gy[e]}function vg(e){return{fieldPath:e.canonicalString()}}function mg(e){return Rp.fromServerFormat(e.fieldPath)}function yg(e){return um.create(mg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sp()}}(e.fieldFilter.op),e.fieldFilter.value)}function gg(e){switch(e.unaryFilter.op){case"IS_NAN":var t=mg(e.unaryFilter.field);return um.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=mg(e.unaryFilter.field);return um.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=mg(e.unaryFilter.field);return um.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=mg(e.unaryFilter.field);return um.create(i,"!=",{nullValue:"NULL_VALUE"});default:return sp()}}function wg(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function bg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function kg(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Eg(t)),t=_g(e.get(n),t);return Eg(t)}function _g(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Eg(e){return e+"\x01\x01"}function Ig(e){var t=e.length;if(cp(t>=2),2===t)return cp("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Op.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&sp(),e.charAt(a+1)){case"\x01":var u=e.substring(o,a),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:sp()}o=a+2}return new Op(r)}var Ag=["userId","batchId"];function Cg(e,t){return[e,kg(t)]}function Sg(e,t,n){return[e,kg(t),n]}var xg={},Tg=["prefixPath","collectionGroup","readTime","documentId"],Og=["prefixPath","collectionGroup","documentId"],Ng=["collectionGroup","readTime","prefixPath","documentId"],Rg=["canonicalId","targetId"],Dg=["targetId","path"],Pg=["path","targetId"],Mg=["collectionId","parent"],Lg=["indexId","uid"],Bg=["uid","sequenceNumber"],Fg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jg=["indexId","uid","orderedDocumentKey"],Ug=["userId","collectionPath","documentId"],Vg=["userId","collectionPath","largestBatchId"],zg=["userId","collectionGroup","largestBatchId"],Hg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Gg=[].concat(Ye(Hg),["documentOverlays"]),Wg=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qg=Wg,Kg=[].concat(qg,["indexConfiguration","indexState","indexEntries"]),Xg=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return ce(n)}(Gp);function Yg(e,t){var n=lp(e);return Yp.N(n.ee,t)}var Qg=function(){function e(t,n,r,i){ue(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return ce(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&iy(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=le(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=oy(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var o,a=le(this.mutations);try{for(a.s();!(o=a.n()).done;){var u=o.value;u.key.isEqual(e.key)&&(t=oy(u,e,t,this.localWriteTime))}}catch(s){a.e(s)}finally{a.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Sy();return this.mutations.forEach((function(i){var o=e.get(i.key),a=o.overlayedDocument,u=n.applyToLocalView(a,o.mutatedFields),s=ry(a,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),a.isValidDocument()||a.convertToNoDocument(xp.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ny())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ap(this.mutations,e.mutations,(function(e,t){return uy(e,t)}))&&Ap(this.baseMutations,e.baseMutations,(function(e,t){return uy(e,t)}))}}]),e}(),Zg=function(){function e(t,n,r,i){ue(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return ce(e,null,[{key:"from",value:function(t,n,r){cp(t.mutations.length===r.length);for(var i=Ty,o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)}}]),e}(),Jg=function(){function e(t,n){ue(this,e),this.largestBatchId=t,this.mutation=n}return ce(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),$g=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xp.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:xp.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:mv.EMPTY_BYTE_STRING;ue(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u}return ce(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),ew=ce((function e(t){ue(this,e),this.ne=t}));function tw(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:nw(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Jy(e,t.key),fields:t.data.value.mapValue.fields,updateTime:qy(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:rw(t.version)};else{if(!t.isUnknownDocument())return sp();r.unknownDocument={path:n.path.toArray(),version:rw(t.version)}}return r}function nw(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function rw(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function iw(e){var t=new Sp(e.seconds,e.nanoseconds);return xp.fromTimestamp(t)}function ow(e,t){for(var n=(t.baseMutations||[]).map((function(t){return sg(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return sg(e.ne,t)})),u=Sp.fromMillis(t.localWriteTimeMs);return new Qg(t.batchId,u,n,a)}function aw(e){var t,n,r=iw(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?iw(e.lastLimboFreeSnapshotVersion):xp.min();return void 0!==e.query.documents?(cp(1===(n=e.query).documents.length),t=xm(Em(tg(n.documents[0])))):t=function(e){return xm(fg(e))}(e.query),new $g(t,e.targetId,0,e.lastListenSequenceNumber,r,i,mv.fromBase64String(e.resumeToken))}function uw(e,t){var n,r=rw(t.snapshotVersion),i=rw(t.lastLimboFreeSnapshotVersion);n=rm(t.target)?cg(e.ne,t.target):lg(e.ne,t.target);var o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:tm(t.target),readTime:r,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function sw(e){var t=fg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Tm(t,t.limit,"L"):t}function cw(e,t){return new Jg(t.largestBatchId,sg(e.ne,t.overlayMutation))}function lw(e,t){var n=t.path.lastSegment();return[e,kg(t.path.popLast()),n]}function fw(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:rw(r.readTime),documentKey:kg(r.documentKey.path),largestBatchId:r.largestBatchId}}var hw=function(){function e(){ue(this,e)}return ce(e,[{key:"getBundleMetadata",value:function(e,t){return dw(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:iw(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return dw(e).put({bundleId:(n=t).id,createTime:rw(Yy(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return pw(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:sw(t.bundledQuery),readTime:iw(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return pw(e).put(function(e){return{name:e.name,readTime:rw(Yy(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function dw(e){return Yg(e,"bundles")}function pw(e){return Yg(e,"namedQueries")}var vw=function(){function e(t,n){ue(this,e),this.wt=t,this.userId=n}return ce(e,[{key:"getOverlay",value:function(e,t){var n=this;return mw(e).get(lw(this.userId,t)).next((function(e){return e?cw(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Cy();return Kp.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,o){var a=new Jg(t,o);i.push(r.ie(e,a))})),Kp.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(kg(e.getCollectionPath()))}));var o=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);o.push(mw(e).W("collectionPathOverlayIndex",i))})),Kp.waitFor(o)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Cy(),o=kg(t),a=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,Number.POSITIVE_INFINITY],!0);return mw(e).K("collectionPathOverlayIndex",a).next((function(e){var t,n=le(e);try{for(n.s();!(t=n.n()).done;){var o=t.value,a=cw(r.wt,o);i.set(a.getKey(),a)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,o=this,a=Cy(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mw(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=cw(o.wt,t);a.size()<r||u.largestBatchId===i?(a.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return a}))}},{key:"ie",value:function(e,t){return mw(e).put(function(e,t,n){var r=c(lw(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ug(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function mw(e){return Yg(e,"documentOverlays")}var yw=function(){function e(){ue(this,e)}return ce(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(wv(e.integerValue));else if("doubleValue"in e){var n=wv(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),Sv(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(bv(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?Wv(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):sp()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];this.le(o,t),this.oe(n[o],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=le(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;this.oe(o,t)}}catch(a){i.e(a)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),Dp.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function gw(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ww(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=gw(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}yw.ye=new yw;var bw=function(){function e(){ue(this,e),this.buffer=new Uint8Array(1024),this.position=0}return ce(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=le(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var o=r.codePointAt(0);this.Ie(240|o>>>18),this.Ie(128|63&o>>>12),this.Ie(128|63&o>>>6),this.Ie(128|63&o)}}}catch(a){n.e(a)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=le(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var o=r.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}}catch(a){n.e(a)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=ww(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=ww(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Oe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),kw=function(){function e(t){ue(this,e),this.Me=t}return ce(e,[{key:"de",value:function(e){this.Me.pe(e)}},{key:"he",value:function(e){this.Me.be(e)}},{key:"ae",value:function(e){this.Me.ve(e)}},{key:"ue",value:function(){this.Me.Ce()}}]),e}(),_w=function(){function e(t){ue(this,e),this.Me=t}return ce(e,[{key:"de",value:function(e){this.Me.Ee(e)}},{key:"he",value:function(e){this.Me.Pe(e)}},{key:"ae",value:function(e){this.Me.De(e)}},{key:"ue",value:function(){this.Me.Ne()}}]),e}(),Ew=function(){function e(){ue(this,e),this.Me=new bw,this.Fe=new kw(this.Me),this.$e=new _w(this.Me)}return ce(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Oe",value:function(){return this.Me.Oe()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),Iw=function(){function e(t,n,r,i){ue(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return ce(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Aw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Cw(e.arrayValue,t.arrayValue))?n:0!==(n=Cw(e.directionalValue,t.directionalValue))?n:Dp.comparator(e.documentKey,t.documentKey)}function Cw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Sw=function(){function e(t){ue(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=le(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(o){r.e(o)}finally{r.f()}}return ce(e,[{key:"Ge",value:function(e){var t=Mp(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=Lp(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var o=n[r];if(!this.je(this.Ke,o)||!this.We(this.Ue[i++],o))return!1;++r}for(;r<n.length;++r){var a=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],a))return!1}return!0}},{key:"Qe",value:function(e){var t,n=le(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),xw=function(){function e(){ue(this,e),this.ze=new Tw}return ce(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),Kp.resolve()}},{key:"getCollectionParents",value:function(e,t){return Kp.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Kp.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Kp.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Kp.resolve(null)}},{key:"getIndexType",value:function(e,t){return Kp.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Kp.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Kp.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Kp.resolve(Vp.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Kp.resolve(Vp.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Kp.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Kp.resolve()}}]),e}(),Tw=function(){function e(){ue(this,e),this.index={}}return ce(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new hv(Op.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new hv(Op.comparator)).toArray()}}]),e}(),Ow=new Uint8Array(0),Nw=function(){function e(t,n){ue(this,e),this.user=t,this.databaseId=n,this.He=new Tw,this.Je=new by((function(e){return tm(e)}),(function(e,t){return nm(e,t)})),this.uid=t.uid||""}return ce(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var o={collectionId:r,parent:kg(i)};return Rw(e).put(o)}return Kp.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Cp(t),""],!1,!0);return Rw(e).K(r).next((function(e){var r,i=le(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.collectionId!==t)break;n.push(Ig(o.parent))}}catch(a){i.e(a)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Pw(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var o=r.add(i);if(t.indexState){var a=Mw(e);return o.next((function(e){a.put(fw(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Pw(e),r=Mw(e),i=Dw(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Dw(e),i=!0,o=new Map;return Kp.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),o.set(t,e)}))})).next((function(){if(i){var e=Ny(),a=[];return Kp.forEach(o,(function(i,o){var u;ip("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(tm(t)));var s=function(e,t){var n=Mp(t);if(void 0===n)return null;var r,i=le(im(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var o=r.value;switch(o.op){case"array-contains-any":return o.value.arrayValue.values||[];case"array-contains":return[o.value]}}}catch(a){i.e(a)}finally{i.f()}return null}(o,i),c=function(e,t){var n,r=new Map,i=le(Lp(t));try{for(i.s();!(n=i.n()).done;){var o,a=n.value,u=le(im(e,a.fieldPath));try{for(u.s();!(o=u.n()).done;){var s=o.value;switch(s.op){case"==":case"in":r.set(a.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(a.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(o,i),l=function(e,t){var n,r=[],i=!0,o=le(Lp(t));try{for(o.s();!(n=o.n()).done;){var a=n.value,u=0===a.kind?om(e,a.fieldPath,e.startAt):am(e,a.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){o.e(s)}finally{o.f()}return new mm(r,i)}(o,i),f=function(e,t){var n,r=[],i=!0,o=le(Lp(t));try{for(o.s();!(n=o.n()).done;){var a=n.value,u=0===a.kind?am(e,a.fieldPath,e.endAt):om(e,a.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){o.e(s)}finally{o.f()}return new mm(r,i)}(o,i),h=n.Ze(i,o,l),d=n.Ze(i,o,f),p=n.tn(i,o,c),v=n.en(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return Kp.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=Dp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),a.push(n))}))}))}))})).next((function(){return a}))}return Kp.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,o,a){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.nn(t[s/c]):Ow,h=u.sn(e,f,n[s%c],r),d=u.rn(e,f,i[s%c],o),p=a.map((function(t){return u.sn(e,f,t,!0)}));l.push.apply(l,Ye(u.createRange(h,d,p)))},h=0;h<s;++h)f(h);return l}},{key:"sn",value:function(e,t,n,r){var i=new Iw(e,Dp.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new Iw(e,Dp.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new Sw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=le(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;n.Ge(o)&&(!r||o.fields.length>r.fields.length)&&(r=o)}}catch(a){i.e(a)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Kp.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new hv(Rp.comparator),r=!1,i=le(e.filters);try{for(i.s();!(t=i.n()).done;){var o=t.value;o.field.isKeyField()||("array-contains"===o.op||"array-contains-any"===o.op?r=!0:n=n.add(o.field))}}catch(c){i.e(c)}finally{i.f()}var a,u=le(e.orderBy);try{for(u.s();!(a=u.n()).done;){var s=a.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new Ew,i=le(Lp(e));try{for(i.s();!(n=i.n()).done;){var o=n.value,a=t.data.field(o.fieldPath);if(null==a)return null;var u=r.Be(o.kind);yw.ye.re(a,u)}}catch(s){i.e(s)}finally{i.f()}return r.Oe()}},{key:"nn",value:function(e){var t=new Ew;return yw.ye.re(e,t.Be(0)),t.Oe()}},{key:"un",value:function(e,t){var n=new Ew;return yw.ye.re(Fv(this.databaseId,t),n.Be(function(e){var t=Lp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Ew);var i,o=0,a=le(Lp(e));try{for(a.s();!(i=a.n()).done;){var u,s=i.value,c=n[o++],l=le(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.cn(t,s.fieldPath)&&Uv(c))r=this.an(r,s,c);else{var h=f.Be(s.kind);yw.ye.re(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){a.e(d)}finally{a.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Oe();return t}},{key:"an",value:function(e,t,n){var r,i=Ye(e),o=[],a=le(n.arrayValue.values||[]);try{for(a.s();!(r=a.n()).done;){var u,s=r.value,c=le(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Ew;f.seed(l.Oe()),yw.ye.re(s,f.Be(t.kind)),o.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){a.e(h)}finally{a.f()}return o}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof um&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Pw(e),i=Mw(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return Kp.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Fp(t.sequenceNumber,new Vp(iw(t.readTime),new Dp(Ig(t.documentKey)),t.largestBatchId)):Fp.empty(),r=e.fields.map((function(e){var t=c(e,2),n=t[0],r=t[1];return new Bp(Rp.fromServerFormat(n),r)}));return new Pp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ip(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Pw(e),o=Mw(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Kp.forEach(t,(function(t){return o.put(fw(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Kp.forEach(t,(function(t,i){var o=r.get(t.collectionGroup);return(o?Kp.resolve(o):n.getFieldIndexes(e,t.collectionGroup)).next((function(o){return r.set(t.collectionGroup,o),Kp.forEach(o,(function(r){return n.fn(e,t,r).next((function(t){var o=n.dn(i,r);return t.isEqual(o)?Kp.resolve():n._n(e,i,r,t,o)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return Dw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return Dw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=Dw(e),i=new hv(Aw);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new Iw(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new hv(Aw),r=this.on(t,e);if(null==r)return n;var i=Mp(t);if(null!=i){var o=e.data.field(i.fieldPath);if(Uv(o)){var a,u=le(o.arrayValue.values||[]);try{for(u.s();!(a=u.n()).done;){var s=a.value;n=n.add(new Iw(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Iw(t.indexId,e.key,Ow,r));return n}},{key:"_n",value:function(e,t,n,r,i){var o=this;ip("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var o=e.getIterator(),a=t.getIterator(),u=pv(o),s=pv(a);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=pv(a)):l?(i(u),u=pv(o)):(u=pv(o),s=pv(a))}}(r,i,Aw,(function(r){a.push(o.wn(e,t,n,r))}),(function(r){a.push(o.mn(e,t,n,r))})),Kp.waitFor(a)}},{key:"ln",value:function(e){var t=1;return Mw(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Aw(e,t)})).filter((function(e,t,n){return!t||0!==Aw(e,n[t-1])}));var r=[];r.push(e);var i,o=le(n);try{for(o.s();!(i=o.n()).done;){var a=i.value,u=Aw(a,e),s=Aw(a,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(a),r.push(a.Le());else if(s>0)break}}catch(f){o.e(f)}finally{o.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Ow,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Ow,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Lw)}},{key:"getMinOffset",value:function(e,t){var n=this;return Kp.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||sp()}))})).next(Lw)}}]),e}();function Rw(e){return Yg(e,"collectionParents")}function Dw(e){return Yg(e,"indexEntries")}function Pw(e){return Yg(e,"indexConfiguration")}function Mw(e){return Yg(e,"indexState")}function Lw(e){cp(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;zp(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Vp(t.readTime,t.documentKey,n)}var Bw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fw=function(){function e(t,n,r){ue(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return ce(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function jw(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),o=[],a=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:a},(function(e,t,n){return u++,n.delete()}));o.push(s.next((function(){cp(1===u)})));var c,l=[],f=le(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Sg(t,h.key.path,n.batchId);o.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Kp.waitFor(o).next((function(){return l}))}function Uw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw sp();t=e.noDocument}return JSON.stringify(t).length}Fw.DEFAULT_COLLECTION_PERCENTILE=10,Fw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fw.DEFAULT=new Fw(41943040,Fw.DEFAULT_COLLECTION_PERCENTILE,Fw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fw.DISABLED=new Fw(-1,0,0);var Vw=function(){function e(t,n,r,i){ue(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return ce(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hw(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,o=Gw(e),a=Hw(e);return a.add({}).next((function(u){cp("number"==typeof u);var s,c=new Qg(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return ug(e.ne,t)})),i=n.mutations.map((function(t){return ug(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),f=[],h=new hv((function(e,t){return Ip(e.canonicalString(),t.canonicalString())})),d=le(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Sg(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(a.put(l)),f.push(o.put(v,xg))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),Kp.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Hw(e).get(t).next((function(e){return e?(cp(e.userId===n.userId),ow(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?Kp.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Hw(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(cp(t.batchId>=r),o=ow(n.wt,t)),i.done()})).next((function(){return o}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Hw(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hw(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return ow(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Cg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Gw(e).J({range:i},(function(r,i,a){var u=c(r,3),s=u[0],l=u[1],f=u[2],h=Ig(l);if(s===n.userId&&t.path.isEqual(h))return Hw(e).get(f).next((function(e){if(!e)throw sp();cp(e.userId===n.userId),o.push(ow(n.wt,e))}));a.done()})).next((function(){return o}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new hv(Ip),i=[];return t.forEach((function(t){var o=Cg(n.userId,t.path),a=IDBKeyRange.lowerBound(o),u=Gw(e).J({range:a},(function(e,i,o){var a=c(e,3),u=a[0],s=a[1],l=a[2],f=Ig(s);u===n.userId&&t.path.isEqual(f)?r=r.add(l):o.done()}));i.push(u)})),Kp.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,o=Cg(this.userId,r),a=IDBKeyRange.lowerBound(o),u=new hv(Ip);return Gw(e).J({range:a},(function(e,t,o){var a=c(e,3),s=a[0],l=a[1],f=a[2],h=Ig(l);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):o.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Hw(e).get(t).next((function(e){if(null===e)throw sp();cp(e.userId===n.userId),r.push(ow(n.wt,e))})))})),Kp.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return jw(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),Kp.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Kp.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Gw(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Ig(e[1]);i.push(o)}else r.done()})).next((function(){cp(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return zw(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return Ww(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return cp(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function zw(e,t,n){var r=Cg(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Gw(e).J({range:o,H:!0},(function(e,n,r){var o=c(e,3),u=o[0],s=o[1];o[2];u===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Hw(e){return Yg(e,"mutations")}function Gw(e){return Yg(e,"documentMutations")}function Ww(e){return Yg(e,"mutationQueues")}var qw=function(){function e(t){ue(this,e),this.En=t}return ce(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),Kw=function(){function e(t,n){ue(this,e),this.referenceDelegate=t,this.wt=n}return ce(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new qw(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return xp.fromTimestamp(new Sp(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Xw(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return cp(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,o=[];return Xw(e).J((function(a,u){var s=aw(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,o.push(r.removeTargetData(e,s)))})).next((function(){return Kp.waitFor(o)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Xw(e).J((function(e,n){var r=aw(n);t(r)}))}},{key:"bn",value:function(e){return Yw(e).get("targetGlobalKey").next((function(e){return cp(null!==e),e}))}},{key:"Pn",value:function(e,t){return Yw(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return Xw(e).put(uw(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=tm(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Xw(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var o=aw(n);nm(t,o.target)&&(i=o,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],o=Qw(e);return t.forEach((function(t){var a=kg(t.path);i.push(o.put({targetId:n,path:a})),i.push(r.referenceDelegate.addReference(e,n,t))})),Kp.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Qw(e);return Kp.forEach(t,(function(t){var o=kg(t.path);return Kp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Qw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Qw(e),i=Ny();return r.J({range:n,H:!0},(function(e,t,n){var r=Ig(e[1]),o=new Dp(r);i=i.add(o)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=kg(t.path),r=IDBKeyRange.bound([n],[Cp(n)],!1,!0),i=0;return Qw(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=c(e,2),o=r[0];r[1];0!==o&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return Xw(e).get(t).next((function(e){return e?aw(e):null}))}}]),e}();function Xw(e){return Yg(e,"targets")}function Yw(e){return Yg(e,"targetGlobal")}function Qw(e){return Yg(e,"targetDocuments")}function Zw(e,t){var n=c(e,2),r=n[0],i=n[1],o=c(t,2),a=o[0],u=o[1],s=Ip(r,a);return 0===s?Ip(i,u):s}var Jw=function(){function e(t){ue(this,e),this.Sn=t,this.buffer=new hv(Zw),this.Dn=0}return ce(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Zw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),$w=function(){function e(t,n,r){ue(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return ce(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;ip("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Jp(e.t0)){e.next=12;break}ip("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Wp(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),eb=function(){function e(t,n){ue(this,e),this.On=t,this.params=n}return ce(e,[{key:"calculateTargetCount",value:function(e,t){return this.On.Mn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Kp.resolve(ov.ot);var r=new Jw(t);return this.On.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.On.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.On.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.On.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ip("LruGarbageCollector","Garbage collection skipped; disabled"),Kp.resolve(Bw)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(ip("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Bw):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.On.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,o,a,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(ip("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),rp()<=et.DEBUG&&ip("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Kp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),tb=function(){function e(t,n){ue(this,e),this.db=t,this.garbageCollector=function(e,t){return new eb(e,t)}(this,n)}return ce(e,[{key:"Mn",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return nb(e,n)}},{key:"removeReference",value:function(e,t,n){return nb(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return nb(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return Ww(e).Y((function(r){return zw(e,r,t).next((function(e){return e&&(n=!0),Kp.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Ln(e,(function(a,u){if(u<=t){var s=n.Un(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a,xp.min()),Qw(e).delete([0,kg(a.path)])}))}));i.push(s)}})).next((function(){return Kp.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return nb(e,t)}},{key:"Ln",value:function(e,t){var n,r=Qw(e),i=ov.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var o=c(e,2),a=o[0],u=(o[1],r.path),s=r.sequenceNumber;0===a?(i!==ov.ot&&t(new Dp(Ig(n)),i),i=s,n=u):i=ov.ot})).next((function(){i!==ov.ot&&t(new Dp(Ig(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function nb(e,t){return Qw(e).put(function(e,t){return{targetId:0,path:kg(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var rb=function(){function e(){ue(this,e),this.changes=new by((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return ce(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Jv.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Kp.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),ib=function(){function e(t){ue(this,e),this.wt=t}return ce(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return sb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return sb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],nw(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Jv.newInvalidDocument(t);return sb(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cb(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:Jv.newInvalidDocument(t)};return sb(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cb(t))},(function(e,i){r={document:n.Kn(t,i),size:Uw(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=_y();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=_y(),i=new cv(Dp.comparator);return this.Qn(e,t,(function(e,t){var o=n.Kn(e,t);r=r.insert(e,o),i=i.insert(e,Uw(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return Kp.resolve();var r=new hv(fb);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(cb(r.first()),cb(r.last())),o=r.getIterator(),a=o.getNext();return sb(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Dp.fromSegments([].concat(Ye(t.prefixPath),[t.collectionGroup,t.documentId]));a&&fb(a,i)<0;)n(a,null),a=o.getNext();a&&a.isEqual(i)&&(n(a,t),a=o.hasNext()?o.getNext():null),a?r.q(cb(a)):r.done()})).next((function(){for(;a;)n(a,null),a=o.hasNext()?o.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),nw(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sb(e).K(IDBKeyRange.bound(i,o,!0)).next((function(e){var t,n=_y(),i=le(e);try{for(i.s();!(t=i.n()).done;){var o=t.value,a=r.Kn(Dp.fromSegments(o.prefixPath.concat(o.collectionGroup,o.documentId)),o);n=n.insert(a.key,a)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,o=_y(),a=lb(t,n),u=lb(t,Vp.max());return sb(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,u,!0)},(function(e,t,n){var a=i.Kn(Dp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(o=o.insert(a.key,a)).size===r&&n.done()})).next((function(){return o}))}},{key:"newChangeBuffer",value:function(e){return new ab(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return ub(e).get("remoteDocumentGlobalKey").next((function(e){return cp(!!e),e}))}},{key:"qn",value:function(e,t){return ub(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=og(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Dp.fromSegments(t.noDocument.path),i=iw(t.noDocument.readTime);n=Jv.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return sp();var o=Dp.fromSegments(t.unknownDocument.path),a=iw(t.unknownDocument.version);n=Jv.newUnknownDocument(o,a)}return t.readTime&&n.setReadTime(function(e){var t=new Sp(e[0],e[1]);return xp.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(xp.min()))return n}return Jv.newInvalidDocument(e)}}]),e}();function ob(e){return new ib(e)}var ab=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new by((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return ce(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new hv((function(e,t){return Ip(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var u=t.Hn.get(o);if(n.push(t.zn.removeEntry(e,o,u.readTime)),a.isValidDocument()){var s=tw(t.zn.wt,a);i=i.add(o.path.popLast());var c=Uw(s);r+=c-u.size,n.push(t.zn.addEntry(e,o,s))}else if(r-=u.size,t.trackRemovals){var l=tw(t.zn.wt,a.convertToNoDocument(xp.min()));n.push(t.zn.addEntry(e,o,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),Kp.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(rb);function ub(e){return Yg(e,"remoteDocumentGlobal")}function sb(e){return Yg(e,"remoteDocumentsV14")}function cb(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function lb(e,t){var n=t.documentKey.path.toArray();return[e,nw(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function fb(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,o=0;o<n.length-2&&o<r.length-2;++o)if(i=Ip(n[o],r[o]))return i;return(i=Ip(n.length,r.length))||((i=Ip(n[n.length-2],r[r.length-2]))||Ip(n[n.length-1],r[r.length-1]))}var hb=ce((function e(t,n){ue(this,e),this.overlayedDocument=t,this.mutatedFields=n})),db=function(){function e(t,n,r,i){ue(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return ce(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&oy(r.mutation,e,vv.empty(),Sp.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Ny()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ny(),i=Cy();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Iy();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Cy();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Ny())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=_y(),o=xy(),a=xy();return t.forEach((function(e,t){var a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof cy)?i=i.insert(t.key,t):void 0!==a&&(o.set(t.key,a.mutation.getFieldMask()),oy(a.mutation,t,a.mutation.getFieldMask(),Sp.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return o.set(e,t)})),t.forEach((function(e,t){var n;return a.set(e,new hb(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),a}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=xy(),i=new cv((function(e,t){return e-t})),o=Ny();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,o=le(e);try{var a=function(){var e=n.value;e.keys().forEach((function(n){var o=t.get(n);if(null!==o){var a=r.get(n)||vv.empty();a=e.applyToLocalView(o,a),r.set(n,a);var u=(i.get(e.batchId)||Ny()).add(n);i=i.insert(e.batchId,u)}}))};for(o.s();!(n=o.n()).done;)a()}catch(u){o.e(u)}finally{o.f()}})).next((function(){for(var a=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Sy();c.forEach((function(e){if(!o.has(e)){var n=ry(t.get(e),r.get(e));null!==n&&l.set(e,n),o=o.add(e)}})),a.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Kp.waitFor(a)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Dp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(o){var a=r-o.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-o.size):Kp.resolve(Cy()),u=-1,s=o;return a.next((function(t){return Kp.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),o.get(t)?Kp.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,o)})).next((function(){return i.computeViews(e,s,t,Ny())})).next((function(e){return{batchId:u,changes:Ay(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Dp(t)).next((function(e){var t=Iy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,o=Iy();return this.indexManager.getCollectionParents(e,i).next((function(a){return Kp.forEach(a,(function(a){var u=function(e,t){return new km(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(o){return r=o,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,Jv.newInvalidDocument(n)))}));var n=Iy();return r.forEach((function(r,i){var o=e.get(r);void 0!==o&&oy(o.mutation,i,vv.empty(),Sp.now()),Dm(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Kp.resolve(Jv.newInvalidDocument(t))}}]),e}(),pb=function(){function e(t){ue(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return ce(e,[{key:"getBundleMetadata",value:function(e,t){return Kp.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:Yy(n.createTime)}),Kp.resolve()}},{key:"getNamedQuery",value:function(e,t){return Kp.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:sw(e.bundledQuery),readTime:Yy(e.readTime)}}(t)),Kp.resolve()}}]),e}(),vb=function(){function e(){ue(this,e),this.overlays=new cv(Dp.comparator),this.Xn=new Map}return ce(e,[{key:"getOverlay",value:function(e,t){return Kp.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Cy();return Kp.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),Kp.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),Kp.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Cy(),i=t.length+1,o=new Dp(t.child("")),a=this.overlays.getIteratorFrom(o);a.hasNext();){var u=a.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Kp.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new cv((function(e,t){return e-t})),o=this.overlays.getIterator();o.hasNext();){var a=o.getNext().value;if(a.getKey().getCollectionGroup()===t&&a.largestBatchId>n){var u=i.get(a.largestBatchId);null===u&&(u=Cy(),i=i.insert(a.largestBatchId,u)),u.set(a.getKey(),a)}}for(var s=Cy(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Kp.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Jg(t,n));var o=this.Xn.get(t);void 0===o&&(o=Ny(),this.Xn.set(t,o)),this.Xn.set(t,o.add(n.key))}}]),e}(),mb=function(){function e(){ue(this,e),this.Zn=new hv(yb.ts),this.es=new hv(yb.ns)}return ce(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new yb(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new yb(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Dp(new Op([])),r=new yb(n,e),i=new yb(n,e+1),o=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),o.push(e.key)})),o}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Dp(new Op([])),n=new yb(t,e),r=new yb(t,e+1),i=Ny();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new yb(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),yb=function(){function e(t,n){ue(this,e),this.key=t,this.ls=n}return ce(e,null,[{key:"ts",value:function(e,t){return Dp.comparator(e.key,t.key)||Ip(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Ip(e.ls,t.ls)||Dp.comparator(e.key,t.key)}}]),e}(),gb=function(){function e(t,n){ue(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new hv(yb.ts)}return ce(e,[{key:"checkEmpty",value:function(e){return Kp.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var o=new Qg(i,t,n,r);this.mutationQueue.push(o);var a,u=le(r);try{for(u.s();!(a=u.n()).done;){var s=a.value;this.ds=this.ds.add(new yb(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Kp.resolve(o)}},{key:"lookupMutationBatch",value:function(e,t){return Kp.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return Kp.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Kp.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Kp.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new yb(t,0),i=new yb(t,Number.POSITIVE_INFINITY),o=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);o.push(t)})),Kp.resolve(o)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new hv(Ip);return t.forEach((function(e){var t=new yb(e,0),i=new yb(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Kp.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Dp.isDocumentKey(i)||(i=i.child(""));var o=new yb(new Dp(i),0),a=new hv(Ip);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ls)),!0)}),o),Kp.resolve(this.gs(a))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;cp(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return Kp.forEach(t.mutations,(function(i){var o=new yb(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new yb(t,0),r=this.ds.firstAfterOrEqual(n);return Kp.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Kp.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),wb=function(){function e(t){ue(this,e),this.ps=t,this.docs=new cv(Dp.comparator),this.size=0}return ce(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Kp.resolve(n?n.document.mutableCopy():Jv.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=_y();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Jv.newInvalidDocument(e))})),Kp.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=_y(),i=new Dp(t.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),u=a.key,s=a.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||zp(Up(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Kp.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){sp()}},{key:"Is",value:function(e,t){return Kp.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new bb(this)}},{key:"getSize",value:function(e){return Kp.resolve(this.size)}}]),e}(),bb=function(e){de(n,e);var t=ye(n);function n(e){var r;return ue(this,n),(r=t.call(this)).zn=e,r}return ce(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),Kp.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(rb),kb=function(){function e(t){ue(this,e),this.persistence=t,this.Ts=new by((function(e){return tm(e)}),nm),this.lastRemoteSnapshotVersion=xp.min(),this.highestTargetId=0,this.Es=0,this.As=new mb,this.targetCount=0,this.Rs=qw.An()}return ce(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Kp.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Kp.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Kp.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Kp.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Kp.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new qw(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,Kp.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),Kp.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Kp.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,o=[];return this.Ts.forEach((function(a,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(a),o.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Kp.waitFor(o).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Kp.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Kp.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Kp.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Kp.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),Kp.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Kp.resolve(n)}},{key:"containsKey",value:function(e,t){return Kp.resolve(this.As.containsKey(t))}}]),e}(),_b=function(){function e(t,n){var r=this;ue(this,e),this.bs={},this.overlays={},this.Ps=new ov(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new kb(this),this.indexManager=new xw,this.remoteDocumentCache=new wb((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new ew(n),this.Ds=new pb(this.wt)}return ce(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new vb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new gb(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;ip("MemoryPersistence","Starting transaction:",e);var i=new Eb(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return Kp.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Eb=function(e){de(n,e);var t=ye(n);function n(e){var r;return ue(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return ce(n)}(Gp),Ib=function(){function e(t){ue(this,e),this.persistence=t,this.ks=new mb,this.Os=null}return ce(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw sp()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Kp.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Kp.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),Kp.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Kp.forEach(this.Fs,(function(r){var i=Dp.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,xp.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Kp.or([function(){return Kp.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}(),Ab=function(){function e(t){ue(this,e),this.wt=t}return ce(e,[{key:"O",value:function(e,t,n,r){var i=this,o=new Xp("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ag,{unique:!0}),e.createObjectStore("documentMutations")}(e),Cb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var a=Kp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Cb(e)),a=a.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xp.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ag,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Kp.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Bs(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.Us(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.qs(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ks(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(a=a.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Ug});t.createIndex("collectionPathOverlayIndex",Vg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",zg,{unique:!1})}(e)}))),n<13&&r>=13&&(a=a.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Tg});t.createIndex("documentKeyIndex",Og),t.createIndex("collectionGroupIndex",Ng)}(e)})).next((function(){return i.Gs(e,o)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(a=a.next((function(){return i.Qs(e,o)}))),n<15&&r>=15&&(a=a.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Lg}).createIndex("sequenceNumberIndex",Bg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Fg}).createIndex("documentKeyIndex",jg,{unique:!1})}(e)}))),a}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=Uw(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return Kp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return Kp.forEach(r,(function(r){cp(r.userId===n.userId);var i=ow(t.wt,r);return jw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var o=new Op(n),a=function(e){return[0,kg(e)]}(o);r.push(t.get(a).next((function(n){return n?Kp.resolve():function(n){return t.put({targetId:0,path:kg(n),sequenceNumber:e.highestListenSequenceNumber})}(o)})))})).next((function(){return Kp.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Mg});var n=t.store("collectionParents"),r=new Tw,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:kg(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new Op(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=c(e,3),r=(n[0],n[1]),o=(n[2],Ig(r));return i(o.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=aw(r),o=uw(t.wt,i);return n.put(o)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,o=t.store("remoteDocumentsV14"),a=(i=n,i.document?new Dp(Op.fromString(i.document.name).popFirst(5)):i.noDocument?Dp.fromSegments(i.noDocument.path):i.unknownDocument?Dp.fromSegments(i.unknownDocument.path):sp()).path.toArray(),u={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(o.put(u))})).next((function(){return Kp.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=ob(this.wt),o=new _b(Ib.Ms,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Ny();ow(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Kp.forEach(r,(function(e,r){var a=new ep(r),u=vw.se(n.wt,a),s=o.getIndexManager(a),c=Vw.se(a,n.wt,s,o.referenceDelegate);return new db(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Xg(t,ov.ot),e).next()}))}))}}]),e}();function Cb(e){e.createObjectStore("targetDocuments",{keyPath:Dg}).createIndex("documentTargetsIndex",Pg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Rg,{unique:!0}),e.createObjectStore("targetGlobal")}var Sb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xb=function(){function e(t,n,r,i,o,a,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:14;if(ue(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=o,this.window=a,this.document=u,this.Ws=c,this.zs=l,this.Hs=f,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new hp(fp.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tb(this,i),this.ei=n+"main",this.wt=new ew(s),this.ni=new Yp(this.ei,this.Hs,new Ab(this.wt)),this.Vs=new Kw(this.referenceDelegate,this.wt),this.remoteDocumentCache=ob(this.wt),this.Ds=new hw,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&op("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return ce(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new hp(fp.FAILED_PRECONDITION,Sb);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new ov(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=re(te().mark((function n(r){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=re(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Ob(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(Jp(t))return ip("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return ip("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return Tb(e).get("owner").next((function(e){return Kp.resolve(t.di(e))}))}},{key:"_i",value:function(e){return Ob(e).delete(this.clientId)}},{key:"wi",value:function(){var e=re(te().mark((function e(){var t,n,r,i,o=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Yg(e,"clientMetadata");return t.K().next((function(e){var n=o.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Kp.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=le(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(a){n.e(a)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?Kp.resolve(!0):Tb(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new hp(fp.FAILED_PRECONDITION,Sb);return!1}}return!(!t.networkEnabled||!t.inForeground)||Ob(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&ip("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=re(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Xg(e,ov.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Ob(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return Vw.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Nw(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return vw.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;ip("IndexedDbPersistence","Starting transaction:",e);var i,o,a="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?Kg:14===i?qg:13===i?Wg:12===i?Gg:11===i?Hg:void sp();return this.ni.runTransaction(e,a,u,(function(i){return o=new Xg(i,r.Ps?r.Ps.next():ov.ot),"readwrite-primary"===t?r.ai(o).next((function(e){return!!e||r.hi(o)})).next((function(t){if(!t)throw op("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new hp(fp.FAILED_PRECONDITION,Hp);return n(o)})).next((function(e){return r.fi(o).next((function(){return e}))})):r.bi(o).next((function(){return n(o)}))})).then((function(e){return o.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return Tb(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new hp(fp.FAILED_PRECONDITION,Sb)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tb(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=Tb(e);return n.get("owner").next((function(e){return t.di(e)?(ip("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Kp.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(op("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return ip("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return op("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(el){op("Failed to set zombie client id.",el)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(el){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return Yp.V()}}]),e}();function Tb(e){return Yg(e,"owner")}function Ob(e){return Yg(e,"clientMetadata")}function Nb(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Rb=function(){function e(t,n,r,i){ue(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return ce(e,null,[{key:"Vi",value:function(t,n){var r,i=Ny(),o=Ny(),a=le(n.docChanges);try{for(a.s();!(r=a.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}}}catch(s){a.e(s)}finally{a.f()}return new e(t,n.fromCache,i,o)}}]),e}(),Db=function(){function e(){ue(this,e),this.Si=!1}return ce(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(o){return o||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return Kp.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(xp.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(o){var a=i.ki(t,o);return i.Oi(t,a,n,r)?i.Ni(e,t):(rp()<=et.DEBUG&&ip("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Rm(t)),i.Mi(e,a,t,jp(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new hv(Mm(e));return t.forEach((function(t,r){Dm(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return rp()<=et.DEBUG&&ip("QueryEngine","Using full collection scan to execute query:",Rm(t)),this.Di.getDocumentsMatchingQuery(e,t,Vp.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Pb=function(){function e(t,n,r,i){ue(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new cv(Ip),this.Bi=new by((function(e){return tm(e)}),nm),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return ce(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new db(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function Mb(e,t,n,r){return new Pb(e,t,n,r)}function Lb(e,t){return Bb.apply(this,arguments)}function Bb(){return Bb=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lp(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,o=[],a=[],u=Ny(),s=le(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;o.push(c.batchId);var l,f=le(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(w){f.e(w)}finally{f.f()}}}catch(w){s.e(w)}finally{s.f()}var d,p=le(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;a.push(v.batchId);var m,y=le(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(w){y.e(w)}finally{y.f()}}}catch(w){p.e(w)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:o,addedBatchIds:a}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function Fb(e,t){var n=lp(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=Kp.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=n.docVersions.get(e);cp(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Ny(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function jb(e){var t=lp(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function Ub(e,t){var n=lp(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var a=[];t.targetChanges.forEach((function(o,u){var s=i.get(u);if(s){a.push(n.Vs.removeMatchingKeys(e,o.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,o.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(mv.EMPTY_BYTE_STRING,xp.min()).withLastLimboFreeSnapshotVersion(xp.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,o)&&a.push(n.Vs.updateTargetData(e,c))}}));var u=_y(),s=Ny();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Vb(e,o,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(xp.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(c)}return Kp.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function Vb(e,t,n){var r=Ny(),i=Ny();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=_y();return n.forEach((function(n,o){var a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(xp.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):ip("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),{Gi:r,Qi:i}}))}function zb(e,t){var n=lp(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Hb(e,t){var n=lp(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,Kp.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new $g(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function Gb(e,t,n){return Wb.apply(this,arguments)}function Wb(){return Wb=re(te().mark((function e(t,n,r){var i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=lp(t),o=i.$i.get(n),a=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",a,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Jp(e.t1)){e.next=12;break}throw e.t1;case 12:ip("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(o.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Wb.apply(this,arguments)}function qb(e,t,n){var r=lp(e),i=xp.min(),o=Ny();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=lp(e),i=r.Bi.get(n);return void 0!==i?Kp.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,xm(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:xp.min(),n?o:Ny())})).next((function(e){return Yb(r,Pm(t),e),{documents:e,ji:o}}))}))}function Kb(e,t){var n=lp(e),r=lp(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function Xb(e,t){var n=lp(e),r=n.Li.get(t)||xp.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,jp(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Yb(n,t,e),e}))}function Yb(e,t,n){var r=xp.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function Qb(e,t,n,r){return Zb.apply(this,arguments)}function Zb(){return Zb=re(te().mark((function e(t,n,r,i){var o,a,u,s,c,l,f,h,d,p;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=lp(t),a=Ny(),u=_y(),s=le(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Wi(l.metadata.name),l.document&&(a=a.add(f)),(h=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=o.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,Hb(o,function(e){return xm(Em(Op.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",o.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Vb(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return o.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return o.Vs.addMatchingKeys(e,a,p.targetId)})).next((function(){return o.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),Zb.apply(this,arguments)}function Jb(e,t){return $b.apply(this,arguments)}function $b(){return $b=re(te().mark((function e(t,n){var r,i,o,a=arguments;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:Ny(),e.next=3,Hb(t,xm(sw(n.bundledQuery)));case 3:return i=e.sent,o=lp(t),e.abrupt("return",o.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Yy(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return o.Ds.saveNamedQuery(e,n);var a=i.withResumeToken(mv.EMPTY_BYTE_STRING,t);return o.$i=o.$i.insert(a.targetId,a),o.Vs.updateTargetData(e,a).next((function(){return o.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return o.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return o.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),$b.apply(this,arguments)}function ek(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function tk(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function nk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var rk=function(){function e(t,n,r,i){ue(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return ce(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&((a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new hp(o.error.code,o.error.message))),a?new e(t,n,o.state,i):(op("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),ik=function(){function e(t,n,r){ue(this,e),this.targetId=t,this.state=n,this.error=r}return ce(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&((o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new hp(i.error.code,i.error.message))),o?new e(t,i.state,r):(op("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),ok=function(){function e(t,n){ue(this,e),this.clientId=t,this.activeTargetIds=n}return ce(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Dy(),a=0;i&&a<r.activeTargetIds.length;++a)i=xv(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(op("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ak=function(){function e(t,n){ue(this,e),this.clientId=t,this.onlineState=n}return ce(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(op("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),uk=function(){function e(){ue(this,e),this.activeTargetIds=Dy()}return ce(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),sk=function(){function e(t,n,r,i,o){ue(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new cv(Ip),this.started=!1,this.ir=[];var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.rr=ek(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new uk),this.cr=new RegExp("^firestore_clients_".concat(a,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(a,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(a,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return ce(e,[{key:"start",value:function(){var e=re(te().mark((function e(){var t,n,r,i,o,a,u,s,c,l,f,h=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=le(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(o=this.getItem(ek(this.persistenceKey,i)))&&(a=ok.Ji(i,o))&&(this.sr=this.sr.insert(a.clientId,a));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=le(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(nk(this.persistenceKey,e));if(n){var r=ik.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(nk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return ip("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){ip("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){ip("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(ip("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void op("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(re(te().mark((function e(){var r,i,o,a,u,s,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(o=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(o));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(a=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(a));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=ov.ot;if(null!=e)try{var n=JSON.parse(e);cp("number"==typeof n),t=n}catch(e){op("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==ov.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new rk(this.currentUser,e,t,n),i=tk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=tk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=nk(this.persistenceKey,e),i=new ik(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return ok.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return rk.Ji(new ep(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return ik.Ji(r,t)}},{key:"wr",value:function(e){return ak.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:ip("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),o=this.gr(r),a=[],u=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||u.push(e)})),this.syncEngine.Mr(a,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=Dy();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ck=function(){function e(){ue(this,e),this.Fr=new uk,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return ce(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new uk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),lk=function(){function e(){ue(this,e)}return ce(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),fk=function(){function e(){var t=this;ue(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return ce(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){ip("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=le(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){ip("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=le(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),hk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},dk=function(){function e(t){ue(this,e),this.jr=t.jr,this.Wr=t.Wr}return ce(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),pk=function(e){de(n,e);var t=ye(n);function n(e){var r;return ue(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return ce(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,o){var a=new Jd;a.listenOnce(Kd.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case qd.NO_ERROR:var t=a.getResponseJson();ip("Connection","XHR received:",JSON.stringify(t)),i(t);break;case qd.TIMEOUT:ip("Connection",'RPC "'+e+'" timed out'),o(new hp(fp.DEADLINE_EXCEEDED,"Request time out"));break;case qd.HTTP_ERROR:var n=a.getStatus();if(ip("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(fp).indexOf(t)>=0?t:fp.UNKNOWN}(r.status);o(new hp(u,r.message))}else o(new hp(fp.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new hp(fp.UNAVAILABLE,"Connection failed."));break;default:sp()}}finally{ip("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);a.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Gd(),o=Wd(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Qd({})),this.uo(a.initMessageHeaders,t,n),xe()||Ne()||Se().indexOf("Electron/")>=0||Re()||Se().indexOf("MSAppHost/")>=0||Oe()||(a.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");ip("Connection","Creating WebChannel: "+u,a);var s=i.createWebChannel(u,a),c=!1,l=!1,f=new dk({jr:function(e){l?ip("Connection","Not sending because WebChannel is closed:",e):(c||(ip("Connection","Opening WebChannel transport."),s.open(),c=!0),ip("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,Zd.EventType.OPEN,(function(){l||ip("Connection","WebChannel transport opened.")})),h(s,Zd.EventType.CLOSE,(function(){l||(l=!0,ip("Connection","WebChannel transport closed"),f.eo())})),h(s,Zd.EventType.ERROR,(function(e){l||(l=!0,ap("Connection","WebChannel transport errored:",e),f.eo(new hp(fp.UNAVAILABLE,"The operation could not be completed")))})),h(s,Zd.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];cp(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){ip("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=dy[e];if(void 0!==t)return wy(t)}(o),u=i.message;void 0===a&&(a=fp.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),l=!0,f.eo(new hp(a,u)),s.close()}else ip("Connection","WebChannel received:",n),f.no(n)}})),h(o,Xd.STAT_EVENT,(function(e){e.stat===Yd.PROXY?ip("Connection","Detected buffering proxy"):e.stat===Yd.NOPROXY&&ip("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),n}(function(){function e(t){ue(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return ce(e,[{key:"ro",value:function(e,t,n,r,i){var o=this.oo(e,t);ip("RestConnection","Sending: ",o,n);var a={};return this.uo(a,r,i),this.co(e,o,a,n).then((function(e){return ip("RestConnection","Received: ",e),e}),(function(t){throw ap("RestConnection","".concat(e," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,o){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+tp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=hk[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function vk(){return"undefined"!=typeof window?window:null}function mk(){return"undefined"!=typeof document?document:null}function yk(e){return new Wy(e,!0)}var gk=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;ue(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=o,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return ce(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&ip("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),wk=function(){function e(t,n,r,i,o,a,u,s){ue(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new gk(t,n)}return ce(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===fp.RESOURCE_EXHAUSTED?(op(n.toString()),op("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===fp.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=c(t,2),i=r[0],o=r[1];e.Po===n&&e.Uo(i,o)}),(function(n){t((function(){var t=new hp(fp.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return ip("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(ip("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),bk=function(e){de(n,e);var t=ye(n);function n(e,r,i,o,a,u){var s;return ue(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,o,u)).wt=a,s}return ce(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:sp()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.dt?(cp(void 0===t||"string"==typeof t),mv.fromBase64String(t||"")):(cp(void 0===t||t instanceof Uint8Array),mv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,u=a&&function(e){var t=void 0===e.code?fp.UNKNOWN:wy(e.code);return new hp(t,e.message||"")}(a);n=new Fy(r,i,o,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=$y(e,s.document.name),l=Yy(s.document.updateTime),f=new Qv({mapValue:{fields:s.document.fields}}),h=Jv.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Ly(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=$y(e,v.document),y=v.readTime?Yy(v.readTime):xp.min(),g=Jv.newNoDocument(m,y),w=v.removedTargetIds||[];n=new Ly([],w,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var k=$y(e,b.document),_=b.removedTargetIds||[];n=new Ly([],_,k,null)}else{if(!("filter"in t))return sp();t.filter;var E=t.filter;E.targetId;var I=E.count||0,A=new yy(I),C=E.targetId;n=new By(C,A)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return xp.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?xp.min():t.readTime?Yy(t.readTime):xp.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=ng(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=rm(r)?{documents:cg(e,r)}:{query:lg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Ky(e,t.resumeToken):t.snapshotVersion.compareTo(xp.min())>0&&(n.readTime=qy(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return sp()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=ng(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(wk),kk=function(e){de(n,e);var t=ye(n);function n(e,r,i,o,a,u){var s;return ue(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,o,u)).wt=a,s.Wo=!1,s}return ce(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,In(pe(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(cp(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(cp(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Yy(e.updateTime):Yy(t);return n.isEqual(xp.min())&&(n=Yy(t)),new $m(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Yy(e.commitTime);return this.listener.Jo(n,t)}return cp(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=ng(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return ug(t.wt,e)}))};this.Mo(n)}}]),n}(wk),_k=function(e){de(n,e);var t=ye(n);function n(e,r,i,o){var a;return ue(this,n),(a=t.call(this)).authCredentials=e,a.appCheckCredentials=r,a.bo=i,a.wt=o,a.Zo=!1,a}return ce(n,[{key:"tu",value:function(){if(this.Zo)throw new hp(fp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var o=c(i,2),a=o[0],u=o[1];return r.bo.ro(e,t,n,a,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===fp.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new hp(fp.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var a=c(o,2),u=a[0],s=a[1];return i.bo.ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===fp.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new hp(fp.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return ce((function e(){ue(this,e)}))}()),Ek=function(){function e(t,n){ue(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return ce(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(op(t),this.su=!1):ip("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),Ik=ce((function e(t,n,r,i,o){var a=this;ue(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=o,this.du.Br((function(e){r.enqueueAndForget(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Mk(a),!e.t0){e.next=5;break}return ip("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=lp(t)).lu.add(4),e.next=4,Sk(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,Ak(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(a);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new Ek(r,i)}));function Ak(e){return Ck.apply(this,arguments)}function Ck(){return Ck=re(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Mk(t)){e.next=18;break}n=le(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Ck.apply(this,arguments)}function Sk(e){return xk.apply(this,arguments)}function xk(){return xk=re(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=le(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),xk.apply(this,arguments)}function Tk(e,t){var n=lp(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),Pk(n)?Dk(n):l_(n).Co()&&Nk(n,t))}function Ok(e,t){var n=lp(e),r=l_(n);n.hu.delete(t),r.Co()&&Rk(n,t),0===n.hu.size&&(r.Co()?r.ko():Mk(n)&&n._u.set("Unknown"))}function Nk(e,t){e.wu.Nt(t.targetId),l_(e).Qo(t)}function Rk(e,t){e.wu.Nt(t),l_(e).jo(t)}function Dk(e){e.wu=new Uy({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),l_(e).start(),e._u.iu()}function Pk(e){return Mk(e)&&!l_(e).Do()&&e.hu.size>0}function Mk(e){return 0===lp(e).lu.size}function Lk(e){e.wu=void 0}function Bk(e){return Fk.apply(this,arguments)}function Fk(){return Fk=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){Nk(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Fk.apply(this,arguments)}function jk(e,t){return Uk.apply(this,arguments)}function Uk(){return Uk=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Lk(t),Pk(t)?(t._u.uu(n),Dk(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Uk.apply(this,arguments)}function Vk(e,t,n){return zk.apply(this,arguments)}function zk(){return zk=re(te().mark((function e(t,n,r){var i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof Fy&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=re(te().mark((function e(t,n){var r,i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=le(n.targetIds),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=14;break}if(a=o.value,e.t0=t.hu.has(a),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(a,r);case 10:t.hu.delete(a),t.wu.removeTarget(a);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),ip("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Hk(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Ly?t.wu.Ut(n):n instanceof By?t.wu.zt(n):t.wu.Gt(n),r.isEqual(xp.min())){e.next=29;break}return e.prev=14,e.next=17,jb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(mv.EMPTY_BYTE_STRING,n.snapshotVersion)),Rk(e,t);var r=new $g(n.target,t,1,n.sequenceNumber);Nk(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),ip("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Hk(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),zk.apply(this,arguments)}function Hk(e,t,n){return Gk.apply(this,arguments)}function Gk(){return Gk=re(te().mark((function e(t,n,r){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Jp(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,Sk(t);case 5:t._u.set("Offline"),r||(r=function(){return jb(t.localStore)}),t.asyncQueue.enqueueRetryable(re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ip("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,Ak(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Gk.apply(this,arguments)}function Wk(e,t){return t().catch((function(n){return Hk(e,n,t)}))}function qk(e){return Kk.apply(this,arguments)}function Kk(){return Kk=re(te().mark((function e(t){var n,r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=lp(t),r=f_(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!Xk(n)){e.next=19;break}return e.prev=3,e.next=6,zb(n.localStore,i);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=o.batchId,Yk(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Hk(n,e.t0);case 17:e.next=2;break;case 19:Qk(n)&&Zk(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Kk.apply(this,arguments)}function Xk(e){return Mk(e)&&e.au.length<10}function Yk(e,t){e.au.push(t);var n=f_(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function Qk(e){return Mk(e)&&!f_(e).Do()&&e.au.length>0}function Zk(e){f_(e).start()}function Jk(e){return $k.apply(this,arguments)}function $k(){return $k=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f_(t).Xo();case 1:case"end":return e.stop()}}),e)}))),$k.apply(this,arguments)}function e_(e){return t_.apply(this,arguments)}function t_(){return t_=re(te().mark((function e(t){var n,r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=f_(t),r=le(t.au);try{for(r.s();!(i=r.n()).done;)o=i.value,n.Ho(o.mutations)}catch(a){r.e(a)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),t_.apply(this,arguments)}function n_(e,t,n){return r_.apply(this,arguments)}function r_(){return r_=re(te().mark((function e(t,n,r){var i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),o=Zg.from(i,n,r),e.next=3,Wk(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,qk(t);case 5:case"end":return e.stop()}}),e)}))),r_.apply(this,arguments)}function i_(e,t){return o_.apply(this,arguments)}function o_(){return o_=re(te().mark((function e(t,n){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&f_(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gy(i=n.code)||i===fp.ABORTED){e.next=7;break}return r=t.au.shift(),f_(t).No(),e.next=5,Wk(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,qk(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Qk(t)&&Zk(t);case 5:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function a_(e,t){return u_.apply(this,arguments)}function u_(){return u_=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=lp(t)).asyncQueue.verifyOperationInProgress(),ip("RemoteStore","RemoteStore received new credentials"),i=Mk(r),r.lu.add(3),e.next=6,Sk(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,Ak(r);case 12:case"end":return e.stop()}}),e)}))),u_.apply(this,arguments)}function s_(e,t){return c_.apply(this,arguments)}function c_(){return c_=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lp(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,Ak(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,Sk(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),c_.apply(this,arguments)}function l_(e){return e.mu||(e.mu=function(e,t,n){var r=lp(e);return r.tu(),new bk(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Bk.bind(null,e),Jr:jk.bind(null,e),Go:Vk.bind(null,e)}),e.fu.push(function(){var t=re(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),Pk(e)?Dk(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:Lk(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function f_(e){return e.gu||(e.gu=function(e,t,n){var r=lp(e);return r.tu(),new kk(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:Jk.bind(null,e),Jr:i_.bind(null,e),Yo:e_.bind(null,e),Jo:n_.bind(null,e)}),e.fu.push(function(){var t=re(te().mark((function t(n){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,qk(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(ip("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var h_=function(){function e(t,n,r,i,o){ue(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new dp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return ce(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hp(fp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a}}]),e}();function d_(e,t){if(op("AsyncQueue","".concat(t,": ").concat(e)),Jp(e))return new hp(fp.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var p_=function(){function e(t){ue(this,e),this.comparator=t?function(e,n){return t(e,n)||Dp.comparator(e.key,n.key)}:function(e,t){return Dp.comparator(e.key,t.key)},this.keyedMap=Iy(),this.sortedSet=new cv(this.comparator)}return ce(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),v_=function(){function e(){ue(this,e),this.yu=new cv(Dp.comparator)}return ce(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):sp():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),m_=function(){function e(t,n,r,i,o,a,u,s){ue(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=s}return ce(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Om(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,p_.emptySet(n),o,r,i,!0,!1)}}]),e}(),y_=ce((function e(){ue(this,e),this.Iu=void 0,this.listeners=[]})),g_=ce((function e(){ue(this,e),this.queries=new by((function(e){return Nm(e)}),Om),this.onlineState="Unknown",this.Tu=new Set}));function w_(e,t){return b_.apply(this,arguments)}function b_(){return b_=re(te().mark((function e(t,n){var r,i,o,a,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lp(t),i=n.query,o=!1,(a=r.queries.get(i))||(o=!0,a=new y_),!o){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:a.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=d_(e.t0,"Initialization of query '".concat(Rm(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,a),a.listeners.push(n),n.Eu(r.onlineState),a.Iu&&n.Au(a.Iu)&&A_(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),b_.apply(this,arguments)}function k_(e,t){return __.apply(this,arguments)}function __(){return __=re(te().mark((function e(t,n){var r,i,o,a,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lp(t),i=n.query,o=!1,(a=r.queries.get(i))&&(u=a.listeners.indexOf(n))>=0&&(a.listeners.splice(u,1),o=0===a.listeners.length),!o){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),__.apply(this,arguments)}function E_(e,t){var n,r=lp(e),i=!1,o=le(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,u=a.query,s=r.queries.get(u);if(s){var c,l=le(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(a)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Iu=a}}}catch(f){o.e(f)}finally{o.f()}i&&A_(r)}function I_(e,t,n){var r=lp(e),i=r.queries.get(t);if(i){var o,a=le(i.listeners);try{for(a.s();!(o=a.n()).done;){o.value.onError(n)}}catch(u){a.e(u)}finally{a.f()}}r.queries.delete(t)}function A_(e){e.Tu.forEach((function(e){e.next()}))}var C_=function(){function e(t,n,r){ue(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return ce(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=le(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(a){r.e(a)}finally{r.f()}e=new m_(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),o=!0):this.Vu(e,this.onlineState)&&(this.Su(e),o=!0),this.Pu=e,o}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=m_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),S_=function(){function e(t,n){ue(this,e),this.payload=t,this.byteLength=n}return ce(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),x_=function(){function e(t){ue(this,e),this.wt=t}return ce(e,[{key:"Wi",value:function(e){return $y(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?og(this.wt,e.document,!1):Jv.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return Yy(e)}}]),e}(),T_=function(){function e(t,n,r){ue(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=O_(t)}return ce(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Op.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new x_(this.wt),i=le(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.metadata.queries){var a,u=r.Wi(o.metadata.name),s=le(o.metadata.queries);try{for(s.s();!(a=s.n()).done;){var c=a.value,l=(n.get(c)||Ny()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=re(te().mark((function e(){var t,n,r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qb(this.localStore,new x_(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=le(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return o=i.value,e.next=11,Jb(this.localStore,o,n.get(o.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function O_(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var N_=ce((function e(t){ue(this,e),this.key=t})),R_=ce((function e(t){ue(this,e),this.key=t})),D_=function(){function e(t,n){ue(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Ny(),this.mutatedKeys=Ny(),this.Lu=Mm(t),this.Uu=new p_(this.Lu)}return ce(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new v_,i=t?t.Uu:this.Uu,o=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Dm(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Lu(f,s)>0||c&&n.Lu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(a=a.add(f),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),null!==this.query.limit)for(;a.size>this.query.limit;){var l="F"===this.query.limitType?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Uu:a,Gu:r,Oi:u,mutatedKeys:o}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var o=e.Gu.pu();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sp()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var a=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==o.length||s?{snapshot:new m_(this.query,e.Uu,i,o,e.mutatedKeys,0===u,s,!1),zu:a}:{zu:a}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new v_,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=Ny(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new R_(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new N_(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=Ny();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return m_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),P_=ce((function e(t,n,r){ue(this,e),this.query=t,this.targetId=n,this.view=r})),M_=ce((function e(t){ue(this,e),this.key=t,this.Xu=!1})),L_=function(){function e(t,n,r,i,o,a){ue(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Zu={},this.tc=new by((function(e){return Nm(e)}),Om),this.ec=new Map,this.nc=new Set,this.sc=new cv(Dp.comparator),this.ic=new Map,this.rc=new mb,this.oc={},this.uc=new Map,this.cc=qw.Rn(),this.onlineState="Unknown",this.ac=void 0}return ce(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function B_(e,t){return F_.apply(this,arguments)}function F_(){return F_=re(te().mark((function e(t,n){var r,i,o,a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=OE(t),!(a=r.tc.get(n))){e.next=6;break}i=a.targetId,r.sharedClientState.addLocalQueryTarget(i),o=a.view.Yu(),e.next=15;break;case 6:return e.next=8,Hb(r.localStore,xm(n));case 8:return u=e.sent,r.isPrimaryClient&&Tk(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,j_(r,n,i,"current"===s);case 14:o=e.sent;case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function j_(e,t,n,r){return U_.apply(this,arguments)}function U_(){return U_=re(te().mark((function e(t,n,r,i){var o,a,u,s,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=re(te().mark((function e(t,n,r,i){var o,a,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.view.Ku(r),e.t0=o.Oi,!e.t0){e.next=6;break}return e.next=5,qb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,o)}));case 5:o=e.sent;case 6:return a=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(o,t.isPrimaryClient,a),e.abrupt("return",(aE(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,qb(t.localStore,n,!0);case 3:return o=e.sent,a=new D_(n,o.ji),u=a.Ku(o.documents),s=My.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=a.applyChanges(u,t.isPrimaryClient,s),aE(t,r,c.zu),l=new P_(n,r,a),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),U_.apply(this,arguments)}function V_(e,t){return z_.apply(this,arguments)}function z_(){return z_=re(te().mark((function e(t,n){var r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lp(t),i=r.tc.get(n),!((o=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,o.filter((function(e){return!Om(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Gb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Ok(r.remoteStore,i.targetId),iE(r,i.targetId)})).catch(Wp);case 9:e.next=14;break;case 11:return iE(r,i.targetId),e.next=14,Gb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}function H_(e,t,n){return G_.apply(this,arguments)}function G_(){return G_=re(te().mark((function e(t,n,r){var i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=NE(t),e.prev=1,e.next=4,function(e,t){var n,r,i=lp(e),o=Sp.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Ny());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=_y(),s=Ny();return i.Ui.getEntries(e,a).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var a,u=[],s=le(t);try{for(s.s();!(a=s.n()).done;){var c=a.value,l=ay(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new cy(c.key,l,Zv(l.value.mapValue),ey.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,o,u,t)})).next((function(t){r=t;var o=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,o)}))})).then((function(){return{batchId:r.batchId,changes:Ay(n)}}))}(i.localStore,n);case 4:return o=e.sent,i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new cv(Ip)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,o.batchId,r),e.next=9,cE(i,o.changes);case 9:return e.next=11,qk(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a=d_(e.t0,"Failed to persist write"),r.reject(a);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),G_.apply(this,arguments)}function W_(e,t){return q_.apply(this,arguments)}function q_(){return q_=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lp(t),e.prev=1,e.next=4,Ub(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(cp(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?cp(n.Xu):e.removedDocuments.size>0&&(cp(n.Xu),n.Xu=!1))})),e.next=8,cE(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Wp(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),q_.apply(this,arguments)}function K_(e,t,n){var r=lp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=lp(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,o=le(n.listeners);try{for(o.s();!(i=o.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(a){o.e(a)}finally{o.f()}})),r&&A_(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function X_(e,t,n){return Y_.apply(this,arguments)}function Y_(){return Y_=re(te().mark((function e(t,n,r){var i,o,a,u,s,c;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=lp(t)).sharedClientState.updateQueryState(n,"rejected",r),o=i.ic.get(n),!(a=o&&o.key)){e.next=14;break}return u=(u=new cv(Dp.comparator)).insert(a,Jv.newNoDocument(a,xp.min())),s=Ny().add(a),c=new Py(xp.min(),new Map,new hv(Ip),u,s),e.next=9,W_(i,c);case 9:i.sc=i.sc.remove(a),i.ic.delete(n),sE(i),e.next=16;break;case 14:return e.next=16,Gb(i.localStore,n,!1).then((function(){return iE(i,n,r)})).catch(Wp);case 16:case"end":return e.stop()}}),e)}))),Y_.apply(this,arguments)}function Q_(e,t){return Z_.apply(this,arguments)}function Z_(){return Z_=re(te().mark((function e(t,n){var r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lp(t),i=n.batch.batchId,e.prev=1,e.next=4,Fb(r.localStore,n);case 4:return o=e.sent,rE(r,i,null),nE(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,cE(r,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Wp(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Z_.apply(this,arguments)}function J_(e,t,n){return $_.apply(this,arguments)}function $_(){return $_=re(te().mark((function e(t,n,r){var i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lp(t),e.prev=1,e.next=4,function(e,t){var n=lp(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return cp(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return o=e.sent,rE(i,n,r),nE(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,cE(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Wp(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),$_.apply(this,arguments)}function eE(e,t){return tE.apply(this,arguments)}function tE(){return tE=re(te().mark((function e(t,n){var r,i,o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mk((r=lp(t)).remoteStore)||ip("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=lp(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(o=r.uc.get(i)||[]).push(n),r.uc.set(i,o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),a=d_(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(a);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),tE.apply(this,arguments)}function nE(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function rE(e,t,n){var r=lp(e),i=r.oc[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function iE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=le(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var o=r.value;e.tc.delete(o),n&&e.Zu.lc(o,n)}}catch(a){i.e(a)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||oE(e,t)}))}function oE(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(Ok(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),sE(e))}function aE(e,t,n){var r,i=le(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;o instanceof N_?(e.rc.addReference(o.key,t),uE(e,o)):o instanceof R_?(ip("SyncEngine","Document no longer in limbo: "+o.key),e.rc.removeReference(o.key,t),e.rc.containsKey(o.key)||oE(e,o.key)):sp()}}catch(a){i.e(a)}finally{i.f()}}function uE(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(ip("SyncEngine","New document in limbo: "+n),e.nc.add(r),sE(e))}function sE(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new Dp(Op.fromString(t)),r=e.cc.next();e.ic.set(r,new M_(n)),e.sc=e.sc.insert(n,r),Tk(e.remoteStore,new $g(xm(Em(n.path)),r,2,ov.ot))}}function cE(e,t,n){return lE.apply(this,arguments)}function lE(){return lE=re(te().mark((function e(t,n,r){var i,o,a,u;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=lp(t),o=[],a=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),o.push(e);var n=Rb.Vi(t.targetId,e);a.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(o),e.next=9,function(){var e=re(te().mark((function e(t,n){var r,i,o,a,u,s,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lp(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Kp.forEach(n,(function(t){return Kp.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Kp.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Jp(e.t0)){e.next=10;break}throw e.t0;case 10:ip("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=le(n);try{for(i.s();!(o=i.n()).done;)a=o.value,u=a.targetId,a.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,a);case 9:case"end":return e.stop()}}),e)}))),lE.apply(this,arguments)}function fE(e,t){return hE.apply(this,arguments)}function hE(){return hE=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=lp(t)).currentUser.isEqual(n)){e.next=11;break}return ip("SyncEngine","User change. New user:",n.toKey()),e.next=5,Lb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new hp(fp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,cE(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),hE.apply(this,arguments)}function dE(e,t){var n=lp(e),r=n.ic.get(t);if(r&&r.Xu)return Ny().add(r.key);var i=Ny(),o=n.ec.get(t);if(!o)return i;var a,u=le(o);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function pE(e,t){return vE.apply(this,arguments)}function vE(){return vE=re(te().mark((function e(t,n){var r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lp(t),e.next=3,qb(r.localStore,n.query,!0);case 3:return i=e.sent,o=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&aE(r,n.targetId,o.zu),o));case 6:case"end":return e.stop()}}),e)}))),vE.apply(this,arguments)}function mE(e,t){return yE.apply(this,arguments)}function yE(){return yE=re(te().mark((function e(t,n){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lp(t),e.abrupt("return",Xb(r.localStore,n).then((function(e){return cE(r,e)})));case 2:case"end":return e.stop()}}),e)}))),yE.apply(this,arguments)}function gE(e,t,n,r){return wE.apply(this,arguments)}function wE(){return wE=re(te().mark((function e(t,n,r,i){var o,a;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=lp(t),e.next=3,function(e,t){var n=lp(e),r=lp(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Kp.resolve(null)}))}))}(o.localStore,n);case 3:if(null===(a=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,qk(o.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(rE(o,n,i||null),nE(o,n),function(e,t){lp(lp(e).mutationQueue).In(t)}(o.localStore,n)):sp();case 11:return e.next=13,cE(o,a);case 13:e.next=16;break;case 15:ip("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),wE.apply(this,arguments)}function bE(e,t){return kE.apply(this,arguments)}function kE(){return kE=re(te().mark((function e(t,n){var r,i,o,a,u,s,c,l;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(OE(r=lp(t)),NE(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,_E(r,i.toArray());case 5:return o=e.sent,r.ac=!0,e.next=9,s_(r.remoteStore,!0);case 9:a=le(o);try{for(a.s();!(u=a.n()).done;)s=u.value,Tk(r.remoteStore,s)}catch(f){a.e(f)}finally{a.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return iE(r,t),Gb(r.localStore,t,!0)})),Ok(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,_E(r,c);case 21:return function(e){var t=lp(e);t.ic.forEach((function(e,n){Ok(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new cv(Dp.comparator)}(r),r.ac=!1,e.next=25,s_(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),kE.apply(this,arguments)}function _E(e,t,n){return EE.apply(this,arguments)}function EE(){return EE=re(te().mark((function e(t,n,r){var i,o,a,u,s,c,l,f,h,d,p,v,m,y;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=lp(t),o=[],a=[],u=le(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ec.get(c))||0===f.length){e.next=34;break}return e.next=11,Hb(i.localStore,xm(f[0]));case 11:l=e.sent,h=le(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,pE(i,v);case 20:(m=e.sent).snapshot&&a.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Kb(i.localStore,c);case 36:return y=e.sent,e.next=39,Hb(i.localStore,y);case 39:return l=e.sent,e.next=42,j_(i,IE(y),c,!1);case 42:o.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(a),o));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),EE.apply(this,arguments)}function IE(e){return _m(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function AE(e){var t=lp(e);return lp(lp(t.localStore).persistence).Ri()}function CE(e,t,n,r){return SE.apply(this,arguments)}function SE(){return SE=re(te().mark((function e(t,n,r,i){var o,a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=lp(t)).ac){e.next=3;break}return e.abrupt("return",void ip("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((a=o.ec.get(n))&&a.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Xb(o.localStore,Pm(a[0]));case 10:return u=e.sent,s=Py.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,cE(o,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Gb(o.localStore,n,!0);case 17:return iE(o,n,i),e.abrupt("break",20);case 19:sp();case 20:case"end":return e.stop()}}),e)}))),SE.apply(this,arguments)}function xE(e,t,n){return TE.apply(this,arguments)}function TE(){return TE=re(te().mark((function e(t,n,r){var i,o,a,u,s,c,l,f,h;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=OE(t)).ac){e.next=45;break}o=le(n),e.prev=3,o.s();case 5:if((a=o.n()).done){e.next=21;break}if(u=a.value,!i.ec.has(u)){e.next=10;break}return ip("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Kb(i.localStore,u);case 12:return s=e.sent,e.next=15,Hb(i.localStore,s);case 15:return c=e.sent,e.next=18,j_(i,IE(s),c.targetId,!1);case 18:Tk(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:l=le(r),e.prev=30,h=te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,Gb(i.localStore,t,!1).then((function(){Ok(i.remoteStore,t),iE(i,t)})).catch(Wp);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),TE.apply(this,arguments)}function OE(e){var t=lp(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=W_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=dE.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=X_.bind(null,t),t.Zu.Go=E_.bind(null,t.eventManager),t.Zu.lc=I_.bind(null,t.eventManager),t}function NE(e){var t=lp(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Q_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=J_.bind(null,t),t}function RE(e,t,n){var r=lp(e);(function(){var e=re(te().mark((function e(t,n,r){var i,o,a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=lp(e),r=Yy(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(O_(i)),o=new T_(i,t.localStore,n.wt),e.next=15,n.fc();case 15:a=e.sent;case 16:if(!a){e.next=26;break}return e.next=19,o.Nu(a);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:a=e.sent;case 24:e.next=16;break;case 26:return e.next=28,o.complete();case 28:return s=e.sent,e.next=31,cE(t,s.Mu,void 0);case 31:return e.next=33,function(e,t){var n=lp(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(ap("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var DE=function(){function e(){ue(this,e),this.synchronizeTabs=!1}return ce(e,[{key:"initialize",value:function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=yk(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return Mb(this.persistence,new Db,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new _b(Ib.Ms,this.wt)}},{key:"dc",value:function(e){return new ck}},{key:"terminate",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),PE=function(e){de(n,e);var t=ye(n);function n(e,r,i){var o;return ue(this,n),(o=t.call(this)).yc=e,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return ce(n,[{key:"initialize",value:function(){var e=re(te().mark((function e(t){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(pe(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,NE(this.yc.syncEngine);case 6:return e.next=8,qk(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return Mb(this.persistence,new Db,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new $w(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new iv(t,this.persistence);return new rv(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=Nb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fw.withCacheSize(this.cacheSizeBytes):Fw.DEFAULT;return new xb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,vk(),mk(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new ck}}]),n}(DE),ME=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return ce(n,[{key:"initialize",value:function(){var e=re(te().mark((function e(t){var r,i=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(pe(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof sk,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:gE.bind(null,r),Or:CE.bind(null,r),Mr:xE.bind(null,r),Ri:AE.bind(null,r),Nr:mE.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bE(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=vk();if(!sk.V(t))throw new hp(fp.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Nb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sk(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(PE),LE=function(){function e(){ue(this,e)}return ce(e,[{key:"initialize",value:function(){var e=re(te().mark((function e(t,n){var r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return K_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=fE.bind(null,this.syncEngine),e.next=12,s_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new g_}},{key:"createDatastore",value:function(e){var t,n=yk(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new pk(t));return function(e,t,n,r){return new _k(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return K_(a.syncEngine,e,0)},o=fk.V()?new fk:new lk,new Ik(t,n,r,i,o)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,o,a){var u=new L_(e,t,n,r,i,o);return a&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=lp(t),ip("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,Sk(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function BE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return re(te().mark((function r(){var i;return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var FE=function(){function e(t){ue(this,e),this.observer=t,this.muted=!1}return ce(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),jE=function(){function e(t,n){var r=this;ue(this,e),this.Ec=t,this.wt=n,this.metadata=new dp,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return ce(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=re(te().mark((function e(){var t,n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new S_(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=re(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=re(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),UE=function(){function e(t){ue(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return ce(e,[{key:"lookup",value:function(){var e=re(te().mark((function e(t){var n,r=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new hp(fp.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=re(te().mark((function e(t,n){var r,i,o,a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lp(t),i=ng(r.wt)+"/documents",o={documents:n.map((function(e){return Jy(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,o,n.length);case 5:return a=e.sent,u=new Map,a.forEach((function(e){var t=ag(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());cp(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new vy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=re(te().mark((function e(){var t,n=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Dp.fromPath(t);n.mutations.push(new my(r,n.precondition(r)))})),e.next=7,function(){var e=re(te().mark((function e(t,n){var r,i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lp(t),i=ng(r.wt)+"/documents",o={writes:n.map((function(e){return ug(r.wt,e)}))},e.next=3,r.ro("Commit",i,o);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw sp();t=xp.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new hp(fp.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ey.updateTime(t):ey.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xp.min()))throw new hp(fp.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ey.updateTime(t)}return ey.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),VE=function(){function e(t,n,r,i,o){ue(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.Dc=r.maxAttempts,this.So=new gk(this.asyncQueue,"transaction_retry")}return ce(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(re(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new UE(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!Cv(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!gy(t)}return!1}}]),e}(),zE=function(){function e(t,n,r,i){var o=this;ue(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ep.UNAUTHENTICATED,this.clientId=Ep.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ip("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return ip("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return ce(e,[{key:"getConfiguration",value:function(){var e=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new hp(fp.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new dp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(re(te().mark((function n(){var r;return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=d_(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function HE(e,t){return GE.apply(this,arguments)}function GE(){return GE=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),ip("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Lb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),GE.apply(this,arguments)}function WE(e,t){return qE.apply(this,arguments)}function qE(){return qE=re(te().mark((function e(t,n){var r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,KE(t);case 3:return r=e.sent,ip("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return a_(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return a_(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),qE.apply(this,arguments)}function KE(e){return XE.apply(this,arguments)}function XE(){return XE=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return ip("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,HE(t,new DE);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),XE.apply(this,arguments)}function YE(e){return QE.apply(this,arguments)}function QE(){return QE=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return ip("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,WE(t,new LE);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),QE.apply(this,arguments)}function ZE(e){return KE(e).then((function(e){return e.persistence}))}function JE(e){return KE(e).then((function(e){return e.localStore}))}function $E(e){return YE(e).then((function(e){return e.remoteStore}))}function eI(e){return YE(e).then((function(e){return e.syncEngine}))}function tI(e){return nI.apply(this,arguments)}function nI(){return nI=re(te().mark((function e(t){var n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,YE(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=B_.bind(null,n.syncEngine),r.onUnlisten=V_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),nI.apply(this,arguments)}function rI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new dp;return e.asyncQueue.enqueueAndForget(re(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var o=new FE({next:function(o){t.enqueueAndForget((function(){return k_(e,a)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new hp(fp.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new hp(fp.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new C_(Em(n.path),o,{includeMetadataChanges:!0,Du:!0});return w_(e,a)},i.next=3,tI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function iI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new dp;return e.asyncQueue.enqueueAndForget(re(te().mark((function i(){return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var o=new FE({next:function(n){t.enqueueAndForget((function(){return k_(e,a)})),n.fromCache&&"server"===r.source?i.reject(new hp(fp.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new C_(n,o,{includeMetadataChanges:!0,Du:!0});return w_(e,a)},i.next=3,tI(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var oI=new Map;function aI(e,t,n){if(!n)throw new hp(fp.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function uI(e,t,n,r){if(!0===t&&!0===r)throw new hp(fp.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function sI(e){if(!Dp.isDocumentKey(e))throw new hp(fp.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function cI(e){if(Dp.isDocumentKey(e))throw new hp(fp.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function lI(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":sp()}function fI(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new hp(fp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=lI(e);throw new hp(fp.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function hI(e,t){if(t<=0)throw new hp(fp.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var dI=function(){function e(t){var n;if(ue(this,e),void 0===t.host){if(void 0!==t.ssl)throw new hp(fp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new hp(fp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,uI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return ce(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),pI=function(){function e(t,n,r){ue(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dI({}),this._settingsFrozen=!1,t instanceof Av?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new hp(fp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Av(e.options.projectId)}(t))}return ce(e,[{key:"app",get:function(){if(!this._app)throw new hp(fp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new hp(fp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dI(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new vp;switch(e.type){case"gapi":var t=e.client;return cp(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new wp(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new hp(fp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=oI.get(e);t&&(ip("ComponentProvider","Removing Datastore"),oI.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function vI(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=(e=fI(e,pI))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&ap("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var a,u;if("string"==typeof i.mockUserToken)a=i.mockUserToken,u=ep.MOCK_USER;else{a=Ce(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new hp(fp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ep(s)}e._authCredentials=new mp(new pp(a,u))}}var mI=function(){function e(t,n,r){ue(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return ce(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new gI(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),yI=function(){function e(t,n,r){ue(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return ce(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),gI=function(e){de(n,e);var t=ye(n);function n(e,r,i){var o;return ue(this,n),(o=t.call(this,e,r,Em(i)))._path=i,o.type="collection",o}return ce(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new mI(this.firestore,null,new Dp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(yI);function wI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ke(e),aI("collection","path",t),e instanceof pI){var o=Op.fromString.apply(Op,[t].concat(r));return cI(o),new gI(e,null,o)}if(!(e instanceof mI||e instanceof gI))throw new hp(fp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=e._path.child(Op.fromString.apply(Op,[t].concat(r)));return cI(a),new gI(e.firestore,null,a)}function bI(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ke(e),1===arguments.length&&(t=Ep.I()),aI("doc","path",t),e instanceof pI){var o=Op.fromString.apply(Op,[t].concat(r));return sI(o),new mI(e,null,new Dp(o))}if(!(e instanceof mI||e instanceof gI))throw new hp(fp.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=e._path.child(Op.fromString.apply(Op,[t].concat(r)));return sI(a),new mI(e.firestore,e instanceof gI?e.converter:null,new Dp(a))}function kI(e,t){return e=Ke(e),t=Ke(t),(e instanceof mI||e instanceof gI)&&(t instanceof mI||t instanceof gI)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function _I(e,t){return e=Ke(e),t=Ke(t),e instanceof yI&&t instanceof yI&&e.firestore===t.firestore&&Om(e._query,t._query)&&e.converter===t.converter}var EI=function(){function e(){var t=this;ue(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new gk(this,"async_queue_retry"),this.Kc=function(){var e=mk();e&&ip("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=mk();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return ce(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=mk();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new dp;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=re(te().mark((function e(){var t=this;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Jp(e.t0)){e.next=12;break}throw e.t0;case 12:ip("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw op("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=h_.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&sp()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=le(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=le(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(o){r.e(o)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function II(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=le(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o in r&&"function"==typeof r[o])return!0}}catch(a){i.e(a)}finally{i.f()}return!1}(e)}var AI=function(){function e(){ue(this,e),this._progressObserver={},this._taskCompletionResolver=new dp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return ce(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),CI=function(e){de(n,e);var t=ye(n);function n(e,r,i){var o;return ue(this,n),(o=t.call(this,e,r,i)).type="firestore",o._queue=new EI,o._persistenceKey="name"in e?e.name:"[DEFAULT]",o}return ce(n,[{key:"_terminate",value:function(){return this._firestoreClient||xI(this),this._firestoreClient.terminate()}}]),n}(pI);function SI(e){return e._firestoreClient||xI(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function xI(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Iv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new zE(e._authCredentials,e._appCheckCredentials,e._queue,r)}function TI(e,t,n){var r=new dp;return e.asyncQueue.enqueue(re(te().mark((function i(){var o;return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,HE(e,n);case 3:return i.next=5,WE(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===fp.FAILED_PRECONDITION||e.code===fp.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(o=i.t0)){i.next=13;break}throw o;case 13:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function OI(e){return function(e){return e.asyncQueue.enqueue(re(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ZE(e);case 2:return n=t.sent,t.next=5,$E(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=lp(e);return t.lu.delete(0),Ak(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(SI(e=fI(e,CI)))}function NI(e){return function(e){return e.asyncQueue.enqueue(re(te().mark((function t(){var n,r;return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ZE(e);case 2:return n=t.sent,t.next=5,$E(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=lp(t)).lu.add(0),e.next=4,Sk(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(SI(e=fI(e,CI)))}function RI(e,t){var n=SI(e=fI(e,CI)),r=new AI;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new jE(e,t)}(function(e,t){if(e instanceof Uint8Array)return BE(e,t);if(e instanceof ArrayBuffer)return BE(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,yk(t));e.asyncQueue.enqueueAndForget(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=RE,t.next=3,eI(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function DI(e,t){return function(e,t){return e.asyncQueue.enqueue(re(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=lp(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,JE(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(SI(e=fI(e,CI)),t).then((function(t){return t?new yI(e,null,t.query):null}))}function PI(e){if(e._initialized||e._terminated)throw new hp(fp.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var MI=function(){function e(){ue(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new hp(fp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rp(n)}return ce(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var LI=function(){function e(t){ue(this,e),this._byteString=t}return ce(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(mv.fromBase64String(t))}catch(t){throw new hp(fp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(mv.fromUint8Array(t))}}]),e}(),BI=ce((function e(t){ue(this,e),this._methodName=t})),FI=function(){function e(t,n){if(ue(this,e),!isFinite(t)||t<-90||t>90)throw new hp(fp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new hp(fp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return ce(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Ip(this._lat,e._lat)||Ip(this._long,e._long)}}]),e}(),jI=/^__.*__$/,UI=function(){function e(t,n,r){ue(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ce(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new cy(e,this.data,this.fieldMask,t,this.fieldTransforms):new sy(e,this.data,t,this.fieldTransforms)}}]),e}(),VI=function(){function e(t,n,r){ue(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return ce(e,[{key:"toMutation",value:function(e,t){return new cy(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function zI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sp()}}var HI=function(){function e(t,n,r,i,o,a){ue(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Xc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}return ce(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return cA(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(zI(this.Zc)&&jI.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),GI=function(){function e(t,n,r){ue(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||yk(t)}return ce(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new HI({Zc:e,methodName:t,ca:n,path:Rp.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function WI(e){var t=e._freezeSettings(),n=yk(e._databaseId);return new GI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function qI(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=e.aa(o.merge||o.mergeFields?2:0,t,n,i);oA("Data must be an object, but it was:",a,r);var u,s,c=rA(r,a);if(o.merge)u=new vv(a.fieldMask),s=a.fieldTransforms;else if(o.mergeFields){var l,f=[],h=le(o.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=aA(t,d,n);if(!a.contains(p))throw new hp(fp.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));lA(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new vv(f),s=a.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=a.fieldTransforms;return new UI(new Qv(c),u,s)}var KI=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.apply(this,arguments)}return ce(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(BI);function XI(e,t,n){return new HI({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var YI=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.apply(this,arguments)}return ce(n,[{key:"_toFieldTransform",value:function(e){return new Jm(e.path,new Gm)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(BI),QI=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this,e)).ha=r,i}return ce(n,[{key:"_toFieldTransform",value:function(e){var t=XI(this,e,!0),n=this.ha.map((function(e){return nA(e,t)})),r=new Wm(n);return new Jm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(BI),ZI=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this,e)).ha=r,i}return ce(n,[{key:"_toFieldTransform",value:function(e){var t=XI(this,e,!0),n=this.ha.map((function(e){return nA(e,t)})),r=new Km(n);return new Jm(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(BI),JI=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this,e)).la=r,i}return ce(n,[{key:"_toFieldTransform",value:function(e){var t=new Ym(e.wt,jm(e.wt,this.la));return new Jm(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(BI);function $I(e,t,n,r){var i=e.aa(1,t,n);oA("Data must be an object, but it was:",i,r);var o=[],a=Qv.empty();uv(r,(function(e,r){var u=sA(t,e,n);r=Ke(r);var s=i.ia(u);if(r instanceof KI)o.push(u);else{var c=nA(r,s);null!=c&&(o.push(u),a.set(u,c))}}));var u=new vv(o);return new VI(a,u,i.fieldTransforms)}function eA(e,t,n,r,i,o){var a=e.aa(1,t,n),u=[aA(t,r,n)],s=[i];if(o.length%2!=0)throw new hp(fp.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<o.length;c+=2)u.push(aA(t,o[c])),s.push(o[c+1]);for(var l=[],f=Qv.empty(),h=u.length-1;h>=0;--h)if(!lA(l,u[h])){var d=u[h],p=s[h];p=Ke(p);var v=a.ia(d);if(p instanceof KI)l.push(d);else{var m=nA(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new vv(l);return new VI(f,y,a.fieldTransforms)}function tA(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return nA(n,e.aa(r?4:3,t))}function nA(e,t){if(iA(e=Ke(e)))return oA("Unsupported field value:",t,e),rA(e,t);if(e instanceof BI)return function(e,t){if(!zI(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,o=le(e);try{for(o.s();!(n=o.n()).done;){var a=nA(n.value,t.ra(i));null==a&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}}catch(u){o.e(u)}finally{o.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ke(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return jm(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Sp.fromDate(e);return{timestampValue:qy(t.wt,n)}}if(e instanceof Sp){var r=new Sp(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:qy(t.wt,r)}}if(e instanceof FI)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof LI)return{bytesValue:Ky(t.wt,e._byteString)};if(e instanceof mI){var i=t.databaseId,o=e.firestore._databaseId;if(!o.isEqual(i))throw t.oa("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Qy(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(lI(e)))}(e,t)}function rA(e,t){var n={};return sv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):uv(e,(function(e,r){var i=nA(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function iA(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Sp||e instanceof FI||e instanceof LI||e instanceof mI||e instanceof BI)}function oA(e,t,n){if(!iA(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=lI(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function aA(e,t,n){if((t=Ke(t))instanceof MI)return t._internalPath;if("string"==typeof t)return sA(e,t);throw cA("Field path arguments must be of type string or ",e,!1,void 0,n)}var uA=new RegExp("[~\\*/\\[\\]]");function sA(e,t,n){if(t.search(uA)>=0)throw cA("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return ge(MI,Ye(t.split(".")))._internalPath}catch(qN){throw cA("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function cA(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(o||a)&&(s+=" (found",o&&(s+=" in field ".concat(r)),a&&(s+=" in document ".concat(i)),s+=")"),new hp(fp.INVALID_ARGUMENT,u+e+s)}function lA(e,t){return e.some((function(e){return e.isEqual(t)}))}var fA=function(){function e(t,n,r,i,o){ue(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return ce(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new mI(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new hA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(dA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),hA=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.apply(this,arguments)}return ce(n,[{key:"data",value:function(){return In(pe(n.prototype),"data",this).call(this)}}]),n}(fA);function dA(e,t){return"string"==typeof t?sA(e,t):t instanceof MI?t._internalPath:t._delegate._internalPath}var pA=function(){function e(t,n){ue(this,e),this.hasPendingWrites=t,this.fromCache=n}return ce(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),vA=function(e){de(n,e);var t=ye(n);function n(e,r,i,o,a,u){var s;return ue(this,n),(s=t.call(this,e,r,i,o,u))._firestore=e,s._firestoreImpl=e,s.metadata=a,s}return ce(n,[{key:"exists",value:function(){return In(pe(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new mA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(dA("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(fA),mA=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.apply(this,arguments)}return ce(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return In(pe(n.prototype),"data",this).call(this,e)}}]),n}(vA),yA=function(){function e(t,n,r,i){ue(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new pA(i.hasPendingWrites,i.fromCache),this.query=r}return ce(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new mA(n._firestore,n._userDataWriter,r.key,r,new pA(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new hp(fp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new mA(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pA(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new mA(e._firestore,e._userDataWriter,t.doc.key,t.doc,new pA(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:gA(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function gA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sp()}}function wA(e,t){return e instanceof vA&&t instanceof vA?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof yA&&t instanceof yA&&e._firestore===t._firestore&&_I(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function bA(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new hp(fp.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kA=ce((function e(){ue(this,e)}));function _A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=a._apply(e)}return e}var EA=function(e){de(n,e);var t=ye(n);function n(e,r,i){var o;return ue(this,n),(o=t.call(this)).fa=e,o.da=r,o._a=i,o.type="where",o}return ce(n,[{key:"_apply",value:function(e){var t=WI(e.firestore),n=function(e,t,n,r,i,o,a){var u;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new hp(fp.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){PA(a,o);var s,c=[],l=le(a);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(DA(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=DA(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||PA(a,o),u=tA(n,"where",a,"in"===o||"not-in"===o);var h=um.create(i,o,u);return function(e,t){if(t.ht()){var n=Am(e);if(null!==n&&!n.isEqual(t.field))throw new hp(fp.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Im(e);null!==r&&MA(e,t.field,r)}var i=function(e,t){var n,r=le(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new hp(fp.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new hp(fp.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new yI(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new km(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(kA);var IA=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return ce(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new hp(fp.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new hp(fp.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ym(t,n);return function(e,t){if(null===Im(e)){var n=Am(e);null!==n&&MA(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new yI(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new km(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(kA);var AA=function(e){de(n,e);var t=ye(n);function n(e,r,i){var o;return ue(this,n),(o=t.call(this)).type=e,o.ma=r,o.ga=i,o}return ce(n,[{key:"_apply",value:function(e){return new yI(e.firestore,e.converter,Tm(e._query,this.ma,this.ga))}}]),n}(kA);var CA=function(e){de(n,e);var t=ye(n);function n(e,r,i){var o;return ue(this,n),(o=t.call(this)).type=e,o.ya=r,o.pa=i,o}return ce(n,[{key:"_apply",value:function(e){var t=RA(e,this.type,this.ya,this.pa);return new yI(e.firestore,e.converter,function(e,t){return new km(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(kA);function SA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new CA("startAt",t,!0)}function xA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new CA("startAfter",t,!1)}var TA=function(e){de(n,e);var t=ye(n);function n(e,r,i){var o;return ue(this,n),(o=t.call(this)).type=e,o.ya=r,o.pa=i,o}return ce(n,[{key:"_apply",value:function(e){var t=RA(e,this.type,this.ya,this.pa);return new yI(e.firestore,e.converter,function(e,t){return new km(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(kA);function OA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new TA("endBefore",t,!1)}function NA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new TA("endAt",t,!0)}function RA(e,t,n,r){if(n[0]=Ke(n[0]),n[0]instanceof fA)return function(e,t,n,r,i){if(!r)throw new hp(fp.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var o,a=[],u=le(Sm(e));try{for(u.s();!(o=u.n()).done;){var s=o.value;if(s.field.isKeyField())a.push(Fv(t,r.key));else{var c=r.data.field(s.field);if(kv(c))throw new hp(fp.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new hp(fp.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}a.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new mm(a,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=WI(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new hp(fp.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(a[s].field.isKeyField()){if("string"!=typeof c)throw new hp(fp.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Cm(e)&&-1!==c.indexOf("/"))throw new hp(fp.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Op.fromString(c));if(!Dp.isDocumentKey(l))throw new hp(fp.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Dp(l);u.push(Fv(t,f))}else{var h=tA(n,r,c);u.push(h)}}return new mm(u,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function DA(e,t,n){if("string"==typeof(n=Ke(n))){if(""===n)throw new hp(fp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cm(t)&&-1!==n.indexOf("/"))throw new hp(fp.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Op.fromString(n));if(!Dp.isDocumentKey(r))throw new hp(fp.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Fv(e,new Dp(r))}if(n instanceof mI)return Fv(e,n._key);throw new hp(fp.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(lI(n),"."))}function PA(e,t){if(!Array.isArray(e)||0===e.length)throw new hp(fp.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new hp(fp.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function MA(e,t,n){if(!n.isEqual(t))throw new hp(fp.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var LA={maxAttempts:5},BA=function(){function e(){ue(this,e)}return ce(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Nv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw sp()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return uv(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new FI(wv(e.latitude),wv(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=_v(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ev(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=gv(e);return new Sp(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Op.fromString(e);cp(bg(n));var r=new Av(n.get(1),n.get(3)),i=new Dp(n.popFirst(5));return r.isEqual(t)||op("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function FA(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var jA=function(e){de(n,e);var t=ye(n);function n(e){var r;return ue(this,n),(r=t.call(this)).firestore=e,r}return ce(n,[{key:"convertBytes",value:function(e){return new LI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new mI(this.firestore,null,t)}}]),n}(BA),UA=function(){function e(t,n){ue(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=WI(t)}return ce(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=VA(e,this._firestore),i=FA(r.converter,t,n),o=qI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ey.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=VA(e,this._firestore),o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return r="string"==typeof(t=Ke(t))||t instanceof MI?eA(this._dataReader,"WriteBatch.update",i._key,t,n,a):$I(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,ey.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=VA(e,this._firestore);return this._mutations=this._mutations.concat(new vy(t._key,ey.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new hp(fp.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function VA(e,t){if((e=Ke(e)).firestore!==t)throw new hp(fp.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var zA=function(e){de(n,e);var t=ye(n);function n(e){var r;return ue(this,n),(r=t.call(this)).firestore=e,r}return ce(n,[{key:"convertBytes",value:function(e){return new LI(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new mI(this.firestore,null,t)}}]),n}(BA);function HA(e){e=fI(e,mI);var t=fI(e.firestore,CI),n=SI(t),r=new zA(t);return function(e,t){var n=new dp;return e.asyncQueue.enqueueAndForget(re(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=re(te().mark((function e(t,n,r){var i,o;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=lp(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new hp(fp.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o=d_(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(o);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,JE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new vA(t,r,e._key,n,new pA(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function GA(e){e=fI(e,yI);var t=fI(e.firestore,CI),n=SI(t),r=new zA(t);return function(e,t){var n=new dp;return e.asyncQueue.enqueueAndForget(re(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=re(te().mark((function e(t,n,r){var i,o,a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qb(t,n,!0);case 3:i=e.sent,o=new D_(n,i.ji),a=o.Ku(i.documents),u=o.applyChanges(a,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=d_(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,JE(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new yA(t,r,e,n)}))}function WA(e,t,n){e=fI(e,mI);var r=fI(e.firestore,CI),i=FA(e.converter,t,n);return YA(r,[qI(WI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ey.none())])}function qA(e,t,n){e=fI(e,mI);for(var r=fI(e.firestore,CI),i=WI(r),o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return YA(r,[("string"==typeof(t=Ke(t))||t instanceof MI?eA(i,"updateDoc",e._key,t,n,a):$I(i,"updateDoc",e._key,t)).toMutation(e._key,ey.exists(!0))])}function KA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,a;e=Ke(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||II(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(II(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(o=d.error)||void 0===o?void 0:o.bind(d),n[s+2]=null===(a=d.complete)||void 0===a?void 0:a.bind(d)}if(e instanceof mI)l=fI(e.firestore,CI),f=Em(e._key.path),c={next:function(t){n[s]&&n[s](QA(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=fI(e,yI);l=fI(p.firestore,CI),f=p._query;var v=new zA(l);c={next:function(e){n[s]&&n[s](new yA(l,v,p,e))},error:n[s+1],complete:n[s+2]},bA(e._query)}return function(e,t,n,r){var i=new FE(r),o=new C_(t,i,n);return e.asyncQueue.enqueueAndForget(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=w_,t.next=3,tI(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=k_,t.next=3,tI(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(SI(l),f,h,c)}function XA(e,t){return function(e,t){var n=new FE(t);return e.asyncQueue.enqueueAndForget(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){lp(e).Tu.add(t),t.next()},t.next=3,tI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(re(te().mark((function t(){return te().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){lp(e).Tu.delete(t)},t.next=3,tI(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(SI(e=fI(e,CI)),II(t)?t:{next:t})}function YA(e,t){return function(e,t){var n=new dp;return e.asyncQueue.enqueueAndForget(re(te().mark((function r(){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=H_,r.next=3,eI(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(SI(e),t)}function QA(e,t,n){var r=n.docs.get(t._key),i=new zA(e);return new vA(e,i,t._key,r,new pA(n.hasPendingWrites,n.fromCache),t.converter)}var ZA=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this,e,r))._firestore=e,i}return ce(n,[{key:"get",value:function(e){var t=this,r=VA(e,this._firestore),i=new zA(this._firestore);return In(pe(n.prototype),"get",this).call(this,e).then((function(e){return new vA(t._firestore,i,r._key,e._document,new pA(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){ue(this,e),this._firestore=t,this._transaction=n,this._dataReader=WI(t)}return ce(e,[{key:"get",value:function(e){var t=this,n=VA(e,this._firestore),r=new jA(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return sp();var i=e[0];if(i.isFoundDocument())return new fA(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new fA(t._firestore,r,n._key,null,n.converter);throw sp()}))}},{key:"set",value:function(e,t,n){var r=VA(e,this._firestore),i=FA(r.converter,t,n),o=qI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}},{key:"update",value:function(e,t,n){for(var r,i=VA(e,this._firestore),o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return r="string"==typeof(t=Ke(t))||t instanceof MI?eA(this._dataReader,"Transaction.update",i._key,t,n,a):$I(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=VA(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function JA(e,t,n){e=fI(e,CI);var r=Object.assign(Object.assign({},LA),n);return function(e){if(e.maxAttempts<1)throw new hp(fp.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new dp;return e.asyncQueue.enqueueAndForget(re(te().mark((function i(){var o;return te().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return YE(e).then((function(e){return e.datastore}))}(e);case 2:o=i.sent,new VE(e.asyncQueue,o,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(SI(e),(function(n){return t(new ZA(e,n))}),r)}function $A(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new QI("arrayUnion",t)}function eC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ZI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){tp=e}(Wt),Ft(new Qe("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),o=new CI(i,new yp(e.getProvider("auth-internal")),new kp(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o}),"PUBLIC")),Zt($d,"3.4.11",e),Zt($d,"3.4.11","esm2017")}();function tC(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new hp("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function nC(){if("undefined"===typeof Uint8Array)throw new hp("unimplemented","Uint8Arrays are not available in this environment.")}function rC(){if("undefined"==typeof atob)throw new hp("unimplemented","Blobs are unavailable in Firestore in this environment.")}var iC=function(){function e(t){ue(this,e),this._delegate=t}return ce(e,[{key:"toBase64",value:function(){return rC(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return nC(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return rC(),new e(LI.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return nC(),new e(LI.fromUint8Array(t))}}]),e}();function oC(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=le(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o in r&&"function"===typeof r[o])return!0}}catch(a){i.e(a)}finally{i.f()}return!1}(e,["next","error","complete"])}var aC=function(){function e(){ue(this,e)}return ce(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){PI(e=fI(e,CI));var n=SI(e),r=e._freezeSettings(),i=new LE;return TI(n,i,new PE(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){PI(e=fI(e,CI));var t=SI(e),n=e._freezeSettings(),r=new LE;return TI(t,r,new ME(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new hp(fp.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new dp;return e._queue.enqueueAndForgetEvenWhileRestricted(re(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yp.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Yp.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Nb(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),uC=function(){function e(t,n,r){var i=this;ue(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Av||(this._appCompat=t)}return ce(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||ap("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};vI(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return OI(this._delegate)}},{key:"disableNetwork",value:function(){return NI(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&uI("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new dp;return e.asyncQueue.enqueueAndForget(re(te().mark((function n(){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=eE,n.next=3,eI(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(SI(e=fI(e,CI)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return XA(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new hp("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new kC(this,wI(this._delegate,e))}catch(t){throw dC(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new hC(this,bI(this._delegate,e))}catch(t){throw dC(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new gC(this,function(e,t){if(e=fI(e,pI),aI("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new hp(fp.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new yI(e,null,function(e){return new km(Op.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw dC(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return JA(this._delegate,(function(n){return e(new cC(t,n))}))}},{key:"batch",value:function(){var e=this;return SI(this._delegate),new lC(new UA(this._delegate,(function(t){return YA(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return RI(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return DI(this._delegate,e).then((function(e){return e?new gC(t,e):null}))}}]),e}(),sC=function(e){de(n,e);var t=ye(n);function n(e){var r;return ue(this,n),(r=t.call(this)).firestore=e,r}return ce(n,[{key:"convertBytes",value:function(e){return new iC(new LI(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return hC.forKey(t,this.firestore,null)}}]),n}(BA);var cC=function(){function e(t,n){ue(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new sC(t)}return ce(e,[{key:"get",value:function(e){var t=this,n=_C(e);return this._delegate.get(n).then((function(e){return new mC(t._firestore,new vA(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=_C(e);return n?(tC("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a,u=_C(e);2===arguments.length?this._delegate.update(u,t):(a=this._delegate).update.apply(a,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=_C(e);return this._delegate.delete(t),this}}]),e}(),lC=function(){function e(t){ue(this,e),this._delegate=t}return ce(e,[{key:"set",value:function(e,t,n){var r=_C(e);return n?(tC("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a,u=_C(e);2===arguments.length?this._delegate.update(u,t):(a=this._delegate).update.apply(a,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=_C(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),fC=function(){function e(t,n,r){ue(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return ce(e,[{key:"fromFirestore",value:function(e,t){var n=new mA(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yC(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new sC(t),n),i.set(n,o)),o}}]),e}();fC.INSTANCES=new WeakMap;var hC=function(){function e(t,n){ue(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new sC(t)}return ce(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new kC(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new kC(this.firestore,wI(this._delegate,e))}catch(t){throw dC(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ke(e))instanceof mI&&kI(this._delegate,e)}},{key:"set",value:function(e,t){t=tC("DocumentReference.set",t);try{return t?WA(this._delegate,e,t):WA(this._delegate,e)}catch(n){throw dC(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?qA(this._delegate,e):qA.apply(void 0,[this._delegate,e,t].concat(r))}catch(o){throw dC(o,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return YA(fI(e.firestore,CI),[new vy(e._key,ey.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=pC(n),o=vC(n,(function(t){return new mC(e.firestore,new vA(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return KA(this._delegate,i,o)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?HA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fI(e,mI);var t=fI(e.firestore,CI);return rI(SI(t),e._key,{source:"server"}).then((function(n){return QA(t,e,n)}))}(this._delegate):function(e){e=fI(e,mI);var t=fI(e.firestore,CI);return rI(SI(t),e._key).then((function(n){return QA(t,e,n)}))}(this._delegate),t.then((function(e){return new mC(n.firestore,new vA(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(fC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new hp("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new mI(n._delegate,r,new Dp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new mI(n._delegate,r,t))}}]),e}();function dC(e,t,n){return e.message=e.message.replace(t,n),e}function pC(e){var t,n=le(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!oC(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function vC(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=oC(e[0])?e[0]:oC(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var mC=function(){function e(t,n){ue(this,e),this._firestore=t,this._delegate=n}return ce(e,[{key:"ref",get:function(){return new hC(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return wA(this._delegate,e._delegate)}}]),e}(),yC=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.apply(this,arguments)}return ce(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||sp()}(void 0!==t),t}}]),n}(mC),gC=function(){function e(t,n){ue(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new sC(t)}return ce(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,_A(this._delegate,function(e,t,n){var r=t,i=dA("where",e);return new EA(i,r,n)}(t,n,r)))}catch(i){throw dC(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,_A(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=dA("orderBy",e);return new IA(n,t)}(t,n)))}catch(r){throw dC(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,_A(this._delegate,function(e){return hI("limit",e),new AA("limit",e,"F")}(t)))}catch(n){throw dC(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,_A(this._delegate,function(e){return hI("limitToLast",e),new AA("limitToLast",e,"L")}(t)))}catch(n){throw dC(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,_A(this._delegate,SA.apply(void 0,arguments)))}catch(t){throw dC(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,_A(this._delegate,xA.apply(void 0,arguments)))}catch(t){throw dC(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,_A(this._delegate,OA.apply(void 0,arguments)))}catch(t){throw dC(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,_A(this._delegate,NA.apply(void 0,arguments)))}catch(t){throw dC(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return _I(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?GA(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=fI(e,yI);var t=fI(e.firestore,CI),n=SI(t),r=new zA(t);return iI(n,e._query,{source:"server"}).then((function(n){return new yA(t,r,e,n)}))}(this._delegate):function(e){e=fI(e,yI);var t=fI(e.firestore,CI),n=SI(t),r=new zA(t);return bA(e._query),iI(n,e._query).then((function(n){return new yA(t,r,e,n)}))}(this._delegate),t.then((function(e){return new bC(n.firestore,new yA(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=pC(n),o=vC(n,(function(t){return new bC(e.firestore,new yA(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return KA(this._delegate,i,o)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(fC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),wC=function(){function e(t,n){ue(this,e),this._firestore=t,this._delegate=n}return ce(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new yC(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),bC=function(){function e(t,n){ue(this,e),this._firestore=t,this._delegate=n}return ce(e,[{key:"query",get:function(){return new gC(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new yC(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new wC(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new yC(n._firestore,r))}))}},{key:"isEqual",value:function(e){return wA(this._delegate,e._delegate)}}]),e}(),kC=function(e){de(n,e);var t=ye(n);function n(e,r){var i;return ue(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return ce(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new hC(this.firestore,e):null}},{key:"doc",value:function(e){try{return new hC(this.firestore,void 0===e?bI(this._delegate):bI(this._delegate,e))}catch(t){throw dC(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=fI(e.firestore,CI),r=bI(e),i=FA(e.converter,t);return YA(n,[qI(WI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ey.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new hC(t.firestore,e)}))}},{key:"isEqual",value:function(e){return kI(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(fC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(gC);function _C(e){return fI(e,mI)}var EC=function(){function e(){ue(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=ge(MI,n)}return ce(e,[{key:"isEqual",value:function(e){return(e=Ke(e))instanceof MI&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Rp.keyField().canonicalString())}}]),e}(),IC=function(){function e(t){ue(this,e),this._delegate=t}return ce(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new YI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new KI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=$A.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=eC.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new JI("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),AC={Firestore:uC,GeoPoint:FI,Timestamp:Sp,Blob:iC,Transaction:cC,WriteBatch:lC,DocumentReference:hC,DocumentSnapshot:mC,Query:gC,QueryDocumentSnapshot:yC,QuerySnapshot:bC,CollectionReference:kC,FieldPath:EC,FieldValue:IC,setLogLevel:function(e){!function(e){np.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Qe("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},AC)))}(e,(function(e,t){return new uC(e,t,new aC)})),e.registerVersion("@firebase/firestore-compat","0.1.20")}(_n);var CC=_n.initializeApp({apiKey:"AIzaSyBSMi_Nzq32LJD4mU89qtOedm-OX7fY3nU",authDomain:"chatr-dev-38c4c.firebaseapp.com",projectId:"chatr-dev-38c4c",storageBucket:"chatr-dev-38c4c.appspot.com",messagingSenderId:"756607647283",appId:"1:756607647283:web:60f9cb255b2966e533ed46",measurementId:"G-S61JMWH1XJ"}),SC=CC.auth(),xC=_n.firestore(),TC=new _n.auth.GoogleAuthProvider,OC=new _n.auth.FacebookAuthProvider,NC=new _n.auth.GithubAuthProvider,RC=n(184),DC=r.createContext("defaultValue");function PC(){return(0,r.useContext)(DC)}function MC(e){var t=e.children,n=c((0,r.useState)(),2),i=n[0],o=n[1],a=c((0,r.useState)(!0),2),u=a[0],s=a[1];function l(){return(l=re(te().mark((function e(t){var n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Date.now(),r=xC.collection("users").doc(SC.currentUser.uid),e.next=4,r.update({displayName:t,editedDate:n}).then((function(){return!0})).onError((function(){}));case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,r.useEffect)((function(){return SC.onAuthStateChanged((function(e){o(e),s(!1)}))}),[]);var f={currentUser:i,login:function(e,t){return SC.signInWithEmailAndPassword(e,t)},signup:function(e,t){return SC.createUserWithEmailAndPassword(e,t)},logout:function(){return SC.signOut()},resetPassword:function(e){return SC.sendPasswordResetEmail(e)},updateEmail:function(e){return i.updateEmail(e)},updatePassword:function(e){return i.updatePassword(e)},updateName:function(e){return l.apply(this,arguments)}};return(0,RC.jsx)(DC.Provider,{value:f,children:!u&&t})}function LC(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function BC(e,t){if(null==e)return{};var n,r,i=LC(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var FC=n(1694),jC=n.n(FC);n(2176);function UC(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function VC(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function zC(e,t){return Object.keys(t).reduce((function(n,i){var o,a=n,u=a[UC(i)],s=a[i],c=LC(a,[UC(i),i].map(VC)),f=t[i],h=function(e,t,n){var i=(0,r.useRef)(void 0!==e),o=(0,r.useState)(t),a=o[0],u=o[1],s=void 0!==e,c=i.current;return i.current=s,!s&&c&&a!==t&&u(t),[s?e:a,(0,r.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n&&n.apply(void 0,[e].concat(r)),u(e)}),[n])]}(s,u,e[f]),d=h[0],p=h[1];return l({},c,((o={})[i]=d,o[f]=p,o))}),e)}function HC(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function GC(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function WC(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}HC.__suppressDeprecationWarning=!0,GC.__suppressDeprecationWarning=!0,WC.__suppressDeprecationWarning=!0;var qC=function(e){var t=(0,r.useRef)(e);return(0,r.useEffect)((function(){t.current=e}),[e]),t};function KC(e){var t=qC(e);return(0,r.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}var XC="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,YC="undefined"!==typeof document||XC?r.useLayoutEffect:r.useEffect;new WeakMap;var QC=["as","disabled"];function ZC(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,o=e.rel,a=e.onClick,u=e.tabIndex,s=void 0===u?0:u,c=e.type;t||(t=null!=r||null!=i||null!=o?"a":"button");var l={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},l];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:s,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?o:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},l]}var JC=r.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,QC),o=c(ZC(Object.assign({tagName:n,disabled:r},i)),2),a=o[0],u=o[1].tagName;return(0,RC.jsx)(u,Object.assign({},i,a,{ref:t}))}));JC.displayName="Button";var $C=["onKeyDown"];var eS=r.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,$C),o=c(ZC(Object.assign({tagName:"a"},i)),1)[0],a=KC((function(e){o.onKeyDown(e),null==r||r(e)}));return((n=i.href)&&"#"!==n.trim()||i.role)&&"button"!==i.role?(0,RC.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,RC.jsx)("a",Object.assign({ref:t},i,o,{onKeyDown:a}))}));eS.displayName="Anchor";var tS=eS,nS=["xxl","xl","lg","md","sm","xs"],rS=r.createContext({prefixes:{},breakpoints:nS});rS.Consumer,rS.Provider;function iS(e,t){var n=(0,r.useContext)(rS).prefixes;return e||n[t]||t}var oS=n(4164),aS=!1,uS=r.createContext(null),sS="unmounted",cS="exited",lS="entering",fS="entered",hS="exiting",dS=function(e){var t,n;function i(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=cS,r.appearStatus=lS):i=fS:i=t.unmountOnExit||t.mountOnEnter?sS:cS,r.state={status:i},r.nextCallback=null,r}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,he(t,n),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===sS?{status:cS}:null};var o=i.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==lS&&n!==fS&&(t=lS):n!==lS&&n!==fS||(t=hS)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===lS?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===cS&&this.setState({status:sS})},o.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[oS.findDOMNode(this),r],o=i[0],a=i[1],u=this.getTimeouts(),s=r?u.appear:u.enter;!e&&!n||aS?this.safeSetState({status:fS},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:lS},(function(){t.props.onEntering(o,a),t.onTransitionEnd(s,(function(){t.safeSetState({status:fS},(function(){t.props.onEntered(o,a)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:oS.findDOMNode(this);t&&!aS?(this.props.onExit(r),this.safeSetState({status:hS},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:cS},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:cS},(function(){e.props.onExited(r)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:oS.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===sS)return null;var t=this.props,n=t.children,i=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,LC(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return r.createElement(uS.Provider,{value:null},"function"===typeof n?n(e,i):r.cloneElement(r.Children.only(n),i))},i}(r.Component);function pS(){}dS.contextType=uS,dS.propTypes={},dS.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:pS,onEntering:pS,onEntered:pS,onExit:pS,onExiting:pS,onExited:pS},dS.UNMOUNTED=sS,dS.EXITED=cS,dS.ENTERING=lS,dS.ENTERED=fS,dS.EXITING=hS;var vS=dS;function mS(e){return e&&e.ownerDocument||document}function yS(e,t){return function(e){var t=mS(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var gS=/([A-Z])/g;var wS=/^ms-/;function bS(e){return function(e){return e.replace(gS,"-$1").toLowerCase()}(e).replace(wS,"-ms-")}var kS=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var _S=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(bS(t))||yS(e).getPropertyValue(bS(t));Object.keys(t).forEach((function(i){var o=t[i];o||0===o?!function(e){return!(!e||!kS.test(e))}(i)?n+=bS(i)+": "+o+";":r+=i+"("+o+") ":e.style.removeProperty(bS(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},ES=!("undefined"===typeof window||!window.document||!window.document.createElement),IS=!1,AS=!1;try{var CS={get passive(){return IS=!0},get once(){return AS=IS=!0}};ES&&(window.addEventListener("test",CS,CS),window.removeEventListener("test",CS,!0))}catch(Rj){}var SS=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!AS){var i=r.once,o=r.capture,a=n;!AS&&i&&(a=n.__once||function e(r){this.removeEventListener(t,e,o),n.call(this,r)},n.__once=a),e.addEventListener(t,a,IS?r:o)}e.addEventListener(t,n,r)};var xS=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var TS=function(e,t,n,r){return SS(e,t,n,r),function(){xS(e,t,n,r)}};function OS(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),o=TS(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),o()}}function NS(e,t,n,r){null==n&&(n=function(e){var t=_S(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=OS(e,n,r),o=TS(e,"transitionend",t);return function(){i(),o()}}function RS(e,t){var n=_S(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function DS(e,t){var n=RS(e,"transitionDuration"),r=RS(e,"transitionDelay"),i=NS(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}function PS(e){e.offsetHeight}var MS=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var LS=function(e,t){return(0,r.useMemo)((function(){return function(e,t){var n=MS(e),r=MS(t);return function(e){n&&n(e),r&&r(e)}}(e,t)}),[e,t])};var BS,FS=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],jS=r.forwardRef((function(e,t){var n=e.onEnter,i=e.onEntering,o=e.onEntered,a=e.onExit,u=e.onExiting,s=e.onExited,c=e.addEndListener,l=e.children,f=e.childRef,h=BC(e,FS),d=(0,r.useRef)(null),p=LS(d,f),v=function(e){var t;p((t=e)&&"setState"in t?oS.findDOMNode(t):null!=t?t:null)},m=function(e){return function(t){e&&d.current&&e(d.current,t)}},y=(0,r.useCallback)(m(n),[n]),g=(0,r.useCallback)(m(i),[i]),w=(0,r.useCallback)(m(o),[o]),b=(0,r.useCallback)(m(a),[a]),k=(0,r.useCallback)(m(u),[u]),_=(0,r.useCallback)(m(s),[s]),E=(0,r.useCallback)(m(c),[c]);return(0,RC.jsx)(vS,ct(ct({ref:t},h),{},{onEnter:y,onEntered:w,onEntering:g,onExit:b,onExited:_,onExiting:k,addEndListener:E,nodeRef:d,children:"function"===typeof l?function(e,t){return l(e,ct(ct({},t),{},{ref:v}))}:r.cloneElement(l,{ref:v})}))})),US=jS,VS=["className","children","transitionClasses"],zS=(ae(BS={},lS,"show"),ae(BS,fS,"show"),BS),HS=r.forwardRef((function(e,t){var n=e.className,i=e.children,o=e.transitionClasses,a=void 0===o?{}:o,u=BC(e,VS),s=(0,r.useCallback)((function(e,t){PS(e),null==u.onEnter||u.onEnter(e,t)}),[u]);return(0,RC.jsx)(US,ct(ct({ref:t,addEndListener:DS},u),{},{onEnter:s,childRef:i.ref,children:function(e,t){return r.cloneElement(i,ct(ct({},t),{},{className:jC()("fade",n,i.props.className,zS[e],a[e])}))}}))}));HS.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},HS.displayName="Fade";var GS=HS,WS=n(2007),qS=n.n(WS),KS=["className","variant"],XS={"aria-label":qS().string,onClick:qS().func,variant:qS().oneOf(["white"])},YS=r.forwardRef((function(e,t){var n=e.className,r=e.variant,i=BC(e,KS);return(0,RC.jsx)("button",ct({ref:t,type:"button",className:jC()("btn-close",r&&"btn-close-".concat(r),n)},i))}));YS.displayName="CloseButton",YS.propTypes=XS,YS.defaultProps={"aria-label":"Close"};var QS=YS,ZS=function(e){return r.forwardRef((function(t,n){return(0,RC.jsx)("div",ct(ct({},t),{},{ref:n,className:jC()(t.className,e)}))}))},JS=/-(.)/g;var $S=["className","bsPrefix","as"],ex=function(e){return e[0].toUpperCase()+(t=e,t.replace(JS,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function tx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.displayName,i=void 0===n?ex(e):n,o=t.Component,a=t.defaultProps,u=r.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,a=t.as,u=void 0===a?o||"div":a,s=BC(t,$S),c=iS(i,e);return(0,RC.jsx)(u,ct({ref:n,className:jC()(r,c)},s))}));return u.defaultProps=a,u.displayName=i,u}var nx=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],rx=ZS("h4");rx.displayName="DivStyledAsH4";var ix=tx("alert-heading",{Component:rx}),ox=tx("alert-link",{Component:tS}),ax={variant:"primary",show:!0,transition:GS,closeLabel:"Close alert"},ux=r.forwardRef((function(e,t){var n=zC(e,{show:"onClose"}),r=n.bsPrefix,i=n.show,o=n.closeLabel,a=n.closeVariant,u=n.className,s=n.children,c=n.variant,l=n.onClose,f=n.dismissible,h=n.transition,d=BC(n,nx),p=iS(r,"alert"),v=KC((function(e){l&&l(!1,e)})),m=!0===h?GS:h,y=(0,RC.jsxs)("div",ct(ct({role:"alert"},m?void 0:d),{},{ref:t,className:jC()(u,p,c&&"".concat(p,"-").concat(c),f&&"".concat(p,"-dismissible")),children:[f&&(0,RC.jsx)(QS,{onClick:v,"aria-label":o,variant:a}),s]}));return m?(0,RC.jsx)(m,ct(ct({unmountOnExit:!0},d),{},{ref:void 0,in:i,children:y})):i?y:null}));ux.displayName="Alert",ux.defaultProps=ax;var sx=Object.assign(ux,{Link:ox,Heading:ix}),cx=["as","className","type","tooltip"],lx={type:qS().string,tooltip:qS().bool,as:qS().elementType},fx=r.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,o=e.type,a=void 0===o?"valid":o,u=e.tooltip,s=void 0!==u&&u,c=BC(e,cx);return(0,RC.jsx)(r,ct(ct({},c),{},{ref:t,className:jC()(i,"".concat(a,"-").concat(s?"tooltip":"feedback"))}))}));fx.displayName="Feedback",fx.propTypes=lx;var hx=fx,dx=r.createContext({}),px=["id","bsPrefix","className","type","isValid","isInvalid","as"],vx=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,o=e.className,a=e.type,u=void 0===a?"checkbox":a,s=e.isValid,c=void 0!==s&&s,l=e.isInvalid,f=void 0!==l&&l,h=e.as,d=void 0===h?"input":h,p=BC(e,px),v=(0,r.useContext)(dx).controlId;return i=iS(i,"form-check-input"),(0,RC.jsx)(d,ct(ct({},p),{},{ref:t,type:u,id:n||v,className:jC()(o,i,c&&"is-valid",f&&"is-invalid")}))}));vx.displayName="FormCheckInput";var mx=vx,yx=["bsPrefix","className","htmlFor"],gx=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,o=e.htmlFor,a=BC(e,yx),u=(0,r.useContext)(dx).controlId;return n=iS(n,"form-check-label"),(0,RC.jsx)("label",ct(ct({},a),{},{ref:t,htmlFor:o||u,className:jC()(i,n)}))}));gx.displayName="FormCheckLabel";var wx=gx;var bx=["id","bsPrefix","bsSwitchPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],kx=r.forwardRef((function(e,t){var n=e.id,i=e.bsPrefix,o=e.bsSwitchPrefix,a=e.inline,u=void 0!==a&&a,s=e.disabled,c=void 0!==s&&s,l=e.isValid,f=void 0!==l&&l,h=e.isInvalid,d=void 0!==h&&h,p=e.feedbackTooltip,v=void 0!==p&&p,m=e.feedback,y=e.feedbackType,g=e.className,w=e.style,b=e.title,k=void 0===b?"":b,_=e.type,E=void 0===_?"checkbox":_,I=e.label,A=e.children,C=e.as,S=void 0===C?"input":C,x=BC(e,bx);i=iS(i,"form-check"),o=iS(o,"form-switch");var T=(0,r.useContext)(dx).controlId,O=(0,r.useMemo)((function(){return{controlId:n||T}}),[T,n]),N=!A&&null!=I&&!1!==I||function(e,t){return r.Children.toArray(e).some((function(e){return r.isValidElement(e)&&e.type===t}))}(A,wx),R=(0,RC.jsx)(mx,ct(ct({},x),{},{type:"switch"===E?"checkbox":E,ref:t,isValid:f,isInvalid:d,disabled:c,as:S}));return(0,RC.jsx)(dx.Provider,{value:O,children:(0,RC.jsx)("div",{style:w,className:jC()(g,N&&i,u&&"".concat(i,"-inline"),"switch"===E&&o),children:A||(0,RC.jsxs)(RC.Fragment,{children:[R,N&&(0,RC.jsx)(wx,{title:k,children:I}),m&&(0,RC.jsx)(hx,{type:y,tooltip:v,children:m})]})})})}));kx.displayName="FormCheck";var _x=Object.assign(kx,{Input:mx,Label:wx}),Ex=(n(2391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),Ix=r.forwardRef((function(e,t){var n,i,o=e.bsPrefix,a=e.type,u=e.size,s=e.htmlSize,c=e.id,l=e.className,f=e.isValid,h=void 0!==f&&f,d=e.isInvalid,p=void 0!==d&&d,v=e.plaintext,m=e.readOnly,y=e.as,g=void 0===y?"input":y,w=BC(e,Ex),b=(0,r.useContext)(dx).controlId;(o=iS(o,"form-control"),v)?n=ae({},"".concat(o,"-plaintext"),!0):(ae(i={},o,!0),ae(i,"".concat(o,"-").concat(u),u),n=i);return(0,RC.jsx)(g,ct(ct({},w),{},{type:a,size:s,ref:t,readOnly:m,id:c||b,className:jC()(l,n,h&&"is-valid",p&&"is-invalid","color"===a&&"".concat(o,"-color"))}))}));Ix.displayName="FormControl";var Ax=Object.assign(Ix,{Feedback:hx}),Cx=tx("form-floating"),Sx=["controlId","as"],xx=r.forwardRef((function(e,t){var n=e.controlId,i=e.as,o=void 0===i?"div":i,a=BC(e,Sx),u=(0,r.useMemo)((function(){return{controlId:n}}),[n]);return(0,RC.jsx)(dx.Provider,{value:u,children:(0,RC.jsx)(o,ct(ct({},a),{},{ref:t}))})}));xx.displayName="FormGroup";var Tx=xx,Ox=["as","bsPrefix","className"],Nx=["className"];function Rx(e){var t=e.as,n=e.bsPrefix,i=e.className,o=BC(e,Ox);n=iS(n,"col");var a=(0,r.useContext)(rS).breakpoints,u=[],s=[];return a.forEach((function(e){var t,r,i,a=o[e];delete o[e],"object"===typeof a&&null!=a?(t=a.span,r=a.offset,i=a.order):t=a;var c="xs"!==e?"-".concat(e):"";t&&u.push(!0===t?"".concat(n).concat(c):"".concat(n).concat(c,"-").concat(t)),null!=i&&s.push("order".concat(c,"-").concat(i)),null!=r&&s.push("offset".concat(c,"-").concat(r))})),[ct(ct({},o),{},{className:jC().apply(void 0,[i].concat(u,s))}),{as:t,bsPrefix:n,spans:u}]}var Dx=r.forwardRef((function(e,t){var n=c(Rx(e),2),r=n[0],i=r.className,o=BC(r,Nx),a=n[1],u=a.as,s=void 0===u?"div":u,l=a.bsPrefix,f=a.spans;return(0,RC.jsx)(s,ct(ct({},o),{},{ref:t,className:jC()(i,!f.length&&l)}))}));Dx.displayName="Col";var Px=Dx,Mx=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],Lx=r.forwardRef((function(e,t){var n=e.as,i=void 0===n?"label":n,o=e.bsPrefix,a=e.column,u=e.visuallyHidden,s=e.className,c=e.htmlFor,l=BC(e,Mx),f=(0,r.useContext)(dx).controlId;o=iS(o,"form-label");var h="col-form-label";"string"===typeof a&&(h="".concat(h," ").concat(h,"-").concat(a));var d=jC()(s,o,u&&"visually-hidden",a&&h);return c=c||f,a?(0,RC.jsx)(Px,ct({ref:t,as:"label",className:d,htmlFor:c},l)):(0,RC.jsx)(i,ct({ref:t,className:d,htmlFor:c},l))}));Lx.displayName="FormLabel",Lx.defaultProps={column:!1,visuallyHidden:!1};var Bx=Lx,Fx=["bsPrefix","className","id"],jx=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,o=e.id,a=BC(e,Fx),u=(0,r.useContext)(dx).controlId;return n=iS(n,"form-range"),(0,RC.jsx)("input",ct(ct({},a),{},{type:"range",ref:t,className:jC()(i,n),id:o||u}))}));jx.displayName="FormRange";var Ux=jx,Vx=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],zx=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.size,o=e.htmlSize,a=e.className,u=e.isValid,s=void 0!==u&&u,c=e.isInvalid,l=void 0!==c&&c,f=e.id,h=BC(e,Vx),d=(0,r.useContext)(dx).controlId;return n=iS(n,"form-select"),(0,RC.jsx)("select",ct(ct({},h),{},{size:o,ref:t,className:jC()(a,n,i&&"".concat(n,"-").concat(i),s&&"is-valid",l&&"is-invalid"),id:f||d}))}));zx.displayName="FormSelect";var Hx=zx,Gx=["bsPrefix","className","as","muted"],Wx=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,o=void 0===i?"small":i,a=e.muted,u=BC(e,Gx);return n=iS(n,"form-text"),(0,RC.jsx)(o,ct(ct({},u),{},{ref:t,className:jC()(r,n,a&&"text-muted")}))}));Wx.displayName="FormText";var qx=Wx,Kx=r.forwardRef((function(e,t){return(0,RC.jsx)(_x,ct(ct({},e),{},{ref:t,type:"switch"}))}));Kx.displayName="Switch";var Xx=Object.assign(Kx,{Input:_x.Input,Label:_x.Label}),Yx=["bsPrefix","className","children","controlId","label"],Qx=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,o=e.controlId,a=e.label,u=BC(e,Yx);return n=iS(n,"form-floating"),(0,RC.jsxs)(Tx,ct(ct({ref:t,className:jC()(r,n),controlId:o},u),{},{children:[i,(0,RC.jsx)("label",{htmlFor:o,children:a})]}))}));Qx.displayName="FloatingLabel";var Zx=Qx,Jx=["className","validated","as"],$x={_ref:qS().any,validated:qS().bool,as:qS().elementType},eT=r.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,o=void 0===i?"form":i,a=BC(e,Jx);return(0,RC.jsx)(o,ct(ct({},a),{},{ref:t,className:jC()(n,r&&"was-validated")}))}));eT.displayName="Form",eT.propTypes=$x;var tT=Object.assign(eT,{Group:Tx,Control:Ax,Floating:Cx,Check:_x,Switch:Xx,Label:Bx,Text:qx,Range:Ux,Select:Hx,FloatingLabel:Zx}),nT=["color","size","title"];function rT(){return rT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rT.apply(this,arguments)}function iT(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var oT=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=iT(e,nT);return r.createElement("svg",rT({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"}))}));oT.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},oT.defaultProps={color:"currentColor",size:"1em",title:null};var aT=oT,uT=["color","size","title"];function sT(){return sT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sT.apply(this,arguments)}function cT(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var lT=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=cT(e,uT);return r.createElement("svg",sT({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"}))}));lT.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},lT.defaultProps={color:"currentColor",size:"1em",title:null};var fT=lT,hT="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/7QCcUGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAIAcAmcAFE9vXzRoLVVyb3FkdWlkc2NkVktwHAIoAGJGQk1EMGEwMDBhODIwMTAwMDBkNjAxMDAwMDI0MDIwMDAwNDUwMjAwMDA2ZjAyMDAwMGIwMDIwMDAwZjEwMjAwMDAyNDAzMDAwMDRiMDMwMDAwN2MwMzAwMDBlNjAzMDAwMP/bAEMABgQFBgUEBgYFBgcHBggKEAoKCQkKFA4PDBAXFBgYFxQWFhodJR8aGyMcFhYgLCAjJicpKikZHy0wLSgwJSgpKP/bAEMBBwcHCggKEwoKEygaFhooKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKP/CABEIADIAMgMBIgACEQEDEQH/xAAaAAEAAwEBAQAAAAAAAAAAAAAAAgMFBAEG/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAfuSdlrTRiLqaAXUjbQlLm8/vlgD3o0CE5JcaO1w2cYNa0lARDGFn//EAB0QAAICAgMBAAAAAAAAAAAAAAECAxAAERIgMzH/2gAIAQEAAQUCpYmbHiK9UG2qUakuL0qf06I3JSdAnZsDeRrxRhtWBW4o+WAAWRvJYtVF59G+Z//EABQRAQAAAAAAAAAAAAAAAAAAAED/2gAIAQMBAT8BB//EABQRAQAAAAAAAAAAAAAAAAAAAED/2gAIAQIBAT8BB//EAB0QAAICAgMBAAAAAAAAAAAAAAABEBEgIQIwUTH/2gAIAQEABj8Cjw9xSl4LossvDRQ0bm38NTsvjCxcf//EAB8QAQABBAIDAQAAAAAAAAAAAAERABAgMSFhQVGhsf/aAAgBAQABPyGxE8Dugp06xkbS3AJgJl93ELA41QAKJ1opEW3BFAlpgW67oKUgxf0z9UbBi4CBJUF1eS3y4/Fb/9oADAMBAAIAAwAAABDo/b67B77yzn5zzz7/xAAXEQADAQAAAAAAAAAAAAAAAAAAESAQ/9oACAEDAQE/EBWsVf/EABgRAQADAQAAAAAAAAAAAAAAAAEAECAR/9oACAECAQE/EJ3a0Ov/xAAhEAEAAQIGAwEAAAAAAAAAAAABEQAhECAxQWFxUYGhsf/aAAgBAQABPxDAjedHd6oMOZDb1lDTBHqixbAgIJmOychDSF3uMQhqqC8ORKFQlxK3lC54d6cWAlpnZSXIfe2wVErrWPLV/wCFAalpXx6xQSssEa0j5HGLcibJQqGN12OM7fU/KNCv/9k=";function dT(e){var t=e.count;return Ye(Array(t)).map((function(e,t){return(0,RC.jsxs)("li",{className:"loading-contact",children:[(0,RC.jsx)("div",{className:"user-icon",children:(0,RC.jsx)("img",{className:"rounded-circle",src:hT,alt:"defaultUserImage",style:{width:"3em"}})}),(0,RC.jsxs)("span",{children:[(0,RC.jsx)("strong",{children:"\xa0"}),(0,RC.jsx)("small",{children:"\xa0"})]})]},t)}))}function pT(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c((0,r.useState)(""),2),o=i[0],a=i[1],u=c((0,r.useState)(!1),2),s=u[0],l=u[1],f=c((0,r.useState)(null),2),h=f[0],d=f[1],p=j(),v=(0,r.useRef)(""),m=xC.collection("users");function y(){return(y=re(te().mark((function e(){var t,n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,w(),e.next=4,m.doc(SC.currentUser.uid).get().then((function(e){var t;if(e.exists)return null!==(t=e.data().contacts&&e.data().contacts.map((function(e){return e.uid})))&&void 0!==t?t:null}));case 4:if(t=e.sent,l(!1),null!=t){e.next=8;break}return e.abrupt("return");case 8:return w(),e.next=11,m.where("uid","in",t).get().then((function(e){var t;return null!==(t=e.docs.map((function(e){return e.data()})))&&void 0!==t?t:null}));case 11:if(n=e.sent,l(!1),null!=n){e.next=15;break}return e.abrupt("return");case 15:d(n),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),b(e.t0,"get-user-error.");case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function g(){}function w(){a(""),n(""),l(!0)}function b(e,t){l(!1);var r=t+" "+e.message;return console.error(r),n(t)}return(0,r.useEffect)((function(){!function(){y.apply(this,arguments)}()}),[]),(0,RC.jsx)("div",{className:"page",children:(0,RC.jsxs)("div",{id:"ContactsDiv",className:"container",children:[t&&(0,RC.jsx)(sx,{variant:"danger",children:t}),o&&(0,RC.jsx)(sx,{variant:"success",children:o}),(0,RC.jsxs)(tT,{id:"SearchUserCode",className:"form mb-dot5",onSubmit:function(e){e.preventDefault(),v.current.value},children:[(0,RC.jsx)("input",{type:"text",className:"form-control form",placeholder:"Search...",ref:v}),(0,RC.jsx)("button",{className:"btn",type:"submit",title:"Search",onError:g,children:(0,RC.jsx)(aT,{})}),(0,RC.jsx)("a",{className:"btn",href:"/addcontact",children:(0,RC.jsx)(fT,{})})]}),(0,RC.jsxs)("ul",{id:"Contacts",className:"contacts",children:[s&&(0,RC.jsx)(dT,{count:5}),!s&&!h&&(0,RC.jsx)("li",{children:"No contacts yet. Click the plus button to add some."}),!s&&h&&h.map((function(e){return(0,RC.jsxs)("li",{id:e.uid,onClick:function(){return t=e.uid,void p("/conversation/"+t);var t},className:"contact contact_small logged-"+(e&&e.isLoggedIn?"in":"out"),children:[(0,RC.jsxs)("div",{className:"user",children:[(0,RC.jsx)("img",{className:"rounded-circle",onError:function(){return g},src:e&&(e.providerData.photoURL||hT),alt:e&&e.displayName}),(0,RC.jsx)("span",{className:"dot indicator",children:"\u25cf"})]}),(0,RC.jsxs)("div",{className:"content",children:[(0,RC.jsx)("strong",{className:"title",children:e&&(e.displayName||e.providerData.displayName)}),(0,RC.jsx)("span",{className:"tag indicator"})]})]},e.uid)}))]})]})})}var vT=r.createContext(null),mT=["bsPrefix","className","as"],yT=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,o=BC(e,mT);n=iS(n,"navbar-brand");var a=i||(o.href?"a":"span");return(0,RC.jsx)(a,ct(ct({},o),{},{ref:t,className:jC()(r,n)}))}));yT.displayName="NavbarBrand";var gT=yT;var wT,bT=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)},kT=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],_T={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function ET(e,t){var n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=_T[e];return n+parseInt(_S(t,r[0]),10)+parseInt(_S(t,r[1]),10)}var IT=(ae(wT={},cS,"collapse"),ae(wT,hS,"collapsing"),ae(wT,lS,"collapsing"),ae(wT,fS,"collapse show"),wT),AT={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:ET},CT=r.forwardRef((function(e,t){var n=e.onEnter,i=e.onEntering,o=e.onEntered,a=e.onExit,u=e.onExiting,s=e.className,c=e.children,l=e.dimension,f=void 0===l?"height":l,h=e.getDimensionValue,d=void 0===h?ET:h,p=BC(e,kT),v="function"===typeof f?f():f,m=(0,r.useMemo)((function(){return bT((function(e){e.style[v]="0"}),n)}),[v,n]),y=(0,r.useMemo)((function(){return bT((function(e){var t="scroll".concat(v[0].toUpperCase()).concat(v.slice(1));e.style[v]="".concat(e[t],"px")}),i)}),[v,i]),g=(0,r.useMemo)((function(){return bT((function(e){e.style[v]=null}),o)}),[v,o]),w=(0,r.useMemo)((function(){return bT((function(e){e.style[v]="".concat(d(v,e),"px"),PS(e)}),a)}),[a,d,v]),b=(0,r.useMemo)((function(){return bT((function(e){e.style[v]=null}),u)}),[v,u]);return(0,RC.jsx)(US,ct(ct({ref:t,addEndListener:DS},p),{},{"aria-expanded":p.role?p.in:null,onEnter:m,onEntering:y,onEntered:g,onExit:w,onExiting:b,childRef:c.ref,children:function(e,t){return r.cloneElement(c,ct(ct({},t),{},{className:jC()(s,c.props.className,IT[e],"width"===v&&"collapse-horizontal")}))}}))}));CT.defaultProps=AT;var ST=CT,xT=r.createContext(null);xT.displayName="NavbarContext";var TT=xT,OT=["children","bsPrefix"],NT=r.forwardRef((function(e,t){var n=e.children,i=e.bsPrefix,o=BC(e,OT);i=iS(i,"navbar-collapse");var a=(0,r.useContext)(TT);return(0,RC.jsx)(ST,ct(ct({in:!(!a||!a.expanded)},o),{},{children:(0,RC.jsx)("div",{ref:t,className:i,children:n})}))}));NT.displayName="NavbarCollapse";var RT=NT,DT=["bsPrefix","className","children","label","as","onClick"],PT=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,o=e.children,a=e.label,u=e.as,s=void 0===u?"button":u,c=e.onClick,l=BC(e,DT);n=iS(n,"navbar-toggler");var f=(0,r.useContext)(TT)||{},h=f.onToggle,d=f.expanded,p=KC((function(e){c&&c(e),h&&h()}));return"button"===s&&(l.type="button"),(0,RC.jsx)(s,ct(ct({},l),{},{ref:t,onClick:p,"aria-label":a,className:jC()(i,n,!d&&"collapsed"),children:o||(0,RC.jsx)("span",{className:"".concat(n,"-icon")})}))}));PT.displayName="NavbarToggle",PT.defaultProps={label:"Toggle navigation"};var MT=PT,LT=new WeakMap,BT=function(e,t){if(e&&t){var n=LT.get(t)||new Map;LT.set(t,n);var r=n.get(e);return r||((r=t.matchMedia(e)).refCount=0,n.set(r.media,r)),r}};function FT(e,t){void 0===t&&(t="undefined"===typeof window?void 0:window);var n=BT(e,t),i=(0,r.useState)((function(){return!!n&&n.matches})),o=i[0],a=i[1];return YC((function(){var n=BT(e,t);if(!n)return a(!1);var r=LT.get(t),i=function(){a(n.matches)};return n.refCount++,n.addListener(i),i(),function(){n.removeListener(i),n.refCount--,n.refCount<=0&&(null==r||r.delete(n.media)),n=void 0}}),[e]),o}var jT=function(e){var t=Object.keys(e);function n(e,t){return e===t?t:e?e+" and "+t:t}function i(n){var r=function(e){return t[Math.min(t.indexOf(e)+1,t.length-1)]}(n),i=e[r];return"(max-width: "+(i="number"===typeof i?i-.2+"px":"calc("+i+" - 0.2px)")+")"}return function(t,o,a){var u,s;"object"===typeof t?(u=t,a=o,o=!0):((s={})[t]=o=o||!0,u=s);var c=(0,r.useMemo)((function(){return Object.entries(u).reduce((function(t,r){var o=r[0],a=r[1];return"up"!==a&&!0!==a||(t=n(t,function(t){var n=e[t];return"number"===typeof n&&(n+="px"),"(min-width: "+n+")"}(o))),"down"!==a&&!0!==a||(t=n(t,i(o))),t}),"")}),[JSON.stringify(u)]);return FT(c,a)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400});function UT(e){void 0===e&&(e=mS());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(Rj){return e.body}}function VT(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function zT(e){var t=function(e){var t=(0,r.useRef)(e);return t.current=e,t}(e);(0,r.useEffect)((function(){return function(){return t.current()}}),[])}var HT,GT=(HT="modal-open","".concat("data-rr-ui-").concat(HT)),WT=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,i=void 0===r||r,o=t.isRTL,a=void 0!==o&&o;ue(this,e),this.handleContainerOverflow=i,this.isRTL=a,this.modals=[],this.ownerDocument=n}return ce(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=ae({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(_S(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(GT,""),_S(r,t)}},{key:"reset",value:function(){var e=this;Ye(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(GT),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),qT=WT,KT=(0,r.createContext)(ES?window:void 0);KT.Provider;function XT(){return(0,r.useContext)(KT)}var YT=function(e,t){var n;return ES?null==e?(t||mS()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};var QT,ZT=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function JT(e){var t=XT(),n=e||function(e){return QT||(QT=new qT({ownerDocument:null==e?void 0:e.document})),QT}(t),i=(0,r.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:function(){return n.add(i.current)},remove:function(){return n.remove(i.current)},isTopModal:function(){return n.isTopModal(i.current)},setDialogRef:(0,r.useCallback)((function(e){i.current.dialog=e}),[]),setBackdropRef:(0,r.useCallback)((function(e){i.current.backdrop=e}),[])})}var $T=(0,r.forwardRef)((function(e,t){var n=e.show,i=void 0!==n&&n,o=e.role,a=void 0===o?"dialog":o,u=e.className,s=e.style,l=e.children,f=e.backdrop,h=void 0===f||f,d=e.keyboard,p=void 0===d||d,v=e.onBackdropClick,m=e.onEscapeKeyDown,y=e.transition,g=e.backdropTransition,w=e.autoFocus,b=void 0===w||w,k=e.enforceFocus,_=void 0===k||k,E=e.restoreFocus,I=void 0===E||E,A=e.restoreFocusOptions,C=e.renderDialog,S=e.renderBackdrop,x=void 0===S?function(e){return(0,RC.jsx)("div",Object.assign({},e))}:S,T=e.manager,O=e.container,N=e.onShow,R=e.onHide,D=void 0===R?function(){}:R,P=e.onExit,M=e.onExited,L=e.onExiting,B=e.onEnter,F=e.onEntering,j=e.onEntered,U=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,ZT),V=function(e,t){var n=XT(),i=c((0,r.useState)((function(){return YT(e,null==n?void 0:n.document)})),2),o=i[0],a=i[1];if(!o){var u=YT(e);u&&a(u)}return(0,r.useEffect)((function(){t&&o&&t(o)}),[t,o]),(0,r.useEffect)((function(){var t=YT(e);t!==o&&a(t)}),[e,o]),o}(O),z=JT(T),H=function(){var e=(0,r.useRef)(!0),t=(0,r.useRef)((function(){return e.current}));return(0,r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t.current}(),G=function(e){var t=(0,r.useRef)(null);return(0,r.useEffect)((function(){t.current=e})),t.current}(i),W=c((0,r.useState)(!i),2),q=W[0],K=W[1],X=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,(function(){return z}),[z]),ES&&!G&&i&&(X.current=UT()),y||i||q?i&&q&&K(!1):K(!0);var Y=KC((function(){if(z.add(),te.current=TS(document,"keydown",$),ee.current=TS(document,"focus",(function(){return setTimeout(Z)}),!0),N&&N(),b){var e=UT(document);z.dialog&&e&&!VT(z.dialog,e)&&(X.current=e,z.dialog.focus())}})),Q=KC((function(){var e;(z.remove(),null==te.current||te.current(),null==ee.current||ee.current(),I)&&(null==(e=X.current)||null==e.focus||e.focus(A),X.current=null)}));(0,r.useEffect)((function(){i&&V&&Y()}),[i,V,Y]),(0,r.useEffect)((function(){q&&Q()}),[q,Q]),zT((function(){Q()}));var Z=KC((function(){if(_&&H()&&z.isTopModal()){var e=UT();z.dialog&&e&&!VT(z.dialog,e)&&z.dialog.focus()}})),J=KC((function(e){e.target===e.currentTarget&&(null==v||v(e),!0===h&&D())})),$=KC((function(e){p&&27===e.keyCode&&z.isTopModal()&&(null==m||m(e),e.defaultPrevented||D())})),ee=(0,r.useRef)(),te=(0,r.useRef)(),ne=y;if(!V||!(i||ne&&!q))return null;var re=Object.assign({role:a,ref:z.setDialogRef,"aria-modal":"dialog"===a||void 0},U,{style:s,className:u,tabIndex:-1}),ie=C?C(re):(0,RC.jsx)("div",Object.assign({},re,{children:r.cloneElement(l,{role:"document"})}));ne&&(ie=(0,RC.jsx)(ne,{appear:!0,unmountOnExit:!0,in:!!i,onExit:P,onExiting:L,onExited:function(){K(!0),null==M||M.apply(void 0,arguments)},onEnter:B,onEntering:F,onEntered:j,children:ie}));var oe=null;if(h){var ae=g;oe=x({ref:z.setBackdropRef,onClick:J}),ae&&(oe=(0,RC.jsx)(ae,{appear:!0,in:!!i,children:oe}))}return(0,RC.jsx)(RC.Fragment,{children:oS.createPortal((0,RC.jsxs)(RC.Fragment,{children:[oe,ie]}),V)})}));$T.displayName="Modal";var eO,tO=Object.assign($T,{Manager:qT}),nO=tx("offcanvas-body"),rO=["bsPrefix","className","children"],iO=(ae(eO={},lS,"show"),ae(eO,fS,"show"),eO),oO=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,o=e.children,a=BC(e,rO);return n=iS(n,"offcanvas"),(0,RC.jsx)(US,ct(ct({ref:t,addEndListener:DS},a),{},{childRef:o.ref,children:function(e,t){return r.cloneElement(o,ct(ct({},t),{},{className:jC()(i,o.props.className,(e===lS||e===hS)&&"".concat(n,"-toggling"),iO[e])}))}}))}));oO.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1},oO.displayName="OffcanvasToggling";var aO=oO,uO=r.createContext({onHide:function(){}}),sO=["closeLabel","closeVariant","closeButton","onHide","children"],cO=r.forwardRef((function(e,t){var n=e.closeLabel,i=e.closeVariant,o=e.closeButton,a=e.onHide,u=e.children,s=BC(e,sO),c=(0,r.useContext)(uO),l=KC((function(){null==c||c.onHide(),null==a||a()}));return(0,RC.jsxs)("div",ct(ct({ref:t},s),{},{children:[u,o&&(0,RC.jsx)(QS,{"aria-label":n,variant:i,onClick:l})]}))}));cO.defaultProps={closeLabel:"Close",closeButton:!1};var lO=cO,fO=["bsPrefix","className"],hO=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=BC(e,fO);return n=iS(n,"offcanvas-header"),(0,RC.jsx)(lO,ct(ct({ref:t},i),{},{className:jC()(r,n)}))}));hO.displayName="OffcanvasHeader",hO.defaultProps={closeLabel:"Close",closeButton:!1};var dO=hO,pO=tx("offcanvas-title",{Component:ZS("h5")});var vO=Function.prototype.bind.call(Function.prototype.call,[].slice);function mO(e,t){return vO(e.querySelectorAll(t))}function yO(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var gO,wO=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",bO=".sticky-top",kO=".navbar-toggler",_O=function(e){de(n,e);var t=ye(n);function n(){return ue(this,n),t.apply(this,arguments)}return ce(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,_S(t,ae({},e,"".concat(parseFloat(_S(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],_S(t,ae({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;In(pe(n.prototype),"setContainerStyle",this).call(this,e);var r,i,o=this.getElement();if(i="modal-open",(r=o).classList?r.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,i)||("string"===typeof r.className?r.className=r.className+" "+i:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+i)),e.scrollBarWidth){var a=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";mO(o,wO).forEach((function(n){return t.adjustAndStore(a,n,e.scrollBarWidth)})),mO(o,bO).forEach((function(n){return t.adjustAndStore(u,n,-e.scrollBarWidth)})),mO(o,kO).forEach((function(n){return t.adjustAndStore(u,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;In(pe(n.prototype),"removeContainerStyle",this).call(this,e);var r,i,o=this.getElement();i="modal-open",(r=o).classList?r.classList.remove(i):"string"===typeof r.className?r.className=yO(r.className,i):r.setAttribute("class",yO(r.className&&r.className.baseVal||"",i));var a=this.isRTL?"paddingLeft":"paddingRight",u=this.isRTL?"marginLeft":"marginRight";mO(o,wO).forEach((function(e){return t.restore(a,e)})),mO(o,bO).forEach((function(e){return t.restore(u,e)})),mO(o,kO).forEach((function(e){return t.restore(u,e)}))}}]),n}(qT);var EO=_O,IO=["bsPrefix","className","children","aria-labelledby","placement","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function AO(e){return(0,RC.jsx)(aO,ct({},e))}function CO(e){return(0,RC.jsx)(GS,ct({},e))}var SO=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,o=e.children,a=e["aria-labelledby"],u=e.placement,s=e.show,c=e.backdrop,l=e.keyboard,f=e.scroll,h=e.onEscapeKeyDown,d=e.onShow,p=e.onHide,v=e.container,m=e.autoFocus,y=e.enforceFocus,g=e.restoreFocus,w=e.restoreFocusOptions,b=e.onEntered,k=e.onExit,_=e.onExiting,E=e.onEnter,I=e.onEntering,A=e.onExited,C=e.backdropClassName,S=e.manager,x=BC(e,IO),T=(0,r.useRef)();n=iS(n,"offcanvas");var O=((0,r.useContext)(TT)||{}).onToggle,N=KC((function(){null==O||O(),null==p||p()})),R=(0,r.useMemo)((function(){return{onHide:N}}),[N]);var D=(0,r.useCallback)((function(e){return(0,RC.jsx)("div",ct(ct({},e),{},{className:jC()("".concat(n,"-backdrop"),C)}))}),[C,n]);return(0,RC.jsx)(uO.Provider,{value:R,children:(0,RC.jsx)(tO,{show:s,ref:t,backdrop:c,container:v,keyboard:l,autoFocus:m,enforceFocus:y&&!f,restoreFocus:g,restoreFocusOptions:w,onEscapeKeyDown:h,onShow:d,onHide:N,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==E||E.apply(void 0,[e].concat(n))},onEntering:I,onEntered:b,onExit:k,onExiting:_,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==A||A.apply(void 0,n)},manager:S||(f?(T.current||(T.current=new EO({handleContainerOverflow:!1})),T.current):function(e){return gO||(gO=new _O(e)),gO}()),transition:AO,backdropTransition:CO,renderBackdrop:D,renderDialog:function(e){return(0,RC.jsx)("div",ct(ct(ct({role:"dialog"},e),x),{},{className:jC()(i,n,"".concat(n,"-").concat(u)),"aria-labelledby":a,children:o}))}})})}));SO.displayName="Offcanvas",SO.defaultProps={show:!1,backdrop:!0,keyboard:!0,scroll:!1,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,placement:"start"};var xO=Object.assign(SO,{Body:nO,Header:dO,Title:pO}),TO=["className","bsPrefix","backdrop","backdropClassName","keyboard","scroll","placement","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onShow","onHide","onEscapeKeyDown","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],OO=r.forwardRef((function(e,t){var n=e.className,i=e.bsPrefix,o=e.backdrop,a=e.backdropClassName,u=e.keyboard,s=e.scroll,c=e.placement,l=e.autoFocus,f=e.enforceFocus,h=e.restoreFocus,d=e.restoreFocusOptions,p=e.onShow,v=e.onHide,m=e.onEscapeKeyDown,y=e.onEnter,g=e.onEntering,w=e.onEntered,b=e.onExit,k=e.onExiting,_=e.onExited,E=BC(e,TO),I=(0,r.useContext)(TT);i=iS(i,"offcanvas");var A="string"===typeof(null==I?void 0:I.expand),C=jT(A?I.expand:"xs","up");return A&&C?(0,RC.jsx)("div",ct(ct({ref:t},E),{},{className:jC()(n,i,"".concat(i,"-").concat(c))})):(0,RC.jsx)(xO,ct({ref:t,show:!(null==I||!I.expanded),bsPrefix:i,backdrop:o,backdropClassName:a,keyboard:u,scroll:s,placement:c,autoFocus:l,enforceFocus:f,restoreFocus:h,restoreFocusOptions:d,onShow:p,onHide:v,onEscapeKeyDown:m,onEnter:y,onEntering:g,onEntered:w,onExit:b,onExiting:k,onExited:_},E))}));OO.displayName="NavbarOffcanvas";var NO=OO,RO=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],DO=tx("navbar-text",{Component:"span"}),PO=r.forwardRef((function(e,t){var n=zC(e,{expanded:"onToggle"}),i=n.bsPrefix,o=n.expand,a=n.variant,u=n.bg,s=n.fixed,c=n.sticky,l=n.className,f=n.as,h=void 0===f?"nav":f,d=n.expanded,p=n.onToggle,v=n.onSelect,m=n.collapseOnSelect,y=BC(n,RO),g=iS(i,"navbar"),w=(0,r.useCallback)((function(){null==v||v.apply(void 0,arguments),m&&d&&(null==p||p(!1))}),[v,m,d,p]);void 0===y.role&&"nav"!==h&&(y.role="navigation");var b="".concat(g,"-expand");"string"===typeof o&&(b="".concat(b,"-").concat(o));var k=(0,r.useMemo)((function(){return{onToggle:function(){return null==p?void 0:p(!d)},bsPrefix:g,expanded:!!d,expand:o}}),[g,d,o,p]);return(0,RC.jsx)(TT.Provider,{value:k,children:(0,RC.jsx)(vT.Provider,{value:w,children:(0,RC.jsx)(h,ct(ct({ref:t},y),{},{className:jC()(l,g,o&&b,a&&"".concat(g,"-").concat(a),u&&"bg-".concat(u),c&&"sticky-".concat(c),s&&"fixed-".concat(s))}))})})}));PO.defaultProps={expand:!0,variant:"light",collapseOnSelect:!1},PO.displayName="Navbar";var MO=Object.assign(PO,{Brand:gT,Collapse:RT,Offcanvas:NO,Text:DO,Toggle:MT}),LO=["bsPrefix","fluid","as","className"],BO=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=e.as,o=void 0===i?"div":i,a=e.className,u=BC(e,LO),s=iS(n,"container"),c="string"===typeof r?"-".concat(r):"-fluid";return(0,RC.jsx)(o,ct(ct({ref:t},u),{},{className:jC()(a,r?"".concat(s).concat(c):s)}))}));BO.displayName="Container",BO.defaultProps={fluid:!1};var FO=BO,jO=["bsPrefix","className","fluid","rounded","roundedCircle","thumbnail"],UO=(qS().string,qS().bool,qS().bool,qS().bool,qS().bool,r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.fluid,o=e.rounded,a=e.roundedCircle,u=e.thumbnail,s=BC(e,jO);return n=iS(n,"img"),(0,RC.jsx)("img",ct(ct({ref:t},s),{},{className:jC()(r,i&&"".concat(n,"-fluid"),o&&"rounded",a&&"rounded-circle",u&&"".concat(n,"-thumbnail"))}))})));UO.displayName="Image",UO.defaultProps={fluid:!1,rounded:!1,roundedCircle:!1,thumbnail:!1};var VO=UO,zO=["color","size","title"];function HO(){return HO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HO.apply(this,arguments)}function GO(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var WO=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=GO(e,zO);return r.createElement("svg",HO({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z"}))}));WO.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},WO.defaultProps={color:"currentColor",size:"1em",title:null};var qO=WO,KO=["color","size","title"];function XO(){return XO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XO.apply(this,arguments)}function YO(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var QO=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=YO(e,KO);return r.createElement("svg",XO({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}))}));QO.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},QO.defaultProps={color:"currentColor",size:"1em",title:null};var ZO=QO,JO=["color","size","title"];function $O(){return $O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$O.apply(this,arguments)}function eN(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var tN=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=eN(e,JO);return r.createElement("svg",$O({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"}))}));tN.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},tN.defaultProps={color:"currentColor",size:"1em",title:null};var nN=tN,rN=["color","size","title"];function iN(){return iN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iN.apply(this,arguments)}function oN(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var aN=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=oN(e,rN);return r.createElement("svg",iN({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{fillRule:"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),r.createElement("path",{fillRule:"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"}))}));aN.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},aN.defaultProps={color:"currentColor",size:"1em",title:null};var uN=aN,sN=n(173),cN=n.p+"static/media/chatr_icon_inverted.f3d26dd7993d1aaf0832.png";function lN(){var e,t=PC().logout,n=j(),i=null!==(e=SC.currentUser.displayName)&&void 0!==e?e:SC.currentUser.email,o=c((0,r.useState)("none"),2),a=o[0],u=o[1],s="user-dropdown"+(sN.tq?" mobile":" desktop"),l=SC.currentUser.providerData[0].photoURL||hT,f=c((0,r.useState)("none"),2),h=f[0],d=f[1];function p(){return(p=re(te().mark((function e(){var r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=xC.collection("users").doc(SC.currentUser.uid),e.next=4,r.update({isLoggedIn:!1}).then((function(){t()})).finally((function(){n("/login")}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function v(){u("grid"===a?"none":"grid")}return(0,r.useEffect)((function(){var e=document.getElementsByClassName("navbar")[0].offsetHeight+(sN.nI?18:0);document.getElementsByClassName("menu")[0].style.top=e}),[]),(0,RC.jsxs)(RC.Fragment,{children:[(0,RC.jsx)(MO,{bg:"success",variant:"dark",children:(0,RC.jsxs)(FO,{style:{position:sN.nI?"relative":"unset"},children:[(0,RC.jsx)($,{className:"link active",to:"/",title:"Chatr",children:(0,RC.jsx)("img",{alt:"",src:cN,width:"30",height:"30",className:"d-inline-block align-top"})}),(0,RC.jsxs)("div",{className:s,children:[(0,RC.jsx)("a",{className:"btn",href:"/notifications",children:(0,RC.jsx)("span",{children:(0,RC.jsx)(qO,{})})}),(0,RC.jsx)("button",{className:"btn",title:i,onClick:v,children:(0,RC.jsx)(VO,{roundedCircle:!0,onError:function(){},src:l,alt:""})}),(0,RC.jsxs)("div",{className:"menu",style:{display:a},children:[(0,RC.jsx)("div",{className:"backdrop",onClick:v}),(0,RC.jsx)("div",{className:"menu-links",children:(0,RC.jsx)("a",{className:"link",href:"/update-profile",children:(0,RC.jsxs)("span",{children:[(0,RC.jsx)(ZO,{})," ",i]})})}),(0,RC.jsx)("div",{className:"menu-links",children:(0,RC.jsx)("a",{className:"link",href:"/contacts",children:(0,RC.jsxs)("span",{children:[(0,RC.jsx)(nN,{})," Contacts"]})})}),(0,RC.jsx)("div",{className:"menu-links separator"}),(0,RC.jsx)("div",{className:"menu-links",children:(0,RC.jsx)("div",{className:"link",onClick:function(){d("none"===h?"block":"none")},children:(0,RC.jsxs)("span",{children:[(0,RC.jsx)(uN,{})," Log Out"]})})})]})]})]})}),(0,RC.jsxs)("div",{id:"LogoutModal",className:"modal",style:{display:h},children:[(0,RC.jsx)("button",{className:"btn",onClick:function(){d("none"===h?"block":"none"),v()},children:"Cancel"}),(0,RC.jsx)("button",{className:"btn",onClick:function(){return p.apply(this,arguments)},children:"Log Out"})]})]})}var fN=["color","size","title"];function hN(){return hN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hN.apply(this,arguments)}function dN(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var pN=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=dN(e,fN);return r.createElement("svg",hN({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{fillRule:"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}),r.createElement("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"}))}));pN.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},pN.defaultProps={color:"currentColor",size:"1em",title:null};var vN=pN;function mN(){return(0,RC.jsx)("div",{className:"loading-page",children:(0,RC.jsx)(vN,{})})}function yN(){var e,t=PC().currentUser,n=c((0,r.useState)(""),2),i=(n[0],n[1]),o=c((0,r.useState)(""),2),a=(o[0],o[1]),u=c((0,r.useState)(!1),2),s=u[0],l=u[1],f=(t&&(null!==(e=t.displayName)&&void 0!==e||t.email),j(),c((0,r.useState)(null),2)),h=f[0],d=f[1],p=c((0,r.useState)(null),2),v=p[0],m=p[1],y=c((0,r.useState)(null),2),g=y[0],w=(y[1],xC.collection("users"));function b(){var e=(Math.floor(1e4*Math.random())+1e4).toString().substring(1);return"0".repeat(12-e.length)+e}(0,r.useEffect)((function(){k(),function(){_.apply(this,arguments)}()}),[]);var k=function(){var e=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe().get("https://geolocation-db.com/json/");case 2:t=e.sent,m(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function _(){return(_=re(te().mark((function e(){var t,n,r,i;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(),t=w.doc(SC.currentUser.uid),{},e.next=5,t.get();case 5:if(!e.sent.exists){e.next=10;break}return e.next=8,t.update({displayName:null!==(n=SC.currentUser.displayName)&&void 0!==n?n:SC.currentUser.email,lastLogIn:SC.currentUser.metadata.lastSignInTime,providerData:SC.currentUser.providerData.map((function(e){return e}))[0],isLoggedIn:!0,axiosGeoLocation:v,navigatorGeoLocation:g}).catch((function(e){I(e,"update-user-error.")}));case 8:e.next=12;break;case 10:return e.next=12,t.set({uid:SC.currentUser.uid,createdDate:null!==(r=SC.currentUser.metadata.createdDate)&&void 0!==r?r:Date.now(),userCode:b(),contacts:[],displayName:null!==(i=SC.currentUser.displayName)&&void 0!==i?i:SC.currentUser.email,lastLogIn:SC.currentUser.metadata.lastSignInTime,providerData:SC.currentUser.providerData.map((function(e){return e}))[0],isLoggedIn:!0,axiosGeoLocation:v,navigatorGeoLocation:g}).catch((function(e){I(e,"set-user-error.")}));case 12:return e.next=14,w.doc(SC.currentUser.uid).get().then((function(e){e.exists&&d(e.data())}));case 14:l(!1);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){a(""),i(""),l(!0)}function I(e,t){return l(!1),console.error(e.message),i(t)}return(0,RC.jsxs)(RC.Fragment,{children:[s&&(0,RC.jsx)(mN,{}),!s&&(0,RC.jsx)(lN,{user:h}),(0,RC.jsx)(pT,{})]})}var gN=["component"];function wN(e){var t=e.component,n=BC(e,gN),r=PC().currentUser;return(0,RC.jsx)(G,ct(ct({},n),{},{render:function(e){return r?(0,RC.jsx)(t,ct({},e)):(0,RC.jsx)(H,{to:"/login"})}}))}var bN=["as","bsPrefix","variant","size","active","className"],kN=r.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,o=e.size,a=e.active,u=e.className,s=BC(e,bN),l=iS(r,"btn"),f=c(ZC(ct({tagName:n},s)),2),h=f[0],d=f[1].tagName;return(0,RC.jsx)(d,ct(ct(ct({},h),s),{},{ref:t,className:jC()(u,l,a&&"active",i&&"".concat(l,"-").concat(i),o&&"".concat(l,"-").concat(o),s.href&&s.disabled&&"disabled")}))}));kN.displayName="Button",kN.defaultProps={variant:"primary",active:!1,disabled:!1};var _N=kN,EN=["color","size","title"];function IN(){return IN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IN.apply(this,arguments)}function AN(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var CN=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=AN(e,EN);return r.createElement("svg",IN({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"}),r.createElement("path",{fillRule:"evenodd",d:"M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"}))}));CN.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},CN.defaultProps={color:"currentColor",size:"1em",title:null};var SN=CN,xN=["color","size","title"];function TN(){return TN=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TN.apply(this,arguments)}function ON(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var NN=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=ON(e,xN);return r.createElement("svg",TN({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0v-3Zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5ZM.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5Zm15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5ZM4 4h1v1H4V4Z"}),r.createElement("path",{d:"M7 2H2v5h5V2ZM3 3h3v3H3V3Zm2 8H4v1h1v-1Z"}),r.createElement("path",{d:"M7 9H2v5h5V9Zm-4 1h3v3H3v-3Zm8-6h1v1h-1V4Z"}),r.createElement("path",{d:"M9 2h5v5H9V2Zm1 1v3h3V3h-3ZM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8H8Zm2 2H9V9h1v1Zm4 2h-1v1h-2v1h3v-2Zm-4 2v-1H8v1h2Z"}),r.createElement("path",{d:"M12 9h2V8h-2v1Z"}))}));NN.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},NN.defaultProps={color:"currentColor",size:"1em",title:null};var RN=NN;var DN,PN,MN=function(){return MN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},MN.apply(this,arguments)},LN=function(e){return{loading:void 0===e||null===e,value:e}},BN=function(e){var t=e?e():void 0,n=(0,r.useReducer)((function(e,t){switch(t.type){case"error":return MN(MN({},e),{error:t.error,loading:!1,value:void 0});case"reset":return LN(t.defaultValue);case"value":return MN(MN({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),LN(t)),i=n[0],o=n[1],a=function(){var t=e?e():void 0;o({type:"reset",defaultValue:t})},u=function(e){o({type:"error",error:e})},s=function(e){o({type:"value",value:e})};return(0,r.useMemo)((function(){return{error:i.error,loading:i.loading,reset:a,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,a,u,s,i.value])},FN=function(e,t,n){var i=(0,r.useRef)(e);return(0,r.useEffect)((function(){t(e,i.current)||(i.current=e,n&&n())})),i},jN=function(e,t){var n=!e&&!t,r=!!e&&!!t&&_I(e,t);return n||r},UN=function(e,t){return FN(e,jN,t)},VN=function(e,t){var n=null===t||void 0===t?void 0:t.snapshotOptions,i=function(e,t){var n=BN(),i=n.error,o=n.loading,a=n.reset,u=n.setError,s=n.setValue,c=n.value,l=UN(e,a);(0,r.useEffect)((function(){if(l.current){var e=(null===t||void 0===t?void 0:t.snapshotListenOptions)?KA(l.current,t.snapshotListenOptions,s,u):KA(l.current,s,u);return function(){e()}}s(void 0)}),[l.current]);var f=[c,o,i];return(0,r.useMemo)((function(){return f}),f)}(e,t),o=i[0],a=i[1],u=i[2],s=[zN(o,n),a,u,o];return(0,r.useMemo)((function(){return s}),s)},zN=function(e,t){return(0,r.useMemo)((function(){return null===e||void 0===e?void 0:e.docs.map((function(e){return e.data(t)}))}),[e,t])},HN=(DN=function(e,t){return DN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},DN(e,t)},function(e,t){function n(){this.constructor=e}DN(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),GN=function(e){function t(t){var n,r,i,o=this.constructor,a=e.call(this,t)||this;return Object.defineProperty(a,"name",{value:o.name,enumerable:!1,configurable:!0}),n=a,r=o.prototype,(i=Object.setPrototypeOf)?i(n,r):n.__proto__=r,function(e,t){void 0===t&&(t=e.constructor);var n=Error.captureStackTrace;n&&n(e,t)}(a),a}return HN(t,e),t}(Error),WN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qN=function(e){function t(t){void 0===t&&(t=void 0);var n=e.call(this,t)||this;return n.message=t,n}return WN(t,e),t.prototype.getKind=function(){return this.constructor.kind},t.kind="Exception",t}(GN),KN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return KN(t,e),t.kind="ArgumentException",t}(qN),YN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),QN=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return YN(t,e),t.kind="IllegalArgumentException",t}(qN),ZN=function(){function e(e){if(this.binarizer=e,null===e)throw new QN("Binarizer must be non-null.")}return e.prototype.getWidth=function(){return this.binarizer.getWidth()},e.prototype.getHeight=function(){return this.binarizer.getHeight()},e.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},e.prototype.getBlackMatrix=function(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},e.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},e.prototype.crop=function(t,n,r,i){var o=this.binarizer.getLuminanceSource().crop(t,n,r,i);return new e(this.binarizer.createBinarizer(o))},e.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},e.prototype.rotateCounterClockwise=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new e(this.binarizer.createBinarizer(t))},e.prototype.rotateCounterClockwise45=function(){var t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new e(this.binarizer.createBinarizer(t))},e.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch(e){return""}},e}(),JN=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return JN(t,e),t.getChecksumInstance=function(){return new t},t.kind="ChecksumException",t}(qN),eR=function(){function e(e){this.source=e}return e.prototype.getLuminanceSource=function(){return this.source},e.prototype.getWidth=function(){return this.source.getWidth()},e.prototype.getHeight=function(){return this.source.getHeight()},e}(),tR=function(){function e(){}return e.arraycopy=function(e,t,n,r,i){for(;i--;)n[r++]=e[t++]},e.currentTimeMillis=function(){return Date.now()},e}(),nR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nR(t,e),t.kind="IndexOutOfBoundsException",t}(qN),iR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oR=function(e){function t(t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0);var r=e.call(this,n)||this;return r.index=t,r.message=n,r}return iR(t,e),t.kind="ArrayIndexOutOfBoundsException",t}(rR),aR=function(){function e(){}return e.fill=function(e,t){for(var n=0,r=e.length;n<r;n++)e[n]=t},e.fillWithin=function(t,n,r,i){e.rangeCheck(t.length,n,r);for(var o=n;o<r;o++)t[o]=i},e.rangeCheck=function(e,t,n){if(t>n)throw new QN("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new oR(t);if(n>e)throw new oR(n)},e.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},e.create=function(e,t,n){return Array.from({length:e}).map((function(e){return Array.from({length:t}).fill(n)}))},e.createInt32Array=function(e,t,n){return Array.from({length:e}).map((function(e){return Int32Array.from({length:t}).fill(n)}))},e.equals=function(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0},e.hashCode=function(e){var t,n;if(null===e)return 0;var r=1;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),o=i.next();!o.done;o=i.next())r=31*r+o.value}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.fillUint8Array=function(e,t){for(var n=0;n!==e.length;n++)e[n]=t},e.copyOf=function(e,t){return e.slice(0,t)},e.copyOfUint8Array=function(e,t){if(e.length<=t){var n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)},e.copyOfRange=function(e,t,n){var r=n-t,i=new Int32Array(r);return tR.arraycopy(e,t,i,0,r),i},e.binarySearch=function(t,n,r){void 0===r&&(r=e.numberComparator);for(var i=0,o=t.length-1;i<=o;){var a=o+i>>1,u=r(n,t[a]);if(u>0)i=a+1;else{if(!(u<0))return a;o=a-1}}return-i-1},e.numberComparator=function(e,t){return e-t},e}(),uR=function(){function e(){}return e.numberOfTrailingZeros=function(e){var t;if(0===e)return 32;var n=31;return 0!==(t=e<<16)&&(n-=16,e=t),0!==(t=e<<8)&&(n-=8,e=t),0!==(t=e<<4)&&(n-=4,e=t),0!==(t=e<<2)&&(n-=2,e=t),n-(e<<1>>>31)},e.numberOfLeadingZeros=function(e){if(0===e)return 32;var t=1;return e>>>16==0&&(t+=16,e<<=16),e>>>24==0&&(t+=8,e<<=8),e>>>28==0&&(t+=4,e<<=4),e>>>30==0&&(t+=2,e<<=2),t-(e>>>31)},e.toHexString=function(e){return e.toString(16)},e.toBinaryString=function(e){return String(parseInt(String(e),2))},e.bitCount=function(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,63&(e+=e>>>8)+(e>>>16)},e.truncDivision=function(e,t){return Math.trunc(e/t)},e.parseInt=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e.MIN_VALUE_32_BITS=-2147483648,e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}(),sR=function(){function e(t,n){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,this.bits=null==n?e.makeArray(t):n)}return e.prototype.getSize=function(){return this.size},e.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},e.prototype.ensureCapacity=function(t){if(t>32*this.bits.length){var n=e.makeArray(t);tR.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},e.prototype.get=function(e){return 0!=(this.bits[Math.floor(e/32)]&1<<(31&e))},e.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(31&e)},e.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(31&e)},e.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),i=n[r];i&=~((1<<(31&e))-1);for(var o=n.length;0===i;){if(++r===o)return t;i=n[r]}var a=32*r+uR.numberOfTrailingZeros(i);return a>t?t:a},e.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var n=this.bits,r=Math.floor(e/32),i=~n[r];i&=~((1<<(31&e))-1);for(var o=n.length;0===i;){if(++r===o)return t;i=~n[r]}var a=32*r+uR.numberOfTrailingZeros(i);return a>t?t:a},e.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},e.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new QN;if(t!==e){t--;for(var n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits,o=n;o<=r;o++){var a=(2<<(o<r?31:31&t))-(1<<(o>n?0:31&e));i[o]|=a}}},e.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,n=0;n<e;n++)t[n]=0},e.prototype.isRange=function(e,t,n){if(t<e||e<0||t>this.size)throw new QN;if(t===e)return!0;t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,a=r;a<=i;a++){var u=(2<<(a<i?31:31&t))-(1<<(a>r?0:31&e))&4294967295;if((o[a]&u)!==(n?u:0))return!1}return!0},e.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++},e.prototype.appendBits=function(e,t){if(t<0||t>32)throw new QN("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var n=t;n>0;n--)this.appendBit(1==(e>>n-1&1))},e.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var n=0;n<t;n++)this.appendBit(e.get(n))},e.prototype.xor=function(e){if(this.size!==e.size)throw new QN("Sizes don't match");for(var t=this.bits,n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]},e.prototype.toBytes=function(e,t,n,r){for(var i=0;i<r;i++){for(var o=0,a=0;a<8;a++)this.get(e)&&(o|=1<<7-a),e++;t[n+i]=o}},e.prototype.getBitArray=function(){return this.bits},e.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits,i=0;i<n;i++){var o=r[i];o=(o=(o=(o=(o=o>>1&1431655765|(1431655765&o)<<1)>>2&858993459|(858993459&o)<<2)>>4&252645135|(252645135&o)<<4)>>8&16711935|(16711935&o)<<8)>>16&65535|(65535&o)<<16,e[t-i]=o}if(this.size!==32*n){var a=32*n-this.size,u=e[0]>>>a;for(i=1;i<n;i++){var s=e[i];u|=s<<32-a,e[i-1]=u,u=s>>>a}e[n-1]=u}this.bits=e},e.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.size===n.size&&aR.equals(this.bits,n.bits)},e.prototype.hashCode=function(){return 31*this.size+aR.hashCode(this.bits)},e.prototype.toString=function(){for(var e="",t=0,n=this.size;t<n;t++)0==(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e},e.prototype.clone=function(){return new e(this.size,this.bits.slice())},e}();!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(PN||(PN={}));var cR,lR=PN,fR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),hR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return fR(t,e),t.getFormatInstance=function(){return new t},t.kind="FormatException",t}(qN),dR=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(cR||(cR={}));var pR,vR=function(){function e(t,n,r){for(var i,o,a=[],u=3;u<arguments.length;u++)a[u-3]=arguments[u];this.valueIdentifier=t,this.name=r,this.values="number"==typeof n?Int32Array.from([n]):n,this.otherEncodingNames=a,e.VALUE_IDENTIFIER_TO_ECI.set(t,this),e.NAME_TO_ECI.set(r,this);for(var s=this.values,c=0,l=s.length;c!==l;c++){var f=s[c];e.VALUES_TO_ECI.set(f,this)}try{for(var h=dR(a),d=h.next();!d.done;d=h.next()){var p=d.value;e.NAME_TO_ECI.set(p,this)}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}return e.prototype.getValueIdentifier=function(){return this.valueIdentifier},e.prototype.getName=function(){return this.name},e.prototype.getValue=function(){return this.values[0]},e.getCharacterSetECIByValue=function(t){if(t<0||t>=900)throw new hR("incorect value");var n=e.VALUES_TO_ECI.get(t);if(void 0===n)throw new hR("incorect value");return n},e.getCharacterSetECIByName=function(t){var n=e.NAME_TO_ECI.get(t);if(void 0===n)throw new hR("incorect value");return n},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.getName()===n.getName()},e.VALUE_IDENTIFIER_TO_ECI=new Map,e.VALUES_TO_ECI=new Map,e.NAME_TO_ECI=new Map,e.Cp437=new e(cR.Cp437,Int32Array.from([0,2]),"Cp437"),e.ISO8859_1=new e(cR.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),e.ISO8859_2=new e(cR.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),e.ISO8859_3=new e(cR.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),e.ISO8859_4=new e(cR.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),e.ISO8859_5=new e(cR.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),e.ISO8859_6=new e(cR.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),e.ISO8859_7=new e(cR.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),e.ISO8859_8=new e(cR.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),e.ISO8859_9=new e(cR.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),e.ISO8859_10=new e(cR.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),e.ISO8859_11=new e(cR.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),e.ISO8859_13=new e(cR.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),e.ISO8859_14=new e(cR.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),e.ISO8859_15=new e(cR.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),e.ISO8859_16=new e(cR.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),e.SJIS=new e(cR.SJIS,20,"SJIS","Shift_JIS"),e.Cp1250=new e(cR.Cp1250,21,"Cp1250","windows-1250"),e.Cp1251=new e(cR.Cp1251,22,"Cp1251","windows-1251"),e.Cp1252=new e(cR.Cp1252,23,"Cp1252","windows-1252"),e.Cp1256=new e(cR.Cp1256,24,"Cp1256","windows-1256"),e.UnicodeBigUnmarked=new e(cR.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),e.UTF8=new e(cR.UTF8,26,"UTF8","UTF-8"),e.ASCII=new e(cR.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),e.Big5=new e(cR.Big5,28,"Big5"),e.GB18030=new e(cR.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),e.EUC_KR=new e(cR.EUC_KR,30,"EUC_KR","EUC-KR"),e}(),mR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return mR(t,e),t.kind="UnsupportedOperationException",t}(qN),gR=function(){function e(){}return e.decode=function(e,t){var n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},e.shouldDecodeOnFallback=function(t){return!e.isBrowser()&&"ISO-8859-1"===t},e.encode=function(e,t){var n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):"undefined"==typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)},e.isBrowser=function(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)},e.encodingName=function(e){return"string"==typeof e?e:e.getName()},e.encodingCharacterSet=function(e){return e instanceof vR?e:vR.getCharacterSetECIByName(e)},e.decodeFallback=function(t,n){var r=this.encodingCharacterSet(n);if(e.isDecodeFallbackSupported(r)){for(var i="",o=0,a=t.length;o<a;o++){var u=t[o].toString(16);u.length<2&&(u="0"+u),i+="%"+u}return decodeURIComponent(i)}if(r.equals(vR.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new yR("Encoding "+this.encodingName(n)+" not supported by fallback.")},e.isDecodeFallbackSupported=function(e){return e.equals(vR.UTF8)||e.equals(vR.ISO8859_1)||e.equals(vR.ASCII)},e.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))).split(""),n=[],r=0;r<t.length;r++)n.push(t[r].charCodeAt(0));return new Uint8Array(n)},e}(),wR=function(){function e(){}return e.castAsNonUtf8Char=function(e,t){void 0===t&&(t=null);var n=t?t.getName():this.ISO88591;return gR.decode(new Uint8Array([e]),n)},e.guessEncoding=function(t,n){if(null!=n&&void 0!==n.get(lR.CHARACTER_SET))return n.get(lR.CHARACTER_SET).toString();for(var r=t.length,i=!0,o=!0,a=!0,u=0,s=0,c=0,l=0,f=0,h=0,d=0,p=0,v=0,m=0,y=0,g=t.length>3&&239===t[0]&&187===t[1]&&191===t[2],w=0;w<r&&(i||o||a);w++){var b=255&t[w];a&&(u>0?0==(128&b)?a=!1:u--:0!=(128&b)&&(0==(64&b)?a=!1:(u++,0==(32&b)?s++:(u++,0==(16&b)?c++:(u++,0==(8&b)?l++:a=!1))))),i&&(b>127&&b<160?i=!1:b>159&&(b<192||215===b||247===b)&&y++),o&&(f>0?b<64||127===b||b>252?o=!1:f--:128===b||160===b||b>239?o=!1:b>160&&b<224?(h++,p=0,++d>v&&(v=d)):b>127?(f++,d=0,++p>m&&(m=p)):(d=0,p=0))}return a&&u>0&&(a=!1),o&&f>0&&(o=!1),a&&(g||s+c+l>0)?e.UTF8:o&&(e.ASSUME_SHIFT_JIS||v>=3||m>=3)?e.SHIFT_JIS:i&&o?2===v&&2===h||10*y>=r?e.SHIFT_JIS:e.ISO88591:i?e.ISO88591:o?e.SHIFT_JIS:a?e.UTF8:e.PLATFORM_DEFAULT_ENCODING},e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=-1;function i(e,n,i,o,a,u){if("%%"===e)return"%";if(void 0!==t[++r]){e=o?parseInt(o.substr(1)):void 0;var s,c=a?parseInt(a.substr(1)):void 0;switch(u){case"s":s=t[r];break;case"c":s=t[r][0];break;case"f":s=parseFloat(t[r]).toFixed(e);break;case"p":s=parseFloat(t[r]).toPrecision(e);break;case"e":s=parseFloat(t[r]).toExponential(e);break;case"x":s=parseInt(t[r]).toString(c||16);break;case"d":s=parseFloat(parseInt(t[r],c||10).toPrecision(e)).toFixed(0)}s="object"==typeof s?JSON.stringify(s):(+s).toString(c);for(var l=parseInt(i),f=i&&i[0]+""=="0"?"0":" ";s.length<l;)s=void 0!==n?s+f:f+s;return s}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},e.getBytes=function(e,t){return gR.encode(e,t)},e.getCharCode=function(e,t){return void 0===t&&(t=0),e.charCodeAt(t)},e.getCharAt=function(e){return String.fromCharCode(e)},e.SHIFT_JIS=vR.SJIS.getName(),e.GB2312="GB2312",e.ISO88591=vR.ISO8859_1.getName(),e.EUC_JP="EUC_JP",e.UTF8=vR.UTF8.getName(),e.PLATFORM_DEFAULT_ENCODING=e.UTF8,e.ASSUME_SHIFT_JIS=!1,e}(),bR=function(){function e(e){void 0===e&&(e=""),this.value=e}return e.prototype.enableDecoding=function(e){return this.encoding=e,this},e.prototype.append=function(e){return"string"==typeof e?this.value+=e.toString():this.encoding?this.value+=wR.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},e.prototype.appendChars=function(e,t,n){for(var r=t;t<t+n;r++)this.append(e[r]);return this},e.prototype.length=function(){return this.value.length},e.prototype.charAt=function(e){return this.value.charAt(e)},e.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},e.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},e.prototype.substring=function(e,t){return this.value.substring(e,t)},e.prototype.setLengthToZero=function(){this.value=""},e.prototype.toString=function(){return this.value},e.prototype.insert=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)},e}(),kR=function(){function e(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,null==t&&(t=e),this.height=t,e<1||t<1)throw new QN("Both dimensions must be greater than 0");null==n&&(n=Math.floor((e+31)/32)),this.rowSize=n,null==r&&(this.bits=new Int32Array(this.rowSize*this.height))}return e.parseFromBooleanArray=function(t){for(var n=t.length,r=t[0].length,i=new e(r,n),o=0;o<n;o++)for(var a=t[o],u=0;u<r;u++)a[u]&&i.set(u,o);return i},e.parseFromString=function(t,n,r){if(null===t)throw new QN("stringRepresentation cannot be null");for(var i=new Array(t.length),o=0,a=0,u=-1,s=0,c=0;c<t.length;)if("\n"===t.charAt(c)||"\r"===t.charAt(c)){if(o>a){if(-1===u)u=o-a;else if(o-a!==u)throw new QN("row lengths do not match");a=o,s++}c++}else if(t.substring(c,c+n.length)===n)c+=n.length,i[o]=!0,o++;else{if(t.substring(c,c+r.length)!==r)throw new QN("illegal character encountered: "+t.substring(c));c+=r.length,i[o]=!1,o++}if(o>a){if(-1===u)u=o-a;else if(o-a!==u)throw new QN("row lengths do not match");s++}for(var l=new e(u,s),f=0;f<o;f++)i[f]&&l.set(Math.floor(f%u),Math.floor(f/u));return l},e.prototype.get=function(e,t){var n=t*this.rowSize+Math.floor(e/32);return 0!=(this.bits[n]>>>(31&e)&1)},e.prototype.set=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(31&e)&4294967295},e.prototype.unset=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(31&e)&4294967295)},e.prototype.flip=function(e,t){var n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(31&e)&4294967295},e.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new QN("input matrix dimensions do not match");for(var t=new sR(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits,i=0,o=this.height;i<o;i++)for(var a=i*n,u=e.getRow(i,t).getBitArray(),s=0;s<n;s++)r[a+s]^=u[s]},e.prototype.clear=function(){for(var e=this.bits,t=e.length,n=0;n<t;n++)e[n]=0},e.prototype.setRegion=function(e,t,n,r){if(t<0||e<0)throw new QN("Left and top must be nonnegative");if(r<1||n<1)throw new QN("Height and width must be at least 1");var i=e+n,o=t+r;if(o>this.height||i>this.width)throw new QN("The region must fit inside the matrix");for(var a=this.rowSize,u=this.bits,s=t;s<o;s++)for(var c=s*a,l=e;l<i;l++)u[c+Math.floor(l/32)]|=1<<(31&l)&4294967295},e.prototype.getRow=function(e,t){null==t||t.getSize()<this.width?t=new sR(this.width):t.clear();for(var n=this.rowSize,r=this.bits,i=e*n,o=0;o<n;o++)t.setBulk(32*o,r[i+o]);return t},e.prototype.setRow=function(e,t){tR.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},e.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),n=new sR(e),r=new sR(e),i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)},e.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,n=this.rowSize,r=this.bits,i=e,o=t,a=-1,u=-1,s=0;s<t;s++)for(var c=0;c<n;c++){var l=r[s*n+c];if(0!==l){if(s<o&&(o=s),s>u&&(u=s),32*c<i){for(var f=0;0==(l<<31-f&4294967295);)f++;32*c+f<i&&(i=32*c+f)}if(32*c+31>a){for(f=31;l>>>f==0;)f--;32*c+f>a&&(a=32*c+f)}}}return a<i||u<o?null:Int32Array.from([i,o,a-i+1,u-o+1])},e.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,n=0;n<t.length&&0===t[n];)n++;if(n===t.length)return null;for(var r=n/e,i=n%e*32,o=t[n],a=0;0==(o<<31-a&4294967295);)a++;return i+=a,Int32Array.from([i,r])},e.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,n=t.length-1;n>=0&&0===t[n];)n--;if(n<0)return null;for(var r=Math.floor(n/e),i=32*Math.floor(n%e),o=t[n],a=31;o>>>a==0;)a--;return i+=a,Int32Array.from([i,r])},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getRowSize=function(){return this.rowSize},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&aR.equals(this.bits,n.bits)},e.prototype.hashCode=function(){var e=this.width;return 31*(e=31*(e=31*(e=31*e+this.width)+this.height)+this.rowSize)+aR.hashCode(this.bits)},e.prototype.toString=function(e,t,n){return void 0===e&&(e="X "),void 0===t&&(t="  "),void 0===n&&(n="\n"),this.buildToString(e,t,n)},e.prototype.buildToString=function(e,t,n){for(var r=new bR,i=0,o=this.height;i<o;i++){for(var a=0,u=this.width;a<u;a++)r.append(this.get(a,i)?e:t);r.append(n)}return r.toString()},e.prototype.clone=function(){return new e(this.width,this.height,this.rowSize,this.bits.slice())},e}(),_R=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ER=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _R(t,e),t.getNotFoundInstance=function(){return new t},t.kind="NotFoundException",t}(qN),IR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),AR=function(e){function t(n){var r=e.call(this,n)||this;return r.luminances=t.EMPTY,r.buckets=new Int32Array(t.LUMINANCE_BUCKETS),r}return IR(t,e),t.prototype.getBlackRow=function(e,n){var r=this.getLuminanceSource(),i=r.getWidth();null==n||n.getSize()<i?n=new sR(i):n.clear(),this.initArrays(i);for(var o=r.getRow(e,this.luminances),a=this.buckets,u=0;u<i;u++)a[(255&o[u])>>t.LUMINANCE_SHIFT]++;var s=t.estimateBlackPoint(a);if(i<3)for(u=0;u<i;u++)(255&o[u])<s&&n.set(u);else{var c=255&o[0],l=255&o[1];for(u=1;u<i-1;u++){var f=255&o[u+1];(4*l-c-f)/2<s&&n.set(u),c=l,l=f}}return n},t.prototype.getBlackMatrix=function(){var e=this.getLuminanceSource(),n=e.getWidth(),r=e.getHeight(),i=new kR(n,r);this.initArrays(n);for(var o=this.buckets,a=1;a<5;a++)for(var u=Math.floor(r*a/5),s=e.getRow(u,this.luminances),c=Math.floor(4*n/5),l=Math.floor(n/5);l<c;l++)o[(255&s[l])>>t.LUMINANCE_SHIFT]++;var f=t.estimateBlackPoint(o),h=e.getMatrix();for(a=0;a<r;a++){var d=a*n;for(l=0;l<n;l++)(255&h[d+l])<f&&i.set(l,a)}return i},t.prototype.createBinarizer=function(e){return new t(e)},t.prototype.initArrays=function(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));for(var n=this.buckets,r=0;r<t.LUMINANCE_BUCKETS;r++)n[r]=0},t.estimateBlackPoint=function(e){for(var n=e.length,r=0,i=0,o=0,a=0;a<n;a++)e[a]>o&&(i=a,o=e[a]),e[a]>r&&(r=e[a]);var u=0,s=0;for(a=0;a<n;a++){var c=a-i;(d=e[a]*c*c)>s&&(u=a,s=d)}if(i>u){var l=i;i=u,u=l}if(u-i<=n/16)throw new ER;var f=u-1,h=-1;for(a=u-1;a>i;a--){var d,p=a-i;(d=p*p*(u-a)*(r-e[a]))>h&&(f=a,h=d)}return f<<t.LUMINANCE_SHIFT},t.LUMINANCE_BITS=5,t.LUMINANCE_SHIFT=8-t.LUMINANCE_BITS,t.LUMINANCE_BUCKETS=1<<t.LUMINANCE_BITS,t.EMPTY=Uint8ClampedArray.from([0]),t}(eR),CR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SR=function(e){function t(t){var n=e.call(this,t)||this;return n.matrix=null,n}return CR(t,e),t.prototype.getBlackMatrix=function(){if(null!==this.matrix)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=t.MINIMUM_DIMENSION&&i>=t.MINIMUM_DIMENSION){var o=n.getMatrix(),a=r>>t.BLOCK_SIZE_POWER;0!=(r&t.BLOCK_SIZE_MASK)&&a++;var u=i>>t.BLOCK_SIZE_POWER;0!=(i&t.BLOCK_SIZE_MASK)&&u++;var s=t.calculateBlackPoints(o,a,u,r,i),c=new kR(r,i);t.calculateThresholdForBlock(o,a,u,r,i,s,c),this.matrix=c}else this.matrix=e.prototype.getBlackMatrix.call(this);return this.matrix},t.prototype.createBinarizer=function(e){return new t(e)},t.calculateThresholdForBlock=function(e,n,r,i,o,a,u){for(var s=o-t.BLOCK_SIZE,c=i-t.BLOCK_SIZE,l=0;l<r;l++){var f=l<<t.BLOCK_SIZE_POWER;f>s&&(f=s);for(var h=t.cap(l,2,r-3),d=0;d<n;d++){var p=d<<t.BLOCK_SIZE_POWER;p>c&&(p=c);for(var v=t.cap(d,2,n-3),m=0,y=-2;y<=2;y++){var g=a[h+y];m+=g[v-2]+g[v-1]+g[v]+g[v+1]+g[v+2]}var w=m/25;t.thresholdBlock(e,p,f,w,i,u)}}},t.cap=function(e,t,n){return e<t?t:e>n?n:e},t.thresholdBlock=function(e,n,r,i,o,a){for(var u=0,s=r*o+n;u<t.BLOCK_SIZE;u++,s+=o)for(var c=0;c<t.BLOCK_SIZE;c++)(255&e[s+c])<=i&&a.set(n+c,r+u)},t.calculateBlackPoints=function(e,n,r,i,o){for(var a=o-t.BLOCK_SIZE,u=i-t.BLOCK_SIZE,s=new Array(r),c=0;c<r;c++){s[c]=new Int32Array(n);var l=c<<t.BLOCK_SIZE_POWER;l>a&&(l=a);for(var f=0;f<n;f++){var h=f<<t.BLOCK_SIZE_POWER;h>u&&(h=u);for(var d=0,p=255,v=0,m=0,y=l*i+h;m<t.BLOCK_SIZE;m++,y+=i){for(var g=0;g<t.BLOCK_SIZE;g++){var w=255&e[y+g];d+=w,w<p&&(p=w),w>v&&(v=w)}if(v-p>t.MIN_DYNAMIC_RANGE)for(m++,y+=i;m<t.BLOCK_SIZE;m++,y+=i)for(g=0;g<t.BLOCK_SIZE;g++)d+=255&e[y+g]}var b=d>>2*t.BLOCK_SIZE_POWER;if(v-p<=t.MIN_DYNAMIC_RANGE&&(b=p/2,c>0&&f>0)){var k=(s[c-1][f]+2*s[c][f-1]+s[c-1][f-1])/4;p<k&&(b=k)}s[c][f]=b}}return s},t.BLOCK_SIZE_POWER=3,t.BLOCK_SIZE=1<<t.BLOCK_SIZE_POWER,t.BLOCK_SIZE_MASK=t.BLOCK_SIZE-1,t.MINIMUM_DIMENSION=5*t.BLOCK_SIZE,t.MIN_DYNAMIC_RANGE=24,t}(AR),xR=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.isCropSupported=function(){return!1},e.prototype.crop=function(e,t,n,r){throw new yR("This luminance source does not support cropping.")},e.prototype.isRotateSupported=function(){return!1},e.prototype.rotateCounterClockwise=function(){throw new yR("This luminance source does not support rotation by 90 degrees.")},e.prototype.rotateCounterClockwise45=function(){throw new yR("This luminance source does not support rotation by 45 degrees.")},e.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new bR,n=0;n<this.height;n++){for(var r=this.getRow(n,e),i=0;i<this.width;i++){var o,a=255&r[i];o=a<64?"#":a<128?"+":a<192?".":" ",t.append(o)}t.append("\n")}return t.toString()},e}(),TR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),OR=function(e){function t(t){var n=e.call(this,t.getWidth(),t.getHeight())||this;return n.delegate=t,n}return TR(t,e),t.prototype.getRow=function(e,t){for(var n=this.delegate.getRow(e,t),r=this.getWidth(),i=0;i<r;i++)n[i]=255-(255&n[i]);return n},t.prototype.getMatrix=function(){for(var e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t),r=0;r<t;r++)n[r]=255-(255&e[r]);return n},t.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},t.prototype.crop=function(e,n,r,i){return new t(this.delegate.crop(e,n,r,i))},t.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},t.prototype.invert=function(){return this.delegate},t.prototype.rotateCounterClockwise=function(){return new t(this.delegate.rotateCounterClockwise())},t.prototype.rotateCounterClockwise45=function(){return new t(this.delegate.rotateCounterClockwise45())},t}(xR),NR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),RR=function(e){function t(n){var r=e.call(this,n.width,n.height)||this;return r.canvas=n,r.tempCanvasElement=null,r.buffer=t.makeBufferFromCanvasImageData(n),r}return NR(t,e),t.makeBufferFromCanvasImageData=function(e){var n=e.getContext("2d").getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(n.data,e.width,e.height)},t.toGrayscaleBuffer=function(e,t,n){for(var r=new Uint8ClampedArray(t*n),i=0,o=0,a=e.length;i<a;i+=4,o++){var u=void 0;u=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,r[o]=u}return r},t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new QN("Requested row is outside the image: "+e);var n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(t,n,r,i){return e.prototype.crop.call(this,t,n,r,i),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var n=this.getTempCanvasElement(),r=n.getContext("2d"),i=e*t.DEGREE_TO_RADIANS,o=this.canvas.width,a=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*a),s=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*a);return n.width=u,n.height=s,r.translate(u/2,s/2),r.rotate(i),r.drawImage(this.canvas,o/-2,a/-2),this.buffer=t.makeBufferFromCanvasImageData(n),this},t.prototype.invert=function(){return new OR(this)},t.DEGREE_TO_RADIANS=Math.PI/180,t}(xR),DR=function(){function e(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}return e.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},e}(),PR=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function u(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},MR=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},LR=function(){function e(e,t,n){void 0===t&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(e.prototype,"hasNavigator",{get:function(){return"undefined"!=typeof navigator},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canEnumerateDevices",{get:function(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),e.prototype.listVideoInputDevices=function(){return PR(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,u,s,c,l,f;return MR(this,(function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),r=n.next();!r.done;r=n.next())i=r.value,"videoinput"===(o="video"===i.kind?"videoinput":i.kind)&&(a=i.deviceId||i.id,u=i.label||"Video device "+(t.length+1),s=i.groupId,c={deviceId:a,label:u,kind:o,groupId:s},t.push(c))}catch(e){l={error:e}}finally{try{r&&!r.done&&(f=n.return)&&f.call(n)}finally{if(l)throw l.error}}return[2,t]}}))}))},e.prototype.getVideoInputDevices=function(){return PR(this,void 0,void 0,(function(){return MR(this,(function(e){switch(e.label){case 0:return[4,this.listVideoInputDevices()];case 1:return[2,e.sent().map((function(e){return new DR(e.deviceId,e.label)}))]}}))}))},e.prototype.findDeviceById=function(e){return PR(this,void 0,void 0,(function(){var t;return MR(this,(function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return(t=n.sent())?[2,t.find((function(t){return t.deviceId===e}))]:[2,null]}}))}))},e.prototype.decodeFromInputVideoDevice=function(e,t){return PR(this,void 0,void 0,(function(){return MR(this,(function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.decodeOnceFromVideoDevice=function(e,t){return PR(this,void 0,void 0,(function(){var n;return MR(this,(function(r){switch(r.label){case 0:return this.reset(),n={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(n,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.decodeOnceFromConstraints=function(e,t){return PR(this,void 0,void 0,(function(){var n;return MR(this,(function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=r.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,r.sent()]}}))}))},e.prototype.decodeOnceFromStream=function(e,t){return PR(this,void 0,void 0,(function(){var n;return MR(this,(function(r){switch(r.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return n=r.sent(),[4,this.decodeOnce(n)];case 2:return[2,r.sent()]}}))}))},e.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,n){return PR(this,void 0,void 0,(function(){return MR(this,(function(r){switch(r.label){case 0:return[4,this.decodeFromVideoDevice(e,t,n)];case 1:return[2,r.sent()]}}))}))},e.prototype.decodeFromVideoDevice=function(e,t,n){return PR(this,void 0,void 0,(function(){var r;return MR(this,(function(i){switch(i.label){case 0:return r={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(r,t,n)];case 1:return[2,i.sent()]}}))}))},e.prototype.decodeFromConstraints=function(e,t,n){return PR(this,void 0,void 0,(function(){var r;return MR(this,(function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeFromStream(r,t,n)];case 2:return[2,i.sent()]}}))}))},e.prototype.decodeFromStream=function(e,t,n){return PR(this,void 0,void 0,(function(){var r;return MR(this,(function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=i.sent(),[4,this.decodeContinuously(r,n)];case 2:return[2,i.sent()]}}))}))},e.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},e.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},e.prototype.attachStreamToVideo=function(e,t){return PR(this,void 0,void 0,(function(){var n;return MR(this,(function(r){switch(r.label){case 0:return n=this.prepareVideoElement(t),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return r.sent(),[2,n]}}))}))},e.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise((function(n,r){return t.playVideoOnLoad(e,(function(){return n()}))}))},e.prototype.playVideoOnLoad=function(e,t){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},e.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},e.prototype.tryPlayVideo=function(e){return PR(this,void 0,void 0,(function(){return MR(this,(function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}}))}))},e.prototype.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new XN("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new XN("element with id '"+e+"' must be an "+t+" element");return n},e.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new XN("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},e.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new XN("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},e.prototype.decodeFromVideoContinuously=function(e,t,n){if(void 0===e&&void 0===t)throw new XN("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)},e.prototype.decodeFromImageElement=function(e){if(!e)throw new XN("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);return this.imageElement=t,this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t)},e.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},e.prototype.decodeFromVideoElementContinuously=function(e,t){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)},e.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new XN("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},e.prototype.decodeFromImageUrl=function(e){if(!e)throw new XN("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var n=this._decodeOnLoadImage(t);return t.src=e,n},e.prototype.decodeFromVideoUrl=function(e){if(!e)throw new XN("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n},e.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new XN("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r},e.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise((function(n,r){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(n,r)},e.addEventListener("load",t.imageLoadedListener)}))},e.prototype._decodeOnLoadVideo=function(e){return PR(this,void 0,void 0,(function(){return MR(this,(function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}}))}))},e.prototype._decodeOnLoadVideoContinuously=function(e,t){return PR(this,void 0,void 0,(function(){return MR(this,(function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,t),[2]}}))}))},e.prototype.isImageLoaded=function(e){return!!e.complete&&0!==e.naturalWidth},e.prototype.prepareImageElement=function(e){var t;return void 0===e&&((t=document.createElement("img")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},e.prototype.prepareVideoElement=function(e){var t;return e||"undefined"==typeof document||((t=document.createElement("video")).width=200,t.height=200),"string"==typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},e.prototype.decodeOnce=function(e,t,n){var r=this;void 0===t&&(t=!0),void 0===n&&(n=!0),this._stopAsyncDecode=!1;var i=function i(o,a){if(r._stopAsyncDecode)return a(new ER("Video stream has ended before any code could be detected.")),void(r._stopAsyncDecode=void 0);try{o(r.decode(e))}catch(e){if(t&&e instanceof ER||(e instanceof $N||e instanceof hR)&&n)return setTimeout(i,r._timeBetweenDecodingAttempts,o,a);a(e)}};return new Promise((function(e,t){return i(e,t)}))},e.prototype.decodeContinuously=function(e,t){var n=this;this._stopContinuousDecode=!1;!function r(){if(n._stopContinuousDecode)n._stopContinuousDecode=void 0;else try{var i=n.decode(e);t(i,null),setTimeout(r,n.timeBetweenScansMillis)}catch(e){t(null,e),(e instanceof $N||e instanceof hR||e instanceof ER)&&setTimeout(r,n._timeBetweenDecodingAttempts)}}()},e.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},e.prototype.createBinaryBitmap=function(e){var t=this.getCaptureCanvasContext(e);this.drawImageOnCanvas(t,e);var n=this.getCaptureCanvas(e),r=new RR(n),i=new SR(r);return new ZN(i)},e.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext},e.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},e.prototype.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},e.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},e.prototype.createCaptureCanvas=function(e){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;var t,n,r=document.createElement("canvas");return void 0!==e&&(e instanceof HTMLVideoElement?(t=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(t=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),r.style.width=t+"px",r.style.height=n+"px",r.width=t,r.height=n,r},e.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach((function(e){return e.stop()})),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()},e.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},e.prototype._destroyVideoElement=function(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},e.prototype._destroyImageElement=function(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},e.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},e.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}},e.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch(Rj){e.src=""}this.videoElement.removeAttribute("src")},e}(),BR=function(){function e(e,t,n,r,i,o){void 0===n&&(n=null==t?0:8*t.length),void 0===o&&(o=tR.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,this.numBits=null==n?null==t?0:8*t.length:n,this.resultPoints=r,this.format=i,this.resultMetadata=null,this.timestamp=null==o?tR.currentTimeMillis():o}return e.prototype.getText=function(){return this.text},e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.getBarcodeFormat=function(){return this.format},e.prototype.getResultMetadata=function(){return this.resultMetadata},e.prototype.putMetadata=function(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},e.prototype.putAllMetadata=function(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))},e.prototype.addResultPoints=function(e){var t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){var n=new Array(t.length+e.length);tR.arraycopy(t,0,n,0,t.length),tR.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.toString=function(){return this.text},e}();!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(pR||(pR={}));var FR,jR=pR;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(FR||(FR={}));var UR,VR=FR,zR=function(){function e(e,t,n,r,i,o){void 0===i&&(i=-1),void 0===o&&(o=-1),this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=null==e?0:8*e.length}return e.prototype.getRawBytes=function(){return this.rawBytes},e.prototype.getNumBits=function(){return this.numBits},e.prototype.setNumBits=function(e){this.numBits=e},e.prototype.getText=function(){return this.text},e.prototype.getByteSegments=function(){return this.byteSegments},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getErrorsCorrected=function(){return this.errorsCorrected},e.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},e.prototype.getErasures=function(){return this.erasures},e.prototype.setErasures=function(e){this.erasures=e},e.prototype.getOther=function(){return this.other},e.prototype.setOther=function(e){this.other=e},e.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},e.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},e.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},e}(),HR=function(){function e(){}return e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new QN;return this.logTable[e]},e.addOrSubtract=function(e,t){return e^t},e}(),GR=function(){function e(e,t){if(0===t.length)throw new QN;this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),tR.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){if(0===e)return this.getCoefficient(0);var t,n=this.coefficients;if(1===e){t=0;for(var r=0,i=n.length;r!==i;r++){var o=n[r];t=HR.addOrSubtract(t,o)}return t}t=n[0];var a=n.length,u=this.field;for(r=1;r<a;r++)t=HR.addOrSubtract(u.multiply(e,t),n[r]);return t},e.prototype.addOrSubtract=function(t){if(!this.field.equals(t.field))throw new QN("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),a=r.length-n.length;tR.arraycopy(r,0,o,0,a);for(var u=a;u<r.length;u++)o[u]=HR.addOrSubtract(n[u-a],r[u]);return new e(this.field,o)},e.prototype.multiply=function(t){if(!this.field.equals(t.field))throw new QN("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,i=t.coefficients,o=i.length,a=new Int32Array(r+o-1),u=this.field,s=0;s<r;s++)for(var c=n[s],l=0;l<o;l++)a[s+l]=HR.addOrSubtract(a[s+l],u.multiply(c,i[l]));return new e(u,a)},e.prototype.multiplyScalar=function(t){if(0===t)return this.field.getZero();if(1===t)return this;for(var n=this.coefficients.length,r=this.field,i=new Int32Array(n),o=this.coefficients,a=0;a<n;a++)i[a]=r.multiply(o[a],t);return new e(r,i)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new QN;if(0===n)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+t),a=this.field,u=0;u<i;u++)o[u]=a.multiply(r[u],n);return new e(a,o)},e.prototype.divide=function(e){if(!this.field.equals(e.field))throw new QN("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new QN("Divide by 0");for(var t=this.field,n=t.getZero(),r=this,i=e.getCoefficient(e.getDegree()),o=t.inverse(i);r.getDegree()>=e.getDegree()&&!r.isZero();){var a=r.getDegree()-e.getDegree(),u=t.multiply(r.getCoefficient(r.getDegree()),o),s=e.multiplyByMonomial(a,u),c=t.buildMonomial(a,u);n=n.addOrSubtract(c),r=r.addOrSubtract(s)}return[n,r]},e.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);if(0!==n){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),0===t||1!==n){var r=this.field.log(n);0===r?e+="1":1===r?e+="a":(e+="a^",e+=r)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e},e}(),WR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return WR(t,e),t.kind="ArithmeticException",t}(qN),KR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),XR=function(e){function t(t,n,r){var i=e.call(this)||this;i.primitive=t,i.size=n,i.generatorBase=r;for(var o=new Int32Array(n),a=1,u=0;u<n;u++)o[u]=a,(a*=2)>=n&&(a^=t,a&=n-1);i.expTable=o;var s=new Int32Array(n);for(u=0;u<n-1;u++)s[o[u]]=u;return i.logTable=s,i.zero=new GR(i,Int32Array.from([0])),i.one=new GR(i,Int32Array.from([1])),i}return KR(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new QN;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new GR(this,n)},t.prototype.inverse=function(e){if(0===e)throw new qR;return this.expTable[this.size-this.logTable[e]-1]},t.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]},t.prototype.getSize=function(){return this.size},t.prototype.getGeneratorBase=function(){return this.generatorBase},t.prototype.toString=function(){return"GF(0x"+uR.toHexString(this.primitive)+","+this.size+")"},t.prototype.equals=function(e){return e===this},t.AZTEC_DATA_12=new t(4201,4096,1),t.AZTEC_DATA_10=new t(1033,1024,1),t.AZTEC_DATA_6=new t(67,64,1),t.AZTEC_PARAM=new t(19,16,1),t.QR_CODE_FIELD_256=new t(285,256,0),t.DATA_MATRIX_FIELD_256=new t(301,256,1),t.AZTEC_DATA_8=t.DATA_MATRIX_FIELD_256,t.MAXICODE_FIELD_64=t.AZTEC_DATA_6,t}(HR),YR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),QR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return YR(t,e),t.kind="ReedSolomonException",t}(qN),ZR=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),JR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ZR(t,e),t.kind="IllegalStateException",t}(qN),$R=function(){function e(e){this.field=e}return e.prototype.decode=function(e,t){for(var n=this.field,r=new GR(n,e),i=new Int32Array(t),o=!0,a=0;a<t;a++){var u=r.evaluateAt(n.exp(a+n.getGeneratorBase()));i[i.length-1-a]=u,0!==u&&(o=!1)}if(!o){var s=new GR(n,i),c=this.runEuclideanAlgorithm(n.buildMonomial(t,1),s,t),l=c[0],f=c[1],h=this.findErrorLocations(l),d=this.findErrorMagnitudes(f,h);for(a=0;a<h.length;a++){var p=e.length-1-n.log(h[a]);if(p<0)throw new QR("Bad error location");e[p]=XR.addOrSubtract(e[p],d[a])}}},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var i=this.field,o=e,a=t,u=i.getZero(),s=i.getOne();a.getDegree()>=(n/2|0);){var c=o,l=u;if(u=s,(o=a).isZero())throw new QR("r_{i-1} was zero");a=c;for(var f=i.getZero(),h=o.getCoefficient(o.getDegree()),d=i.inverse(h);a.getDegree()>=o.getDegree()&&!a.isZero();){var p=a.getDegree()-o.getDegree(),v=i.multiply(a.getCoefficient(a.getDegree()),d);f=f.addOrSubtract(i.buildMonomial(p,v)),a=a.addOrSubtract(o.multiplyByMonomial(p,v))}if(s=f.multiply(u).addOrSubtract(l),a.getDegree()>=o.getDegree())throw new JR("Division algorithm failed to reduce polynomial?")}var m=s.getCoefficient(0);if(0===m)throw new QR("sigmaTilde(0) was zero");var y=i.inverse(m);return[s.multiplyScalar(y),a.multiplyScalar(y)]},e.prototype.findErrorLocations=function(e){var t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(t),r=0,i=this.field,o=1;o<i.getSize()&&r<t;o++)0===e.evaluateAt(o)&&(n[r]=i.inverse(o),r++);if(r!==t)throw new QR("Error locator degree does not match number of roots");return n},e.prototype.findErrorMagnitudes=function(e,t){for(var n=t.length,r=new Int32Array(n),i=this.field,o=0;o<n;o++){for(var a=i.inverse(t[o]),u=1,s=0;s<n;s++)if(o!==s){var c=i.multiply(t[s],a),l=0==(1&c)?1|c:-2&c;u=i.multiply(u,l)}r[o]=i.multiply(e.evaluateAt(a),i.inverse(u)),0!==i.getGeneratorBase()&&(r[o]=i.multiply(r[o],a))}return r},e}();!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(UR||(UR={}));var eD=function(){function e(){}return e.prototype.decode=function(t){this.ddata=t;var n=t.getBits(),r=this.extractBits(n),i=this.correctBits(r),o=e.convertBoolArrayToByteArray(i),a=e.getEncodedData(i),u=new zR(o,a,null,null);return u.setNumBits(i.length),u},e.highLevelDecode=function(e){return this.getEncodedData(e)},e.getEncodedData=function(t){for(var n=t.length,r=UR.UPPER,i=UR.UPPER,o="",a=0;a<n;)if(i===UR.BINARY){if(n-a<5)break;var u=e.readCode(t,a,5);if(a+=5,0===u){if(n-a<11)break;u=e.readCode(t,a,11)+31,a+=11}for(var s=0;s<u;s++){if(n-a<8){a=n;break}var c=e.readCode(t,a,8);o+=wR.castAsNonUtf8Char(c),a+=8}i=r}else{var l=i===UR.DIGIT?4:5;if(n-a<l)break;c=e.readCode(t,a,l),a+=l;var f=e.getCharacter(i,c);f.startsWith("CTRL_")?(r=i,i=e.getTable(f.charAt(5)),"L"===f.charAt(6)&&(r=i)):(o+=f,i=r)}return o},e.getTable=function(e){switch(e){case"L":return UR.LOWER;case"P":return UR.PUNCT;case"M":return UR.MIXED;case"D":return UR.DIGIT;case"B":return UR.BINARY;default:return UR.UPPER}},e.getCharacter=function(t,n){switch(t){case UR.UPPER:return e.UPPER_TABLE[n];case UR.LOWER:return e.LOWER_TABLE[n];case UR.MIXED:return e.MIXED_TABLE[n];case UR.PUNCT:return e.PUNCT_TABLE[n];case UR.DIGIT:return e.DIGIT_TABLE[n];default:throw new JR("Bad table")}},e.prototype.correctBits=function(t){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=XR.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=XR.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=XR.AZTEC_DATA_10):(r=12,n=XR.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=t.length/r;if(o<i)throw new hR;for(var a=t.length%r,u=new Int32Array(o),s=0;s<o;s++,a+=r)u[s]=e.readCode(t,a,r);try{new $R(n).decode(u,o-i)}catch(e){throw new hR(e)}var c=(1<<r)-1,l=0;for(s=0;s<i;s++){if(0===(d=u[s])||d===c)throw new hR;1!==d&&d!==c-1||l++}var f=new Array(i*r-l),h=0;for(s=0;s<i;s++){var d;if(1===(d=u[s])||d===c-1)f.fill(d>1,h,h+r-1),h+=r-1;else for(var p=r-1;p>=0;--p)f[h++]=0!=(d&1<<p)}return f},e.prototype.extractBits=function(e){var t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+4*n,i=new Int32Array(r),o=new Array(this.totalBitsInLayer(n,t));if(t)for(var a=0;a<i.length;a++)i[a]=a;else{var u=r+1+2*uR.truncDivision(uR.truncDivision(r,2)-1,15),s=r/2,c=uR.truncDivision(u,2);for(a=0;a<s;a++){var l=a+uR.truncDivision(a,15);i[s-a-1]=c-l-1,i[s+a]=c+l+1}}a=0;for(var f=0;a<n;a++){for(var h=4*(n-a)+(t?9:12),d=2*a,p=r-1-d,v=0;v<h;v++)for(var m=2*v,y=0;y<2;y++)o[f+m+y]=e.get(i[d+y],i[d+v]),o[f+2*h+m+y]=e.get(i[d+v],i[p-y]),o[f+4*h+m+y]=e.get(i[p-y],i[p-v]),o[f+6*h+m+y]=e.get(i[p-v],i[d+y]);f+=8*h}return o},e.readCode=function(e,t,n){for(var r=0,i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r},e.readByte=function(t,n){var r=t.length-n;return r>=8?e.readCode(t,n,8):e.readCode(t,n,r)<<8-r},e.convertBoolArrayToByteArray=function(t){for(var n=new Uint8Array((t.length+7)/8),r=0;r<n.length;r++)n[r]=e.readByte(t,8*r);return n},e.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},e.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],e.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],e.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],e.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],e.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],e}(),tD=function(){function e(){}return e.round=function(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},e.distance=function(e,t,n,r){var i=e-n,o=t-r;return Math.sqrt(i*i+o*o)},e.sum=function(e){for(var t=0,n=0,r=e.length;n!==r;n++)t+=e[n];return t},e}(),nD=function(){function e(){}return e.floatToIntBits=function(e){return e},e.MAX_VALUE=Number.MAX_SAFE_INTEGER,e}(),rD=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.equals=function(t){if(t instanceof e){var n=t;return this.x===n.x&&this.y===n.y}return!1},e.prototype.hashCode=function(){return 31*nD.floatToIntBits(this.x)+nD.floatToIntBits(this.y)},e.prototype.toString=function(){return"("+this.x+","+this.y+")"},e.orderBestPatterns=function(e){var t,n,r,i=this.distance(e[0],e[1]),o=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]);if(o>=i&&o>=a?(n=e[0],t=e[1],r=e[2]):a>=o&&a>=i?(n=e[1],t=e[0],r=e[2]):(n=e[2],t=e[0],r=e[1]),this.crossProductZ(t,n,r)<0){var u=t;t=r,r=u}e[0]=t,e[1]=n,e[2]=r},e.distance=function(e,t){return tD.distance(e.x,e.y,t.x,t.y)},e.crossProductZ=function(e,t,n){var r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)},e}(),iD=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}(),oD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),aD=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n)||this;return a.compact=r,a.nbDatablocks=i,a.nbLayers=o,a}return oD(t,e),t.prototype.getNbLayers=function(){return this.nbLayers},t.prototype.getNbDatablocks=function(){return this.nbDatablocks},t.prototype.isCompact=function(){return this.compact},t}(iD),uD=function(){function e(t,n,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),null==n&&(n=e.INIT_SIZE),null==r&&(r=t.getWidth()/2|0),null==i&&(i=t.getHeight()/2|0);var o=n/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ER}return e.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,o=!0,a=!1,u=!1,s=!1,c=!1,l=!1,f=this.width,h=this.height;o;){o=!1;for(var d=!0;(d||!u)&&t<f;)(d=this.containsBlackPoint(n,r,t,!1))?(t++,o=!0,u=!0):u||t++;if(t>=f){i=!0;break}for(var p=!0;(p||!s)&&r<h;)(p=this.containsBlackPoint(e,t,r,!0))?(r++,o=!0,s=!0):s||r++;if(r>=h){i=!0;break}for(var v=!0;(v||!c)&&e>=0;)(v=this.containsBlackPoint(n,r,e,!1))?(e--,o=!0,c=!0):c||e--;if(e<0){i=!0;break}for(var m=!0;(m||!l)&&n>=0;)(m=this.containsBlackPoint(e,t,n,!0))?(n--,o=!0,l=!0):l||n--;if(n<0){i=!0;break}o&&(a=!0)}if(!i&&a){for(var y=t-e,g=null,w=1;null===g&&w<y;w++)g=this.getBlackPointOnSegment(e,r-w,e+w,r);if(null==g)throw new ER;var b=null;for(w=1;null===b&&w<y;w++)b=this.getBlackPointOnSegment(e,n+w,e+w,n);if(null==b)throw new ER;var k=null;for(w=1;null===k&&w<y;w++)k=this.getBlackPointOnSegment(t,n+w,t-w,n);if(null==k)throw new ER;var _=null;for(w=1;null===_&&w<y;w++)_=this.getBlackPointOnSegment(t,r-w,t-w,r);if(null==_)throw new ER;return this.centerEdges(_,g,k,b)}throw new ER},e.prototype.getBlackPointOnSegment=function(e,t,n,r){for(var i=tD.round(tD.distance(e,t,n,r)),o=(n-e)/i,a=(r-t)/i,u=this.image,s=0;s<i;s++){var c=tD.round(e+s*o),l=tD.round(t+s*a);if(u.get(c,l))return new rD(c,l)}return null},e.prototype.centerEdges=function(t,n,r,i){var o=t.getX(),a=t.getY(),u=n.getX(),s=n.getY(),c=r.getX(),l=r.getY(),f=i.getX(),h=i.getY(),d=e.CORR;return o<this.width/2?[new rD(f-d,h+d),new rD(u+d,s+d),new rD(c-d,l-d),new rD(o+d,a-d)]:[new rD(f+d,h+d),new rD(u+d,s-d),new rD(c-d,l+d),new rD(o-d,a-d)]},e.prototype.containsBlackPoint=function(e,t,n,r){var i=this.image;if(r){for(var o=e;o<=t;o++)if(i.get(o,n))return!0}else for(var a=e;a<=t;a++)if(i.get(n,a))return!0;return!1},e.INIT_SIZE=10,e.CORR=1,e}(),sD=function(){function e(){}return e.checkAndNudgePoints=function(e,t){for(var n=e.getWidth(),r=e.getHeight(),i=!0,o=0;o<t.length&&i;o+=2){var a=Math.floor(t[o]),u=Math.floor(t[o+1]);if(a<-1||a>n||u<-1||u>r)throw new ER;i=!1,-1===a?(t[o]=0,i=!0):a===n&&(t[o]=n-1,i=!0),-1===u?(t[o+1]=0,i=!0):u===r&&(t[o+1]=r-1,i=!0)}for(i=!0,o=t.length-2;o>=0&&i;o-=2){if(a=Math.floor(t[o]),u=Math.floor(t[o+1]),a<-1||a>n||u<-1||u>r)throw new ER;i=!1,-1===a?(t[o]=0,i=!0):a===n&&(t[o]=n-1,i=!0),-1===u?(t[o+1]=0,i=!0):u===r&&(t[o+1]=r-1,i=!0)}},e}(),cD=function(){function e(e,t,n,r,i,o,a,u,s){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=o,this.a13=a,this.a23=u,this.a33=s}return e.quadrilateralToQuadrilateral=function(t,n,r,i,o,a,u,s,c,l,f,h,d,p,v,m){var y=e.quadrilateralToSquare(t,n,r,i,o,a,u,s);return e.squareToQuadrilateral(c,l,f,h,d,p,v,m).times(y)},e.prototype.transformPoints=function(e){for(var t=e.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,a=this.a22,u=this.a23,s=this.a31,c=this.a32,l=this.a33,f=0;f<t;f+=2){var h=e[f],d=e[f+1],p=i*h+u*d+l;e[f]=(n*h+o*d+s)/p,e[f+1]=(r*h+a*d+c)/p}},e.prototype.transformPointsWithValues=function(e,t){for(var n=this.a11,r=this.a12,i=this.a13,o=this.a21,a=this.a22,u=this.a23,s=this.a31,c=this.a32,l=this.a33,f=e.length,h=0;h<f;h++){var d=e[h],p=t[h],v=i*d+u*p+l;e[h]=(n*d+o*p+s)/v,t[h]=(r*d+a*p+c)/v}},e.squareToQuadrilateral=function(t,n,r,i,o,a,u,s){var c=t-r+o-u,l=n-i+a-s;if(0===c&&0===l)return new e(r-t,o-r,t,i-n,a-i,n,0,0,1);var f=r-o,h=u-o,d=i-a,p=s-a,v=f*p-h*d,m=(c*p-h*l)/v,y=(f*l-c*d)/v;return new e(r-t+m*r,u-t+y*u,t,i-n+m*i,s-n+y*s,n,m,y,1)},e.quadrilateralToSquare=function(t,n,r,i,o,a,u,s){return e.squareToQuadrilateral(t,n,r,i,o,a,u,s).buildAdjoint()},e.prototype.buildAdjoint=function(){return new e(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},e.prototype.times=function(t){return new e(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)},e}(),lD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),fD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return lD(t,e),t.prototype.sampleGrid=function(e,t,n,r,i,o,a,u,s,c,l,f,h,d,p,v,m,y,g){var w=cD.quadrilateralToQuadrilateral(r,i,o,a,u,s,c,l,f,h,d,p,v,m,y,g);return this.sampleGridWithTransform(e,t,n,w)},t.prototype.sampleGridWithTransform=function(e,t,n,r){if(t<=0||n<=0)throw new ER;for(var i=new kR(t,n),o=new Float32Array(2*t),a=0;a<n;a++){for(var u=o.length,s=a+.5,c=0;c<u;c+=2)o[c]=c/2+.5,o[c+1]=s;r.transformPoints(o),sD.checkAndNudgePoints(e,o);try{for(c=0;c<u;c+=2)e.get(Math.floor(o[c]),Math.floor(o[c+1]))&&i.set(c/2,a)}catch(e){throw new ER}}return i},t}(sD),hD=function(){function e(){}return e.setGridSampler=function(t){e.gridSampler=t},e.getInstance=function(){return e.gridSampler},e.gridSampler=new fD,e}(),dD=function(){function e(e,t){this.x=e,this.y=t}return e.prototype.toResultPoint=function(){return new rD(this.getX(),this.getY())},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e}(),pD=function(){function e(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return e.prototype.detect=function(){return this.detectMirror(!1)},e.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){var r=n[0];n[0]=n[2],n[2]=r}this.extractParameters(n);var i=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),o=this.getMatrixCornerPoints(n);return new aD(i,o,this.compact,this.nbDataBlocks,this.nbLayers)},e.prototype.extractParameters=function(e){if(!(this.isValidPoint(e[0])&&this.isValidPoint(e[1])&&this.isValidPoint(e[2])&&this.isValidPoint(e[3])))throw new ER;var t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);for(var r=0,i=0;i<4;i++){var o=n[(this.shift+i)%4];this.compact?(r<<=7,r+=o>>1&127):(r<<=10,r+=(o>>2&992)+(o>>1&31))}var a=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=1+(a>>6),this.nbDataBlocks=1+(63&a)):(this.nbLayers=1+(a>>11),this.nbDataBlocks=1+(2047&a))},e.prototype.getRotation=function(e,t){var n=0;e.forEach((function(e,r,i){n=(e>>t-2<<1)+(1&e)+(n<<3)})),n=((1&n)<<11)+(n>>1);for(var r=0;r<4;r++)if(uR.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new ER},e.prototype.getCorrectedParameterData=function(e,t){var n,r;t?(n=7,r=2):(n=10,r=4);for(var i=n-r,o=new Int32Array(n),a=n-1;a>=0;--a)o[a]=15&e,e>>=4;try{new $R(XR.AZTEC_PARAM).decode(o,i)}catch(e){throw new ER}var u=0;for(a=0;a<r;a++)u=(u<<4)+o[a];return u},e.prototype.getBullsEyeCorners=function(e){var t=e,n=e,r=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,o,1,-1),u=this.getFirstDifferent(n,o,1,1),s=this.getFirstDifferent(r,o,-1,1),c=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){var l=this.distancePoint(c,a)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(l<.75||l>1.25||!this.isWhiteOrBlackRectangle(a,u,s,c))break}t=a,n=u,r=s,i=c,o=!o}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new ER;this.compact=5===this.nbCenterLayers;var f=new rD(t.getX()+.5,t.getY()-.5),h=new rD(n.getX()+.5,n.getY()+.5),d=new rD(r.getX()-.5,r.getY()+.5),p=new rD(i.getX()-.5,i.getY()-.5);return this.expandSquare([f,h,d,p],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},e.prototype.getMatrixCenter=function(){var e,t,n,r;try{e=(s=new uD(this.image).detect())[0],t=s[1],n=s[2],r=s[3]}catch(a){var i=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new dD(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new dD(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new dD(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new dD(i-7,o-7),!1,-1,-1).toResultPoint()}var a=tD.round((e.getX()+r.getX()+t.getX()+n.getX())/4),u=tD.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{var s;e=(s=new uD(this.image,15,a,u).detect())[0],t=s[1],n=s[2],r=s[3]}catch(i){e=this.getFirstDifferent(new dD(a+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new dD(a+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new dD(a-7,u+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new dD(a-7,u-7),!1,-1,-1).toResultPoint()}return a=tD.round((e.getX()+r.getX()+t.getX()+n.getX())/4),u=tD.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new dD(a,u)},e.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},e.prototype.sampleGrid=function(e,t,n,r,i){var o=hD.getInstance(),a=this.getDimension(),u=a/2-this.nbCenterLayers,s=a/2+this.nbCenterLayers;return o.sampleGrid(e,a,a,u,u,s,u,s,s,u,s,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())},e.prototype.sampleLine=function(e,t,n){for(var r=0,i=this.distanceResultPoint(e,t),o=i/n,a=e.getX(),u=e.getY(),s=o*(t.getX()-e.getX())/i,c=o*(t.getY()-e.getY())/i,l=0;l<n;l++)this.image.get(tD.round(a+l*s),tD.round(u+l*c))&&(r|=1<<n-l-1);return r},e.prototype.isWhiteOrBlackRectangle=function(e,t,n,r){e=new dD(e.getX()-3,e.getY()+3),t=new dD(t.getX()-3,t.getY()-3),n=new dD(n.getX()+3,n.getY()-3),r=new dD(r.getX()+3,r.getY()+3);var i=this.getColor(r,e);if(0===i)return!1;var o=this.getColor(e,t);return o===i&&(o=this.getColor(t,n))===i&&(o=this.getColor(n,r))===i},e.prototype.getColor=function(e,t){for(var n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,a=e.getX(),u=e.getY(),s=this.image.get(e.getX(),e.getY()),c=Math.ceil(n),l=0;l<c;l++)a+=r,u+=i,this.image.get(tD.round(a),tD.round(u))!==s&&o++;var f=o/n;return f>.1&&f<.9?0:f<=.1===s?1:-1},e.prototype.getFirstDifferent=function(e,t,n,r){for(var i=e.getX()+n,o=e.getY()+r;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=r;for(i-=n,o-=r;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=r;return new dD(i,o-=r)},e.prototype.expandSquare=function(e,t,n){var r=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,u=(e[0].getY()+e[2].getY())/2,s=new rD(a+r*i,u+r*o),c=new rD(a-r*i,u-r*o);return i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,u=(e[1].getY()+e[3].getY())/2,[s,new rD(a+r*i,u+r*o),c,new rD(a-r*i,u-r*o)]},e.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},e.prototype.isValidPoint=function(e){var t=tD.round(e.getX()),n=tD.round(e.getY());return this.isValid(t,n)},e.prototype.distancePoint=function(e,t){return tD.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.distanceResultPoint=function(e,t){return tD.distance(e.getX(),e.getY(),t.getX(),t.getY())},e.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(uR.truncDivision(this.nbLayers-4,8)+1)+15},e}(),vD=function(){function e(){}return e.prototype.decode=function(e,t){void 0===t&&(t=null);var n=null,r=new pD(e.getBlackMatrix()),i=null,o=null;try{i=(a=r.detectMirror(!1)).getPoints(),this.reportFoundResultPoints(t,i),o=(new eD).decode(a)}catch(e){n=e}if(null==o)try{var a;i=(a=r.detectMirror(!0)).getPoints(),this.reportFoundResultPoints(t,i),o=(new eD).decode(a)}catch(e){if(null!=n)throw n;throw e}var u=new BR(o.getText(),o.getRawBytes(),o.getNumBits(),i,jR.AZTEC,tR.currentTimeMillis()),s=o.getByteSegments();null!=s&&u.putMetadata(VR.BYTE_SEGMENTS,s);var c=o.getECLevel();return null!=c&&u.putMetadata(VR.ERROR_CORRECTION_LEVEL,c),u},e.prototype.reportFoundResultPoints=function(e,t){if(null!=e){var n=e.get(lR.NEED_RESULT_POINT_CALLBACK);null!=n&&t.forEach((function(e,t,r){n.foundPossibleResultPoint(e)}))}},e.prototype.reset=function(){},e}(),mD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){mD((function(t){return void 0===t&&(t=500),e.call(this,new vD,t)||this}),e)}(LR);var yD=function(){function e(){}return e.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch(KN){if(t&&!0===t.get(lR.TRY_HARDER)&&e.isRotateSupported()){var n=e.rotateCounterClockwise(),r=this.doDecode(n,t),i=r.getResultMetadata(),o=270;null!==i&&!0===i.get(VR.ORIENTATION)&&(o+=i.get(VR.ORIENTATION)%360),r.putMetadata(VR.ORIENTATION,o);var a=r.getResultPoints();if(null!==a)for(var u=n.getHeight(),s=0;s<a.length;s++)a[s]=new rD(u-a[s].getY()-1,a[s].getX());return r}throw new ER}},e.prototype.reset=function(){},e.prototype.doDecode=function(e,t){var n,r=e.getWidth(),i=e.getHeight(),o=new sR(r),a=t&&!0===t.get(lR.TRY_HARDER),u=Math.max(1,i>>(a?8:5));n=a?i:15;for(var s=Math.trunc(i/2),c=0;c<n;c++){var l=Math.trunc((c+1)/2),f=s+u*(0==(1&c)?l:-l);if(f<0||f>=i)break;try{o=e.getBlackRow(f,o)}catch(e){continue}for(var h=function(e){if(1===e&&(o.reverse(),t&&!0===t.get(lR.NEED_RESULT_POINT_CALLBACK))){var n=new Map;t.forEach((function(e,t){return n.set(t,e)})),n.delete(lR.NEED_RESULT_POINT_CALLBACK),t=n}try{var i=d.decodeRow(f,o,t);if(1===e){i.putMetadata(VR.ORIENTATION,180);var a=i.getResultPoints();null!==a&&(a[0]=new rD(r-a[0].getX()-1,a[0].getY()),a[1]=new rD(r-a[1].getX()-1,a[1].getY()))}return{value:i}}catch(e){}},d=this,p=0;p<2;p++){var v=h(p);if("object"==typeof v)return v.value}}throw new ER},e.recordPattern=function(e,t,n){for(var r=n.length,i=0;i<r;i++)n[i]=0;var o=e.getSize();if(t>=o)throw new ER;for(var a=!e.get(t),u=0,s=t;s<o;){if(e.get(s)!==a)n[u]++;else{if(++u===r)break;n[u]=1,a=!a}s++}if(u!==r&&(u!==r-1||s!==o))throw new ER},e.recordPatternInReverse=function(t,n,r){for(var i=r.length,o=t.get(n);n>0&&i>=0;)t.get(--n)!==o&&(i--,o=!o);if(i>=0)throw new ER;e.recordPattern(t,n+1,r)},e.patternMatchVariance=function(e,t,n){for(var r=e.length,i=0,o=0,a=0;a<r;a++)i+=e[a],o+=t[a];if(i<o)return Number.POSITIVE_INFINITY;var u=i/o;n*=u;for(var s=0,c=0;c<r;c++){var l=e[c],f=t[c]*u,h=l>f?l-f:f-l;if(h>n)return Number.POSITIVE_INFINITY;s+=h}return s/i},e}(),gD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wD=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return gD(t,e),t.findStartPattern=function(e){for(var n=e.getSize(),r=e.getNextSet(0),i=0,o=Int32Array.from([0,0,0,0,0,0]),a=r,u=!1,s=r;s<n;s++)if(e.get(s)!==u)o[i]++;else{if(5===i){for(var c=t.MAX_AVG_VARIANCE,l=-1,f=t.CODE_START_A;f<=t.CODE_START_C;f++){var h=yD.patternMatchVariance(o,t.CODE_PATTERNS[f],t.MAX_INDIVIDUAL_VARIANCE);h<c&&(c=h,l=f)}if(l>=0&&e.isRange(Math.max(0,a-(s-a)/2),a,!1))return Int32Array.from([a,s,l]);a+=o[0]+o[1],(o=o.slice(2,o.length-1))[i-1]=0,o[i]=0,i--}else i++;o[i]=1,u=!u}throw new ER},t.decodeCode=function(e,n,r){yD.recordPattern(e,r,n);for(var i=t.MAX_AVG_VARIANCE,o=-1,a=0;a<t.CODE_PATTERNS.length;a++){var u=t.CODE_PATTERNS[a],s=this.patternMatchVariance(n,u,t.MAX_INDIVIDUAL_VARIANCE);s<i&&(i=s,o=a)}if(o>=0)return o;throw new ER},t.prototype.decodeRow=function(e,n,r){var i,o=r&&!0===r.get(lR.ASSUME_GS1),a=t.findStartPattern(n),u=a[2],s=0,c=new Uint8Array(20);switch(c[s++]=u,u){case t.CODE_START_A:i=t.CODE_CODE_A;break;case t.CODE_START_B:i=t.CODE_CODE_B;break;case t.CODE_START_C:i=t.CODE_CODE_C;break;default:throw new hR}for(var l=!1,f=!1,h="",d=a[0],p=a[1],v=Int32Array.from([0,0,0,0,0,0]),m=0,y=0,g=u,w=0,b=!0,k=!1,_=!1;!l;){var E=f;switch(f=!1,m=y,y=t.decodeCode(n,v,p),c[s++]=y,y!==t.CODE_STOP&&(b=!0),y!==t.CODE_STOP&&(g+=++w*y),d=p,p+=v.reduce((function(e,t){return e+t}),0),y){case t.CODE_START_A:case t.CODE_START_B:case t.CODE_START_C:throw new hR}switch(i){case t.CODE_CODE_A:if(y<64)h+=_===k?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),_=!1;else if(y<96)h+=_===k?String.fromCharCode(y-64):String.fromCharCode(y+64),_=!1;else switch(y!==t.CODE_STOP&&(b=!1),y){case t.CODE_FNC_1:o&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_A:!k&&_?(k=!0,_=!1):k&&_?(k=!1,_=!1):_=!0;break;case t.CODE_SHIFT:f=!0,i=t.CODE_CODE_B;break;case t.CODE_CODE_B:i=t.CODE_CODE_B;break;case t.CODE_CODE_C:i=t.CODE_CODE_C;break;case t.CODE_STOP:l=!0}break;case t.CODE_CODE_B:if(y<96)h+=_===k?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),_=!1;else switch(y!==t.CODE_STOP&&(b=!1),y){case t.CODE_FNC_1:o&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case t.CODE_FNC_2:case t.CODE_FNC_3:break;case t.CODE_FNC_4_B:!k&&_?(k=!0,_=!1):k&&_?(k=!1,_=!1):_=!0;break;case t.CODE_SHIFT:f=!0,i=t.CODE_CODE_A;break;case t.CODE_CODE_A:i=t.CODE_CODE_A;break;case t.CODE_CODE_C:i=t.CODE_CODE_C;break;case t.CODE_STOP:l=!0}break;case t.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==t.CODE_STOP&&(b=!1),y){case t.CODE_FNC_1:o&&(0===h.length?h+="]C1":h+=String.fromCharCode(29));break;case t.CODE_CODE_A:i=t.CODE_CODE_A;break;case t.CODE_CODE_B:i=t.CODE_CODE_B;break;case t.CODE_STOP:l=!0}}E&&(i=i===t.CODE_CODE_A?t.CODE_CODE_B:t.CODE_CODE_A)}var I=p-d;if(p=n.getNextUnset(p),!n.isRange(p,Math.min(n.getSize(),p+(p-d)/2),!1))throw new ER;if((g-=w*m)%103!==m)throw new $N;var A=h.length;if(0===A)throw new ER;A>0&&b&&(h=i===t.CODE_CODE_C?h.substring(0,A-2):h.substring(0,A-1));for(var C=(a[1]+a[0])/2,S=d+I/2,x=c.length,T=new Uint8Array(x),O=0;O<x;O++)T[O]=c[O];var N=[new rD(C,e),new rD(S,e)];return new BR(h,T,0,N,jR.CODE_128,(new Date).getTime())},t.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],t.MAX_AVG_VARIANCE=.25,t.MAX_INDIVIDUAL_VARIANCE=.7,t.CODE_SHIFT=98,t.CODE_CODE_C=99,t.CODE_CODE_B=100,t.CODE_CODE_A=101,t.CODE_FNC_1=102,t.CODE_FNC_2=97,t.CODE_FNC_3=96,t.CODE_FNC_4_A=101,t.CODE_FNC_4_B=100,t.CODE_START_A=103,t.CODE_START_B=104,t.CODE_START_C=105,t.CODE_STOP=106,t}(yD),bD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kD=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_D=function(e){function t(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var r=e.call(this)||this;return r.usingCheckDigit=t,r.extendedMode=n,r.decodeRowResult="",r.counters=new Int32Array(9),r}return bD(t,e),t.prototype.decodeRow=function(e,n,r){var i,o,a,u,s=this.counters;s.fill(0),this.decodeRowResult="";var c,l,f=t.findAsteriskPattern(n,s),h=n.getNextSet(f[1]),d=n.getSize();do{t.recordPattern(n,h,s);var p=t.toNarrowWidePattern(s);if(p<0)throw new ER;c=t.patternToChar(p),this.decodeRowResult+=c,l=h;try{for(var v=(i=void 0,kD(s)),m=v.next();!m.done;m=v.next())h+=m.value}catch(e){i={error:e}}finally{try{m&&!m.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}h=n.getNextSet(h)}while("*"!==c);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var y,g=0;try{for(var w=kD(s),b=w.next();!b.done;b=w.next())g+=b.value}catch(e){a={error:e}}finally{try{b&&!b.done&&(u=w.return)&&u.call(w)}finally{if(a)throw a.error}}if(h!==d&&2*(h-l-g)<g)throw new ER;if(this.usingCheckDigit){for(var k=this.decodeRowResult.length-1,_=0,E=0;E<k;E++)_+=t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(E));if(this.decodeRowResult.charAt(k)!==t.ALPHABET_STRING.charAt(_%43))throw new $N;this.decodeRowResult=this.decodeRowResult.substring(0,k)}if(0===this.decodeRowResult.length)throw new ER;y=this.extendedMode?t.decodeExtended(this.decodeRowResult):this.decodeRowResult;var I=(f[1]+f[0])/2,A=l+g/2;return new BR(y,null,0,[new rD(I,e),new rD(A,e)],jR.CODE_39,(new Date).getTime())},t.findAsteriskPattern=function(e,n){for(var r=e.getSize(),i=e.getNextSet(0),o=0,a=i,u=!1,s=n.length,c=i;c<r;c++)if(e.get(c)!==u)n[o]++;else{if(o===s-1){if(this.toNarrowWidePattern(n)===t.ASTERISK_ENCODING&&e.isRange(Math.max(0,a-Math.floor((c-a)/2)),a,!1))return[a,c];a+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,u=!u}throw new ER},t.toNarrowWidePattern=function(e){var t,n,r,i=e.length,o=0;do{var a=2147483647;try{for(var u=(t=void 0,kD(e)),s=u.next();!s.done;s=u.next())(h=s.value)<a&&h>o&&(a=h)}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}o=a,r=0;for(var c=0,l=0,f=0;f<i;f++)(h=e[f])>o&&(l|=1<<i-1-f,r++,c+=h);if(3===r){for(f=0;f<i&&r>0;f++){var h;if((h=e[f])>o&&(r--,2*h>=c))return-1}return l}}while(r>3);return-1},t.patternToChar=function(e){for(var n=0;n<t.CHARACTER_ENCODINGS.length;n++)if(t.CHARACTER_ENCODINGS[n]===e)return t.ALPHABET_STRING.charAt(n);if(e===t.ASTERISK_ENCODING)return"*";throw new ER},t.decodeExtended=function(e){for(var t=e.length,n="",r=0;r<t;r++){var i=e.charAt(r);if("+"===i||"$"===i||"%"===i||"/"===i){var o=e.charAt(r+1),a="\0";switch(i){case"+":if(!(o>="A"&&o<="Z"))throw new hR;a=String.fromCharCode(o.charCodeAt(0)+32);break;case"$":if(!(o>="A"&&o<="Z"))throw new hR;a=String.fromCharCode(o.charCodeAt(0)-64);break;case"%":if(o>="A"&&o<="E")a=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")a=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")a=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")a=String.fromCharCode(o.charCodeAt(0)+43);else if("U"===o)a="\0";else if("V"===o)a="@";else if("W"===o)a="`";else{if("X"!==o&&"Y"!==o&&"Z"!==o)throw new hR;a="\x7f"}break;case"/":if(o>="A"&&o<="O")a=String.fromCharCode(o.charCodeAt(0)-32);else{if("Z"!==o)throw new hR;a=":"}}n+=a,r++}else n+=i}return n},t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],t.ASTERISK_ENCODING=148,t}(yD),ED=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ID=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return ED(t,e),t.prototype.decodeRow=function(e,n,r){var i,o,a=this.decodeStart(n),u=this.decodeEnd(n),s=new bR;t.decodeMiddle(n,a[1],u[0],s);var c=s.toString(),l=null;null!=r&&(l=r.get(lR.ALLOWED_LENGTHS)),null==l&&(l=t.DEFAULT_ALLOWED_LENGTHS);var f=c.length,h=!1,d=0;try{for(var p=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(l),v=p.next();!v.done;v=p.next()){var m=v.value;if(f===m){h=!0;break}m>d&&(d=m)}}catch(e){i={error:e}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}if(!h&&f>d&&(h=!0),!h)throw new hR;var y=[new rD(a[1],e),new rD(u[0],e)];return new BR(c,null,0,y,jR.ITF,(new Date).getTime())},t.decodeMiddle=function(e,n,r,i){var o=new Int32Array(10),a=new Int32Array(5),u=new Int32Array(5);for(o.fill(0),a.fill(0),u.fill(0);n<r;){yD.recordPattern(e,n,o);for(var s=0;s<5;s++){var c=2*s;a[s]=o[c],u[s]=o[c+1]}var l=t.decodeDigit(a);i.append(l.toString()),l=this.decodeDigit(u),i.append(l.toString()),o.forEach((function(e){n+=e}))}},t.prototype.decodeStart=function(e){var n=t.skipWhiteSpace(e),r=t.findGuardPattern(e,n,t.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r},t.prototype.validateQuietZone=function(e,t){var n=10*this.narrowLineWidth;n=n<t?n:t;for(var r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(0!==n)throw new ER},t.skipWhiteSpace=function(e){var t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new ER;return n},t.prototype.decodeEnd=function(e){e.reverse();try{var n=t.skipWhiteSpace(e),r=void 0;try{r=t.findGuardPattern(e,n,t.END_PATTERN_REVERSED[0])}catch(i){i instanceof ER&&(r=t.findGuardPattern(e,n,t.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);var i=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-i,r}finally{e.reverse()}},t.findGuardPattern=function(e,n,r){var i=r.length,o=new Int32Array(i),a=e.getSize(),u=!1,s=0,c=n;o.fill(0);for(var l=n;l<a;l++)if(e.get(l)!==u)o[s]++;else{if(s===i-1){if(yD.patternMatchVariance(o,r,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return[c,l];c+=o[0]+o[1],tR.arraycopy(o,2,o,0,s-1),o[s-1]=0,o[s]=0,s--}else s++;o[s]=1,u=!u}throw new ER},t.decodeDigit=function(e){for(var n=t.MAX_AVG_VARIANCE,r=-1,i=t.PATTERNS.length,o=0;o<i;o++){var a=t.PATTERNS[o],u=yD.patternMatchVariance(e,a,t.MAX_INDIVIDUAL_VARIANCE);u<n?(n=u,r=o):u===n&&(r=-1)}if(r>=0)return r%10;throw new ER},t.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],t.MAX_AVG_VARIANCE=.38,t.MAX_INDIVIDUAL_VARIANCE=.5,t.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],t.START_PATTERN=Int32Array.from([1,1,1,1]),t.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],t}(yD),AD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),CD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return AD(t,e),t.findStartGuardPattern=function(e){for(var n,r=!1,i=0,o=Int32Array.from([0,0,0]);!r;){o=Int32Array.from([0,0,0]);var a=(n=t.findGuardPattern(e,i,!1,this.START_END_PATTERN,o))[0],u=a-((i=n[1])-a);u>=0&&(r=e.isRange(u,a,!1))}return n},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var n=e.length;if(0===n)return!1;var r=parseInt(e.charAt(n-1),10);return t.getStandardUPCEANChecksum(e.substring(0,n-1))===r},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){if((i=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||i>9)throw new hR;n+=i}for(n*=3,r=t-2;r>=0;r-=2){var i;if((i=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||i>9)throw new hR;n+=i}return(1e3-n)%10},t.decodeEnd=function(e,n){return t.findGuardPattern(e,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t.findGuardPatternWithoutCounters=function(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))},t.findGuardPattern=function(e,n,r,i,o){for(var a=e.getSize(),u=0,s=n=r?e.getNextUnset(n):e.getNextSet(n),c=i.length,l=r,f=n;f<a;f++)if(e.get(f)!==l)o[u]++;else{if(u===c-1){if(yD.patternMatchVariance(o,i,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return Int32Array.from([s,f]);s+=o[0]+o[1];for(var h=o.slice(2,o.length-1),d=0;d<u-1;d++)o[d]=h[d];o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,l=!l}throw new ER},t.decodeDigit=function(e,n,r,i){this.recordPattern(e,r,n);for(var o=this.MAX_AVG_VARIANCE,a=-1,u=i.length,s=0;s<u;s++){var c=i[s],l=yD.patternMatchVariance(n,c,t.MAX_INDIVIDUAL_VARIANCE);l<o&&(o=l,a=s)}if(a>=0)return a;throw new ER},t.MAX_AVG_VARIANCE=.48,t.MAX_INDIVIDUAL_VARIANCE=.7,t.START_END_PATTERN=Int32Array.from([1,1,1]),t.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),t.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],t}(yD),SD=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},xD=function(){function e(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),a=i.toString(),u=e.parseExtensionString(a),s=[new rD((r[0]+r[1])/2,t),new rD(o,t)],c=new BR(a,null,0,s,jR.UPC_EAN_EXTENSION,(new Date).getTime());return null!=u&&c.putAllMetadata(u),c},e.prototype.decodeMiddle=function(t,n,r){var i,o,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var u=t.getSize(),s=n[1],c=0,l=0;l<5&&s<u;l++){var f=CD.decodeDigit(t,a,s,CD.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+f%10);try{for(var h=(i=void 0,SD(a)),d=h.next();!d.done;d=h.next())s+=d.value}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}f>=10&&(c|=1<<4-l),4!==l&&(s=t.getNextSet(s),s=t.getNextUnset(s))}if(5!==r.length)throw new ER;var p=this.determineCheckDigit(c);if(e.extensionChecksum(r.toString())!==p)throw new ER;return s},e.extensionChecksum=function(e){for(var t=e.length,n=0,r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);for(n*=3,r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return(n*=3)%10},e.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new ER},e.parseExtensionString=function(t){if(5!==t.length)return null;var n=e.parseExtension5String(t);return null==n?null:new Map([[VR.SUGGESTED_PRICE,n]])},e.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}var n=parseInt(e.substring(1)),r=n%100;return t+(n/100).toString()+"."+(r<10?"0"+r:r.toString())},e}(),TD=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},OD=function(){function e(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return e.prototype.decodeRow=function(t,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),a=i.toString(),u=e.parseExtensionString(a),s=[new rD((r[0]+r[1])/2,t),new rD(o,t)],c=new BR(a,null,0,s,jR.UPC_EAN_EXTENSION,(new Date).getTime());return null!=u&&c.putAllMetadata(u),c},e.prototype.decodeMiddle=function(e,t,n){var r,i,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var a=e.getSize(),u=t[1],s=0,c=0;c<2&&u<a;c++){var l=CD.decodeDigit(e,o,u,CD.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+l%10);try{for(var f=(r=void 0,TD(o)),h=f.next();!h.done;h=f.next())u+=h.value}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}l>=10&&(s|=1<<1-c),1!==c&&(u=e.getNextSet(u),u=e.getNextUnset(u))}if(2!==n.length)throw new ER;if(parseInt(n.toString())%4!==s)throw new ER;return u},e.parseExtensionString=function(e){return 2!==e.length?null:new Map([[VR.ISSUE_NUMBER,parseInt(e)]])},e}(),ND=function(){function e(){}return e.decodeRow=function(e,t,n){var r=CD.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new xD).decodeRow(e,t,r)}catch(n){return(new OD).decodeRow(e,t,r)}},e.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),e}(),RD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),DD=function(e){function t(){var n=e.call(this)||this;n.decodeRowStringBuffer="",t.L_AND_G_PATTERNS=t.L_PATTERNS.map((function(e){return Int32Array.from(e)}));for(var r=10;r<20;r++){for(var i=t.L_PATTERNS[r-10],o=new Int32Array(i.length),a=0;a<i.length;a++)o[a]=i[i.length-a-1];t.L_AND_G_PATTERNS[r]=o}return n}return RD(t,e),t.prototype.decodeRow=function(e,n,r){var i=t.findStartGuardPattern(n),o=null==r?null:r.get(lR.NEED_RESULT_POINT_CALLBACK);if(null!=o){var a=new rD((i[0]+i[1])/2,e);o.foundPossibleResultPoint(a)}var u=this.decodeMiddle(n,i,this.decodeRowStringBuffer),s=u.rowOffset,c=u.resultString;if(null!=o){var l=new rD(s,e);o.foundPossibleResultPoint(l)}var f=t.decodeEnd(n,s);if(null!=o){var h=new rD((f[0]+f[1])/2,e);o.foundPossibleResultPoint(h)}var d=f[1],p=d+(d-f[0]);if(p>=n.getSize()||!n.isRange(d,p,!1))throw new ER;var v=c.toString();if(v.length<8)throw new hR;if(!t.checkChecksum(v))throw new $N;var m=(i[1]+i[0])/2,y=(f[1]+f[0])/2,g=this.getBarcodeFormat(),w=[new rD(m,e),new rD(y,e)],b=new BR(v,null,0,w,g,(new Date).getTime()),k=0;try{var _=ND.decodeRow(e,n,f[1]);b.putMetadata(VR.UPC_EAN_EXTENSION,_.getText()),b.putAllMetadata(_.getResultMetadata()),b.addResultPoints(_.getResultPoints()),k=_.getText().length}catch(e){}var E=null==r?null:r.get(lR.ALLOWED_EAN_EXTENSIONS);if(null!=E){var I=!1;for(var A in E)if(k.toString()===A){I=!0;break}if(!I)throw new ER}return g===jR.EAN_13||jR.UPC_A,b},t.checkChecksum=function(e){return t.checkStandardUPCEANChecksum(e)},t.checkStandardUPCEANChecksum=function(e){var n=e.length;if(0===n)return!1;var r=parseInt(e.charAt(n-1),10);return t.getStandardUPCEANChecksum(e.substring(0,n-1))===r},t.getStandardUPCEANChecksum=function(e){for(var t=e.length,n=0,r=t-1;r>=0;r-=2){if((i=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||i>9)throw new hR;n+=i}for(n*=3,r=t-2;r>=0;r-=2){var i;if((i=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0))<0||i>9)throw new hR;n+=i}return(1e3-n)%10},t.decodeEnd=function(e,n){return t.findGuardPattern(e,n,!1,t.START_END_PATTERN,new Int32Array(t.START_END_PATTERN.length).fill(0))},t}(CD),PD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),MD=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},LD=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return PD(t,e),t.prototype.decodeMiddle=function(e,n,r){var i,o,a,u,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var c=e.getSize(),l=n[1],f=0,h=0;h<6&&l<c;h++){var d=DD.decodeDigit(e,s,l,DD.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var p=(i=void 0,MD(s)),v=p.next();!v.done;v=p.next())l+=v.value}catch(e){i={error:e}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}d>=10&&(f|=1<<5-h)}for(r=t.determineFirstDigit(r,f),l=DD.findGuardPattern(e,l,!0,DD.MIDDLE_PATTERN,new Int32Array(DD.MIDDLE_PATTERN.length).fill(0))[1],h=0;h<6&&l<c;h++){d=DD.decodeDigit(e,s,l,DD.L_PATTERNS),r+=String.fromCharCode("0".charCodeAt(0)+d);try{for(var m=(a=void 0,MD(s)),y=m.next();!y.done;y=m.next())l+=y.value}catch(e){a={error:e}}finally{try{y&&!y.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}}return{rowOffset:l,resultString:r}},t.prototype.getBarcodeFormat=function(){return jR.EAN_13},t.determineFirstDigit=function(e,t){for(var n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return String.fromCharCode("0".charCodeAt(0)+n)+e;throw new ER},t.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],t}(DD),BD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),FD=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},jD=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return BD(t,e),t.prototype.decodeMiddle=function(e,t,n){var r,i,o,a,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var s=e.getSize(),c=t[1],l=0;l<4&&c<s;l++){var f=DD.decodeDigit(e,u,c,DD.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+f);try{for(var h=(r=void 0,FD(u)),d=h.next();!d.done;d=h.next())c+=d.value}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}for(c=DD.findGuardPattern(e,c,!0,DD.MIDDLE_PATTERN,new Int32Array(DD.MIDDLE_PATTERN.length).fill(0))[1],l=0;l<4&&c<s;l++){f=DD.decodeDigit(e,u,c,DD.L_PATTERNS),n+=String.fromCharCode("0".charCodeAt(0)+f);try{for(var p=(o=void 0,FD(u)),v=p.next();!v.done;v=p.next())c+=v.value}catch(e){o={error:e}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}}return{rowOffset:c,resultString:n}},t.prototype.getBarcodeFormat=function(){return jR.EAN_8},t}(DD),UD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),VD=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ean13Reader=new LD,t}return UD(t,e),t.prototype.getBarcodeFormat=function(){return jR.UPC_A},t.prototype.decode=function(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))},t.prototype.decodeRow=function(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))},t.prototype.decodeMiddle=function(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)},t.prototype.maybeReturnResult=function(e){var t=e.getText();if("0"===t.charAt(0)){var n=new BR(t.substring(1),null,null,e.getResultPoints(),jR.UPC_A);return null!=e.getResultMetadata()&&n.putAllMetadata(e.getResultMetadata()),n}throw new ER},t.prototype.reset=function(){this.ean13Reader.reset()},t}(DD),zD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HD=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},GD=function(e){function t(){var t=e.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return zD(t,e),t.prototype.decodeMiddle=function(e,n,r){var i,o,a=this.decodeMiddleCounters.map((function(e){return e}));a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var u=e.getSize(),s=n[1],c=0,l=0;l<6&&s<u;l++){var f=t.decodeDigit(e,a,s,t.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+f%10);try{for(var h=(i=void 0,HD(a)),d=h.next();!d.done;d=h.next())s+=d.value}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}f>=10&&(c|=1<<5-l)}return t.determineNumSysAndCheckDigit(new bR(r),c),s},t.prototype.decodeEnd=function(e,n){return t.findGuardPatternWithoutCounters(e,n,!0,t.MIDDLE_END_PATTERN)},t.prototype.checkChecksum=function(e){return DD.checkChecksum(t.convertUPCEtoUPCA(e))},t.determineNumSysAndCheckDigit=function(e,t){for(var n=0;n<=1;n++)for(var r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r])return e.insert(0,"0"+n),void e.append("0"+r);throw ER.getNotFoundInstance()},t.prototype.getBarcodeFormat=function(){return jR.UPC_E},t.convertUPCEtoUPCA=function(e){var t=e.slice(1,7).split("").map((function(e){return e.charCodeAt(0)})),n=new bR;n.append(e.charAt(0));var r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r)}return e.length>=8&&n.append(e.charAt(7)),n.toString()},t.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),t.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],t}(DD),WD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qD=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},KD=function(e){function t(t){var n=e.call(this)||this,r=null==t?null:t.get(lR.POSSIBLE_FORMATS),i=[];return null!=r&&(r.indexOf(jR.EAN_13)>-1?i.push(new LD):r.indexOf(jR.UPC_A)>-1&&i.push(new VD),r.indexOf(jR.EAN_8)>-1&&i.push(new jD),r.indexOf(jR.UPC_E)>-1&&i.push(new GD)),0===i.length&&(i.push(new LD),i.push(new jD),i.push(new GD)),n.readers=i,n}return WD(t,e),t.prototype.decodeRow=function(e,t,n){var r,i;try{for(var o=qD(this.readers),a=o.next();!a.done;a=o.next()){var u=a.value;try{var s=u.decodeRow(e,t,n),c=s.getBarcodeFormat()===jR.EAN_13&&"0"===s.getText().charAt(0),l=null==n?null:n.get(lR.POSSIBLE_FORMATS),f=null==l||l.includes(jR.UPC_A);if(c&&f){var h=s.getRawBytes(),d=new BR(s.getText().substring(1),h,h.length,s.getResultPoints(),jR.UPC_A);return d.putAllMetadata(s.getResultMetadata()),d}return s}catch(e){}}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new ER},t.prototype.reset=function(){var e,t;try{for(var n=qD(this.readers),r=n.next();!r.done;r=n.next())r.value.reset()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t}(yD),XD=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),YD=function(e){function t(){var t=e.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return XD(t,e),t.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},t.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},t.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},t.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},t.prototype.getOddCounts=function(){return this.oddCounts},t.prototype.getEvenCounts=function(){return this.evenCounts},t.prototype.parseFinderValue=function(e,n){for(var r=0;r<n.length;r++)if(yD.patternMatchVariance(e,n[r],t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return r;throw new ER},t.count=function(e){return tD.sum(new Int32Array(e))},t.increment=function(e,t){for(var n=0,r=t[0],i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++},t.decrement=function(e,t){for(var n=0,r=t[0],i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--},t.isFinderPattern=function(e){var n,r,i=e[0]+e[1],o=i/(i+e[2]+e[3]);if(o>=t.MIN_FINDER_PATTERN_RATIO&&o<=t.MAX_FINDER_PATTERN_RATIO){var a=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),c=s.next();!c.done;c=s.next()){var l=c.value;l>u&&(u=l),l<a&&(a=l)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return u<10*a}return!1},t.MAX_AVG_VARIANCE=.2,t.MAX_INDIVIDUAL_VARIANCE=.45,t.MIN_FINDER_PATTERN_RATIO=9.5/12,t.MAX_FINDER_PATTERN_RATIO=12.5/14,t}(yD),QD=function(){function e(e,t){this.value=e,this.checksumPortion=t}return e.prototype.getValue=function(){return this.value},e.prototype.getChecksumPortion=function(){return this.checksumPortion},e.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value&&this.checksumPortion===n.checksumPortion},e.prototype.hashCode=function(){return this.value^this.checksumPortion},e}(),ZD=function(){function e(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new rD(n,i)),this.resultPoints.push(new rD(r,i))}return e.prototype.getValue=function(){return this.value},e.prototype.getStartEnd=function(){return this.startEnd},e.prototype.getResultPoints=function(){return this.resultPoints},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.prototype.hashCode=function(){return this.value},e}(),JD=function(){function e(){}return e.getRSSvalue=function(t,n,r){var i,o,a=0;try{for(var u=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),s=u.next();!s.done;s=u.next())a+=s.value}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}for(var c=0,l=0,f=t.length,h=0;h<f-1;h++){var d=void 0;for(d=1,l|=1<<h;d<t[h];d++,l&=~(1<<h)){var p=e.combins(a-d-1,f-h-2);if(r&&0===l&&a-d-(f-h-1)>=f-h-1&&(p-=e.combins(a-d-(f-h),f-h-2)),f-h-1>1){for(var v=0,m=a-d-(f-h-2);m>n;m--)v+=e.combins(a-d-m-1,f-h-3);p-=v*(f-1-h)}else a-d>n&&p--;c+=p}a-=d}return c},e.combins=function(e,t){var n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);for(var i=1,o=1,a=e;a>n;a--)i*=a,o<=r&&(i/=o,o++);for(;o<=r;)i/=o,o++;return i},e}(),$D=function(){function e(){}return e.buildBitArray=function(e){var t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);for(var n=new sR(12*t),r=0,i=e[0].getRightChar().getValue(),o=11;o>=0;--o)0!=(i&1<<o)&&n.set(r),r++;for(o=1;o<e.length;++o){for(var a=e[o],u=a.getLeftChar().getValue(),s=11;s>=0;--s)0!=(u&1<<s)&&n.set(r),r++;if(null!=a.getRightChar()){var c=a.getRightChar().getValue();for(s=11;s>=0;--s)0!=(c&1<<s)&&n.set(r),r++}}return n},e}(),eP=function(){function e(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return e.prototype.getDecodedInformation=function(){return this.decodedInformation},e.prototype.isFinished=function(){return this.finished},e}(),tP=function(){function e(e){this.newPosition=e}return e.prototype.getNewPosition=function(){return this.newPosition},e}(),nP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rP=function(e){function t(t,n){var r=e.call(this,t)||this;return r.value=n,r}return nP(t,e),t.prototype.getValue=function(){return this.value},t.prototype.isFNC1=function(){return this.value===t.FNC1},t.FNC1="$",t}(tP),iP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oP=function(e){function t(t,n,r){var i=e.call(this,t)||this;return r?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=n,i}return iP(t,e),t.prototype.getNewString=function(){return this.newString},t.prototype.isRemaining=function(){return this.remaining},t.prototype.getRemainingValue=function(){return this.remainingValue},t}(tP),aP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),uP=function(e){function t(t,n,r){var i=e.call(this,t)||this;if(n<0||n>10||r<0||r>10)throw new hR;return i.firstDigit=n,i.secondDigit=r,i}return aP(t,e),t.prototype.getFirstDigit=function(){return this.firstDigit},t.prototype.getSecondDigit=function(){return this.secondDigit},t.prototype.getValue=function(){return 10*this.firstDigit+this.secondDigit},t.prototype.isFirstDigitFNC1=function(){return this.firstDigit===t.FNC1},t.prototype.isSecondDigitFNC1=function(){return this.secondDigit===t.FNC1},t.prototype.isAnyFNC1=function(){return this.firstDigit===t.FNC1||this.secondDigit===t.FNC1},t.FNC1=10,t}(tP),sP=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},cP=function(){function e(){}return e.parseFieldsInGeneralPurpose=function(t){var n,r,i,o,a,u,s,c;if(!t)return null;if(t.length<2)throw new ER;var l=t.substring(0,2);try{for(var f=sP(e.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next())if((k=h.value)[0]===l)return k[1]===e.VARIABLE_LENGTH?e.processVariableAI(2,k[2],t):e.processFixedAI(2,k[1],t)}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}if(t.length<3)throw new ER;var d=t.substring(0,3);try{for(var p=sP(e.THREE_DIGIT_DATA_LENGTH),v=p.next();!v.done;v=p.next())if((k=v.value)[0]===d)return k[1]===e.VARIABLE_LENGTH?e.processVariableAI(3,k[2],t):e.processFixedAI(3,k[1],t)}catch(e){i={error:e}}finally{try{v&&!v.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}try{for(var m=sP(e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=m.next();!y.done;y=m.next())if((k=y.value)[0]===d)return k[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,k[2],t):e.processFixedAI(4,k[1],t)}catch(e){a={error:e}}finally{try{y&&!y.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}if(t.length<4)throw new ER;var g=t.substring(0,4);try{for(var w=sP(e.FOUR_DIGIT_DATA_LENGTH),b=w.next();!b.done;b=w.next()){var k;if((k=b.value)[0]===g)return k[1]===e.VARIABLE_LENGTH?e.processVariableAI(4,k[2],t):e.processFixedAI(4,k[1],t)}}catch(e){s={error:e}}finally{try{b&&!b.done&&(c=w.return)&&c.call(w)}finally{if(s)throw s.error}}throw new ER},e.processFixedAI=function(t,n,r){if(r.length<t)throw new ER;var i=r.substring(0,t);if(r.length<t+n)throw new ER;var o=r.substring(t,t+n),a=r.substring(t+n),u="("+i+")"+o,s=e.parseFieldsInGeneralPurpose(a);return null==s?u:u+s},e.processVariableAI=function(t,n,r){var i,o=r.substring(0,t);i=r.length<t+n?r.length:t+n;var a=r.substring(t,i),u=r.substring(i),s="("+o+")"+a,c=e.parseFieldsInGeneralPurpose(u);return null==c?s:s+c},e.VARIABLE_LENGTH=[],e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",e.VARIABLE_LENGTH,20],["22",e.VARIABLE_LENGTH,29],["30",e.VARIABLE_LENGTH,8],["37",e.VARIABLE_LENGTH,8],["90",e.VARIABLE_LENGTH,30],["91",e.VARIABLE_LENGTH,30],["92",e.VARIABLE_LENGTH,30],["93",e.VARIABLE_LENGTH,30],["94",e.VARIABLE_LENGTH,30],["95",e.VARIABLE_LENGTH,30],["96",e.VARIABLE_LENGTH,30],["97",e.VARIABLE_LENGTH,3],["98",e.VARIABLE_LENGTH,30],["99",e.VARIABLE_LENGTH,30]],e.THREE_DIGIT_DATA_LENGTH=[["240",e.VARIABLE_LENGTH,30],["241",e.VARIABLE_LENGTH,30],["242",e.VARIABLE_LENGTH,6],["250",e.VARIABLE_LENGTH,30],["251",e.VARIABLE_LENGTH,30],["253",e.VARIABLE_LENGTH,17],["254",e.VARIABLE_LENGTH,20],["400",e.VARIABLE_LENGTH,30],["401",e.VARIABLE_LENGTH,30],["402",17],["403",e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",e.VARIABLE_LENGTH,20],["421",e.VARIABLE_LENGTH,15],["422",3],["423",e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",e.VARIABLE_LENGTH,15],["391",e.VARIABLE_LENGTH,18],["392",e.VARIABLE_LENGTH,15],["393",e.VARIABLE_LENGTH,18],["703",e.VARIABLE_LENGTH,30]],e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",e.VARIABLE_LENGTH,20],["8003",e.VARIABLE_LENGTH,30],["8004",e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",e.VARIABLE_LENGTH,30],["8008",e.VARIABLE_LENGTH,12],["8018",18],["8020",e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",e.VARIABLE_LENGTH,70],["8200",e.VARIABLE_LENGTH,70]],e}(),lP=function(){function e(e){this.buffer=new bR,this.information=e}return e.prototype.decodeAllCodes=function(e,t){for(var n=t,r=null;;){var i=this.decodeGeneralPurposeField(n,r),o=cP.parseFieldsInGeneralPurpose(i.getNewString());if(null!=o&&e.append(o),r=i.isRemaining()?""+i.getRemainingValue():null,n===i.getNewPosition())break;n=i.getNewPosition()}return e.toString()},e.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},e.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return new uP(this.information.getSize(),0===t?uP.FNC1:t-1,uP.FNC1)}var n=this.extractNumericValueFromBitArray(e,7);return new uP(e+7,(n-8)/11,(n-8)%11)},e.prototype.extractNumericValueFromBitArray=function(t,n){return e.extractNumericValueFromBitArray(this.information,t,n)},e.extractNumericValueFromBitArray=function(e,t,n){for(var r=0,i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r},e.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);var n=this.parseBlocks();return null!=n&&n.isRemaining()?new oP(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new oP(this.current.getPosition(),this.buffer.toString())},e.prototype.parseBlocks=function(){var e,t;do{var n=this.current.getPosition();if(e=this.current.isAlpha()?(t=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(t=this.parseIsoIec646Block()).isFinished():(t=this.parseNumericBlock()).isFinished(),n===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()},e.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return t=e.isSecondDigitFNC1()?new oP(this.current.getPosition(),this.buffer.toString()):new oP(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new eP(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1())return t=new oP(this.current.getPosition(),this.buffer.toString()),new eP(!0,t);this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new eP(!1)},e.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new oP(this.current.getPosition(),this.buffer.toString());return new eP(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new eP(!1)},e.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new oP(this.current.getPosition(),this.buffer.toString());return new eP(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new eP(!1)},e.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253},e.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new rP(e+5,rP.FNC1);if(t>=5&&t<15)return new rP(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new rP(e+7,""+(r+1));if(r>=90&&r<116)return new rP(e+7,""+(r+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:n="!";break;case 233:n='"';break;case 234:n="%";break;case 235:n="&";break;case 236:n="'";break;case 237:n="(";break;case 238:n=")";break;case 239:n="*";break;case 240:n="+";break;case 241:n=",";break;case 242:n="-";break;case 243:n=".";break;case 244:n="/";break;case 245:n=":";break;case 246:n=";";break;case 247:n="<";break;case 248:n="=";break;case 249:n=">";break;case 250:n="?";break;case 251:n="_";break;case 252:n=" ";break;default:throw new hR}return new rP(e+8,n)},e.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},e.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new rP(e+5,rP.FNC1);if(t>=5&&t<15)return new rP(e+5,"0"+(t-5));var n,r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new rP(e+6,""+(r+33));switch(r){case 58:n="*";break;case 59:n=",";break;case 60:n="-";break;case 61:n=".";break;case 62:n="/";break;default:throw new JR("Decoding invalid alphanumeric value: "+r)}return new rP(e+6,n)},e.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},e.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},e.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},e}(),fP=function(){function e(e){this.information=e,this.generalDecoder=new lP(e)}return e.prototype.getInformation=function(){return this.information},e.prototype.getGeneralDecoder=function(){return this.generalDecoder},e}(),hP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),dP=function(e){function t(t){return e.call(this,t)||this}return hP(t,e),t.prototype.encodeCompressedGtin=function(e,t){e.append("(01)");var n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)},t.prototype.encodeCompressedGtinWithoutAI=function(e,n,r){for(var i=0;i<4;++i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);o/100==0&&e.append("0"),o/10==0&&e.append("0"),e.append(o)}t.appendCheckDigit(e,r)},t.appendCheckDigit=function(e,t){for(var n=0,r=0;r<13;r++){var i=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=0==(1&r)?3*i:i}10===(n=10-n%10)&&(n=0),e.append(n)},t.GTIN_SIZE=40,t}(fP),pP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vP=function(e){function t(t){return e.call(this,t)||this}return pP(t,e),t.prototype.parseInformation=function(){var e=new bR;e.append("(01)");var n=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,t.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE+44)},t.HEADER_SIZE=4,t}(dP),mP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yP=function(e){function t(t){return e.call(this,t)||this}return mP(t,e),t.prototype.parseInformation=function(){var e=new bR;return this.getGeneralDecoder().decodeAllCodes(e,t.HEADER_SIZE)},t.HEADER_SIZE=5,t}(fP),gP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wP=function(e){function t(t){return e.call(this,t)||this}return gP(t,e),t.prototype.encodeCompressedWeight=function(e,t,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);for(var i=this.checkWeight(r),o=1e5,a=0;a<5;++a)i/o==0&&e.append("0"),o/=10;e.append(i)},t}(dP),bP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),kP=function(e){function t(t){return e.call(this,t)||this}return bP(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!=t.HEADER_SIZE+wP.GTIN_SIZE+t.WEIGHT_SIZE)throw new ER;var e=new bR;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+wP.GTIN_SIZE,t.WEIGHT_SIZE),e.toString()},t.HEADER_SIZE=5,t.WEIGHT_SIZE=15,t}(wP),_P=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),EP=function(e){function t(t){return e.call(this,t)||this}return _P(t,e),t.prototype.addWeightCode=function(e,t){e.append("(3103)")},t.prototype.checkWeight=function(e){return e},t}(kP),IP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),AP=function(e){function t(t){return e.call(this,t)||this}return IP(t,e),t.prototype.addWeightCode=function(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")},t.prototype.checkWeight=function(e){return e<1e4?e:e-1e4},t}(kP),CP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),SP=function(e){function t(t){return e.call(this,t)||this}return CP(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+dP.GTIN_SIZE)throw new ER;var e=new bR;this.encodeCompressedGtin(e,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+dP.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");var r=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+dP.GTIN_SIZE+t.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t}(dP),xP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),TP=function(e){function t(t){return e.call(this,t)||this}return xP(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()<t.HEADER_SIZE+dP.GTIN_SIZE)throw new ER;var e=new bR;this.encodeCompressedGtin(e,t.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+dP.GTIN_SIZE,t.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");var r=this.getGeneralDecoder().extractNumericValueFromBitArray(t.HEADER_SIZE+dP.GTIN_SIZE+t.LAST_DIGIT_SIZE,t.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);var i=this.getGeneralDecoder().decodeGeneralPurposeField(t.HEADER_SIZE+dP.GTIN_SIZE+t.LAST_DIGIT_SIZE+t.FIRST_THREE_DIGITS_SIZE,null);return e.append(i.getNewString()),e.toString()},t.HEADER_SIZE=8,t.LAST_DIGIT_SIZE=2,t.FIRST_THREE_DIGITS_SIZE=10,t}(dP),OP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),NP=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dateCode=r,i.firstAIdigits=n,i}return OP(t,e),t.prototype.parseInformation=function(){if(this.getInformation().getSize()!=t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE+t.DATE_SIZE)throw new ER;var e=new bR;return this.encodeCompressedGtin(e,t.HEADER_SIZE),this.encodeCompressedWeight(e,t.HEADER_SIZE+t.GTIN_SIZE,t.WEIGHT_SIZE),this.encodeCompressedDate(e,t.HEADER_SIZE+t.GTIN_SIZE+t.WEIGHT_SIZE),e.toString()},t.prototype.encodeCompressedDate=function(e,n){var r=this.getGeneralDecoder().extractNumericValueFromBitArray(n,t.DATE_SIZE);if(38400!=r){e.append("("),e.append(this.dateCode),e.append(")");var i=r%32,o=(r/=32)%12+1,a=r/=12;a/10==0&&e.append("0"),e.append(a),o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i)}},t.prototype.addWeightCode=function(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")},t.prototype.checkWeight=function(e){return e%1e5},t.HEADER_SIZE=8,t.WEIGHT_SIZE=20,t.DATE_SIZE=16,t}(wP),RP=function(){function e(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}return e.prototype.mayBeLast=function(){return this.maybeLast},e.prototype.getLeftChar=function(){return this.leftchar},e.prototype.getRightChar=function(){return this.rightchar},e.prototype.getFinderPattern=function(){return this.finderpattern},e.prototype.mustBeLast=function(){return null==this.rightchar},e.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"},e.equals=function(t,n){return t instanceof e&&e.equalsOrNull(t.leftchar,n.leftchar)&&e.equalsOrNull(t.rightchar,n.rightchar)&&e.equalsOrNull(t.finderpattern,n.finderpattern)},e.equalsOrNull=function(t,n){return null===t?null===n:e.equals(t,n)},e.prototype.hashCode=function(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()},e}(),DP=function(){function e(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}return e.prototype.getPairs=function(){return this.pairs},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.isReversed=function(){return this.wasReversed},e.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},e.prototype.toString=function(){return"{ "+this.pairs+" }"},e.prototype.equals=function(t,n){return t instanceof e&&this.checkEqualitity(t,n)&&t.wasReversed===n.wasReversed},e.prototype.checkEqualitity=function(e,t){var n;if(e&&t)return e.forEach((function(e,r){t.forEach((function(t){e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(n=!0)}))})),n},e}(),PP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),MP=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},LP=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.pairs=new Array(t.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return PP(t,e),t.prototype.decodeRow=function(e,n,r){this.pairs.length=0,this.startFromEven=!1;try{return t.constructResult(this.decodeRow2pairs(e,n))}catch(e){}return this.pairs.length=0,this.startFromEven=!0,t.constructResult(this.decodeRow2pairs(e,n))},t.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},t.prototype.decodeRow2pairs=function(e,t){for(var n,r=!1;!r;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(e){if(e instanceof ER){if(!this.pairs.length)throw new ER;r=!0}}if(this.checkChecksum())return this.pairs;if(n=!!this.rows.length,this.storeRow(e,!1),n){var i=this.checkRowsBoolean(!1);if(null!=i)return i;if(null!=(i=this.checkRowsBoolean(!0)))return i}throw new ER},t.prototype.checkRowsBoolean=function(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());var t=null;try{t=this.checkRows(new Array,0)}catch(e){console.log(e)}return e&&(this.rows=this.rows.reverse()),t},t.prototype.checkRows=function(e,n){for(var r,i,o=n;o<this.rows.length;o++){var a=this.rows[o];this.pairs.length=0;try{for(var u=(r=void 0,MP(e)),s=u.next();!s.done;s=u.next()){var c=s.value;this.pairs.push(c.getPairs())}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}if(this.pairs.push(a.getPairs()),t.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var l=new Array(e);l.push(a);try{return this.checkRows(l,o+1)}catch(e){console.log(e)}}}throw new ER},t.isValidSequence=function(e){var n,r;try{for(var i=MP(t.FINDER_PATTERN_SEQUENCES),o=i.next();!o.done;o=i.next()){var a=o.value;if(!(e.length>a.length)){for(var u=!0,s=0;s<e.length;s++)if(e[s].getFinderPattern().getValue()!=a[s]){u=!1;break}if(u)return!0}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1},t.prototype.storeRow=function(e,n){for(var r=0,i=!1,o=!1;r<this.rows.length;){var a=this.rows[r];if(a.getRowNumber()>e){o=a.isEquivalent(this.pairs);break}i=a.isEquivalent(this.pairs),r++}o||i||t.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new DP(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))},t.prototype.removePartialRows=function(e,t){var n,r,i,o,a,u;try{for(var s=MP(t),c=s.next();!c.done;c=s.next()){var l=c.value;if(l.getPairs().length!==e.length)try{for(var f=(i=void 0,MP(l.getPairs())),h=f.next();!h.done;h=f.next()){var d=h.value;try{for(var p=(a=void 0,MP(e)),v=p.next();!v.done;v=p.next()){var m=v.value;if(RP.equals(d,m)){!0;break}}}catch(e){a={error:e}}finally{try{v&&!v.done&&(u=p.return)&&u.call(p)}finally{if(a)throw a.error}}}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},t.isPartialRow=function(e,t){var n,r,i,o,a,u;try{for(var s=MP(t),c=s.next();!c.done;c=s.next()){var l=c.value,f=!0;try{for(var h=(i=void 0,MP(e)),d=h.next();!d.done;d=h.next()){var p=d.value,v=!1;try{for(var m=(a=void 0,MP(l.getPairs())),y=m.next();!y.done;y=m.next()){var g=y.value;if(p.equals(g)){v=!0;break}}}catch(e){a={error:e}}finally{try{y&&!y.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}if(!v){f=!1;break}}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}if(f)return!0}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return!1},t.prototype.getRows=function(){return this.rows},t.constructResult=function(e){var t=function(e){try{if(e.get(1))return new vP(e);if(!e.get(2))return new yP(e);switch(lP.extractNumericValueFromBitArray(e,1,4)){case 4:return new EP(e);case 5:return new AP(e)}switch(lP.extractNumericValueFromBitArray(e,1,5)){case 12:return new SP(e);case 13:return new TP(e)}switch(lP.extractNumericValueFromBitArray(e,1,7)){case 56:return new NP(e,"310","11");case 57:return new NP(e,"320","11");case 58:return new NP(e,"310","13");case 59:return new NP(e,"320","13");case 60:return new NP(e,"310","15");case 61:return new NP(e,"320","15");case 62:return new NP(e,"310","17");case 63:return new NP(e,"320","17")}}catch(t){throw console.log(t),new JR("unknown decoder: "+e)}}($D.buildBitArray(e)).parseInformation(),n=e[0].getFinderPattern().getResultPoints(),r=e[e.length-1].getFinderPattern().getResultPoints(),i=[n[0],n[1],r[0],r[1]];return new BR(t,null,null,i,jR.RSS_EXPANDED,null)},t.prototype.checkChecksum=function(){var e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(null==n)return!1;for(var r=n.getChecksumPortion(),i=2,o=1;o<this.pairs.size();++o){var a=this.pairs.get(o);r+=a.getLeftChar().getChecksumPortion(),i++;var u=a.getRightChar();null!=u&&(r+=u.getChecksumPortion(),i++)}return 211*(i-4)+(r%=211)==t.getValue()},t.getNextSecondBar=function(e,t){var n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n},t.prototype.retrieveNextPair=function(e,n,r){var i,o=n.length%2==0;this.startFromEven&&(o=!o);var a=!0,u=-1;do{this.findNextPair(e,n,u),null==(i=this.parseFoundFinderPattern(e,r,o))?u=t.getNextSecondBar(e,this.startEnd[0]):a=!1}while(a);var s,c=this.decodeDataCharacter(e,i,o,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new ER;try{s=this.decodeDataCharacter(e,i,o,!1)}catch(e){s=null,console.log(e)}return new RP(c,s,i,!0)},t.prototype.isEmptyPair=function(e){return 0===e.length},t.prototype.findNextPair=function(e,n,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var o,a=e.getSize();o=r>=0?r:this.isEmptyPair(n)?0:n[n.length-1].getFinderPattern().getStartEnd()[1];var u=n.length%2!=0;this.startFromEven&&(u=!u);for(var s=!1;o<a&&(s=!e.get(o));)o++;for(var c=0,l=o,f=o;f<a;f++)if(e.get(f)!=s)i[c]++;else{if(3==c){if(u&&t.reverseCounters(i),t.isFinderPattern(i))return this.startEnd[0]=l,void(this.startEnd[1]=f);u&&t.reverseCounters(i),l+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new ER},t.reverseCounters=function(e){for(var t=e.length,n=0;n<t/2;++n){var r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}},t.prototype.parseFoundFinderPattern=function(e,n,r){var i,o,a;if(r){for(var u=this.startEnd[0]-1;u>=0&&!e.get(u);)u--;u++,i=this.startEnd[0]-u,o=u,a=this.startEnd[1]}else o=this.startEnd[0],i=(a=e.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];var s,c=this.getDecodeFinderCounters();tR.arraycopy(c,0,c,1,c.length-1),c[0]=i;try{s=this.parseFinderValue(c,t.FINDER_PATTERNS)}catch(e){return null}return new ZD(s,[o,a],o,a,n)},t.prototype.decodeDataCharacter=function(e,n,r,i){for(var o=this.getDataCharacterCounters(),a=0;a<o.length;a++)o[a]=0;if(i)t.recordPatternInReverse(e,n.getStartEnd()[0],o);else{t.recordPattern(e,n.getStartEnd()[1],o);for(var u=0,s=o.length-1;u<s;u++,s--){var c=o[u];o[u]=o[s],o[s]=c}}var l=tD.sum(new Int32Array(o))/17,f=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(l-f)/f>.3)throw new ER;var h=this.getOddCounts(),d=this.getEvenCounts(),p=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(u=0;u<o.length;u++){var m=1*o[u]/l,y=m+.5;if(y<1){if(m<.3)throw new ER;y=1}else if(y>8){if(m>8.7)throw new ER;y=8}var g=u/2;0==(1&u)?(h[g]=y,p[g]=m-y):(d[g]=y,v[g]=m-y)}this.adjustOddEvenCounts(17);var w=4*n.getValue()+(r?0:2)+(i?0:1)-1,b=0,k=0;for(u=h.length-1;u>=0;u--){if(t.isNotA1left(n,r,i)){var _=t.WEIGHTS[w][2*u];k+=h[u]*_}b+=h[u]}var E=0;for(u=d.length-1;u>=0;u--)t.isNotA1left(n,r,i)&&(_=t.WEIGHTS[w][2*u+1],E+=d[u]*_);var I=k+E;if(0!=(1&b)||b>13||b<4)throw new ER;var A=(13-b)/2,C=t.SYMBOL_WIDEST[A],S=9-C,x=JD.getRSSvalue(h,C,!0),T=JD.getRSSvalue(d,S,!1),O=t.EVEN_TOTAL_SUBSET[A],N=t.GSUM[A];return new QD(x*O+T+N,I)},t.isNotA1left=function(e,t,n){return!(0==e.getValue()&&t&&n)},t.prototype.adjustOddEvenCounts=function(e){var n=tD.sum(new Int32Array(this.getOddCounts())),r=tD.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1;n>13?o=!0:n<4&&(i=!0);var a=!1,u=!1;r>13?u=!0:r<4&&(a=!0);var s=n+r-e,c=1==(1&n),l=0==(1&r);if(1==s)if(c){if(l)throw new ER;o=!0}else{if(!l)throw new ER;u=!0}else if(-1==s)if(c){if(l)throw new ER;i=!0}else{if(!l)throw new ER;a=!0}else{if(0!=s)throw new ER;if(c){if(!l)throw new ER;n<r?(i=!0,u=!0):(o=!0,a=!0)}else if(l)throw new ER}if(i){if(o)throw new ER;t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(u)throw new ER;t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.SYMBOL_WIDEST=[7,5,4,3,1],t.EVEN_TOTAL_SUBSET=[4,20,52,104,204],t.GSUM=[0,348,1388,2948,3988],t.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],t.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],t.FINDER_PAT_A=0,t.FINDER_PAT_B=1,t.FINDER_PAT_C=2,t.FINDER_PAT_D=3,t.FINDER_PAT_E=4,t.FINDER_PAT_F=5,t.FINDER_PATTERN_SEQUENCES=[[t.FINDER_PAT_A,t.FINDER_PAT_A],[t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B],[t.FINDER_PAT_A,t.FINDER_PAT_C,t.FINDER_PAT_B,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_C],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_E,t.FINDER_PAT_B,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F],[t.FINDER_PAT_A,t.FINDER_PAT_A,t.FINDER_PAT_B,t.FINDER_PAT_B,t.FINDER_PAT_C,t.FINDER_PAT_D,t.FINDER_PAT_D,t.FINDER_PAT_E,t.FINDER_PAT_E,t.FINDER_PAT_F,t.FINDER_PAT_F]],t.MAX_PAIRS=11,t}(YD),BP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),FP=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.count=0,i.finderPattern=r,i}return BP(t,e),t.prototype.getFinderPattern=function(){return this.finderPattern},t.prototype.getCount=function(){return this.count},t.prototype.incrementCount=function(){this.count++},t}(QD),jP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),UP=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},VP=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return jP(t,e),t.prototype.decodeRow=function(e,n,r){var i,o,a,u,s=this.decodePair(n,!1,e,r);t.addOrTally(this.possibleLeftPairs,s),n.reverse();var c=this.decodePair(n,!0,e,r);t.addOrTally(this.possibleRightPairs,c),n.reverse();try{for(var l=UP(this.possibleLeftPairs),f=l.next();!f.done;f=l.next()){var h=f.value;if(h.getCount()>1)try{for(var d=(a=void 0,UP(this.possibleRightPairs)),p=d.next();!p.done;p=d.next()){var v=p.value;if(v.getCount()>1&&t.checkChecksum(h,v))return t.constructResult(h,v)}}catch(e){a={error:e}}finally{try{p&&!p.done&&(u=d.return)&&u.call(d)}finally{if(a)throw a.error}}}}catch(e){i={error:e}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}throw new ER},t.addOrTally=function(e,t){var n,r;if(null!=t){var i=!1;try{for(var o=UP(e),a=o.next();!a.done;a=o.next()){var u=a.value;if(u.getValue()===t.getValue()){u.incrementCount(),i=!0;break}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}i||e.push(t)}},t.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},t.constructResult=function(e,t){for(var n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new bR,o=13-r.length;o>0;o--)i.append("0");i.append(r);var a=0;for(o=0;o<13;o++){var u=i.charAt(o).charCodeAt(0)-"0".charCodeAt(0);a+=0==(1&o)?3*u:u}10===(a=10-a%10)&&(a=0),i.append(a.toString());var s=e.getFinderPattern().getResultPoints(),c=t.getFinderPattern().getResultPoints();return new BR(i.toString(),null,0,[s[0],s[1],c[0],c[1]],jR.RSS_14,(new Date).getTime())},t.checkChecksum=function(e,t){var n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r},t.prototype.decodePair=function(e,t,n,r){try{var i=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,n,t,i),a=null==r?null:r.get(lR.NEED_RESULT_POINT_CALLBACK);if(null!=a){var u=(i[0]+i[1])/2;t&&(u=e.getSize()-1-u),a.foundPossibleResultPoint(new rD(u,n))}var s=this.decodeDataCharacter(e,o,!0),c=this.decodeDataCharacter(e,o,!1);return new FP(1597*s.getValue()+c.getValue(),s.getChecksumPortion()+4*c.getChecksumPortion(),o)}catch(e){return null}},t.prototype.decodeDataCharacter=function(e,n,r){for(var i=this.getDataCharacterCounters(),o=0;o<i.length;o++)i[o]=0;if(r)yD.recordPatternInReverse(e,n.getStartEnd()[0],i);else{yD.recordPattern(e,n.getStartEnd()[1]+1,i);for(var a=0,u=i.length-1;a<u;a++,u--){var s=i[a];i[a]=i[u],i[u]=s}}var c=r?16:15,l=tD.sum(new Int32Array(i))/c,f=this.getOddCounts(),h=this.getEvenCounts(),d=this.getOddRoundingErrors(),p=this.getEvenRoundingErrors();for(a=0;a<i.length;a++){var v=i[a]/l,m=Math.floor(v+.5);m<1?m=1:m>8&&(m=8);var y=Math.floor(a/2);0==(1&a)?(f[y]=m,d[y]=v-m):(h[y]=m,p[y]=v-m)}this.adjustOddEvenCounts(r,c);var g=0,w=0;for(a=f.length-1;a>=0;a--)w*=9,w+=f[a],g+=f[a];var b=0,k=0;for(a=h.length-1;a>=0;a--)b*=9,b+=h[a],k+=h[a];var _=w+3*b;if(r){if(0!=(1&g)||g>12||g<4)throw new ER;var E=(12-g)/2,I=9-(T=t.OUTSIDE_ODD_WIDEST[E]),A=JD.getRSSvalue(f,T,!1),C=JD.getRSSvalue(h,I,!0),S=t.OUTSIDE_EVEN_TOTAL_SUBSET[E],x=t.OUTSIDE_GSUM[E];return new QD(A*S+C+x,_)}if(0!=(1&k)||k>10||k<4)throw new ER;E=(10-k)/2,I=9-(T=t.INSIDE_ODD_WIDEST[E]),A=JD.getRSSvalue(f,T,!0),C=JD.getRSSvalue(h,I,!1);var T,O=t.INSIDE_ODD_TOTAL_SUBSET[E];return x=t.INSIDE_GSUM[E],new QD(C*O+A+x,_)},t.prototype.findFinderPattern=function(e,t){var n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;for(var r=e.getSize(),i=!1,o=0;o<r&&t!==(i=!e.get(o));)o++;for(var a=0,u=o,s=o;s<r;s++)if(e.get(s)!==i)n[a]++;else{if(3===a){if(YD.isFinderPattern(n))return[u,s];u+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,a--}else a++;n[a]=1,i=!i}throw new ER},t.prototype.parseFoundFinderPattern=function(e,n,r,i){for(var o=e.get(i[0]),a=i[0]-1;a>=0&&o!==e.get(a);)a--;a++;var u=i[0]-a,s=this.getDecodeFinderCounters(),c=new Int32Array(s.length);tR.arraycopy(s,0,c,1,s.length-1),c[0]=u;var l=this.parseFinderValue(c,t.FINDER_PATTERNS),f=a,h=i[1];return r&&(f=e.getSize()-1-f,h=e.getSize()-1-h),new ZD(l,[a,i[1]],f,h,n)},t.prototype.adjustOddEvenCounts=function(e,t){var n=tD.sum(new Int32Array(this.getOddCounts())),r=tD.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,a=!1,u=!1;e?(n>12?o=!0:n<4&&(i=!0),r>12?u=!0:r<4&&(a=!0)):(n>11?o=!0:n<5&&(i=!0),r>10?u=!0:r<4&&(a=!0));var s=n+r-t,c=(1&n)==(e?1:0),l=1==(1&r);if(1===s)if(c){if(l)throw new ER;o=!0}else{if(!l)throw new ER;u=!0}else if(-1===s)if(c){if(l)throw new ER;i=!0}else{if(!l)throw new ER;a=!0}else{if(0!==s)throw new ER;if(c){if(!l)throw new ER;n<r?(i=!0,u=!0):(o=!0,a=!0)}else if(l)throw new ER}if(i){if(o)throw new ER;YD.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&YD.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(u)throw new ER;YD.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&YD.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],t.OUTSIDE_GSUM=[0,161,961,2015,2715],t.INSIDE_GSUM=[0,336,1036,1516],t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],t.INSIDE_ODD_WIDEST=[2,4,6,8],t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],t}(YD),zP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HP=function(e){function t(t){var n=e.call(this)||this;n.readers=[];var r=t?t.get(lR.POSSIBLE_FORMATS):null,i=t&&void 0!==t.get(lR.ASSUME_CODE_39_CHECK_DIGIT);return r&&((r.includes(jR.EAN_13)||r.includes(jR.UPC_A)||r.includes(jR.EAN_8)||r.includes(jR.UPC_E))&&n.readers.push(new KD(t)),r.includes(jR.CODE_39)&&n.readers.push(new _D(i)),r.includes(jR.CODE_128)&&n.readers.push(new wD),r.includes(jR.ITF)&&n.readers.push(new ID),r.includes(jR.RSS_14)&&n.readers.push(new VP),r.includes(jR.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new LP))),0===n.readers.length&&(n.readers.push(new KD(t)),n.readers.push(new _D),n.readers.push(new KD(t)),n.readers.push(new wD),n.readers.push(new ID),n.readers.push(new VP)),n}return zP(t,e),t.prototype.decodeRow=function(e,t,n){for(var r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch(e){}throw new ER},t.prototype.reset=function(){this.readers.forEach((function(e){return e.reset()}))},t}(yD),GP=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){GP((function(t,n){return void 0===t&&(t=500),e.call(this,new HP(n),t,n)||this}),e)}(LR);var WP,qP=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},KP=function(){function e(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}return e.prototype.getECCodewords=function(){return this.ecCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),XP=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),YP=function(){function e(e,t,n,r,i,o){var a,u;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=o;var s=0,c=o.getECCodewords(),l=o.getECBlocks();try{for(var f=qP(l),h=f.next();!h.done;h=f.next()){var d=h.value;s+=d.getCount()*(d.getDataCodewords()+c)}}catch(e){a={error:e}}finally{try{h&&!h.done&&(u=f.return)&&u.call(f)}finally{if(a)throw a.error}}this.totalCodewords=s}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},e.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},e.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},e.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getECBlocks=function(){return this.ecBlocks},e.getVersionForDimensions=function(t,n){var r,i;if(0!=(1&t)||0!=(1&n))throw new hR;try{for(var o=qP(e.VERSIONS),a=o.next();!a.done;a=o.next()){var u=a.value;if(u.symbolSizeRows===t&&u.symbolSizeColumns===n)return u}}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new hR},e.prototype.toString=function(){return""+this.versionNumber},e.buildVersions=function(){return[new e(1,10,10,8,8,new KP(5,new XP(1,3))),new e(2,12,12,10,10,new KP(7,new XP(1,5))),new e(3,14,14,12,12,new KP(10,new XP(1,8))),new e(4,16,16,14,14,new KP(12,new XP(1,12))),new e(5,18,18,16,16,new KP(14,new XP(1,18))),new e(6,20,20,18,18,new KP(18,new XP(1,22))),new e(7,22,22,20,20,new KP(20,new XP(1,30))),new e(8,24,24,22,22,new KP(24,new XP(1,36))),new e(9,26,26,24,24,new KP(28,new XP(1,44))),new e(10,32,32,14,14,new KP(36,new XP(1,62))),new e(11,36,36,16,16,new KP(42,new XP(1,86))),new e(12,40,40,18,18,new KP(48,new XP(1,114))),new e(13,44,44,20,20,new KP(56,new XP(1,144))),new e(14,48,48,22,22,new KP(68,new XP(1,174))),new e(15,52,52,24,24,new KP(42,new XP(2,102))),new e(16,64,64,14,14,new KP(56,new XP(2,140))),new e(17,72,72,16,16,new KP(36,new XP(4,92))),new e(18,80,80,18,18,new KP(48,new XP(4,114))),new e(19,88,88,20,20,new KP(56,new XP(4,144))),new e(20,96,96,22,22,new KP(68,new XP(4,174))),new e(21,104,104,24,24,new KP(56,new XP(6,136))),new e(22,120,120,18,18,new KP(68,new XP(6,175))),new e(23,132,132,20,20,new KP(62,new XP(8,163))),new e(24,144,144,22,22,new KP(62,new XP(8,156),new XP(2,155))),new e(25,8,18,6,16,new KP(7,new XP(1,5))),new e(26,8,32,6,14,new KP(11,new XP(1,10))),new e(27,12,26,10,24,new KP(14,new XP(1,16))),new e(28,12,36,10,16,new KP(18,new XP(1,22))),new e(29,16,36,14,16,new KP(24,new XP(1,32))),new e(30,16,48,14,22,new KP(28,new XP(1,49)))]},e.VERSIONS=e.buildVersions(),e}(),QP=function(){function e(t){var n=t.getHeight();if(n<8||n>144||0!=(1&n))throw new hR;this.version=e.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new kR(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return e.prototype.getVersion=function(){return this.version},e.readVersion=function(e){var t=e.getHeight(),n=e.getWidth();return YP.getVersionForDimensions(t,n)},e.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,r=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),a=!1,u=!1,s=!1,c=!1;do{if(n!==i||0!==r||a)if(n!==i-2||0!==r||0==(3&o)||u)if(n!==i+4||2!==r||0!=(7&o)||s)if(n!==i-2||0!==r||4!=(7&o)||c){do{n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,o)),n-=2,r+=2}while(n>=0&&r<o);n+=1,r+=3;do{n>=0&&r<o&&!this.readMappingMatrix.get(r,n)&&(e[t++]=255&this.readUtah(n,r,i,o)),n+=2,r-=2}while(n<i&&r>=0);n+=3,r+=1}else e[t++]=255&this.readCorner4(i,o),n-=2,r+=2,c=!0;else e[t++]=255&this.readCorner3(i,o),n-=2,r+=2,s=!0;else e[t++]=255&this.readCorner2(i,o),n-=2,r+=2,u=!0;else e[t++]=255&this.readCorner1(i,o),n-=2,r+=2,a=!0}while(n<i||r<o);if(t!==this.version.getTotalCodewords())throw new hR;return e},e.prototype.readModule=function(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},e.prototype.readUtah=function(e,t,n,r){var i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i},e.prototype.readCorner1=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},e.prototype.readCorner2=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},e.prototype.readCorner3=function(e,t){var n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n},e.prototype.readCorner4=function(e,t){var n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n},e.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new QN("Dimension of bitMatrix must match the version size");for(var r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/r|0,a=n/i|0,u=new kR(a*i,o*r),s=0;s<o;++s)for(var c=s*r,l=0;l<a;++l)for(var f=l*i,h=0;h<r;++h)for(var d=s*(r+2)+1+h,p=c+h,v=0;v<i;++v){var m=l*(i+2)+1+v;if(e.get(m,d)){var y=f+v;u.set(y,p)}}return u},e}(),ZP=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JP=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,n){var r,i,o,a,u=n.getECBlocks(),s=0,c=u.getECBlocks();try{for(var l=ZP(c),f=l.next();!f.done;f=l.next())s+=(m=f.value).getCount()}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}var h=new Array(s),d=0;try{for(var p=ZP(c),v=p.next();!v.done;v=p.next())for(var m=v.value,y=0;y<m.getCount();y++){var g=m.getDataCodewords(),w=u.getECCodewords()+g;h[d++]=new e(g,new Uint8Array(w))}}catch(e){o={error:e}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}var b=h[0].codewords.length-u.getECCodewords(),k=b-1,_=0;for(y=0;y<k;y++)for(var E=0;E<d;E++)h[E].codewords[y]=t[_++];var I=24===n.getVersionNumber(),A=I?8:d;for(E=0;E<A;E++)h[E].codewords[b-1]=t[_++];var C=h[0].codewords.length;for(y=b;y<C;y++)for(E=0;E<d;E++){var S=I?(E+8)%d:E,x=I&&S>7?y-1:y;h[S].codewords[x]=t[_++]}if(_!==t.length)throw new QN;return h},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}(),$P=function(){function e(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return e.prototype.getBitOffset=function(){return this.bitOffset},e.prototype.getByteOffset=function(){return this.byteOffset},e.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new QN(""+e);var t=0,n=this.bitOffset,r=this.byteOffset,i=this.bytes;if(n>0){var o=8-n,a=e<o?e:o,u=255>>8-a<<(s=o-a);t=(i[r]&u)>>s,e-=a,8===(n+=a)&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|255&i[r],r++,e-=8;var s;if(e>0)u=255>>(s=8-e)<<s,t=t<<e|(i[r]&u)>>s,n+=e}return this.bitOffset=n,this.byteOffset=r,t},e.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},e}();!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(WP||(WP={}));var eM,tM=function(){function e(){}return e.decode=function(e){var t=new $P(e),n=new bR,r=new bR,i=new Array,o=WP.ASCII_ENCODE;do{if(o===WP.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,r);else{switch(o){case WP.C40_ENCODE:this.decodeC40Segment(t,n);break;case WP.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case WP.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case WP.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case WP.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new hR}o=WP.ASCII_ENCODE}}while(o!==WP.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new zR(e,n.toString(),0===i.length?null:i,null)},e.decodeAsciiSegment=function(e,t,n){var r=!1;do{var i=e.readBits(8);if(0===i)throw new hR;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),WP.ASCII_ENCODE;if(129===i)return WP.PAD_ENCODE;if(i<=229){var o=i-130;o<10&&t.append("0"),t.append(""+o)}else switch(i){case 230:return WP.C40_ENCODE;case 231:return WP.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:r=!0;break;case 236:t.append("[)>\x1e05\x1d"),n.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),n.insert(0,"\x1e\x04");break;case 238:return WP.ANSIX12_ENCODE;case 239:return WP.TEXT_ENCODE;case 240:return WP.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new hR}}while(e.available()>0);return WP.ASCII_ENCODE},e.decodeC40Segment=function(e,t){var n=!1,r=[],i=0;do{if(8===e.available())return;var o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),r);for(var a=0;a<3;a++){var u=r[a];switch(i){case 0:if(u<3)i=u+1;else{if(!(u<this.C40_BASIC_SET_CHARS.length))throw new hR;var s=this.C40_BASIC_SET_CHARS[u];n?(t.append(String.fromCharCode(s.charCodeAt(0)+128)),n=!1):t.append(s)}break;case 1:n?(t.append(String.fromCharCode(u+128)),n=!1):t.append(String.fromCharCode(u)),i=0;break;case 2:if(u<this.C40_SHIFT2_SET_CHARS.length)s=this.C40_SHIFT2_SET_CHARS[u],n?(t.append(String.fromCharCode(s.charCodeAt(0)+128)),n=!1):t.append(s);else switch(u){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new hR}i=0;break;case 3:n?(t.append(String.fromCharCode(u+224)),n=!1):t.append(String.fromCharCode(u+96)),i=0;break;default:throw new hR}}}while(e.available()>0)},e.decodeTextSegment=function(e,t){var n=!1,r=[],i=0;do{if(8===e.available())return;var o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),r);for(var a=0;a<3;a++){var u=r[a];switch(i){case 0:if(u<3)i=u+1;else{if(!(u<this.TEXT_BASIC_SET_CHARS.length))throw new hR;var s=this.TEXT_BASIC_SET_CHARS[u];n?(t.append(String.fromCharCode(s.charCodeAt(0)+128)),n=!1):t.append(s)}break;case 1:n?(t.append(String.fromCharCode(u+128)),n=!1):t.append(String.fromCharCode(u)),i=0;break;case 2:if(u<this.TEXT_SHIFT2_SET_CHARS.length)s=this.TEXT_SHIFT2_SET_CHARS[u],n?(t.append(String.fromCharCode(s.charCodeAt(0)+128)),n=!1):t.append(s);else switch(u){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new hR}i=0;break;case 3:if(!(u<this.TEXT_SHIFT3_SET_CHARS.length))throw new hR;s=this.TEXT_SHIFT3_SET_CHARS[u],n?(t.append(String.fromCharCode(s.charCodeAt(0)+128)),n=!1):t.append(s),i=0;break;default:throw new hR}}}while(e.available()>0)},e.decodeAnsiX12Segment=function(e,t){var n=[];do{if(8===e.available())return;var r=e.readBits(8);if(254===r)return;this.parseTwoBytes(r,e.readBits(8),n);for(var i=0;i<3;i++){var o=n[i];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else{if(!(o<40))throw new hR;t.append(String.fromCharCode(o+51))}}}}while(e.available()>0)},e.parseTwoBytes=function(e,t,n){var r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=1600*i,i=Math.floor(r/40),n[1]=i,n[2]=r-40*i},e.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var r=e.readBits(6);if(31===r){var i=8-e.getBitOffset();return void(8!==i&&e.readBits(i))}0==(32&r)&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)},e.decodeBase256Segment=function(e,t,n){var r,i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++);if((r=0===o?e.available()/8|0:o<250?o:250*(o-249)+this.unrandomize255State(e.readBits(8),i++))<0)throw new hR;for(var a=new Uint8Array(r),u=0;u<r;u++){if(e.available()<8)throw new hR;a[u]=this.unrandomize255State(e.readBits(8),i++)}n.push(a);try{t.append(gR.decode(a,wR.ISO88591))}catch(e){throw new JR("Platform does not support required encoding: "+e.message)}},e.unrandomize255State=function(e,t){var n=e-(149*t%255+1);return n>=0?n:n+256},e.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],e.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],e.TEXT_SHIFT2_SET_CHARS=e.C40_SHIFT2_SET_CHARS,e.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],e}(),nM=function(){function e(){this.rsDecoder=new $R(XR.DATA_MATRIX_FIELD_256)}return e.prototype.decode=function(e){var t,n,r=new QP(e),i=r.getVersion(),o=r.readCodewords(),a=JP.getDataBlocks(o,i),u=0;try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(a),c=s.next();!c.done;c=s.next())u+=c.value.getNumDataCodewords()}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}for(var l=new Uint8Array(u),f=a.length,h=0;h<f;h++){var d=a[h],p=d.getCodewords(),v=d.getNumDataCodewords();this.correctErrors(p,v);for(var m=0;m<v;m++)l[m*f+h]=p[m]}return tM.decode(l)},e.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(e){throw new $N}for(var r=0;r<t;r++)e[r]=n[r]},e}(),rM=function(){function e(e){this.image=e,this.rectangleDetector=new uD(this.image)}return e.prototype.detect=function(){var t=this.rectangleDetector.detect(),n=this.detectSolid1(t);if((n=this.detectSolid2(n))[3]=this.correctTopRight(n),!n[3])throw new ER;var r=(n=this.shiftToModuleCenter(n))[0],i=n[1],o=n[2],a=n[3],u=this.transitionsBetween(r,a)+1,s=this.transitionsBetween(o,a)+1;1==(1&u)&&(u+=1),1==(1&s)&&(s+=1),4*u<7*s&&4*s<7*u&&(u=s=Math.max(u,s));var c=e.sampleGrid(this.image,r,i,o,a,u,s);return new iD(c,[r,i,o,a])},e.shiftPoint=function(e,t,n){var r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new rD(e.getX()+r,e.getY()+i)},e.moveAway=function(e,t,n){var r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new rD(r,i)},e.prototype.detectSolid1=function(e){var t=e[0],n=e[1],r=e[3],i=e[2],o=this.transitionsBetween(t,n),a=this.transitionsBetween(n,r),u=this.transitionsBetween(r,i),s=this.transitionsBetween(i,t),c=o,l=[i,t,n,r];return c>a&&(c=a,l[0]=t,l[1]=n,l[2]=r,l[3]=i),c>u&&(c=u,l[0]=n,l[1]=r,l[2]=i,l[3]=t),c>s&&(l[0]=r,l[1]=i,l[2]=t,l[3]=n),l},e.prototype.detectSolid2=function(t){var n=t[0],r=t[1],i=t[2],o=t[3],a=this.transitionsBetween(n,o),u=e.shiftPoint(r,i,4*(a+1)),s=e.shiftPoint(i,r,4*(a+1));return this.transitionsBetween(u,n)<this.transitionsBetween(s,o)?(t[0]=n,t[1]=r,t[2]=i,t[3]=o):(t[0]=r,t[1]=i,t[2]=o,t[3]=n),t},e.prototype.correctTopRight=function(t){var n=t[0],r=t[1],i=t[2],o=t[3],a=this.transitionsBetween(n,o),u=this.transitionsBetween(r,o),s=e.shiftPoint(n,r,4*(u+1)),c=e.shiftPoint(i,r,4*(a+1));a=this.transitionsBetween(s,o),u=this.transitionsBetween(c,o);var l=new rD(o.getX()+(i.getX()-r.getX())/(a+1),o.getY()+(i.getY()-r.getY())/(a+1)),f=new rD(o.getX()+(n.getX()-r.getX())/(u+1),o.getY()+(n.getY()-r.getY())/(u+1));return this.isValid(l)?this.isValid(f)?this.transitionsBetween(s,l)+this.transitionsBetween(c,l)>this.transitionsBetween(s,f)+this.transitionsBetween(c,f)?l:f:l:this.isValid(f)?f:null},e.prototype.shiftToModuleCenter=function(t){var n=t[0],r=t[1],i=t[2],o=t[3],a=this.transitionsBetween(n,o)+1,u=this.transitionsBetween(i,o)+1,s=e.shiftPoint(n,r,4*u),c=e.shiftPoint(i,r,4*a);1==(1&(a=this.transitionsBetween(s,o)+1))&&(a+=1),1==(1&(u=this.transitionsBetween(c,o)+1))&&(u+=1);var l,f,h=(n.getX()+r.getX()+i.getX()+o.getX())/4,d=(n.getY()+r.getY()+i.getY()+o.getY())/4;return n=e.moveAway(n,h,d),r=e.moveAway(r,h,d),i=e.moveAway(i,h,d),o=e.moveAway(o,h,d),s=e.shiftPoint(n,r,4*u),s=e.shiftPoint(s,o,4*a),l=e.shiftPoint(r,n,4*u),l=e.shiftPoint(l,i,4*a),c=e.shiftPoint(i,o,4*u),c=e.shiftPoint(c,r,4*a),f=e.shiftPoint(o,i,4*u),[s,l,c,f=e.shiftPoint(f,n,4*a)]},e.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},e.sampleGrid=function(e,t,n,r,i,o,a){return hD.getInstance().sampleGrid(e,o,a,.5,.5,o-.5,.5,o-.5,a-.5,.5,a-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())},e.prototype.transitionsBetween=function(e,t){var n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),a=Math.abs(o-r)>Math.abs(i-n);if(a){var u=n;n=r,r=u,u=i,i=o,o=u}for(var s=Math.abs(i-n),c=Math.abs(o-r),l=-s/2,f=r<o?1:-1,h=n<i?1:-1,d=0,p=this.image.get(a?r:n,a?n:r),v=n,m=r;v!==i;v+=h){var y=this.image.get(a?m:v,a?v:m);if(y!==p&&(d++,p=y),(l+=c)>0){if(m===o)break;m+=f,l-=s}}return d},e}(),iM=function(){function e(){this.decoder=new nM}return e.prototype.decode=function(t,n){var r,i;if(void 0===n&&(n=null),null!=n&&n.has(lR.PURE_BARCODE)){var o=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(o),i=e.NO_POINTS}else{var a=new rM(t.getBlackMatrix()).detect();r=this.decoder.decode(a.getBits()),i=a.getPoints()}var u=r.getRawBytes(),s=new BR(r.getText(),u,8*u.length,i,jR.DATA_MATRIX,tR.currentTimeMillis()),c=r.getByteSegments();null!=c&&s.putMetadata(VR.BYTE_SEGMENTS,c);var l=r.getECLevel();return null!=l&&s.putMetadata(VR.ERROR_CORRECTION_LEVEL,l),s},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null==t||null==n)throw new ER;var r=this.moduleSize(t,e),i=t[1],o=n[1],a=t[0],u=(n[0]-a+1)/r,s=(o-i+1)/r;if(u<=0||s<=0)throw new ER;var c=r/2;i+=c,a+=c;for(var l=new kR(u,s),f=0;f<s;f++)for(var h=i+f*r,d=0;d<u;d++)e.get(a+d*r,h)&&l.set(d,f);return l},e.moduleSize=function(e,t){for(var n=t.getWidth(),r=e[0],i=e[1];r<n&&t.get(r,i);)r++;if(r===n)throw new ER;var o=r-e[0];if(0===o)throw new ER;return o},e.NO_POINTS=[],e}(),oM=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){oM((function(t){return void 0===t&&(t=500),e.call(this,new iM,t)||this}),e)}(LR),function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(eM||(eM={}));var aM,uM=function(){function e(t,n,r){this.value=t,this.stringValue=n,this.bits=r,e.FOR_BITS.set(r,this),e.FOR_VALUE.set(t,this)}return e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.fromString=function(t){switch(t){case"L":return e.L;case"M":return e.M;case"Q":return e.Q;case"H":return e.H;default:throw new XN(t+"not available")}},e.prototype.toString=function(){return this.stringValue},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.forBits=function(t){if(t<0||t>=e.FOR_BITS.size)throw new QN;return e.FOR_BITS.get(t)},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.L=new e(eM.L,"L",1),e.M=new e(eM.M,"M",0),e.Q=new e(eM.Q,"Q",3),e.H=new e(eM.H,"H",2),e}(),sM=function(){function e(e){this.errorCorrectionLevel=uM.forBits(e>>3&3),this.dataMask=7&e}return e.numBitsDiffering=function(e,t){return uR.bitCount(e^t)},e.decodeFormatInformation=function(t,n){var r=e.doDecodeFormatInformation(t,n);return null!==r?r:e.doDecodeFormatInformation(t^e.FORMAT_INFO_MASK_QR,n^e.FORMAT_INFO_MASK_QR)},e.doDecodeFormatInformation=function(t,n){var r,i,o=Number.MAX_SAFE_INTEGER,a=0;try{for(var u=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e.FORMAT_INFO_DECODE_LOOKUP),s=u.next();!s.done;s=u.next()){var c=s.value,l=c[0];if(l===t||l===n)return new e(c[1]);var f=e.numBitsDiffering(t,l);f<o&&(a=c[1],o=f),t!==n&&(f=e.numBitsDiffering(n,l))<o&&(a=c[1],o=f)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return o<=3?new e(a):null},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getDataMask=function(){return this.dataMask},e.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},e.FORMAT_INFO_MASK_QR=21522,e.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],e}(),cM=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return e.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},e.prototype.getNumBlocks=function(){var e,t,n=0,r=this.ecBlocks;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),o=i.next();!o.done;o=i.next())n+=o.value.getCount()}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},e.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},e.prototype.getECBlocks=function(){return this.ecBlocks},e}(),lM=function(){function e(e,t){this.count=e,this.dataCodewords=t}return e.prototype.getCount=function(){return this.count},e.prototype.getDataCodewords=function(){return this.dataCodewords},e}(),fM=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},hM=function(){function e(e,t){for(var n,r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=i;var a=0,u=i[0].getECCodewordsPerBlock(),s=i[0].getECBlocks();try{for(var c=fM(s),l=c.next();!l.done;l=c.next()){var f=l.value;a+=f.getCount()*(f.getDataCodewords()+u)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}this.totalCodewords=a}return e.prototype.getVersionNumber=function(){return this.versionNumber},e.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},e.prototype.getTotalCodewords=function(){return this.totalCodewords},e.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},e.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},e.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw new hR;try{return this.getVersionForNumber((e-17)/4)}catch(e){throw new hR}},e.getVersionForNumber=function(t){if(t<1||t>40)throw new QN;return e.VERSIONS[t-1]},e.decodeVersionInformation=function(t){for(var n=Number.MAX_SAFE_INTEGER,r=0,i=0;i<e.VERSION_DECODE_INFO.length;i++){var o=e.VERSION_DECODE_INFO[i];if(o===t)return e.getVersionForNumber(i+7);var a=sM.numBitsDiffering(t,o);a<n&&(r=i+7,n=a)}return n<=3?e.getVersionForNumber(r):null},e.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new kR(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,r=0;r<n;r++)for(var i=this.alignmentPatternCenters[r]-2,o=0;o<n;o++)0===r&&(0===o||o===n-1)||r===n-1&&0===o||t.setRegion(this.alignmentPatternCenters[o]-2,i,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},e.prototype.toString=function(){return""+this.versionNumber},e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),e.VERSIONS=[new e(1,new Int32Array(0),new cM(7,new lM(1,19)),new cM(10,new lM(1,16)),new cM(13,new lM(1,13)),new cM(17,new lM(1,9))),new e(2,Int32Array.from([6,18]),new cM(10,new lM(1,34)),new cM(16,new lM(1,28)),new cM(22,new lM(1,22)),new cM(28,new lM(1,16))),new e(3,Int32Array.from([6,22]),new cM(15,new lM(1,55)),new cM(26,new lM(1,44)),new cM(18,new lM(2,17)),new cM(22,new lM(2,13))),new e(4,Int32Array.from([6,26]),new cM(20,new lM(1,80)),new cM(18,new lM(2,32)),new cM(26,new lM(2,24)),new cM(16,new lM(4,9))),new e(5,Int32Array.from([6,30]),new cM(26,new lM(1,108)),new cM(24,new lM(2,43)),new cM(18,new lM(2,15),new lM(2,16)),new cM(22,new lM(2,11),new lM(2,12))),new e(6,Int32Array.from([6,34]),new cM(18,new lM(2,68)),new cM(16,new lM(4,27)),new cM(24,new lM(4,19)),new cM(28,new lM(4,15))),new e(7,Int32Array.from([6,22,38]),new cM(20,new lM(2,78)),new cM(18,new lM(4,31)),new cM(18,new lM(2,14),new lM(4,15)),new cM(26,new lM(4,13),new lM(1,14))),new e(8,Int32Array.from([6,24,42]),new cM(24,new lM(2,97)),new cM(22,new lM(2,38),new lM(2,39)),new cM(22,new lM(4,18),new lM(2,19)),new cM(26,new lM(4,14),new lM(2,15))),new e(9,Int32Array.from([6,26,46]),new cM(30,new lM(2,116)),new cM(22,new lM(3,36),new lM(2,37)),new cM(20,new lM(4,16),new lM(4,17)),new cM(24,new lM(4,12),new lM(4,13))),new e(10,Int32Array.from([6,28,50]),new cM(18,new lM(2,68),new lM(2,69)),new cM(26,new lM(4,43),new lM(1,44)),new cM(24,new lM(6,19),new lM(2,20)),new cM(28,new lM(6,15),new lM(2,16))),new e(11,Int32Array.from([6,30,54]),new cM(20,new lM(4,81)),new cM(30,new lM(1,50),new lM(4,51)),new cM(28,new lM(4,22),new lM(4,23)),new cM(24,new lM(3,12),new lM(8,13))),new e(12,Int32Array.from([6,32,58]),new cM(24,new lM(2,92),new lM(2,93)),new cM(22,new lM(6,36),new lM(2,37)),new cM(26,new lM(4,20),new lM(6,21)),new cM(28,new lM(7,14),new lM(4,15))),new e(13,Int32Array.from([6,34,62]),new cM(26,new lM(4,107)),new cM(22,new lM(8,37),new lM(1,38)),new cM(24,new lM(8,20),new lM(4,21)),new cM(22,new lM(12,11),new lM(4,12))),new e(14,Int32Array.from([6,26,46,66]),new cM(30,new lM(3,115),new lM(1,116)),new cM(24,new lM(4,40),new lM(5,41)),new cM(20,new lM(11,16),new lM(5,17)),new cM(24,new lM(11,12),new lM(5,13))),new e(15,Int32Array.from([6,26,48,70]),new cM(22,new lM(5,87),new lM(1,88)),new cM(24,new lM(5,41),new lM(5,42)),new cM(30,new lM(5,24),new lM(7,25)),new cM(24,new lM(11,12),new lM(7,13))),new e(16,Int32Array.from([6,26,50,74]),new cM(24,new lM(5,98),new lM(1,99)),new cM(28,new lM(7,45),new lM(3,46)),new cM(24,new lM(15,19),new lM(2,20)),new cM(30,new lM(3,15),new lM(13,16))),new e(17,Int32Array.from([6,30,54,78]),new cM(28,new lM(1,107),new lM(5,108)),new cM(28,new lM(10,46),new lM(1,47)),new cM(28,new lM(1,22),new lM(15,23)),new cM(28,new lM(2,14),new lM(17,15))),new e(18,Int32Array.from([6,30,56,82]),new cM(30,new lM(5,120),new lM(1,121)),new cM(26,new lM(9,43),new lM(4,44)),new cM(28,new lM(17,22),new lM(1,23)),new cM(28,new lM(2,14),new lM(19,15))),new e(19,Int32Array.from([6,30,58,86]),new cM(28,new lM(3,113),new lM(4,114)),new cM(26,new lM(3,44),new lM(11,45)),new cM(26,new lM(17,21),new lM(4,22)),new cM(26,new lM(9,13),new lM(16,14))),new e(20,Int32Array.from([6,34,62,90]),new cM(28,new lM(3,107),new lM(5,108)),new cM(26,new lM(3,41),new lM(13,42)),new cM(30,new lM(15,24),new lM(5,25)),new cM(28,new lM(15,15),new lM(10,16))),new e(21,Int32Array.from([6,28,50,72,94]),new cM(28,new lM(4,116),new lM(4,117)),new cM(26,new lM(17,42)),new cM(28,new lM(17,22),new lM(6,23)),new cM(30,new lM(19,16),new lM(6,17))),new e(22,Int32Array.from([6,26,50,74,98]),new cM(28,new lM(2,111),new lM(7,112)),new cM(28,new lM(17,46)),new cM(30,new lM(7,24),new lM(16,25)),new cM(24,new lM(34,13))),new e(23,Int32Array.from([6,30,54,78,102]),new cM(30,new lM(4,121),new lM(5,122)),new cM(28,new lM(4,47),new lM(14,48)),new cM(30,new lM(11,24),new lM(14,25)),new cM(30,new lM(16,15),new lM(14,16))),new e(24,Int32Array.from([6,28,54,80,106]),new cM(30,new lM(6,117),new lM(4,118)),new cM(28,new lM(6,45),new lM(14,46)),new cM(30,new lM(11,24),new lM(16,25)),new cM(30,new lM(30,16),new lM(2,17))),new e(25,Int32Array.from([6,32,58,84,110]),new cM(26,new lM(8,106),new lM(4,107)),new cM(28,new lM(8,47),new lM(13,48)),new cM(30,new lM(7,24),new lM(22,25)),new cM(30,new lM(22,15),new lM(13,16))),new e(26,Int32Array.from([6,30,58,86,114]),new cM(28,new lM(10,114),new lM(2,115)),new cM(28,new lM(19,46),new lM(4,47)),new cM(28,new lM(28,22),new lM(6,23)),new cM(30,new lM(33,16),new lM(4,17))),new e(27,Int32Array.from([6,34,62,90,118]),new cM(30,new lM(8,122),new lM(4,123)),new cM(28,new lM(22,45),new lM(3,46)),new cM(30,new lM(8,23),new lM(26,24)),new cM(30,new lM(12,15),new lM(28,16))),new e(28,Int32Array.from([6,26,50,74,98,122]),new cM(30,new lM(3,117),new lM(10,118)),new cM(28,new lM(3,45),new lM(23,46)),new cM(30,new lM(4,24),new lM(31,25)),new cM(30,new lM(11,15),new lM(31,16))),new e(29,Int32Array.from([6,30,54,78,102,126]),new cM(30,new lM(7,116),new lM(7,117)),new cM(28,new lM(21,45),new lM(7,46)),new cM(30,new lM(1,23),new lM(37,24)),new cM(30,new lM(19,15),new lM(26,16))),new e(30,Int32Array.from([6,26,52,78,104,130]),new cM(30,new lM(5,115),new lM(10,116)),new cM(28,new lM(19,47),new lM(10,48)),new cM(30,new lM(15,24),new lM(25,25)),new cM(30,new lM(23,15),new lM(25,16))),new e(31,Int32Array.from([6,30,56,82,108,134]),new cM(30,new lM(13,115),new lM(3,116)),new cM(28,new lM(2,46),new lM(29,47)),new cM(30,new lM(42,24),new lM(1,25)),new cM(30,new lM(23,15),new lM(28,16))),new e(32,Int32Array.from([6,34,60,86,112,138]),new cM(30,new lM(17,115)),new cM(28,new lM(10,46),new lM(23,47)),new cM(30,new lM(10,24),new lM(35,25)),new cM(30,new lM(19,15),new lM(35,16))),new e(33,Int32Array.from([6,30,58,86,114,142]),new cM(30,new lM(17,115),new lM(1,116)),new cM(28,new lM(14,46),new lM(21,47)),new cM(30,new lM(29,24),new lM(19,25)),new cM(30,new lM(11,15),new lM(46,16))),new e(34,Int32Array.from([6,34,62,90,118,146]),new cM(30,new lM(13,115),new lM(6,116)),new cM(28,new lM(14,46),new lM(23,47)),new cM(30,new lM(44,24),new lM(7,25)),new cM(30,new lM(59,16),new lM(1,17))),new e(35,Int32Array.from([6,30,54,78,102,126,150]),new cM(30,new lM(12,121),new lM(7,122)),new cM(28,new lM(12,47),new lM(26,48)),new cM(30,new lM(39,24),new lM(14,25)),new cM(30,new lM(22,15),new lM(41,16))),new e(36,Int32Array.from([6,24,50,76,102,128,154]),new cM(30,new lM(6,121),new lM(14,122)),new cM(28,new lM(6,47),new lM(34,48)),new cM(30,new lM(46,24),new lM(10,25)),new cM(30,new lM(2,15),new lM(64,16))),new e(37,Int32Array.from([6,28,54,80,106,132,158]),new cM(30,new lM(17,122),new lM(4,123)),new cM(28,new lM(29,46),new lM(14,47)),new cM(30,new lM(49,24),new lM(10,25)),new cM(30,new lM(24,15),new lM(46,16))),new e(38,Int32Array.from([6,32,58,84,110,136,162]),new cM(30,new lM(4,122),new lM(18,123)),new cM(28,new lM(13,46),new lM(32,47)),new cM(30,new lM(48,24),new lM(14,25)),new cM(30,new lM(42,15),new lM(32,16))),new e(39,Int32Array.from([6,26,54,82,110,138,166]),new cM(30,new lM(20,117),new lM(4,118)),new cM(28,new lM(40,47),new lM(7,48)),new cM(30,new lM(43,24),new lM(22,25)),new cM(30,new lM(10,15),new lM(67,16))),new e(40,Int32Array.from([6,30,58,86,114,142,170]),new cM(30,new lM(19,118),new lM(6,119)),new cM(28,new lM(18,47),new lM(31,48)),new cM(30,new lM(34,24),new lM(34,25)),new cM(30,new lM(20,15),new lM(61,16)))],e}();!function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}(aM||(aM={}));var dM,pM=function(){function e(e,t){this.value=e,this.isMasked=t}return e.prototype.unmaskBitMatrix=function(e,t){for(var n=0;n<t;n++)for(var r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)},e.values=new Map([[aM.DATA_MASK_000,new e(aM.DATA_MASK_000,(function(e,t){return 0==(e+t&1)}))],[aM.DATA_MASK_001,new e(aM.DATA_MASK_001,(function(e,t){return 0==(1&e)}))],[aM.DATA_MASK_010,new e(aM.DATA_MASK_010,(function(e,t){return t%3==0}))],[aM.DATA_MASK_011,new e(aM.DATA_MASK_011,(function(e,t){return(e+t)%3==0}))],[aM.DATA_MASK_100,new e(aM.DATA_MASK_100,(function(e,t){return 0==(Math.floor(e/2)+Math.floor(t/3)&1)}))],[aM.DATA_MASK_101,new e(aM.DATA_MASK_101,(function(e,t){return e*t%6==0}))],[aM.DATA_MASK_110,new e(aM.DATA_MASK_110,(function(e,t){return e*t%6<3}))],[aM.DATA_MASK_111,new e(aM.DATA_MASK_111,(function(e,t){return 0==(e+t+e*t%3&1)}))]]),e}(),vM=function(){function e(e){var t=e.getHeight();if(t<21||1!=(3&t))throw new hR;this.bitMatrix=e}return e.prototype.readFormatInformation=function(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);var r=this.bitMatrix.getHeight(),i=0,o=r-7;for(n=r-1;n>=o;n--)i=this.copyBit(8,n,i);for(t=r-8;t<r;t++)i=this.copyBit(t,8,i);if(this.parsedFormatInfo=sM.decodeFormatInformation(e,i),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new hR},e.prototype.readVersion=function(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return hM.getVersionForNumber(t);for(var n=0,r=e-11,i=5;i>=0;i--)for(var o=e-9;o>=r;o--)n=this.copyBit(o,i,n);var a=hM.decodeVersionInformation(n);if(null!==a&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;for(n=0,o=5;o>=0;o--)for(i=e-9;i>=r;i--)n=this.copyBit(o,i,n);if(null!==(a=hM.decodeVersionInformation(n))&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new hR},e.prototype.copyBit=function(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1},e.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),n=pM.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);for(var i=t.buildFunctionPattern(),o=!0,a=new Uint8Array(t.getTotalCodewords()),u=0,s=0,c=0,l=r-1;l>0;l-=2){6===l&&l--;for(var f=0;f<r;f++)for(var h=o?r-1-f:f,d=0;d<2;d++)i.get(l-d,h)||(c++,s<<=1,this.bitMatrix.get(l-d,h)&&(s|=1),8===c&&(a[u++]=s,c=0,s=0));o=!o}if(u!==t.getTotalCodewords())throw new hR;return a},e.prototype.remask=function(){if(null!==this.parsedFormatInfo){var e=pM.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},e.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},e.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,n=e.getWidth();t<n;t++)for(var r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))},e}(),mM=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},yM=function(){function e(e,t){this.numDataCodewords=e,this.codewords=t}return e.getDataBlocks=function(t,n,r){var i,o,a,u;if(t.length!==n.getTotalCodewords())throw new QN;var s=n.getECBlocksForLevel(r),c=0,l=s.getECBlocks();try{for(var f=mM(l),h=f.next();!h.done;h=f.next())c+=(y=h.value).getCount()}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}var d=new Array(c),p=0;try{for(var v=mM(l),m=v.next();!m.done;m=v.next())for(var y=m.value,g=0;g<y.getCount();g++){var w=y.getDataCodewords(),b=s.getECCodewordsPerBlock()+w;d[p++]=new e(w,new Uint8Array(b))}}catch(e){a={error:e}}finally{try{m&&!m.done&&(u=v.return)&&u.call(v)}finally{if(a)throw a.error}}for(var k=d[0].codewords.length,_=d.length-1;_>=0&&d[_].codewords.length!==k;)_--;_++;var E=k-s.getECCodewordsPerBlock(),I=0;for(g=0;g<E;g++)for(var A=0;A<p;A++)d[A].codewords[g]=t[I++];for(A=_;A<p;A++)d[A].codewords[E]=t[I++];var C=d[0].codewords.length;for(g=E;g<C;g++)for(A=0;A<p;A++){var S=A<_?g:g+1;d[A].codewords[S]=t[I++]}return d},e.prototype.getNumDataCodewords=function(){return this.numDataCodewords},e.prototype.getCodewords=function(){return this.codewords},e}();!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(dM||(dM={}));var gM,wM,bM=function(){function e(t,n,r,i){this.value=t,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,e.FOR_BITS.set(i,this),e.FOR_VALUE.set(t,this)}return e.forBits=function(t){var n=e.FOR_BITS.get(t);if(void 0===n)throw new QN;return n},e.prototype.getCharacterCountBits=function(e){var t,n=e.getVersionNumber();return t=n<=9?0:n<=26?1:2,this.characterCountBitsForVersions[t]},e.prototype.getValue=function(){return this.value},e.prototype.getBits=function(){return this.bits},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;return this.value===n.value},e.prototype.toString=function(){return this.stringValue},e.FOR_BITS=new Map,e.FOR_VALUE=new Map,e.TERMINATOR=new e(dM.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),e.NUMERIC=new e(dM.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),e.ALPHANUMERIC=new e(dM.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),e.STRUCTURED_APPEND=new e(dM.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),e.BYTE=new e(dM.BYTE,"BYTE",Int32Array.from([8,16,16]),4),e.ECI=new e(dM.ECI,"ECI",Int32Array.from([0,0,0]),7),e.KANJI=new e(dM.KANJI,"KANJI",Int32Array.from([8,10,12]),8),e.FNC1_FIRST_POSITION=new e(dM.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),e.FNC1_SECOND_POSITION=new e(dM.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),e.HANZI=new e(dM.HANZI,"HANZI",Int32Array.from([8,10,12]),13),e}(),kM=function(){function e(){}return e.decode=function(t,n,r,i){var o=new $P(t),a=new bR,u=new Array,s=-1,c=-1;try{var l=null,f=!1,h=void 0;do{if(o.available()<4)h=bM.TERMINATOR;else{var d=o.readBits(4);h=bM.forBits(d)}switch(h){case bM.TERMINATOR:break;case bM.FNC1_FIRST_POSITION:case bM.FNC1_SECOND_POSITION:f=!0;break;case bM.STRUCTURED_APPEND:if(o.available()<16)throw new hR;s=o.readBits(8),c=o.readBits(8);break;case bM.ECI:var p=e.parseECIValue(o);if(null===(l=vR.getCharacterSetECIByValue(p)))throw new hR;break;case bM.HANZI:var v=o.readBits(4),m=o.readBits(h.getCharacterCountBits(n));v===e.GB2312_SUBSET&&e.decodeHanziSegment(o,a,m);break;default:var y=o.readBits(h.getCharacterCountBits(n));switch(h){case bM.NUMERIC:e.decodeNumericSegment(o,a,y);break;case bM.ALPHANUMERIC:e.decodeAlphanumericSegment(o,a,y,f);break;case bM.BYTE:e.decodeByteSegment(o,a,y,l,u,i);break;case bM.KANJI:e.decodeKanjiSegment(o,a,y);break;default:throw new hR}}}while(h!==bM.TERMINATOR)}catch(e){throw new hR}return new zR(t,a.toString(),0===u.length?null:u,null===r?null:r.toString(),s,c)},e.decodeHanziSegment=function(e,t,n){if(13*n>e.available())throw new hR;for(var r=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),a=o/96<<8&4294967295|o%96;a+=a<959?41377:42657,r[i]=a>>8&255,r[i+1]=255&a,i+=2,n--}try{t.append(gR.decode(r,wR.GB2312))}catch(e){throw new hR(e)}},e.decodeKanjiSegment=function(e,t,n){if(13*n>e.available())throw new hR;for(var r=new Uint8Array(2*n),i=0;n>0;){var o=e.readBits(13),a=o/192<<8&4294967295|o%192;a+=a<7936?33088:49472,r[i]=a>>8,r[i+1]=a,i+=2,n--}try{t.append(gR.decode(r,wR.SHIFT_JIS))}catch(e){throw new hR(e)}},e.decodeByteSegment=function(e,t,n,r,i,o){if(8*n>e.available())throw new hR;for(var a,u=new Uint8Array(n),s=0;s<n;s++)u[s]=e.readBits(8);a=null===r?wR.guessEncoding(u,o):r.getName();try{t.append(gR.decode(u,a))}catch(e){throw new hR(e)}i.push(u)},e.toAlphaNumericChar=function(t){if(t>=e.ALPHANUMERIC_CHARS.length)throw new hR;return e.ALPHANUMERIC_CHARS[t]},e.decodeAlphanumericSegment=function(t,n,r,i){for(var o=n.length();r>1;){if(t.available()<11)throw new hR;var a=t.readBits(11);n.append(e.toAlphaNumericChar(Math.floor(a/45))),n.append(e.toAlphaNumericChar(a%45)),r-=2}if(1===r){if(t.available()<6)throw new hR;n.append(e.toAlphaNumericChar(t.readBits(6)))}if(i)for(var u=o;u<n.length();u++)"%"===n.charAt(u)&&(u<n.length()-1&&"%"===n.charAt(u+1)?n.deleteCharAt(u+1):n.setCharAt(u,String.fromCharCode(29)))},e.decodeNumericSegment=function(t,n,r){for(;r>=3;){if(t.available()<10)throw new hR;var i=t.readBits(10);if(i>=1e3)throw new hR;n.append(e.toAlphaNumericChar(Math.floor(i/100))),n.append(e.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(e.toAlphaNumericChar(i%10)),r-=3}if(2===r){if(t.available()<7)throw new hR;var o=t.readBits(7);if(o>=100)throw new hR;n.append(e.toAlphaNumericChar(Math.floor(o/10))),n.append(e.toAlphaNumericChar(o%10))}else if(1===r){if(t.available()<4)throw new hR;var a=t.readBits(4);if(a>=10)throw new hR;n.append(e.toAlphaNumericChar(a))}},e.parseECIValue=function(e){var t=e.readBits(8);if(0==(128&t))return 127&t;if(128==(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192==(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new hR},e.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.GB2312_SUBSET=1,e}(),_M=function(){function e(e){this.mirrored=e}return e.prototype.isMirrored=function(){return this.mirrored},e.prototype.applyMirroredCorrection=function(e){if(this.mirrored&&null!==e&&!(e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},e}(),EM=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},IM=function(){function e(){this.rsDecoder=new $R(XR.QR_CODE_FIELD_256)}return e.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(kR.parseFromBooleanArray(e),t)},e.prototype.decodeBitMatrix=function(e,t){var n=new vM(e),r=null;try{return this.decodeBitMatrixParser(n,t)}catch(e){r=e}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var i=this.decodeBitMatrixParser(n,t);return i.setOther(new _M(!0)),i}catch(e){if(null!==r)throw r;throw e}},e.prototype.decodeBitMatrixParser=function(e,t){var n,r,i,o,a=e.readVersion(),u=e.readFormatInformation().getErrorCorrectionLevel(),s=e.readCodewords(),c=yM.getDataBlocks(s,a,u),l=0;try{for(var f=EM(c),h=f.next();!h.done;h=f.next())l+=(y=h.value).getNumDataCodewords()}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}var d=new Uint8Array(l),p=0;try{for(var v=EM(c),m=v.next();!m.done;m=v.next()){var y,g=(y=m.value).getCodewords(),w=y.getNumDataCodewords();this.correctErrors(g,w);for(var b=0;b<w;b++)d[p++]=g[b]}}catch(e){i={error:e}}finally{try{m&&!m.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}return kM.decode(d,a,u,t)},e.prototype.correctErrors=function(e,t){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch(e){throw new $N}for(var r=0;r<t;r++)e[r]=n[r]},e}(),AM=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),CM=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.estimatedModuleSize=r,i}return AM(t,e),t.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,n,r){return new t((this.getX()+n)/2,(this.getY()+e)/2,(this.estimatedModuleSize+r)/2)},t}(rD),SM=function(){function e(e,t,n,r,i,o,a){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=o,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return e.prototype.find=function(){for(var e=this.startX,t=this.height,n=e+this.width,r=this.startY+t/2,i=new Int32Array(3),o=this.image,a=0;a<t;a++){var u=r+(0==(1&a)?Math.floor((a+1)/2):-Math.floor((a+1)/2));i[0]=0,i[1]=0,i[2]=0;for(var s=e;s<n&&!o.get(s,u);)s++;for(var c=0;s<n;){if(o.get(s,u))if(1===c)i[1]++;else if(2===c){var l;if(this.foundPatternCross(i)&&null!==(l=this.handlePossibleCenter(i,u,s)))return l;i[0]=i[2],i[1]=1,i[2]=0,c=1}else i[++c]++;else 1===c&&c++,i[c]++;s++}if(this.foundPatternCross(i)&&null!==(l=this.handlePossibleCenter(i,u,n)))return l}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new ER},e.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},e.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,n=t/2,r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0},e.prototype.crossCheckVertical=function(t,n,r,i){var o=this.image,a=o.getHeight(),u=this.crossCheckStateCount;u[0]=0,u[1]=0,u[2]=0;for(var s=t;s>=0&&o.get(n,s)&&u[1]<=r;)u[1]++,s--;if(s<0||u[1]>r)return NaN;for(;s>=0&&!o.get(n,s)&&u[0]<=r;)u[0]++,s--;if(u[0]>r)return NaN;for(s=t+1;s<a&&o.get(n,s)&&u[1]<=r;)u[1]++,s++;if(s===a||u[1]>r)return NaN;for(;s<a&&!o.get(n,s)&&u[2]<=r;)u[2]++,s++;if(u[2]>r)return NaN;var c=u[0]+u[1]+u[2];return 5*Math.abs(c-i)>=2*i?NaN:this.foundPatternCross(u)?e.centerFromEnd(u,s):NaN},e.prototype.handlePossibleCenter=function(t,n,r){var i,o,a=t[0]+t[1]+t[2],u=e.centerFromEnd(t,r),s=this.crossCheckVertical(n,u,2*t[1],a);if(!isNaN(s)){var c=(t[0]+t[1]+t[2])/3;try{for(var l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.possibleCenters),f=l.next();!f.done;f=l.next()){var h=f.value;if(h.aboutEquals(c,s,u))return h.combineEstimate(s,u,c)}}catch(e){i={error:e}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}var d=new CM(u,s,c);this.possibleCenters.push(d),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(d)}return null},e}(),xM=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),TM=function(e){function t(t,n,r,i){var o=e.call(this,t,n)||this;return o.estimatedModuleSize=r,o.count=i,void 0===i&&(o.count=1),o}return xM(t,e),t.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},t.prototype.getCount=function(){return this.count},t.prototype.aboutEquals=function(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1},t.prototype.combineEstimate=function(e,n,r){var i=this.count+1;return new t((this.count*this.getX()+n)/i,(this.count*this.getY()+e)/i,(this.count*this.estimatedModuleSize+r)/i,i)},t}(rD),OM=function(){function e(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e}(),NM=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},RM=function(){function e(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return e.prototype.getImage=function(){return this.image},e.prototype.getPossibleCenters=function(){return this.possibleCenters},e.prototype.find=function(t){var n=null!=t&&void 0!==t.get(lR.TRY_HARDER),r=null!=t&&void 0!==t.get(lR.PURE_BARCODE),i=this.image,o=i.getHeight(),a=i.getWidth(),u=Math.floor(3*o/(4*e.MAX_MODULES));(u<e.MIN_SKIP||n)&&(u=e.MIN_SKIP);for(var s=!1,c=new Int32Array(5),l=u-1;l<o&&!s;l+=u){c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0;for(var f=0,h=0;h<a;h++)if(i.get(h,l))1==(1&f)&&f++,c[f]++;else if(0==(1&f))if(4===f)if(e.foundPatternCross(c)){if(!0!==this.handlePossibleCenter(c,l,h,r)){c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,f=3;continue}if(u=2,!0===this.hasSkipped)s=this.haveMultiplyConfirmedCenters();else{var d=this.findRowSkip();d>c[2]&&(l+=d-c[2]-u,h=a-1)}f=0,c[0]=0,c[1]=0,c[2]=0,c[3]=0,c[4]=0}else c[0]=c[2],c[1]=c[3],c[2]=c[4],c[3]=1,c[4]=0,f=3;else c[++f]++;else c[f]++;e.foundPatternCross(c)&&!0===this.handlePossibleCenter(c,l,a,r)&&(u=c[0],this.hasSkipped&&(s=this.haveMultiplyConfirmedCenters()))}var p=this.selectBestPatterns();return rD.orderBestPatterns(p),new OM(p)},e.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},e.foundPatternCross=function(e){for(var t=0,n=0;n<5;n++){var r=e[n];if(0===r)return!1;t+=r}if(t<7)return!1;var i=t/7,o=i/2;return Math.abs(i-e[0])<o&&Math.abs(i-e[1])<o&&Math.abs(3*i-e[2])<3*o&&Math.abs(i-e[3])<o&&Math.abs(i-e[4])<o},e.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},e.prototype.crossCheckDiagonal=function(t,n,r,i){for(var o=this.getCrossCheckStateCount(),a=0,u=this.image;t>=a&&n>=a&&u.get(n-a,t-a);)o[2]++,a++;if(t<a||n<a)return!1;for(;t>=a&&n>=a&&!u.get(n-a,t-a)&&o[1]<=r;)o[1]++,a++;if(t<a||n<a||o[1]>r)return!1;for(;t>=a&&n>=a&&u.get(n-a,t-a)&&o[0]<=r;)o[0]++,a++;if(o[0]>r)return!1;var s=u.getHeight(),c=u.getWidth();for(a=1;t+a<s&&n+a<c&&u.get(n+a,t+a);)o[2]++,a++;if(t+a>=s||n+a>=c)return!1;for(;t+a<s&&n+a<c&&!u.get(n+a,t+a)&&o[3]<r;)o[3]++,a++;if(t+a>=s||n+a>=c||o[3]>=r)return!1;for(;t+a<s&&n+a<c&&u.get(n+a,t+a)&&o[4]<r;)o[4]++,a++;if(o[4]>=r)return!1;var l=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(l-i)<2*i&&e.foundPatternCross(o)},e.prototype.crossCheckVertical=function(t,n,r,i){for(var o=this.image,a=o.getHeight(),u=this.getCrossCheckStateCount(),s=t;s>=0&&o.get(n,s);)u[2]++,s--;if(s<0)return NaN;for(;s>=0&&!o.get(n,s)&&u[1]<=r;)u[1]++,s--;if(s<0||u[1]>r)return NaN;for(;s>=0&&o.get(n,s)&&u[0]<=r;)u[0]++,s--;if(u[0]>r)return NaN;for(s=t+1;s<a&&o.get(n,s);)u[2]++,s++;if(s===a)return NaN;for(;s<a&&!o.get(n,s)&&u[3]<r;)u[3]++,s++;if(s===a||u[3]>=r)return NaN;for(;s<a&&o.get(n,s)&&u[4]<r;)u[4]++,s++;if(u[4]>=r)return NaN;var c=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(c-i)>=2*i?NaN:e.foundPatternCross(u)?e.centerFromEnd(u,s):NaN},e.prototype.crossCheckHorizontal=function(t,n,r,i){for(var o=this.image,a=o.getWidth(),u=this.getCrossCheckStateCount(),s=t;s>=0&&o.get(s,n);)u[2]++,s--;if(s<0)return NaN;for(;s>=0&&!o.get(s,n)&&u[1]<=r;)u[1]++,s--;if(s<0||u[1]>r)return NaN;for(;s>=0&&o.get(s,n)&&u[0]<=r;)u[0]++,s--;if(u[0]>r)return NaN;for(s=t+1;s<a&&o.get(s,n);)u[2]++,s++;if(s===a)return NaN;for(;s<a&&!o.get(s,n)&&u[3]<r;)u[3]++,s++;if(s===a||u[3]>=r)return NaN;for(;s<a&&o.get(s,n)&&u[4]<r;)u[4]++,s++;if(u[4]>=r)return NaN;var c=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(c-i)>=i?NaN:e.foundPatternCross(u)?e.centerFromEnd(u,s):NaN},e.prototype.handlePossibleCenter=function(t,n,r,i){var o=t[0]+t[1]+t[2]+t[3]+t[4],a=e.centerFromEnd(t,r),u=this.crossCheckVertical(n,Math.floor(a),t[2],o);if(!isNaN(u)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(u),t[2],o),!isNaN(a)&&(!i||this.crossCheckDiagonal(Math.floor(u),Math.floor(a),t[2],o)))){for(var s=o/7,c=!1,l=this.possibleCenters,f=0,h=l.length;f<h;f++){var d=l[f];if(d.aboutEquals(s,u,a)){l[f]=d.combineEstimate(u,a,s),c=!0;break}}if(!c){var p=new TM(a,u,s);l.push(p),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},e.prototype.findRowSkip=function(){var t,n;if(this.possibleCenters.length<=1)return 0;var r=null;try{for(var i=NM(this.possibleCenters),o=i.next();!o.done;o=i.next()){var a=o.value;if(a.getCount()>=e.CENTER_QUORUM){if(null!=r)return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-a.getX())-Math.abs(r.getY()-a.getY()))/2);r=a}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return 0},e.prototype.haveMultiplyConfirmedCenters=function(){var t,n,r,i,o=0,a=0,u=this.possibleCenters.length;try{for(var s=NM(this.possibleCenters),c=s.next();!c.done;c=s.next())(p=c.value).getCount()>=e.CENTER_QUORUM&&(o++,a+=p.getEstimatedModuleSize())}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}if(o<3)return!1;var l=a/u,f=0;try{for(var h=NM(this.possibleCenters),d=h.next();!d.done;d=h.next()){var p=d.value;f+=Math.abs(p.getEstimatedModuleSize()-l)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return f<=.05*a},e.prototype.selectBestPatterns=function(){var e,t,n,r,i=this.possibleCenters.length;if(i<3)throw new ER;var o,a=this.possibleCenters;if(i>3){var u=0,s=0;try{for(var c=NM(this.possibleCenters),l=c.next();!l.done;l=c.next()){var f=l.value.getEstimatedModuleSize();u+=f,s+=f*f}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}o=u/i;var h=Math.sqrt(s/i-o*o);a.sort((function(e,t){var n=Math.abs(t.getEstimatedModuleSize()-o),r=Math.abs(e.getEstimatedModuleSize()-o);return n<r?-1:n>r?1:0}));for(var d=Math.max(.2*o,h),p=0;p<a.length&&a.length>3;p++){var v=a[p];Math.abs(v.getEstimatedModuleSize()-o)>d&&(a.splice(p,1),p--)}}if(a.length>3){u=0;try{for(var m=NM(a),y=m.next();!y.done;y=m.next())u+=y.value.getEstimatedModuleSize()}catch(e){n={error:e}}finally{try{y&&!y.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}o=u/a.length,a.sort((function(e,t){if(t.getCount()===e.getCount()){var n=Math.abs(t.getEstimatedModuleSize()-o),r=Math.abs(e.getEstimatedModuleSize()-o);return n<r?1:n>r?-1:0}return t.getCount()-e.getCount()})),a.splice(3)}return[a[0],a[1],a[2]]},e.CENTER_QUORUM=2,e.MIN_SKIP=3,e.MAX_MODULES=57,e}(),DM=function(){function e(e){this.image=e}return e.prototype.getImage=function(){return this.image},e.prototype.getResultPointCallback=function(){return this.resultPointCallback},e.prototype.detect=function(e){this.resultPointCallback=null==e?null:e.get(lR.NEED_RESULT_POINT_CALLBACK);var t=new RM(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)},e.prototype.processFinderPatternInfo=function(t){var n=t.getTopLeft(),r=t.getTopRight(),i=t.getBottomLeft(),o=this.calculateModuleSize(n,r,i);if(o<1)throw new ER("No pattern found in proccess finder.");var a=e.computeDimension(n,r,i,o),u=hM.getProvisionalVersionForDimension(a),s=u.getDimensionForVersion()-7,c=null;if(u.getAlignmentPatternCenters().length>0)for(var l=r.getX()-n.getX()+i.getX(),f=r.getY()-n.getY()+i.getY(),h=1-3/s,d=Math.floor(n.getX()+h*(l-n.getX())),p=Math.floor(n.getY()+h*(f-n.getY())),v=4;v<=16;v<<=1)try{c=this.findAlignmentInRegion(o,d,p,v);break}catch(e){if(!(e instanceof ER))throw e}var m=e.createTransform(n,r,i,c,a),y=e.sampleGrid(this.image,m,a);return new iD(y,null===c?[i,n,r]:[i,n,r,c])},e.createTransform=function(e,t,n,r,i){var o,a,u,s,c=i-3.5;return null!==r?(o=r.getX(),a=r.getY(),s=u=c-3):(o=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),u=c,s=c),cD.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,u,s,3.5,c,e.getX(),e.getY(),t.getX(),t.getY(),o,a,n.getX(),n.getY())},e.sampleGrid=function(e,t,n){return hD.getInstance().sampleGridWithTransform(e,n,n,t)},e.computeDimension=function(e,t,n,r){var i=tD.round(rD.distance(e,t)/r),o=tD.round(rD.distance(e,n)/r),a=Math.floor((i+o)/2)+7;switch(3&a){case 0:a++;break;case 2:a--;break;case 3:throw new ER("Dimensions could be not found.")}return a},e.prototype.calculateModuleSize=function(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2},e.prototype.calculateModuleSizeOneWay=function(e,t){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14},e.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,n,r){var i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),o=1,a=e-(n-e);a<0?(o=e/(e-a),a=0):a>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var u=Math.floor(t-(r-t)*o);return o=1,u<0?(o=t/(t-u),u=0):u>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(u-t),u=this.image.getHeight()-1),a=Math.floor(e+(a-e)*o),(i+=this.sizeOfBlackWhiteBlackRun(e,t,a,u))-1},e.prototype.sizeOfBlackWhiteBlackRun=function(e,t,n,r){var i=Math.abs(r-t)>Math.abs(n-e);if(i){var o=e;e=t,t=o,o=n,n=r,r=o}for(var a=Math.abs(n-e),u=Math.abs(r-t),s=-a/2,c=e<n?1:-1,l=t<r?1:-1,f=0,h=n+c,d=e,p=t;d!==h;d+=c){var v=i?p:d,m=i?d:p;if(1===f===this.image.get(v,m)){if(2===f)return tD.distance(d,p,e,t);f++}if((s+=u)>0){if(p===r)break;p+=l,s-=a}}return 2===f?tD.distance(n+c,r,e,t):NaN},e.prototype.findAlignmentInRegion=function(e,t,n,r){var i=Math.floor(r*e),o=Math.max(0,t-i),a=Math.min(this.image.getWidth()-1,t+i);if(a-o<3*e)throw new ER("Alignment top exceeds estimated module size.");var u=Math.max(0,n-i),s=Math.min(this.image.getHeight()-1,n+i);if(s-u<3*e)throw new ER("Alignment bottom exceeds estimated module size.");return new SM(this.image,o,u,a-o,s-u,e,this.resultPointCallback).find()},e}(),PM=function(){function e(){this.decoder=new IM}return e.prototype.getDecoder=function(){return this.decoder},e.prototype.decode=function(t,n){var r,i;if(null!=n&&void 0!==n.get(lR.PURE_BARCODE)){var o=e.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,n),i=e.NO_POINTS}else{var a=new DM(t.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(a.getBits(),n),i=a.getPoints()}r.getOther()instanceof _M&&r.getOther().applyMirroredCorrection(i);var u=new BR(r.getText(),r.getRawBytes(),void 0,i,jR.QR_CODE,void 0),s=r.getByteSegments();null!==s&&u.putMetadata(VR.BYTE_SEGMENTS,s);var c=r.getECLevel();return null!==c&&u.putMetadata(VR.ERROR_CORRECTION_LEVEL,c),r.hasStructuredAppend()&&(u.putMetadata(VR.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),u.putMetadata(VR.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),u},e.prototype.reset=function(){},e.extractPureBits=function(e){var t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(null===t||null===n)throw new ER;var r=this.moduleSize(t,e),i=t[1],o=n[1],a=t[0],u=n[0];if(a>=u||i>=o)throw new ER;if(o-i!=u-a&&(u=a+(o-i))>=e.getWidth())throw new ER;var s=Math.round((u-a+1)/r),c=Math.round((o-i+1)/r);if(s<=0||c<=0)throw new ER;if(c!==s)throw new ER;var l=Math.floor(r/2);i+=l;var f=(a+=l)+Math.floor((s-1)*r)-u;if(f>0){if(f>l)throw new ER;a-=f}var h=i+Math.floor((c-1)*r)-o;if(h>0){if(h>l)throw new ER;i-=h}for(var d=new kR(s,c),p=0;p<c;p++)for(var v=i+Math.floor(p*r),m=0;m<s;m++)e.get(a+Math.floor(m*r),v)&&d.set(m,p);return d},e.moduleSize=function(e,t){for(var n=t.getHeight(),r=t.getWidth(),i=e[0],o=e[1],a=!0,u=0;i<r&&o<n;){if(a!==t.get(i,o)){if(5==++u)break;a=!a}i++,o++}if(i===r||o===n)throw new ER;return(i-e[0])/7},e.NO_POINTS=new Array,e}(),MM=function(){function e(){}return e.prototype.PDF417Common=function(){},e.getBitCountSum=function(e){return tD.sum(e)},e.toIntArray=function(t){var n,r;if(null==t||!t.length)return e.EMPTY_INT_ARRAY;var i=new Int32Array(t.length),o=0;try{for(var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),u=a.next();!u.done;u=a.next()){var s=u.value;i[o++]=s}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},e.getCodeword=function(t){var n=aR.binarySearch(e.SYMBOL_TABLE,262143&t);return n<0?-1:(e.CODEWORD_TABLE[n]-1)%e.NUMBER_OF_CODEWORDS},e.NUMBER_OF_CODEWORDS=929,e.MAX_CODEWORDS_IN_BARCODE=e.NUMBER_OF_CODEWORDS-1,e.MIN_ROWS_IN_BARCODE=3,e.MAX_ROWS_IN_BARCODE=90,e.MODULES_IN_CODEWORD=17,e.MODULES_IN_STOP_PATTERN=18,e.BARS_IN_MODULE=8,e.EMPTY_INT_ARRAY=new Int32Array([]),e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),e}(),LM=function(){function e(e,t){this.bits=e,this.points=t}return e.prototype.getBits=function(){return this.bits},e.prototype.getPoints=function(){return this.points},e}(),BM=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},FM=function(){function e(){}return e.detectMultiple=function(t,n,r){var i=t.getBlackMatrix(),o=e.detect(r,i);return o.length||((i=i.clone()).rotate180(),o=e.detect(r,i)),new LM(i,o)},e.detect=function(t,n){for(var r,i,o=new Array,a=0,u=0,s=!1;a<n.getHeight();){var c=e.findVertices(n,a,u);if(null!=c[0]||null!=c[3]){if(s=!0,o.push(c),!t)break;null!=c[2]?(u=Math.trunc(c[2].getX()),a=Math.trunc(c[2].getY())):(u=Math.trunc(c[4].getX()),a=Math.trunc(c[4].getY()))}else{if(!s)break;s=!1,u=0;try{for(var l=(r=void 0,BM(o)),f=l.next();!f.done;f=l.next()){var h=f.value;null!=h[1]&&(a=Math.trunc(Math.max(a,h[1].getY()))),null!=h[3]&&(a=Math.max(a,Math.trunc(h[3].getY())))}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}a+=e.ROW_STEP}}return o},e.findVertices=function(t,n,r){var i=t.getHeight(),o=t.getWidth(),a=new Array(8);return e.copyToResult(a,e.findRowsWithPattern(t,i,o,n,r,e.START_PATTERN),e.INDEXES_START_PATTERN),null!=a[4]&&(r=Math.trunc(a[4].getX()),n=Math.trunc(a[4].getY())),e.copyToResult(a,e.findRowsWithPattern(t,i,o,n,r,e.STOP_PATTERN),e.INDEXES_STOP_PATTERN),a},e.copyToResult=function(e,t,n){for(var r=0;r<n.length;r++)e[n[r]]=t[r]},e.findRowsWithPattern=function(t,n,r,i,o,a){for(var u=new Array(4),s=!1,c=new Int32Array(a.length);i<n;i+=e.ROW_STEP)if(null!=(d=e.findGuardPattern(t,o,i,r,!1,a,c))){for(;i>0;){if(null==(h=e.findGuardPattern(t,o,--i,r,!1,a,c))){i++;break}d=h}u[0]=new rD(d[0],i),u[1]=new rD(d[1],i),s=!0;break}var l=i+1;if(s){for(var f=0,h=Int32Array.from([Math.trunc(u[0].getX()),Math.trunc(u[1].getX())]);l<n;l++){var d;if(null!=(d=e.findGuardPattern(t,h[0],l,r,!1,a,c))&&Math.abs(h[0]-d[0])<e.MAX_PATTERN_DRIFT&&Math.abs(h[1]-d[1])<e.MAX_PATTERN_DRIFT)h=d,f=0;else{if(f>e.SKIPPED_ROW_COUNT_MAX)break;f++}}l-=f+1,u[2]=new rD(h[0],l),u[3]=new rD(h[1],l)}return l-i<e.BARCODE_MIN_HEIGHT&&aR.fill(u,null),u},e.findGuardPattern=function(t,n,r,i,o,a,u){aR.fillWithin(u,0,u.length,0);for(var s=n,c=0;t.get(s,r)&&s>0&&c++<e.MAX_PIXEL_DRIFT;)s--;for(var l=s,f=0,h=a.length,d=o;l<i;l++)if(t.get(l,r)!==d)u[f]++;else{if(f===h-1){if(e.patternMatchVariance(u,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return new Int32Array([s,l]);s+=u[0]+u[1],tR.arraycopy(u,2,u,0,f-1),u[f-1]=0,u[f]=0,f--}else f++;u[f]=1,d=!d}return f===h-1&&e.patternMatchVariance(u,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE?new Int32Array([s,l-1]):null},e.patternMatchVariance=function(e,t,n){for(var r=e.length,i=0,o=0,a=0;a<r;a++)i+=e[a],o+=t[a];if(i<o)return 1/0;var u=i/o;n*=u;for(var s=0,c=0;c<r;c++){var l=e[c],f=t[c]*u,h=l>f?l-f:f-l;if(h>n)return 1/0;s+=h}return s/i},e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),e.MAX_AVG_VARIANCE=.42,e.MAX_INDIVIDUAL_VARIANCE=.8,e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),e.MAX_PIXEL_DRIFT=3,e.MAX_PATTERN_DRIFT=5,e.SKIPPED_ROW_COUNT_MAX=25,e.ROW_STEP=5,e.BARCODE_MIN_HEIGHT=10,e}(),jM=function(){function e(e,t){if(0===t.length)throw new QN;this.field=e;var n=t.length;if(n>1&&0===t[0]){for(var r=1;r<n&&0===t[r];)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),tR.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return e.prototype.getCoefficients=function(){return this.coefficients},e.prototype.getDegree=function(){return this.coefficients.length-1},e.prototype.isZero=function(){return 0===this.coefficients[0]},e.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},e.prototype.evaluateAt=function(e){var t,n;if(0===e)return this.getCoefficient(0);if(1===e){var r=0;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.coefficients),o=i.next();!o.done;o=i.next()){var a=o.value;r=this.field.add(r,a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}for(var u=this.coefficients[0],s=this.coefficients.length,c=1;c<s;c++)u=this.field.add(this.field.multiply(e,u),this.coefficients[c]);return u},e.prototype.add=function(t){if(!this.field.equals(t.field))throw new QN("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;var n=this.coefficients,r=t.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),a=r.length-n.length;tR.arraycopy(r,0,o,0,a);for(var u=a;u<r.length;u++)o[u]=this.field.add(n[u-a],r[u]);return new e(this.field,o)},e.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new QN("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},e.prototype.multiply=function(t){return t instanceof e?this.multiplyOther(t):this.multiplyScalar(t)},e.prototype.multiplyOther=function(t){if(!this.field.equals(t.field))throw new QN("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new e(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,i=t.coefficients,o=i.length,a=new Int32Array(r+o-1),u=0;u<r;u++)for(var s=n[u],c=0;c<o;c++)a[u+c]=this.field.add(a[u+c],this.field.multiply(s,i[c]));return new e(this.field,a)},e.prototype.negative=function(){for(var t=this.coefficients.length,n=new Int32Array(t),r=0;r<t;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new e(this.field,n)},e.prototype.multiplyScalar=function(t){if(0===t)return new e(this.field,new Int32Array([0]));if(1===t)return this;for(var n=this.coefficients.length,r=new Int32Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new e(this.field,r)},e.prototype.multiplyByMonomial=function(t,n){if(t<0)throw new QN;if(0===n)return new e(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+t),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],n);return new e(this.field,i)},e.prototype.toString=function(){for(var e=new bR,t=this.getDegree();t>=0;t--){var n=this.getCoefficient(t);0!==n&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),0!==t&&1===n||e.append(n),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},e}(),UM=function(){function e(){}return e.prototype.add=function(e,t){return(e+t)%this.modulus},e.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},e.prototype.exp=function(e){return this.expTable[e]},e.prototype.log=function(e){if(0===e)throw new QN;return this.logTable[e]},e.prototype.inverse=function(e){if(0===e)throw new qR;return this.expTable[this.modulus-this.logTable[e]-1]},e.prototype.multiply=function(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},e.prototype.getSize=function(){return this.modulus},e.prototype.equals=function(e){return e===this},e}(),VM=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),zM=function(e){function t(t,n){var r=e.call(this)||this;r.modulus=t,r.expTable=new Int32Array(t),r.logTable=new Int32Array(t);for(var i=1,o=0;o<t;o++)r.expTable[o]=i,i=i*n%t;for(o=0;o<t-1;o++)r.logTable[r.expTable[o]]=o;return r.zero=new jM(r,new Int32Array([0])),r.one=new jM(r,new Int32Array([1])),r}return VM(t,e),t.prototype.getZero=function(){return this.zero},t.prototype.getOne=function(){return this.one},t.prototype.buildMonomial=function(e,t){if(e<0)throw new QN;if(0===t)return this.zero;var n=new Int32Array(e+1);return n[0]=t,new jM(this,n)},t.PDF417_GF=new t(MM.NUMBER_OF_CODEWORDS,3),t}(UM),HM=function(){function e(){this.field=zM.PDF417_GF}return e.prototype.decode=function(e,t,n){for(var r,i,o=new jM(this.field,e),a=new Int32Array(t),u=!1,s=t;s>0;s--){var c=o.evaluateAt(this.field.exp(s));a[t-s]=c,0!==c&&(u=!0)}if(!u)return 0;var l=this.field.getOne();if(null!=n)try{for(var f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),h=f.next();!h.done;h=f.next()){var d=h.value,p=this.field.exp(e.length-1-d),v=new jM(this.field,new Int32Array([this.field.subtract(0,p),1]));l=l.multiply(v)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}var m=new jM(this.field,a),y=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),m,t),g=y[0],w=y[1],b=this.findErrorLocations(g),k=this.findErrorMagnitudes(w,g,b);for(s=0;s<b.length;s++){var _=e.length-1-this.field.log(b[s]);if(_<0)throw $N.getChecksumInstance();e[_]=this.field.subtract(e[_],k[s])}return b.length},e.prototype.runEuclideanAlgorithm=function(e,t,n){if(e.getDegree()<t.getDegree()){var r=e;e=t,t=r}for(var i=e,o=t,a=this.field.getZero(),u=this.field.getOne();o.getDegree()>=Math.round(n/2);){var s=i,c=a;if(a=u,(i=o).isZero())throw $N.getChecksumInstance();o=s;for(var l=this.field.getZero(),f=i.getCoefficient(i.getDegree()),h=this.field.inverse(f);o.getDegree()>=i.getDegree()&&!o.isZero();){var d=o.getDegree()-i.getDegree(),p=this.field.multiply(o.getCoefficient(o.getDegree()),h);l=l.add(this.field.buildMonomial(d,p)),o=o.subtract(i.multiplyByMonomial(d,p))}u=l.multiply(a).subtract(c).negative()}var v=u.getCoefficient(0);if(0===v)throw $N.getChecksumInstance();var m=this.field.inverse(v);return[u.multiply(m),o.multiply(m)]},e.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),n=new Int32Array(t),r=0,i=1;i<this.field.getSize()&&r<t;i++)0===e.evaluateAt(i)&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw $N.getChecksumInstance();return n},e.prototype.findErrorMagnitudes=function(e,t,n){for(var r=t.getDegree(),i=new Int32Array(r),o=1;o<=r;o++)i[r-o]=this.field.multiply(o,t.getCoefficient(o));var a=new jM(this.field,i),u=n.length,s=new Int32Array(u);for(o=0;o<u;o++){var c=this.field.inverse(n[o]),l=this.field.subtract(0,e.evaluateAt(c)),f=this.field.inverse(a.evaluateAt(c));s[o]=this.field.multiply(l,f)}return s},e}(),GM=function(){function e(t,n,r,i,o){t instanceof e?this.constructor_2(t):this.constructor_1(t,n,r,i,o)}return e.prototype.constructor_1=function(e,t,n,r,i){var o=null==t||null==n,a=null==r||null==i;if(o&&a)throw new ER;o?(t=new rD(0,r.getY()),n=new rD(0,i.getY())):a&&(r=new rD(e.getWidth()-1,t.getY()),i=new rD(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))},e.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},e.merge=function(t,n){return null==t?n:null==n?t:new e(t.image,t.topLeft,t.bottomLeft,n.topRight,n.bottomRight)},e.prototype.addMissingRows=function(t,n,r){var i=this.topLeft,o=this.bottomLeft,a=this.topRight,u=this.bottomRight;if(t>0){var s=r?this.topLeft:this.topRight,c=Math.trunc(s.getY()-t);c<0&&(c=0);var l=new rD(s.getX(),c);r?i=l:a=l}if(n>0){var f=r?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+n);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var d=new rD(f.getX(),h);r?o=d:u=d}return new e(this.image,i,o,a,u)},e.prototype.getMinX=function(){return this.minX},e.prototype.getMaxX=function(){return this.maxX},e.prototype.getMinY=function(){return this.minY},e.prototype.getMaxY=function(){return this.maxY},e.prototype.getTopLeft=function(){return this.topLeft},e.prototype.getTopRight=function(){return this.topRight},e.prototype.getBottomLeft=function(){return this.bottomLeft},e.prototype.getBottomRight=function(){return this.bottomRight},e}(),WM=function(){function e(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}return e.prototype.getColumnCount=function(){return this.columnCount},e.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},e.prototype.getRowCount=function(){return this.rowCount},e.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},e.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},e}(),qM=function(){function e(){this.buffer=""}return e.form=function(e,t){var n=-1;return e.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,(function(e,r,i,o,a,u){if("%%"===e)return"%";if(void 0!==t[++n]){e=o?parseInt(o.substr(1)):void 0;var s,c=a?parseInt(a.substr(1)):void 0;switch(u){case"s":s=t[n];break;case"c":s=t[n][0];break;case"f":s=parseFloat(t[n]).toFixed(e);break;case"p":s=parseFloat(t[n]).toPrecision(e);break;case"e":s=parseFloat(t[n]).toExponential(e);break;case"x":s=parseInt(t[n]).toString(c||16);break;case"d":s=parseFloat(parseInt(t[n],c||10).toPrecision(e)).toFixed(0)}s="object"==typeof s?JSON.stringify(s):(+s).toString(c);for(var l=parseInt(i),f=i&&i[0]+""=="0"?"0":" ";s.length<l;)s=void 0!==r?s+f:f+s;return s}}))},e.prototype.format=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=e.form(t,n)},e.prototype.toString=function(){return this.buffer},e}(),KM=function(){function e(e){this.boundingBox=new GM(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return e.prototype.getCodewordNearby=function(t){var n=this.getCodeword(t);if(null!=n)return n;for(var r=1;r<e.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&null!=(n=this.codewords[i]))return n;if((i=this.imageRowToCodewordIndex(t)+r)<this.codewords.length&&null!=(n=this.codewords[i]))return n}return null},e.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},e.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},e.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.getCodewords=function(){return this.codewords},e.prototype.toString=function(){var e,t,n=new qM,r=0;try{for(var i=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.codewords),o=i.next();!o.done;o=i.next()){var a=o.value;null!=a?n.format("%3d: %3d|%3d%n",r++,a.getRowNumber(),a.getValue()):n.format("%3d:    |   %n",r++)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n.toString()},e.MAX_NEARBY_DISTANCE=5,e}(),XM=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},YM=function(){function e(){this.values=new Map}return e.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)},e.prototype.getValue=function(){var e,t,n=-1,r=new Array,i=function(e,t){var i=function(){return e},o=function(){return t};o()>n?(n=o(),(r=[]).push(i())):o()===n&&r.push(i())};try{for(var o=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.values.entries()),a=o.next();!a.done;a=o.next()){var u=XM(a.value,2);i(u[0],u[1])}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return MM.toIntArray(r)},e.prototype.getConfidence=function(e){return this.values.get(e)},e}(),QM=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZM=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},JM=function(e){function t(t,n){var r=e.call(this,t)||this;return r._isLeft=n,r}return QM(t,e),t.prototype.setRowNumbers=function(){var e,t;try{for(var n=ZM(this.getCodewords()),r=n.next();!r.done;r=n.next()){var i=r.value;null!=i&&i.setRowNumberAsRowIndicatorColumn()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},t.prototype.adjustCompleteIndicatorColumnRowNumbers=function(e){var t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);for(var n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=-1,s=1,c=0,l=o;l<a;l++)if(null!=t[l]){var f=t[l],h=f.getRowNumber()-u;if(0===h)c++;else if(1===h)s=Math.max(s,c),c=1,u=f.getRowNumber();else if(h<0||f.getRowNumber()>=e.getRowCount()||h>l)t[l]=null;else{for(var d,p=(d=s>2?(s-2)*h:h)>=l,v=1;v<=d&&!p;v++)p=null!=t[l-v];p?t[l]=null:(u=f.getRowNumber(),c=1)}}},t.prototype.getRowHeights=function(){var e,t,n=this.getBarcodeMetadata();if(null==n)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);var r=new Int32Array(n.getRowCount());try{for(var i=ZM(this.getCodewords()),o=i.next();!o.done;o=i.next()){var a=o.value;if(null!=a){var u=a.getRowNumber();if(u>=r.length)continue;r[u]++}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r},t.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(e){for(var t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.getCodewords(),u=-1,s=i;s<o;s++)if(null!=a[s]){var c=a[s];c.setRowNumberAsRowIndicatorColumn();var l=c.getRowNumber()-u;0===l||(1===l?u=c.getRowNumber():c.getRowNumber()>=e.getRowCount()?a[s]=null:u=c.getRowNumber())}},t.prototype.getBarcodeMetadata=function(){var e,t,n=this.getCodewords(),r=new YM,i=new YM,o=new YM,a=new YM;try{for(var u=ZM(n),s=u.next();!s.done;s=u.next()){var c=s.value;if(null!=c){c.setRowNumberAsRowIndicatorColumn();var l=c.getValue()%30,f=c.getRowNumber();switch(this._isLeft||(f+=2),f%3){case 0:i.setValue(3*l+1);break;case 1:a.setValue(l/3),o.setValue(l%3);break;case 2:r.setValue(l+1)}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}if(0===r.getValue().length||0===i.getValue().length||0===o.getValue().length||0===a.getValue().length||r.getValue()[0]<1||i.getValue()[0]+o.getValue()[0]<MM.MIN_ROWS_IN_BARCODE||i.getValue()[0]+o.getValue()[0]>MM.MAX_ROWS_IN_BARCODE)return null;var h=new WM(r.getValue()[0],i.getValue()[0],o.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(n,h),h},t.prototype.removeIncorrectCodewords=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(null!=e[n]){var i=r.getValue()%30,o=r.getRowNumber();if(o>t.getRowCount())e[n]=null;else switch(this._isLeft||(o+=2),o%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:Math.trunc(i/3)===t.getErrorCorrectionLevel()&&i%3===t.getRowCountLowerPart()||(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null)}}}},t.prototype.isLeft=function(){return this._isLeft},t.prototype.toString=function(){return"IsLeft: "+this._isLeft+"\n"+e.prototype.toString.call(this)},t}(KM),$M=function(){function e(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return e.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e,t=MM.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns},e.prototype.adjustIndicatorColumnRowNumbers=function(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},e.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(0===e)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var n=this.detectionResultColumns[t].getCodewords(),r=0;r<n.length;r++)null!=n[r]&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n));return e},e.prototype.adjustRowNumbersByRow=function(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()},e.prototype.adjustRowNumbersFromBothRI=function(){if(null!=this.detectionResultColumns[0]&&null!=this.detectionResultColumns[this.barcodeColumnCount+1])for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(null!=e[n]&&null!=t[n]&&e[n].getRowNumber()===t[n].getRowNumber())for(var r=1;r<=this.barcodeColumnCount;r++){var i=this.detectionResultColumns[r].getCodewords()[n];null!=i&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}},e.prototype.adjustRowNumbersFromRRI=function(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;for(var t=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var i=n[r].getRowNumber(),o=0,a=this.barcodeColumnCount+1;a>0&&o<this.ADJUST_ROW_NUMBER_SKIP;a--){var u=this.detectionResultColumns[a].getCodewords()[r];null!=u&&(o=e.adjustRowNumberIfValid(i,o,u),u.hasValidRowNumber()||t++)}return t},e.prototype.adjustRowNumbersFromLRI=function(){if(null==this.detectionResultColumns[0])return 0;for(var t=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(null!=n[r])for(var i=n[r].getRowNumber(),o=0,a=1;a<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;a++){var u=this.detectionResultColumns[a].getCodewords()[r];null!=u&&(o=e.adjustRowNumberIfValid(i,o,u),u.hasValidRowNumber()||t++)}return t},e.adjustRowNumberIfValid=function(e,t,n){return null==n||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t},e.prototype.adjustRowNumbers=function(t,n,r){var i,o,a=r[n],u=this.detectionResultColumns[t-1].getCodewords(),s=u;null!=this.detectionResultColumns[t+1]&&(s=this.detectionResultColumns[t+1].getCodewords());var c=new Array(14);c[2]=u[n],c[3]=s[n],n>0&&(c[0]=r[n-1],c[4]=u[n-1],c[5]=s[n-1]),n>1&&(c[8]=r[n-2],c[10]=u[n-2],c[11]=s[n-2]),n<r.length-1&&(c[1]=r[n+1],c[6]=u[n+1],c[7]=s[n+1]),n<r.length-2&&(c[9]=r[n+2],c[12]=u[n+2],c[13]=s[n+2]);try{for(var l=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(c),f=l.next();!f.done;f=l.next()){var h=f.value;if(e.adjustRowNumber(a,h))return}}catch(e){i={error:e}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}},e.adjustRowNumber=function(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)},e.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},e.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},e.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},e.prototype.setBoundingBox=function(e){this.boundingBox=e},e.prototype.getBoundingBox=function(){return this.boundingBox},e.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},e.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},e.prototype.toString=function(){var e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new qM,n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(var r=0;r<this.barcodeColumnCount+2;r++)if(null!=this.detectionResultColumns[r]){var i=this.detectionResultColumns[r].getCodewords()[n];null!=i?t.format(" %3d|%3d",i.getRowNumber(),i.getValue()):t.format("    |   ")}else t.format("    |   ");t.format("%n")}return t.toString()},e}(),eL=function(){function e(t,n,r,i){this.rowNumber=e.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return e.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},e.prototype.isValidRowNumber=function(t){return t!==e.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3},e.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))},e.prototype.getWidth=function(){return this.endX-this.startX},e.prototype.getStartX=function(){return this.startX},e.prototype.getEndX=function(){return this.endX},e.prototype.getBucket=function(){return this.bucket},e.prototype.getValue=function(){return this.value},e.prototype.getRowNumber=function(){return this.rowNumber},e.prototype.setRowNumber=function(e){this.rowNumber=e},e.prototype.toString=function(){return this.rowNumber+"|"+this.value},e.BARCODE_ROW_UNKNOWN=-1,e}(),tL=function(){function e(){}return e.initialize=function(){for(var t=0;t<MM.SYMBOL_TABLE.length;t++)for(var n=MM.SYMBOL_TABLE[t],r=1&n,i=0;i<MM.BARS_IN_MODULE;i++){for(var o=0;(1&n)===r;)o+=1,n>>=1;r=1&n,e.RATIOS_TABLE[t]||(e.RATIOS_TABLE[t]=new Array(MM.BARS_IN_MODULE)),e.RATIOS_TABLE[t][MM.BARS_IN_MODULE-i-1]=Math.fround(o/MM.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},e.getDecodedValue=function(t){var n=e.getDecodedCodewordValue(e.sampleBitCounts(t));return-1!==n?n:e.getClosestDecodedValue(t)},e.sampleBitCounts=function(e){for(var t=tD.sum(e),n=new Int32Array(MM.BARS_IN_MODULE),r=0,i=0,o=0;o<MM.MODULES_IN_CODEWORD;o++){var a=t/(2*MM.MODULES_IN_CODEWORD)+o*t/MM.MODULES_IN_CODEWORD;i+e[r]<=a&&(i+=e[r],r++),n[r]++}return n},e.getDecodedCodewordValue=function(t){var n=e.getBitValue(t);return-1===MM.getCodeword(n)?-1:n},e.getBitValue=function(e){for(var t=0,n=0;n<e.length;n++)for(var r=0;r<e[n];r++)t=t<<1|(n%2==0?1:0);return Math.trunc(t)},e.getClosestDecodedValue=function(t){var n=tD.sum(t),r=new Array(MM.BARS_IN_MODULE);if(n>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(t[i]/n);var o=nD.MAX_VALUE,a=-1;this.bSymbolTableReady||e.initialize();for(var u=0;u<e.RATIOS_TABLE.length;u++){for(var s=0,c=e.RATIOS_TABLE[u],l=0;l<MM.BARS_IN_MODULE;l++){var f=Math.fround(c[l]-r[l]);if((s+=Math.fround(f*f))>=o)break}s<o&&(o=s,a=MM.SYMBOL_TABLE[u])}return a},e.bSymbolTableReady=!1,e.RATIOS_TABLE=new Array(MM.SYMBOL_TABLE.length).map((function(e){return new Array(MM.BARS_IN_MODULE)})),e}(),nL=function(){function e(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return e.prototype.getSegmentIndex=function(){return this.segmentIndex},e.prototype.setSegmentIndex=function(e){this.segmentIndex=e},e.prototype.getFileId=function(){return this.fileId},e.prototype.setFileId=function(e){this.fileId=e},e.prototype.getOptionalData=function(){return this.optionalData},e.prototype.setOptionalData=function(e){this.optionalData=e},e.prototype.isLastSegment=function(){return this.lastSegment},e.prototype.setLastSegment=function(e){this.lastSegment=e},e.prototype.getSegmentCount=function(){return this.segmentCount},e.prototype.setSegmentCount=function(e){this.segmentCount=e},e.prototype.getSender=function(){return this.sender||null},e.prototype.setSender=function(e){this.sender=e},e.prototype.getAddressee=function(){return this.addressee||null},e.prototype.setAddressee=function(e){this.addressee=e},e.prototype.getFileName=function(){return this.fileName},e.prototype.setFileName=function(e){this.fileName=e},e.prototype.getFileSize=function(){return this.fileSize},e.prototype.setFileSize=function(e){this.fileSize=e},e.prototype.getChecksum=function(){return this.checksum},e.prototype.setChecksum=function(e){this.checksum=e},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.setTimestamp=function(e){this.timestamp=e},e}(),rL=function(){function e(){}return e.parseLong=function(e,t){return void 0===t&&(t=void 0),parseInt(e,t)},e}(),iL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),oL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return iL(t,e),t.kind="NullPointerException",t}(qN),aL=function(){function e(){}return e.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},e.prototype.writeBytesOffset=function(e,t,n){if(null==e)throw new oL;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new rR;if(0!==n)for(var r=0;r<n;r++)this.write(e[t+r])},e.prototype.flush=function(){},e.prototype.close=function(){},e}(),uL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return uL(t,e),t}(qN),cL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lL=function(e){function t(t){void 0===t&&(t=32);var n=e.call(this)||this;if(n.count=0,t<0)throw new QN("Negative initial size: "+t);return n.buf=new Uint8Array(t),n}return cL(t,e),t.prototype.ensureCapacity=function(e){e-this.buf.length>0&&this.grow(e)},t.prototype.grow=function(e){var t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new sL;t=uR.MAX_VALUE}this.buf=aR.copyOfUint8Array(this.buf,t)},t.prototype.write=function(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1},t.prototype.writeBytesOffset=function(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new rR;this.ensureCapacity(this.count+n),tR.arraycopy(e,t,this.buf,this.count,n),this.count+=n},t.prototype.writeTo=function(e){e.writeBytesOffset(this.buf,0,this.count)},t.prototype.reset=function(){this.count=0},t.prototype.toByteArray=function(){return aR.copyOfUint8Array(this.buf,this.count)},t.prototype.size=function(){return this.count},t.prototype.toString=function(e){return e?"string"==typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()},t.prototype.toString_void=function(){return new String(this.buf).toString()},t.prototype.toString_string=function(e){return new String(this.buf).toString()},t.prototype.toString_number=function(e){return new String(this.buf).toString()},t.prototype.close=function(){},t}(aL);function fL(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof n.g)return n.g.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}function hL(e){if(void 0===wM&&(wM=fL()),null===wM)throw new Error("BigInt is not supported!");return wM(e)}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(gM||(gM={}));var dL=function(){function e(){}return e.decode=function(t,n){var r=new bR(""),i=vR.ISO8859_1;r.enableDecoding(i);for(var o=1,a=t[o++],u=new nL;o<t[0];){switch(a){case e.TEXT_COMPACTION_MODE_LATCH:o=e.textCompaction(t,o,r);break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:o=e.byteCompaction(a,t,i,o,r);break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[o++]);break;case e.NUMERIC_COMPACTION_MODE_LATCH:o=e.numericCompaction(t,o,r);break;case e.ECI_CHARSET:vR.getCharacterSetECIByValue(t[o++]);break;case e.ECI_GENERAL_PURPOSE:o+=2;break;case e.ECI_USER_DEFINED:o++;break;case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=e.decodeMacroBlock(t,o,u);break;case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:throw new hR;default:o--,o=e.textCompaction(t,o,r)}if(!(o<t.length))throw hR.getFormatInstance();a=t[o++]}if(0===r.length())throw hR.getFormatInstance();var s=new zR(null,r.toString(),null,n);return s.setOther(u),s},e.decodeMacroBlock=function(t,n,r){if(n+e.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw hR.getFormatInstance();for(var i=new Int32Array(e.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<e.NUMBER_OF_SEQUENCE_CODEWORDS;o++,n++)i[o]=t[n];r.setSegmentIndex(uR.parseInt(e.decodeBase900toBase10(i,e.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new bR;n=e.textCompaction(t,n,a),r.setFileId(a.toString());var u=-1;for(t[n]===e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(u=n+1);n<t[0];)switch(t[n]){case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++n]){case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var s=new bR;n=e.textCompaction(t,n+1,s),r.setFileName(s.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var c=new bR;n=e.textCompaction(t,n+1,c),r.setSender(c.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var l=new bR;n=e.textCompaction(t,n+1,l),r.setAddressee(l.toString());break;case e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new bR;n=e.numericCompaction(t,n+1,f),r.setSegmentCount(uR.parseInt(f.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new bR;n=e.numericCompaction(t,n+1,h),r.setTimestamp(rL.parseLong(h.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var d=new bR;n=e.numericCompaction(t,n+1,d),r.setChecksum(uR.parseInt(d.toString()));break;case e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new bR;n=e.numericCompaction(t,n+1,p),r.setFileSize(rL.parseLong(p.toString()));break;default:throw hR.getFormatInstance()}break;case e.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw hR.getFormatInstance()}if(-1!==u){var v=n-u;r.isLastSegment()&&v--,r.setOptionalData(aR.copyOfRange(t,u,u+v))}return n},e.textCompaction=function(t,n,r){for(var i=new Int32Array(2*(t[0]-n)),o=new Int32Array(2*(t[0]-n)),a=0,u=!1;n<t[0]&&!u;){var s=t[n++];if(s<e.TEXT_COMPACTION_MODE_LATCH)i[a]=s/30,i[a+1]=s%30,a+=2;else switch(s){case e.TEXT_COMPACTION_MODE_LATCH:i[a++]=e.TEXT_COMPACTION_MODE_LATCH;break;case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,u=!0;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[a]=e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,s=t[n++],o[a]=s,a++}}return e.decodeTextCompaction(i,o,a,r),n},e.decodeTextCompaction=function(t,n,r,i){for(var o=gM.ALPHA,a=gM.ALPHA,u=0;u<r;){var s=t[u],c="";switch(o){case gM.ALPHA:if(s<26)c=String.fromCharCode(65+s);else switch(s){case 26:c=" ";break;case e.LL:o=gM.LOWER;break;case e.ML:o=gM.MIXED;break;case e.PS:a=o,o=gM.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case e.TEXT_COMPACTION_MODE_LATCH:o=gM.ALPHA}break;case gM.LOWER:if(s<26)c=String.fromCharCode(97+s);else switch(s){case 26:c=" ";break;case e.AS:a=o,o=gM.ALPHA_SHIFT;break;case e.ML:o=gM.MIXED;break;case e.PS:a=o,o=gM.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case e.TEXT_COMPACTION_MODE_LATCH:o=gM.ALPHA}break;case gM.MIXED:if(s<e.PL)c=e.MIXED_CHARS[s];else switch(s){case e.PL:o=gM.PUNCT;break;case 26:c=" ";break;case e.LL:o=gM.LOWER;break;case e.AL:o=gM.ALPHA;break;case e.PS:a=o,o=gM.PUNCT_SHIFT;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case e.TEXT_COMPACTION_MODE_LATCH:o=gM.ALPHA}break;case gM.PUNCT:if(s<e.PAL)c=e.PUNCT_CHARS[s];else switch(s){case e.PAL:o=gM.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case e.TEXT_COMPACTION_MODE_LATCH:o=gM.ALPHA}break;case gM.ALPHA_SHIFT:if(o=a,s<26)c=String.fromCharCode(65+s);else switch(s){case 26:c=" ";break;case e.TEXT_COMPACTION_MODE_LATCH:o=gM.ALPHA}break;case gM.PUNCT_SHIFT:if(o=a,s<e.PAL)c=e.PUNCT_CHARS[s];else switch(s){case e.PAL:o=gM.ALPHA;break;case e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case e.TEXT_COMPACTION_MODE_LATCH:o=gM.ALPHA}}""!==c&&i.append(c),u++}},e.byteCompaction=function(t,n,r,i,o){var a=new lL,u=0,s=0,c=!1;switch(t){case e.BYTE_COMPACTION_MODE_LATCH:for(var l=new Int32Array(6),f=n[i++];i<n[0]&&!c;)switch(l[u++]=f,s=900*s+f,f=n[i++]){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:i--,c=!0;break;default:if(u%5==0&&u>0){for(var h=0;h<6;++h)a.write(Number(hL(s)>>hL(8*(5-h))));s=0,u=0}}i===n[0]&&f<e.TEXT_COMPACTION_MODE_LATCH&&(l[u++]=f);for(var d=0;d<u;d++)a.write(l[d]);break;case e.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!c;){var p=n[i++];if(p<e.TEXT_COMPACTION_MODE_LATCH)u++,s=900*s+p;else switch(p){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.NUMERIC_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:i--,c=!0}if(u%5==0&&u>0){for(h=0;h<6;++h)a.write(Number(hL(s)>>hL(8*(5-h))));s=0,u=0}}}return o.append(gR.decode(a.toByteArray(),r)),i},e.numericCompaction=function(t,n,r){for(var i=0,o=!1,a=new Int32Array(e.MAX_NUMERIC_CODEWORDS);n<t[0]&&!o;){var u=t[n++];if(n===t[0]&&(o=!0),u<e.TEXT_COMPACTION_MODE_LATCH)a[i]=u,i++;else switch(u){case e.TEXT_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH:case e.BYTE_COMPACTION_MODE_LATCH_6:case e.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e.MACRO_PDF417_TERMINATOR:n--,o=!0}(i%e.MAX_NUMERIC_CODEWORDS==0||u===e.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(e.decodeBase900toBase10(a,i)),i=0)}return n},e.decodeBase900toBase10=function(t,n){for(var r=hL(0),i=0;i<n;i++)r+=e.EXP900[n-i-1]*hL(t[i]);var o=r.toString();if("1"!==o.charAt(0))throw new hR;return o.substring(1)},e.TEXT_COMPACTION_MODE_LATCH=900,e.BYTE_COMPACTION_MODE_LATCH=901,e.NUMERIC_COMPACTION_MODE_LATCH=902,e.BYTE_COMPACTION_MODE_LATCH_6=924,e.ECI_USER_DEFINED=925,e.ECI_GENERAL_PURPOSE=926,e.ECI_CHARSET=927,e.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,e.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,e.MACRO_PDF417_TERMINATOR=922,e.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,e.MAX_NUMERIC_CODEWORDS=15,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,e.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,e.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,e.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,e.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,e.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,e.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,e.PL=25,e.LL=27,e.AS=27,e.ML=28,e.AL=28,e.PS=29,e.PAL=29,e.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",e.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",e.EXP900=fL()?function(){var e=[];e[0]=hL(1);var t=hL(900);e[1]=t;for(var n=2;n<16;n++)e[n]=e[n-1]*t;return e}():[],e.NUMBER_OF_SEQUENCE_CODEWORDS=2,e}(),pL=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},vL=function(){function e(){}return e.decode=function(t,n,r,i,o,a,u){for(var s,c=new GM(t,n,r,i,o),l=null,f=null,h=!0;;h=!1){if(null!=n&&(l=e.getRowIndicatorColumn(t,c,n,!0,a,u)),null!=i&&(f=e.getRowIndicatorColumn(t,c,i,!1,a,u)),null==(s=e.merge(l,f)))throw ER.getNotFoundInstance();var d=s.getBoundingBox();if(!h||null==d||!(d.getMinY()<c.getMinY()||d.getMaxY()>c.getMaxY()))break;c=d}s.setBoundingBox(c);var p=s.getBarcodeColumnCount()+1;s.setDetectionResultColumn(0,l),s.setDetectionResultColumn(p,f);for(var v=null!=l,m=1;m<=p;m++){var y=v?m:p-m;if(void 0===s.getDetectionResultColumn(y)){var g=void 0;g=0===y||y===p?new JM(c,0===y):new KM(c),s.setDetectionResultColumn(y,g);for(var w=-1,b=w,k=c.getMinY();k<=c.getMaxY();k++){if((w=e.getStartColumn(s,y,k,v))<0||w>c.getMaxX()){if(-1===b)continue;w=b}var _=e.detectCodeword(t,c.getMinX(),c.getMaxX(),v,w,k,a,u);null!=_&&(g.setCodeword(k,_),b=w,a=Math.min(a,_.getWidth()),u=Math.max(u,_.getWidth()))}}}return e.createDecoderResult(s)},e.merge=function(t,n){if(null==t&&null==n)return null;var r=e.getBarcodeMetadata(t,n);if(null==r)return null;var i=GM.merge(e.adjustBoundingBox(t),e.adjustBoundingBox(n));return new $M(r,i)},e.adjustBoundingBox=function(t){var n,r;if(null==t)return null;var i=t.getRowHeights();if(null==i)return null;var o=e.getMax(i),a=0;try{for(var u=pL(i),s=u.next();!s.done;s=u.next()){var c=s.value;if(a+=o-c,c>0)break}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}for(var l=t.getCodewords(),f=0;a>0&&null==l[f];f++)a--;var h=0;for(f=i.length-1;f>=0&&(h+=o-i[f],!(i[f]>0));f--);for(f=l.length-1;h>0&&null==l[f];f--)h--;return t.getBoundingBox().addMissingRows(a,h,t.isLeft())},e.getMax=function(e){var t,n,r=-1;try{for(var i=pL(e),o=i.next();!o.done;o=i.next()){var a=o.value;r=Math.max(r,a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.getBarcodeMetadata=function(e,t){var n,r;return null==e||null==(n=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(r=t.getBarcodeMetadata())?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n},e.getRowIndicatorColumn=function(t,n,r,i,o,a){for(var u=new JM(n,i),s=0;s<2;s++)for(var c=0===s?1:-1,l=Math.trunc(Math.trunc(r.getX())),f=Math.trunc(Math.trunc(r.getY()));f<=n.getMaxY()&&f>=n.getMinY();f+=c){var h=e.detectCodeword(t,0,t.getWidth(),i,l,f,o,a);null!=h&&(u.setCodeword(f,h),l=i?h.getStartX():h.getEndX())}return u},e.adjustCodewordCount=function(t,n){var r=n[0][1],i=r.getValue(),o=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-e.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===i.length){if(o<1||o>MM.MAX_CODEWORDS_IN_BARCODE)throw ER.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},e.createDecoderResult=function(t){var n=e.createBarcodeMatrix(t);e.adjustCodewordCount(t,n);for(var r=new Array,i=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),o=[],a=new Array,u=0;u<t.getBarcodeRowCount();u++)for(var s=0;s<t.getBarcodeColumnCount();s++){var c=n[u][s+1].getValue(),l=u*t.getBarcodeColumnCount()+s;0===c.length?r.push(l):1===c.length?i[l]=c[0]:(a.push(l),o.push(c))}for(var f=new Array(o.length),h=0;h<f.length;h++)f[h]=o[h];return e.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),i,MM.toIntArray(r),MM.toIntArray(a),f)},e.createDecoderResultFromAmbiguousValues=function(t,n,r,i,o){for(var a=new Int32Array(i.length),u=100;u-- >0;){for(var s=0;s<a.length;s++)n[i[s]]=o[s][a[s]];try{return e.decodeCodewords(n,t,r)}catch(e){if(!(e instanceof $N))throw e}if(0===a.length)throw $N.getChecksumInstance();for(s=0;s<a.length;s++){if(a[s]<o[s].length-1){a[s]++;break}if(a[s]=0,s===a.length-1)throw $N.getChecksumInstance()}}throw $N.getChecksumInstance()},e.createBarcodeMatrix=function(e){for(var t,n,r,i,o=Array.from({length:e.getBarcodeRowCount()},(function(){return new Array(e.getBarcodeColumnCount()+2)})),a=0;a<o.length;a++)for(var u=0;u<o[a].length;u++)o[a][u]=new YM;var s=0;try{for(var c=pL(e.getDetectionResultColumns()),l=c.next();!l.done;l=c.next()){var f=l.value;if(null!=f)try{for(var h=(r=void 0,pL(f.getCodewords())),d=h.next();!d.done;d=h.next()){var p=d.value;if(null!=p){var v=p.getRowNumber();if(v>=0){if(v>=o.length)continue;o[v][s].setValue(p.getValue())}}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}s++}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return o},e.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},e.getStartColumn=function(t,n,r,i){var o,a,u=i?1:-1,s=null;if(e.isValidBarcodeColumn(t,n-u)&&(s=t.getDetectionResultColumn(n-u).getCodeword(r)),null!=s)return i?s.getEndX():s.getStartX();if(null!=(s=t.getDetectionResultColumn(n).getCodewordNearby(r)))return i?s.getStartX():s.getEndX();if(e.isValidBarcodeColumn(t,n-u)&&(s=t.getDetectionResultColumn(n-u).getCodewordNearby(r)),null!=s)return i?s.getEndX():s.getStartX();for(var c=0;e.isValidBarcodeColumn(t,n-u);){n-=u;try{for(var l=(o=void 0,pL(t.getDetectionResultColumn(n).getCodewords())),f=l.next();!f.done;f=l.next()){var h=f.value;if(null!=h)return(i?h.getEndX():h.getStartX())+u*c*(h.getEndX()-h.getStartX())}}catch(e){o={error:e}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}c++}return i?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()},e.detectCodeword=function(t,n,r,i,o,a,u,s){o=e.adjustCodewordStartColumn(t,n,r,i,o,a);var c,l=e.getModuleBitCount(t,n,r,i,o,a);if(null==l)return null;var f=tD.sum(l);if(i)c=o+f;else{for(var h=0;h<l.length/2;h++){var d=l[h];l[h]=l[l.length-1-h],l[l.length-1-h]=d}o=(c=o)-f}if(!e.checkCodewordSkew(f,u,s))return null;var p=tL.getDecodedValue(l),v=MM.getCodeword(p);return-1===v?null:new eL(o,c,e.getCodewordBucketNumber(p),v)},e.getModuleBitCount=function(e,t,n,r,i,o){for(var a=i,u=new Int32Array(8),s=0,c=r?1:-1,l=r;(r?a<n:a>=t)&&s<u.length;)e.get(a,o)===l?(u[s]++,a+=c):(s++,l=!l);return s===u.length||a===(r?n:t)&&s===u.length-1?u:null},e.getNumberOfECCodeWords=function(e){return 2<<e},e.adjustCodewordStartColumn=function(t,n,r,i,o,a){for(var u=o,s=i?-1:1,c=0;c<2;c++){for(;(i?u>=n:u<r)&&i===t.get(u,a);){if(Math.abs(o-u)>e.CODEWORD_SKEW_SIZE)return o;u+=s}s=-s,i=!i}return u},e.checkCodewordSkew=function(t,n,r){return n-e.CODEWORD_SKEW_SIZE<=t&&t<=r+e.CODEWORD_SKEW_SIZE},e.decodeCodewords=function(t,n,r){if(0===t.length)throw hR.getFormatInstance();var i=1<<n+1,o=e.correctErrors(t,r,i);e.verifyCodewordCount(t,i);var a=dL.decode(t,""+n);return a.setErrorsCorrected(o),a.setErasures(r.length),a},e.correctErrors=function(t,n,r){if(null!=n&&n.length>r/2+e.MAX_ERRORS||r<0||r>e.MAX_EC_CODEWORDS)throw $N.getChecksumInstance();return e.errorCorrection.decode(t,r,n)},e.verifyCodewordCount=function(e,t){if(e.length<4)throw hR.getFormatInstance();var n=e[0];if(n>e.length)throw hR.getFormatInstance();if(0===n){if(!(t<e.length))throw hR.getFormatInstance();e[0]=e.length-t}},e.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),n=0,r=t.length-1;!((1&e)!==n&&(n=1&e,--r<0));)t[r]++,e>>=1;return t},e.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},e.getCodewordBucketNumber_number=function(t){return e.getCodewordBucketNumber(e.getBitCountForCodeword(t))},e.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},e.toString=function(e){for(var t=new qM,n=0;n<e.length;n++){t.format("Row %2d: ",n);for(var r=0;r<e[n].length;r++){var i=e[n][r];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()},e.CODEWORD_SKEW_SIZE=2,e.MAX_ERRORS=3,e.MAX_EC_CODEWORDS=512,e.errorCorrection=new HM,e}(),mL=function(){function e(){}return e.prototype.decode=function(t,n){void 0===n&&(n=null);var r=e.decode(t,n,!1);if(null==r||0===r.length||null==r[0])throw ER.getNotFoundInstance();return r[0]},e.prototype.decodeMultiple=function(t,n){void 0===n&&(n=null);try{return e.decode(t,n,!0)}catch(e){if(e instanceof hR||e instanceof $N)throw ER.getNotFoundInstance();throw e}},e.decode=function(t,n,r){var i,o,a=new Array,u=FM.detectMultiple(t,n,r);try{for(var s=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(u.getPoints()),c=s.next();!c.done;c=s.next()){var l=c.value,f=vL.decode(u.getBits(),l[4],l[5],l[6],l[7],e.getMinCodewordWidth(l),e.getMaxCodewordWidth(l)),h=new BR(f.getText(),f.getRawBytes(),void 0,l,jR.PDF_417);h.putMetadata(VR.ERROR_CORRECTION_LEVEL,f.getECLevel());var d=f.getOther();null!=d&&h.putMetadata(VR.PDF417_EXTRA_METADATA,d),a.push(h)}}catch(e){i={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return a.map((function(e){return e}))},e.getMaxWidth=function(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMinWidth=function(e,t){return null==e||null==t?uR.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},e.getMaxCodewordWidth=function(t){return Math.floor(Math.max(Math.max(e.getMaxWidth(t[0],t[4]),e.getMaxWidth(t[6],t[2])*MM.MODULES_IN_CODEWORD/MM.MODULES_IN_STOP_PATTERN),Math.max(e.getMaxWidth(t[1],t[5]),e.getMaxWidth(t[7],t[3])*MM.MODULES_IN_CODEWORD/MM.MODULES_IN_STOP_PATTERN)))},e.getMinCodewordWidth=function(t){return Math.floor(Math.min(Math.min(e.getMinWidth(t[0],t[4]),e.getMinWidth(t[6],t[2])*MM.MODULES_IN_CODEWORD/MM.MODULES_IN_STOP_PATTERN),Math.min(e.getMinWidth(t[1],t[5]),e.getMinWidth(t[7],t[3])*MM.MODULES_IN_CODEWORD/MM.MODULES_IN_STOP_PATTERN)))},e.prototype.reset=function(){},e}(),yL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return yL(t,e),t.kind="ReaderException",t}(qN),wL=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},bL=function(){function e(){}return e.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},e.prototype.decodeWithState=function(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)},e.prototype.setHints=function(e){this.hints=e;var t=null!=e&&void 0!==e.get(lR.TRY_HARDER),n=null==e?null:e.get(lR.POSSIBLE_FORMATS),r=new Array;if(null!=n){var i=n.some((function(e){return e===jR.UPC_A||e===jR.UPC_E||e===jR.EAN_13||e===jR.EAN_8||e===jR.CODABAR||e===jR.CODE_39||e===jR.CODE_93||e===jR.CODE_128||e===jR.ITF||e===jR.RSS_14||e===jR.RSS_EXPANDED}));i&&!t&&r.push(new HP(e)),n.includes(jR.QR_CODE)&&r.push(new PM),n.includes(jR.DATA_MATRIX)&&r.push(new iM),n.includes(jR.AZTEC)&&r.push(new vD),n.includes(jR.PDF_417)&&r.push(new mL),i&&t&&r.push(new HP(e))}0===r.length&&(t||r.push(new HP(e)),r.push(new PM),r.push(new iM),r.push(new vD),r.push(new mL),t&&r.push(new HP(e))),this.readers=r},e.prototype.reset=function(){var e,t;if(null!==this.readers)try{for(var n=wL(this.readers),r=n.next();!r.done;r=n.next())r.value.reset()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.decodeInternal=function(e){var t,n;if(null===this.readers)throw new gL("No readers where selected, nothing can be read.");try{for(var r=wL(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;try{return o.decode(e,this.hints)}catch(e){if(e instanceof gL)continue}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}throw new ER("No MultiFormat Readers were able to detect the code.")},e}(),kL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=500);var r=new bL;return r.setHints(t),e.call(this,r,n)||this}kL(t,e),t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)}}(LR);var _L=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){_L((function(t){return void 0===t&&(t=500),e.call(this,new mL,t)||this}),e)}(LR);var EL,IL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){IL((function(t){return void 0===t&&(t=500),e.call(this,new PM,t)||this}),e)}(LR),function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(EL||(EL={}));var AL=EL,CL=function(){function e(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new GR(e,Int32Array.from([1])))}return e.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var n=t[t.length-1],r=this.field,i=t.length;i<=e;i++){var o=n.multiply(new GR(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(o),n=o}return t[e]},e.prototype.encode=function(e,t){if(0===t)throw new QN("No error correction bytes");var n=e.length-t;if(n<=0)throw new QN("No data bytes provided");var r=this.buildGenerator(t),i=new Int32Array(n);tR.arraycopy(e,0,i,0,n);for(var o=new GR(this.field,i),a=(o=o.multiplyByMonomial(t,1)).divide(r)[1].getCoefficients(),u=t-a.length,s=0;s<u;s++)e[n+s]=0;tR.arraycopy(a,0,e,n+u,a.length)},e}(),SL=function(){function e(){}return e.applyMaskPenaltyRule1=function(t){return e.applyMaskPenaltyRule1Internal(t,!0)+e.applyMaskPenaltyRule1Internal(t,!1)},e.applyMaskPenaltyRule2=function(t){for(var n=0,r=t.getArray(),i=t.getWidth(),o=t.getHeight(),a=0;a<o-1;a++)for(var u=r[a],s=0;s<i-1;s++){var c=u[s];c===u[s+1]&&c===r[a+1][s]&&c===r[a+1][s+1]&&n++}return e.N2*n},e.applyMaskPenaltyRule3=function(t){for(var n=0,r=t.getArray(),i=t.getWidth(),o=t.getHeight(),a=0;a<o;a++)for(var u=0;u<i;u++){var s=r[a];u+6<i&&1===s[u]&&0===s[u+1]&&1===s[u+2]&&1===s[u+3]&&1===s[u+4]&&0===s[u+5]&&1===s[u+6]&&(e.isWhiteHorizontal(s,u-4,u)||e.isWhiteHorizontal(s,u+7,u+11))&&n++,a+6<o&&1===r[a][u]&&0===r[a+1][u]&&1===r[a+2][u]&&1===r[a+3][u]&&1===r[a+4][u]&&0===r[a+5][u]&&1===r[a+6][u]&&(e.isWhiteVertical(r,u,a-4,a)||e.isWhiteVertical(r,u,a+7,a+11))&&n++}return n*e.N3},e.isWhiteHorizontal=function(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(var r=t;r<n;r++)if(1===e[r])return!1;return!0},e.isWhiteVertical=function(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var i=n;i<r;i++)if(1===e[i][t])return!1;return!0},e.applyMaskPenaltyRule4=function(t){for(var n=0,r=t.getArray(),i=t.getWidth(),o=t.getHeight(),a=0;a<o;a++)for(var u=r[a],s=0;s<i;s++)1===u[s]&&n++;var c=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*n-c)/c)*e.N4},e.getDataMaskBit=function(e,t,n){var r,i;switch(e){case 0:r=n+t&1;break;case 1:r=1&n;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:r=(1&(i=n*t))+i%3;break;case 6:r=(1&(i=n*t))+i%3&1;break;case 7:r=(i=n*t)%3+(n+t&1)&1;break;default:throw new QN("Invalid mask pattern: "+e)}return 0===r},e.applyMaskPenaltyRule1Internal=function(t,n){for(var r=0,i=n?t.getHeight():t.getWidth(),o=n?t.getWidth():t.getHeight(),a=t.getArray(),u=0;u<i;u++){for(var s=0,c=-1,l=0;l<o;l++){var f=n?a[u][l]:a[l][u];f===c?s++:(s>=5&&(r+=e.N1+(s-5)),s=1,c=f)}s>=5&&(r+=e.N1+(s-5))}return r},e.N1=3,e.N2=3,e.N3=40,e.N4=10,e}(),xL=function(){function e(e,t){this.width=e,this.height=t;for(var n=new Array(t),r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}return e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e.prototype.get=function(e,t){return this.bytes[t][e]},e.prototype.getArray=function(){return this.bytes},e.prototype.setNumber=function(e,t,n){this.bytes[t][e]=n},e.prototype.setBoolean=function(e,t,n){this.bytes[t][e]=n?1:0},e.prototype.clear=function(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.bytes),i=r.next();!i.done;i=r.next()){var o=i.value;aR.fill(o,e)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var n=t;if(this.width!==n.width)return!1;if(this.height!==n.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],a=n.bytes[r],u=0,s=this.width;u<s;++u)if(o[u]!==a[u])return!1;return!0},e.prototype.toString=function(){for(var e=new bR,t=0,n=this.height;t<n;++t){for(var r=this.bytes[t],i=0,o=this.width;i<o;++i)switch(r[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()},e}(),TL=function(){function e(){this.maskPattern=-1}return e.prototype.getMode=function(){return this.mode},e.prototype.getECLevel=function(){return this.ecLevel},e.prototype.getVersion=function(){return this.version},e.prototype.getMaskPattern=function(){return this.maskPattern},e.prototype.getMatrix=function(){return this.matrix},e.prototype.toString=function(){var e=new bR;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()},e.prototype.setMode=function(e){this.mode=e},e.prototype.setECLevel=function(e){this.ecLevel=e},e.prototype.setVersion=function(e){this.version=e},e.prototype.setMaskPattern=function(e){this.maskPattern=e},e.prototype.setMatrix=function(e){this.matrix=e},e.isValidMaskPattern=function(t){return t>=0&&t<e.NUM_MASK_PATTERNS},e.NUM_MASK_PATTERNS=8,e}(),OL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),NL=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return OL(t,e),t.kind="WriterException",t}(qN),RL=function(){function e(){}return e.clearMatrix=function(e){e.clear(255)},e.buildMatrix=function(t,n,r,i,o){e.clearMatrix(o),e.embedBasicPatterns(r,o),e.embedTypeInfo(n,i,o),e.maybeEmbedVersionInfo(r,o),e.embedDataBits(t,i,o)},e.embedBasicPatterns=function(t,n){e.embedPositionDetectionPatternsAndSeparators(n),e.embedDarkDotAtLeftBottomCorner(n),e.maybeEmbedPositionAdjustmentPatterns(t,n),e.embedTimingPatterns(n)},e.embedTypeInfo=function(t,n,r){var i=new sR;e.makeTypeInfoBits(t,n,i);for(var o=0,a=i.getSize();o<a;++o){var u=i.get(i.getSize()-1-o),s=e.TYPE_INFO_COORDINATES[o],c=s[0],l=s[1];if(r.setBoolean(c,l,u),o<8){var f=r.getWidth()-o-1,h=8;r.setBoolean(f,h,u)}else f=8,h=r.getHeight()-7+(o-8),r.setBoolean(f,h,u)}},e.maybeEmbedVersionInfo=function(t,n){if(!(t.getVersionNumber()<7)){var r=new sR;e.makeVersionInfoBits(t,r);for(var i=17,o=0;o<6;++o)for(var a=0;a<3;++a){var u=r.get(i);i--,n.setBoolean(o,n.getHeight()-11+a,u),n.setBoolean(n.getHeight()-11+a,o,u)}}},e.embedDataBits=function(t,n,r){for(var i=0,o=-1,a=r.getWidth()-1,u=r.getHeight()-1;a>0;){for(6===a&&(a-=1);u>=0&&u<r.getHeight();){for(var s=0;s<2;++s){var c=a-s;if(e.isEmpty(r.get(c,u))){var l=void 0;i<t.getSize()?(l=t.get(i),++i):l=!1,255!==n&&SL.getDataMaskBit(n,c,u)&&(l=!l),r.setBoolean(c,u,l)}}u+=o}u+=o=-o,a-=2}if(i!==t.getSize())throw new NL("Not all bits consumed: "+i+"/"+t.getSize())},e.findMSBSet=function(e){return 32-uR.numberOfLeadingZeros(e)},e.calculateBCHCode=function(t,n){if(0===n)throw new QN("0 polynomial");var r=e.findMSBSet(n);for(t<<=r-1;e.findMSBSet(t)>=r;)t^=n<<e.findMSBSet(t)-r;return t},e.makeTypeInfoBits=function(t,n,r){if(!TL.isValidMaskPattern(n))throw new NL("Invalid mask pattern");var i=t.getBits()<<3|n;r.appendBits(i,5);var o=e.calculateBCHCode(i,e.TYPE_INFO_POLY);r.appendBits(o,10);var a=new sR;if(a.appendBits(e.TYPE_INFO_MASK_PATTERN,15),r.xor(a),15!==r.getSize())throw new NL("should not happen but we got: "+r.getSize())},e.makeVersionInfoBits=function(t,n){n.appendBits(t.getVersionNumber(),6);var r=e.calculateBCHCode(t.getVersionNumber(),e.VERSION_INFO_POLY);if(n.appendBits(r,12),18!==n.getSize())throw new NL("should not happen but we got: "+n.getSize())},e.isEmpty=function(e){return 255===e},e.embedTimingPatterns=function(t){for(var n=8;n<t.getWidth()-8;++n){var r=(n+1)%2;e.isEmpty(t.get(n,6))&&t.setNumber(n,6,r),e.isEmpty(t.get(6,n))&&t.setNumber(6,n,r)}},e.embedDarkDotAtLeftBottomCorner=function(e){if(0===e.get(8,e.getHeight()-8))throw new NL;e.setNumber(8,e.getHeight()-8,1)},e.embedHorizontalSeparationPattern=function(t,n,r){for(var i=0;i<8;++i){if(!e.isEmpty(r.get(t+i,n)))throw new NL;r.setNumber(t+i,n,0)}},e.embedVerticalSeparationPattern=function(t,n,r){for(var i=0;i<7;++i){if(!e.isEmpty(r.get(t,n+i)))throw new NL;r.setNumber(t,n+i,0)}},e.embedPositionAdjustmentPattern=function(t,n,r){for(var i=0;i<5;++i)for(var o=e.POSITION_ADJUSTMENT_PATTERN[i],a=0;a<5;++a)r.setNumber(t+a,n+i,o[a])},e.embedPositionDetectionPattern=function(t,n,r){for(var i=0;i<7;++i)for(var o=e.POSITION_DETECTION_PATTERN[i],a=0;a<7;++a)r.setNumber(t+a,n+i,o[a])},e.embedPositionDetectionPatternsAndSeparators=function(t){var n=e.POSITION_DETECTION_PATTERN[0].length;e.embedPositionDetectionPattern(0,0,t),e.embedPositionDetectionPattern(t.getWidth()-n,0,t),e.embedPositionDetectionPattern(0,t.getWidth()-n,t),e.embedHorizontalSeparationPattern(0,7,t),e.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),e.embedHorizontalSeparationPattern(0,t.getWidth()-8,t),e.embedVerticalSeparationPattern(7,0,t),e.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),e.embedVerticalSeparationPattern(7,t.getHeight()-7,t)},e.maybeEmbedPositionAdjustmentPatterns=function(t,n){if(!(t.getVersionNumber()<2))for(var r=t.getVersionNumber()-1,i=e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,a=i.length;o!==a;o++){var u=i[o];if(u>=0)for(var s=0;s!==a;s++){var c=i[s];c>=0&&e.isEmpty(n.get(c,u))&&e.embedPositionAdjustmentPattern(c-2,u-2,n)}}},e.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),e.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),e.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),e.VERSION_INFO_POLY=7973,e.TYPE_INFO_POLY=1335,e.TYPE_INFO_MASK_PATTERN=21522,e}(),DL=function(){function e(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return e.prototype.getDataBytes=function(){return this.dataBytes},e.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},e}(),PL=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(){function e(){}e.calculateMaskPenalty=function(e){return SL.applyMaskPenaltyRule1(e)+SL.applyMaskPenaltyRule2(e)+SL.applyMaskPenaltyRule3(e)+SL.applyMaskPenaltyRule4(e)},e.encode=function(t,n,r){void 0===r&&(r=null);var i=e.DEFAULT_BYTE_MODE_ENCODING,o=null!==r&&void 0!==r.get(AL.CHARACTER_SET);o&&(i=r.get(AL.CHARACTER_SET).toString());var a=this.chooseMode(t,i),u=new sR;if(a===bM.BYTE&&(o||e.DEFAULT_BYTE_MODE_ENCODING!==i)){var s=vR.getCharacterSetECIByName(i);void 0!==s&&this.appendECI(s,u)}this.appendModeInfo(a,u);var c,l=new sR;if(this.appendBytes(t,a,l,i),null!==r&&void 0!==r.get(AL.QR_VERSION)){var f=Number.parseInt(r.get(AL.QR_VERSION).toString(),10);c=hM.getVersionForNumber(f);var h=this.calculateBitsNeeded(a,u,l,c);if(!this.willFit(h,c,n))throw new NL("Data too big for requested version")}else c=this.recommendVersion(n,a,u,l);var d=new sR;d.appendBitArray(u);var p=a===bM.BYTE?l.getSizeInBytes():t.length;this.appendLengthInfo(p,c,a,d),d.appendBitArray(l);var v=c.getECBlocksForLevel(n),m=c.getTotalCodewords()-v.getTotalECCodewords();this.terminateBits(m,d);var y=this.interleaveWithECBytes(d,c.getTotalCodewords(),m,v.getNumBlocks()),g=new TL;g.setECLevel(n),g.setMode(a),g.setVersion(c);var w=c.getDimensionForVersion(),b=new xL(w,w),k=this.chooseMaskPattern(y,n,c,b);return g.setMaskPattern(k),RL.buildMatrix(y,n,c,k,b),g.setMatrix(b),g},e.recommendVersion=function(e,t,n,r){var i=this.calculateBitsNeeded(t,n,r,hM.getVersionForNumber(1)),o=this.chooseVersion(i,e),a=this.calculateBitsNeeded(t,n,r,o);return this.chooseVersion(a,e)},e.calculateBitsNeeded=function(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()},e.getAlphanumericCode=function(t){return t<e.ALPHANUMERIC_TABLE.length?e.ALPHANUMERIC_TABLE[t]:-1},e.chooseMode=function(t,n){if(void 0===n&&(n=null),vR.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(t))return bM.KANJI;for(var r=!1,i=!1,o=0,a=t.length;o<a;++o){var u=t.charAt(o);if(e.isDigit(u))r=!0;else{if(-1===this.getAlphanumericCode(u.charCodeAt(0)))return bM.BYTE;i=!0}}return i?bM.ALPHANUMERIC:r?bM.NUMERIC:bM.BYTE},e.isOnlyDoubleByteKanji=function(e){var t;try{t=gR.encode(e,vR.SJIS)}catch(e){return!1}var n=t.length;if(n%2!=0)return!1;for(var r=0;r<n;r+=2){var i=255&t[r];if((i<129||i>159)&&(i<224||i>235))return!1}return!0},e.chooseMaskPattern=function(e,t,n,r){for(var i=Number.MAX_SAFE_INTEGER,o=-1,a=0;a<TL.NUM_MASK_PATTERNS;a++){RL.buildMatrix(e,t,n,a,r);var u=this.calculateMaskPenalty(r);u<i&&(i=u,o=a)}return o},e.chooseVersion=function(t,n){for(var r=1;r<=40;r++){var i=hM.getVersionForNumber(r);if(e.willFit(t,i,n))return i}throw new NL("Data too big")},e.willFit=function(e,t,n){return t.getTotalCodewords()-t.getECBlocksForLevel(n).getTotalECCodewords()>=(e+7)/8},e.terminateBits=function(e,t){var n=8*e;if(t.getSize()>n)throw new NL("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(var r=0;r<4&&t.getSize()<n;++r)t.appendBit(!1);var i=7&t.getSize();if(i>0)for(r=i;r<8;r++)t.appendBit(!1);var o=e-t.getSizeInBytes();for(r=0;r<o;++r)t.appendBits(0==(1&r)?236:17,8);if(t.getSize()!==n)throw new NL("Bits size does not equal capacity")},e.getNumDataBytesAndNumECBytesForBlockID=function(e,t,n,r,i,o){if(r>=n)throw new NL("Block ID too large");var a=e%n,u=n-a,s=Math.floor(e/n),c=s+1,l=Math.floor(t/n),f=l+1,h=s-l,d=c-f;if(h!==d)throw new NL("EC bytes mismatch");if(n!==u+a)throw new NL("RS blocks mismatch");if(e!==(l+h)*u+(f+d)*a)throw new NL("Total bytes mismatch");r<u?(i[0]=l,o[0]=h):(i[0]=f,o[0]=d)},e.interleaveWithECBytes=function(t,n,r,i){var o,a,u,s;if(t.getSizeInBytes()!==r)throw new NL("Number of bits and data bytes does not match");for(var c=0,l=0,f=0,h=new Array,d=0;d<i;++d){var p=new Int32Array(1),v=new Int32Array(1);e.getNumDataBytesAndNumECBytesForBlockID(n,r,i,d,p,v);var m=p[0],y=new Uint8Array(m);t.toBytes(8*c,y,0,m);var g=e.generateECBytes(y,v[0]);h.push(new DL(y,g)),l=Math.max(l,m),f=Math.max(f,g.length),c+=p[0]}if(r!==c)throw new NL("Data bytes does not match offset");var w=new sR;for(d=0;d<l;++d)try{for(var b=(o=void 0,PL(h)),k=b.next();!k.done;k=b.next())d<(y=k.value.getDataBytes()).length&&w.appendBits(y[d],8)}catch(e){o={error:e}}finally{try{k&&!k.done&&(a=b.return)&&a.call(b)}finally{if(o)throw o.error}}for(d=0;d<f;++d)try{for(var _=(u=void 0,PL(h)),E=_.next();!E.done;E=_.next())d<(g=E.value.getErrorCorrectionBytes()).length&&w.appendBits(g[d],8)}catch(e){u={error:e}}finally{try{E&&!E.done&&(s=_.return)&&s.call(_)}finally{if(u)throw u.error}}if(n!==w.getSizeInBytes())throw new NL("Interleaving error: "+n+" and "+w.getSizeInBytes()+" differ.");return w},e.generateECBytes=function(e,t){for(var n=e.length,r=new Int32Array(n+t),i=0;i<n;i++)r[i]=255&e[i];new CL(XR.QR_CODE_FIELD_256).encode(r,t);var o=new Uint8Array(t);for(i=0;i<t;i++)o[i]=r[n+i];return o},e.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},e.appendLengthInfo=function(e,t,n,r){var i=n.getCharacterCountBits(t);if(e>=1<<i)throw new NL(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)},e.appendBytes=function(t,n,r,i){switch(n){case bM.NUMERIC:e.appendNumericBytes(t,r);break;case bM.ALPHANUMERIC:e.appendAlphanumericBytes(t,r);break;case bM.BYTE:e.append8BitBytes(t,r,i);break;case bM.KANJI:e.appendKanjiBytes(t,r);break;default:throw new NL("Invalid mode: "+n)}},e.getDigit=function(e){return e.charCodeAt(0)-48},e.isDigit=function(t){var n=e.getDigit(t);return n>=0&&n<=9},e.appendNumericBytes=function(t,n){for(var r=t.length,i=0;i<r;){var o=e.getDigit(t.charAt(i));if(i+2<r){var a=e.getDigit(t.charAt(i+1)),u=e.getDigit(t.charAt(i+2));n.appendBits(100*o+10*a+u,10),i+=3}else i+1<r?(a=e.getDigit(t.charAt(i+1)),n.appendBits(10*o+a,7),i+=2):(n.appendBits(o,4),i++)}},e.appendAlphanumericBytes=function(t,n){for(var r=t.length,i=0;i<r;){var o=e.getAlphanumericCode(t.charCodeAt(i));if(-1===o)throw new NL;if(i+1<r){var a=e.getAlphanumericCode(t.charCodeAt(i+1));if(-1===a)throw new NL;n.appendBits(45*o+a,11),i+=2}else n.appendBits(o,6),i++}},e.append8BitBytes=function(e,t,n){var r;try{r=gR.encode(e,n)}catch(e){throw new NL(e)}for(var i=0,o=r.length;i!==o;i++){var a=r[i];t.appendBits(a,8)}},e.appendKanjiBytes=function(e,t){var n;try{n=gR.encode(e,vR.SJIS)}catch(e){throw new NL(e)}for(var r=n.length,i=0;i<r;i+=2){var o=(255&n[i])<<8&4294967295|255&n[i+1],a=-1;if(o>=33088&&o<=40956?a=o-33088:o>=57408&&o<=60351&&(a=o-49472),-1===a)throw new NL("Invalid byte sequence");var u=192*(a>>8)+(255&a);t.appendBits(u,13)}},e.appendECI=function(e,t){t.appendBits(bM.ECI.getBits(),4),t.appendBits(e.getValue(),8)},e.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),e.DEFAULT_BYTE_MODE_ENCODING=vR.UTF8.getName()}();var ML=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r,i,o,a,u,s){var c=e.call(this,a,u)||this;if(c.yuvData=t,c.dataWidth=n,c.dataHeight=r,c.left=i,c.top=o,i+a>n||o+u>r)throw new QN("Crop rectangle does not fit within image data.");return s&&c.reverseHorizontal(a,u),c}ML(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new QN("Requested row is outside the image: "+e);var n=this.getWidth();(null==t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return tR.arraycopy(this.yuvData,r,t,0,n),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;var n=e*t,r=new Uint8ClampedArray(n),i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return tR.arraycopy(this.yuvData,i,r,0,n),r;for(var o=0;o<t;o++){var a=o*e;tR.arraycopy(this.yuvData,i,r,a,e),i+=this.dataWidth}return r},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,n,r,i){return new t(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,r,i,!1)},t.prototype.renderThumbnail=function(){for(var e=this.getWidth()/t.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/t.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*n),i=this.yuvData,o=this.top*this.dataWidth+this.left,a=0;a<n;a++){for(var u=a*e,s=0;s<e;s++){var c=255&i[o+s*t.THUMBNAIL_SCALE_FACTOR];r[u+s]=4278190080|65793*c}o+=this.dataWidth*t.THUMBNAIL_SCALE_FACTOR}return r},t.prototype.getThumbnailWidth=function(){return this.getWidth()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.getThumbnailHeight=function(){return this.getHeight()/t.THUMBNAIL_SCALE_FACTOR},t.prototype.reverseHorizontal=function(e,t){for(var n=this.yuvData,r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth)for(var o=i+e/2,a=i,u=i+e-1;a<o;a++,u--){var s=n[a];n[a]=n[u],n[u]=s}},t.prototype.invert=function(){return new OR(this)},t.THUMBNAIL_SCALE_FACTOR=2}(xR);var LL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r,i,o,a,u){var s=e.call(this,n,r)||this;if(s.dataWidth=i,s.dataHeight=o,s.left=a,s.top=u,4===t.BYTES_PER_ELEMENT){for(var c=n*r,l=new Uint8ClampedArray(c),f=0;f<c;f++){var h=t[f],d=h>>16&255,p=h>>7&510,v=255&h;l[f]=(d+p+v)/4&255}s.luminances=l}else s.luminances=t;if(void 0===i&&(s.dataWidth=n),void 0===o&&(s.dataHeight=r),void 0===a&&(s.left=0),void 0===u&&(s.top=0),s.left+n>s.dataWidth||s.top+r>s.dataHeight)throw new QN("Crop rectangle does not fit within image data.");return s}LL(t,e),t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new QN("Requested row is outside the image: "+e);var n=this.getWidth();(null==t||t.length<n)&&(t=new Uint8ClampedArray(n));var r=(e+this.top)*this.dataWidth+this.left;return tR.arraycopy(this.luminances,r,t,0,n),t},t.prototype.getMatrix=function(){var e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;var n=e*t,r=new Uint8ClampedArray(n),i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return tR.arraycopy(this.luminances,i,r,0,n),r;for(var o=0;o<t;o++){var a=o*e;tR.arraycopy(this.luminances,i,r,a,e),i+=this.dataWidth}return r},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(e,n,r,i){return new t(this.luminances,r,i,this.dataWidth,this.dataHeight,this.left+e,this.top+n)},t.prototype.invert=function(){return new OR(this)}}(xR);var BL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}BL(t,e),t.forName=function(e){return this.getCharacterSetECIByName(e)}}(vR);var FL=function(){function e(e){this.previous=e}return e.prototype.getPrevious=function(){return this.previous},e}(),jL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),UL=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.value=n,i.bitCount=r,i}return jL(t,e),t.prototype.appendTo=function(e,t){e.appendBits(this.value,this.bitCount)},t.prototype.add=function(e,n){return new t(this,e,n)},t.prototype.addBinaryShift=function(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new t(this,e,n)},t.prototype.toString=function(){var e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+uR.toBinaryString(e|1<<this.bitCount).substring(1)+">"},t}(FL),VL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n,r){var i=e.call(this,t,0,0)||this;return i.binaryShiftStart=n,i.binaryShiftByteCount=r,i}VL(t,e),t.prototype.appendTo=function(e,t){for(var n=0;n<this.binaryShiftByteCount;n++)(0===n||31===n&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===n?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)},t.prototype.addBinaryShift=function(e,n){return new t(this,e,n)},t.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}(UL),new UL(null,0,0);!function(e){var t,n;try{for(var r=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),i=r.next();!i.done;i=r.next()){var o=i.value;aR.fill(o,-1)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e[0][4]=0,e[1][4]=0,e[1][0]=28,e[3][4]=0,e[2][4]=0,e[2][0]=15}(aR.createInt32Array(6,6)),function(e){var t=wR.getCharCode(" "),n=wR.getCharCode("."),r=wR.getCharCode(",");e[0][t]=1;for(var i=wR.getCharCode("Z"),o=wR.getCharCode("A"),a=o;a<=i;a++)e[0][a]=a-o+2;e[1][t]=1;var u=wR.getCharCode("z"),s=wR.getCharCode("a");for(a=s;a<=u;a++)e[1][a]=a-s+2;e[2][t]=1;var c=wR.getCharCode("9"),l=wR.getCharCode("0");for(a=l;a<=c;a++)e[2][a]=a-l+2;e[2][r]=12,e[2][n]=13;for(var f=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"],h=0;h<f.length;h++)e[3][wR.getCharCode(f[h])]=h;var d=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(h=0;h<d.length;h++)wR.getCharCode(d[h])>0&&(e[4][wR.getCharCode(d[h])]=h)}(aR.createInt32Array(5,256));var zL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),HL=function(e){function t(n){var r=e.call(this,n.width,n.height)||this;return r.canvas=n,r.buffer=t.makeBufferFromCanvasImageData(n),r}return zL(t,e),t.makeBufferFromCanvasImageData=function(e){var n=e.getContext("2d");if(!n)throw new Error("Couldn't get canvas context.");var r=n.getImageData(0,0,e.width,e.height);return t.toGrayscaleBuffer(r.data,e.width,e.height)},t.toGrayscaleBuffer=function(e,t,n){for(var r=new Uint8ClampedArray(t*n),i=0,o=0,a=e.length;i<a;i+=4,o++){var u=void 0;u=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,r[o]=u}return r},t.prototype.getRow=function(e,t){if(e<0||e>=this.getHeight())throw new QN("Requested row is outside the image: "+e);var n=this.getWidth(),r=e*n;return null===t?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t},t.prototype.getMatrix=function(){return this.buffer},t.prototype.isCropSupported=function(){return!0},t.prototype.crop=function(t,n,r,i){return e.prototype.crop.call(this,t,n,r,i),this},t.prototype.isRotateSupported=function(){return!0},t.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},t.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},t.prototype.invert=function(){return new OR(this)},t.prototype.getTempCanvasElement=function(){if(null===this.tempCanvasElement){var e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement},t.prototype.rotate=function(e){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var r=e*t.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*o),u=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*o);n.width=a,n.height=u;var s=n.getContext("2d");if(!s)throw new Error("Could not create a Convas Context element.");return s.translate(a/2,u/2),s.rotate(r),s.drawImage(this.canvas,i/-2,o/-2),this.buffer=t.makeBufferFromCanvasImageData(n),this},t.DEGREE_TO_RADIANS=Math.PI/180,t}(xR);function GL(){return"undefined"!=typeof navigator}var WL=function(){return WL=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},WL.apply(this,arguments)},qL=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function u(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))},KL=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},XL=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},YL={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},QL=function(){function e(e,t,n){void 0===t&&(t=new Map),void 0===n&&(n={}),this.reader=e,this.hints=t,this.options=WL(WL({},YL),n)}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(e){this.hints.set(lR.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),e.addVideoSource=function(e,t){try{e.srcObject=t}catch(n){e.src=URL.createObjectURL(t)}},e.mediaStreamSetTorch=function(e,t){return qL(this,void 0,void 0,(function(){return KL(this,(function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return n.sent(),[2]}}))}))},e.mediaStreamIsTorchCompatible=function(t){var n,r,i=t.getVideoTracks();try{for(var o=XL(i),a=o.next();!a.done;a=o.next()){var u=a.value;if(e.mediaStreamIsTorchCompatibleTrack(u))return!0}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1},e.mediaStreamIsTorchCompatibleTrack=function(e){try{return"torch"in e.getCapabilities()}catch(e){return console.error(e),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},e.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},e.getMediaElement=function(e,t){var n=document.getElementById(e);if(!n)throw new XN("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new XN("element with id '"+e+"' must be an "+t+" element");return n},e.createVideoElement=function(t){if(t instanceof HTMLVideoElement)return t;if("string"==typeof t)return e.getMediaElement(t,"video");if(!t&&"undefined"!=typeof document){var n=document.createElement("video");return n.width=200,n.height=200,n}throw new Error("Couldn't get videoElement from videoSource!")},e.prepareImageElement=function(t){if(t instanceof HTMLImageElement)return t;if("string"==typeof t)return e.getMediaElement(t,"img");if(void 0===t){var n=document.createElement("img");return n.width=200,n.height=200,n}throw new Error("Couldn't get imageElement from imageSource!")},e.prepareVideoElement=function(t){var n=e.createVideoElement(t);return n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},e.isImageLoaded=function(e){return!!e.complete&&0!==e.naturalWidth},e.createBinaryBitmapFromCanvas=function(e){var t=new HL(e),n=new SR(t);return new ZN(n)},e.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},e.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimentions!")},e.createCaptureCanvas=function(t){if(!t)throw new XN("Cannot create a capture canvas without a media element.");if("undefined"==typeof document)throw new Error('The page "Document" is undefined, make sure you\'re running in a browser.');var n=document.createElement("canvas"),r=e.getMediaElementDimensions(t),i=r.width,o=r.height;return n.style.width=i+"px",n.style.height=o+"px",n.width=i,n.height=o,n},e.tryPlayVideo=function(t){return qL(this,void 0,void 0,(function(){var n;return KL(this,(function(r){switch(r.label){case 0:if(null==t?void 0:t.ended)return console.error("Trying to play video that has ended."),[2,!1];if(e.isVideoPlaying(t))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.play()];case 2:return r.sent(),[2,!0];case 3:return n=r.sent(),console.warn("It was not possible to play the video.",n),[2,!1];case 4:return[2]}}))}))},e.createCanvasFromMediaElement=function(t){var n=e.createCaptureCanvas(t),r=n.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return e.drawImageOnCanvas(r,t),n},e.createBinaryBitmapFromMediaElem=function(t){var n=e.createCanvasFromMediaElement(t);return e.createBinaryBitmapFromCanvas(n)},e.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},e.listVideoInputDevices=function(){return qL(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,u,s,c,l,f;return KL(this,(function(h){switch(h.label){case 0:if(!GL())throw new Error("Can't enumerate devices, navigator is not present.");if(!(GL()&&navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices))throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(n=XL(e),r=n.next();!r.done;r=n.next())i=r.value,"videoinput"===(o="video"===i.kind?"videoinput":i.kind)&&(a=i.deviceId||i.id,u=i.label||"Video device "+(t.length+1),s=i.groupId,c={deviceId:a,label:u,kind:o,groupId:s},t.push(c))}catch(e){l={error:e}}finally{try{r&&!r.done&&(f=n.return)&&f.call(n)}finally{if(l)throw l.error}}return[2,t]}}))}))},e.findDeviceById=function(t){return qL(this,void 0,void 0,(function(){var n;return KL(this,(function(r){switch(r.label){case 0:return[4,e.listVideoInputDevices()];case 1:return(n=r.sent())?[2,n.find((function(e){return e.deviceId===t}))]:[2]}}))}))},e.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch(Rj){e.src=""}e&&e.removeAttribute("src")}},e.playVideoOnLoadAsync=function(t,n){return qL(this,void 0,void 0,(function(){return KL(this,(function(r){switch(r.label){case 0:return[4,e.tryPlayVideo(t)];case 1:return r.sent()?[2,!0]:[2,new Promise((function(r,i){var o=setTimeout((function(){e.isVideoPlaying(t)||(i(!1),t.removeEventListener("canplay",a))}),n),a=function n(){e.tryPlayVideo(t).then((function(e){clearTimeout(o),t.removeEventListener("canplay",n),r(e)}))};t.addEventListener("canplay",a)}))]}}))}))},e.attachStreamToVideo=function(t,n,r){return void 0===r&&(r=5e3),qL(this,void 0,void 0,(function(){var i;return KL(this,(function(o){switch(o.label){case 0:return i=e.prepareVideoElement(n),e.addVideoSource(i,t),[4,e.playVideoOnLoadAsync(i,r)];case 1:return o.sent(),[2,i]}}))}))},e._waitImageLoad=function(t){return new Promise((function(n,r){var i=setTimeout((function(){e.isImageLoaded(t)||(t.removeEventListener("load",o),r())}),1e4),o=function e(){clearTimeout(i),t.removeEventListener("load",e),n()};t.addEventListener("load",o)}))},e.checkCallbackFnOrThrow=function(e){if(!e)throw new XN("`callbackFn` is a required parameter, you cannot capture results without it.")},e.disposeMediaStream=function(e){e.getVideoTracks().forEach((function(e){return e.stop()})),e=void 0},e.prototype.decode=function(t){var n=e.createCanvasFromMediaElement(t);return this.decodeFromCanvas(n)},e.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},e.prototype.decodeFromCanvas=function(t){var n=e.createBinaryBitmapFromCanvas(t);return this.decodeBitmap(n)},e.prototype.decodeFromImageElement=function(t){return qL(this,void 0,void 0,(function(){var n;return KL(this,(function(r){switch(r.label){case 0:if(!t)throw new XN("An image element must be provided.");return n=e.prepareImageElement(t),[4,this._decodeOnLoadImage(n)];case 1:return[2,r.sent()]}}))}))},e.prototype.decodeFromImageUrl=function(t){return qL(this,void 0,void 0,(function(){var n;return KL(this,(function(r){switch(r.label){case 0:if(!t)throw new XN("An URL must be provided.");(n=e.prepareImageElement()).src=t,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(n)];case 2:return[2,r.sent()];case 3:return e.destroyImageElement(n),[7];case 4:return[2]}}))}))},e.prototype.decodeFromConstraints=function(t,n,r){return qL(this,void 0,void 0,(function(){var i,o;return KL(this,(function(a){switch(a.label){case 0:return e.checkCallbackFnOrThrow(r),[4,navigator.mediaDevices.getUserMedia(t)];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.decodeFromStream(i,n,r)];case 3:return[2,a.sent()];case 4:throw o=a.sent(),e.disposeMediaStream(i),o;case 5:return[2]}}))}))},e.prototype.decodeFromStream=function(t,n,r){return qL(this,void 0,void 0,(function(){var i,o,a,u,s,c,l,f,h,d,p=this;return KL(this,(function(v){switch(v.label){case 0:return e.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,e.attachStreamToVideo(t,n,i)];case 1:return o=v.sent(),a=function(){var e,n;try{for(var r=XL(t.getVideoTracks()),i=r.next();!i.done;i=r.next())i.value.stop()}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}t=void 0},u=function(){a(),e.cleanVideoSource(o)},s=this.scan(o,r,u),c=t.getVideoTracks(),l=WL(WL({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(e,t){return qL(this,void 0,void 0,(function(){var n,r,i,o,a,u;return KL(this,(function(s){switch(s.label){case 0:n=t?c.filter(t):c,s.label=1;case 1:s.trys.push([1,6,7,8]),r=XL(n),i=r.next(),s.label=2;case 2:return i.done?[3,5]:[4,i.value.applyConstraints(e)];case 3:s.sent(),s.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return o=s.sent(),a={error:o},[3,8];case 7:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(a)throw a.error}return[7];case 8:return[2]}}))}))},streamVideoConstraintsGet:function(e){return c.find(e).getConstraints()},streamVideoSettingsGet:function(e){return c.find(e).getSettings()},streamVideoCapabilitiesGet:function(e){return c.find(e).getCapabilities()}}),e.mediaStreamIsTorchCompatible(t)&&(f=null==c?void 0:c.find((function(t){return e.mediaStreamIsTorchCompatibleTrack(t)})),h=function(t){return qL(p,void 0,void 0,(function(){return KL(this,(function(n){switch(n.label){case 0:return[4,e.mediaStreamSetTorch(f,t)];case 1:return n.sent(),[2]}}))}))},l.switchTorch=h,d=function(){s.stop(),h(!1)},l.stop=d),[2,l]}}))}))},e.prototype.decodeFromVideoDevice=function(t,n,r){return qL(this,void 0,void 0,(function(){var i;return KL(this,(function(o){switch(o.label){case 0:return e.checkCallbackFnOrThrow(r),i={video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},[4,this.decodeFromConstraints(i,n,r)];case 1:return[2,o.sent()]}}))}))},e.prototype.decodeFromVideoElement=function(t,n){return qL(this,void 0,void 0,(function(){var r,i;return KL(this,(function(o){switch(o.label){case 0:if(e.checkCallbackFnOrThrow(n),!t)throw new XN("A video element must be provided.");return r=e.prepareVideoElement(t),i=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(r,i)];case 1:return o.sent(),[2,this.scan(r,n)]}}))}))},e.prototype.decodeFromVideoUrl=function(t,n){return qL(this,void 0,void 0,(function(){var r,i,o;return KL(this,(function(a){switch(a.label){case 0:if(e.checkCallbackFnOrThrow(n),!t)throw new XN("An URL must be provided.");return(r=e.prepareVideoElement()).src=t,i=function(){e.cleanVideoSource(r)},o=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(r,o)];case 1:return a.sent(),[2,this.scan(r,n,i)]}}))}))},e.prototype.decodeOnceFromConstraints=function(e,t){return qL(this,void 0,void 0,(function(){var n;return KL(this,(function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=r.sent(),[4,this.decodeOnceFromStream(n,t)];case 2:return[2,r.sent()]}}))}))},e.prototype.decodeOnceFromStream=function(t,n){return qL(this,void 0,void 0,(function(){var r,i;return KL(this,(function(o){switch(o.label){case 0:return r=Boolean(n),[4,e.attachStreamToVideo(t,n)];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return[2,o.sent()];case 4:return r||e.cleanVideoSource(i),[7];case 5:return[2]}}))}))},e.prototype.decodeOnceFromVideoDevice=function(e,t){return qL(this,void 0,void 0,(function(){var n;return KL(this,(function(r){switch(r.label){case 0:return n={video:e?{deviceId:{exact:e}}:{facingMode:"environment"}},[4,this.decodeOnceFromConstraints(n,t)];case 1:return[2,r.sent()]}}))}))},e.prototype.decodeOnceFromVideoElement=function(t){return qL(this,void 0,void 0,(function(){var n,r;return KL(this,(function(i){switch(i.label){case 0:if(!t)throw new XN("A video element must be provided.");return n=e.prepareVideoElement(t),r=this.options.tryPlayVideoTimeout,[4,e.playVideoOnLoadAsync(n,r)];case 1:return i.sent(),[4,this.scanOneResult(n)];case 2:return[2,i.sent()]}}))}))},e.prototype.decodeOnceFromVideoUrl=function(t){return qL(this,void 0,void 0,(function(){var n,r;return KL(this,(function(i){switch(i.label){case 0:if(!t)throw new XN("An URL must be provided.");(n=e.prepareVideoElement()).src=t,r=this.decodeOnceFromVideoElement(n),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return e.cleanVideoSource(n),[7];case 4:return[2]}}))}))},e.prototype.scanOneResult=function(e,t,n,r){var i=this;return void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),new Promise((function(o,a){i.scan(e,(function(e,i,u){if(e)return o(e),void u.stop();if(i){if(i instanceof ER&&t)return;if(i instanceof $N&&n)return;if(i instanceof hR&&r)return;u.stop(),a(i)}}))}))},e.prototype.scan=function(t,n,r){var i=this;e.checkCallbackFnOrThrow(n);var o=e.createCaptureCanvas(t),a=o.getContext("2d");if(!a)throw new Error("Couldn't create canvas for visual element scan.");var u,s=function(){a=void 0,o=void 0},c=!1,l={stop:function(){c=!0,clearTimeout(u),s(),r&&r()}};return function f(){if(!c)try{e.drawImageOnCanvas(a,t);var h=i.decodeFromCanvas(o);n(h,void 0,l),u=setTimeout(f,i.options.delayBetweenScanSuccess)}catch(e){if(n(void 0,e,l),e instanceof $N||e instanceof hR||e instanceof ER)return void(u=setTimeout(f,i.options.delayBetweenScanAttempts));s(),r&&r(e)}}(),l},e.prototype._decodeOnLoadImage=function(t){return qL(this,void 0,void 0,(function(){return KL(this,(function(n){switch(n.label){case 0:return e.isImageLoaded(t)?[3,2]:[4,e._waitImageLoad(t)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(t)]}}))}))},e}(),ZL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){ZL((function(t,n){return e.call(this,new vD,t,n)||this}),e)}(QL);var JL=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){JL((function(t,n){return e.call(this,new HP(t),t,n)||this}),e)}(QL);var $L=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){$L((function(t,n){return e.call(this,new iM,t,n)||this}),e)}(QL);var eB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){function t(t,n){var r=this,i=new bL;return i.setHints(t),(r=e.call(this,i,t,n)||this).reader=i,r}eB(t,e),Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(lR.POSSIBLE_FORMATS,e),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),t.prototype.decodeBitmap=function(e){return this.reader.decodeWithState(e)},t.prototype.setHints=function(e){this.hints=e,this.reader.setHints(this.hints)}}(QL);var tB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){tB((function(t,n){return e.call(this,new mL,t,n)||this}),e)}(QL);var nB=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),rB=function(e){function t(t,n){return e.call(this,new PM,t,n)||this}return nB(t,e),t}(QL),iB=function(e,t,n){var r=typeof e===n;return r||console.warn('[ReactQrReader]: Expected "'.concat(t,'" to be a of type "').concat(n,'".')),r},oB=function(){return oB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},oB.apply(this,arguments)},aB={width:"100%",paddingTop:"100%",overflow:"hidden",position:"relative"},uB={top:0,left:0,width:"100%",height:"100%",display:"block",overflow:"hidden",position:"absolute",transform:void 0},sB=function(e){var t=e.videoContainerStyle,n=e.containerStyle,i=e.videoStyle,o=e.constraints,a=e.ViewFinder,u=e.scanDelay,s=e.className,c=e.onResult,l=e.videoId;return function(e){var t=e.scanDelay,n=e.constraints,i=e.onResult,o=e.videoId,a=(0,r.useRef)(null);(0,r.useEffect)((function(){var e=new rB(null,{delayBetweenScanAttempts:t});return!function(){var e="undefined"!=typeof navigator&&!!navigator.mediaDevices;return e||console.warn('[ReactQrReader]: MediaDevices API has no support for your browser. You can fix this by running "npm i webrtc-adapter"'),e}()&&iB(i,"onResult","function")&&i(null,new Error('MediaDevices API has no support for your browser. You can fix this by running "npm i webrtc-adapter"'),e),iB(n,"constraints","object")&&e.decodeFromConstraints({video:n},o,(function(t,n){iB(i,"onResult","function")&&i(t,n,e)})).then((function(e){return a.current=e})).catch((function(t){iB(i,"onResult","function")&&i(null,t,e)})),function(){var e;null===(e=a.current)||void 0===e||e.stop()}}),[])}({constraints:o,scanDelay:u,onResult:c,videoId:l}),r.createElement("section",{className:s,style:n},r.createElement("div",{style:oB(oB({},aB),t)},!!a&&r.createElement(a,null),r.createElement("video",{muted:!0,id:l,style:oB(oB(oB({},uB),i),{transform:"user"===(null==o?void 0:o.facingMode)&&"scaleX(-1)"})})))};sB.displayName="QrReader",sB.defaultProps={constraints:{facingMode:"user"},videoId:"video",scanDelay:500};var cB=["color","size","title"];function lB(){return lB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lB.apply(this,arguments)}function fB(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var hB=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=fB(e,cB);return r.createElement("svg",lB({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{fillRule:"evenodd",d:"M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"}))}));hB.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},hB.defaultProps={color:"currentColor",size:"1em",title:null};var dB=hB;function pB(e){var t=e.history,n=e.title,r=e.component;return(0,RC.jsxs)("nav",{className:"appbar",children:[t&&(0,RC.jsx)("h1",{children:(0,RC.jsx)($,{className:"link",to:t,children:(0,RC.jsx)(dB,{})})}),n&&(0,RC.jsx)("h5",{children:n}),r&&(0,RC.jsx)(RC.Fragment,{children:r})]})}function vB(e){return(0,RC.jsxs)("div",{className:"toast",children:[(0,RC.jsx)("img",{alt:"",src:cN,width:"15"})," ",e]})}function mB(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c((0,r.useState)(!1),2),o=i[0],a=i[1],u=c((0,r.useState)(""),2),s=u[0],l=u[1],f=(0,r.useRef)(""),h=c((0,r.useState)(null),2),d=h[0],p=h[1],v=PC().currentUser,m=c((0,r.useState)(null),2),y=m[0],g=m[1],w=c((0,r.useState)(!1),2),b=w[0],k=w[1],_=c((0,r.useState)(!1),2),E=_[0],I=_[1],A=c((0,r.useState)(!1),2),C=A[0],S=A[1],x=xC.collection("users"),T=xC.collection("requests").where("from","==",SC.currentUser.uid),O=c(VN(T),1)[0];function N(e){return R.apply(this,arguments)}function R(){return(R=re(te().mark((function e(t){var n;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),12!==(n=null!==y&&void 0!==y?y:f.current.value).length){e.next=9;break}return M(),p(null),S(!1),e.next=8,x.doc(SC.currentUser.uid).get().then((function(e){if(e.exists){var t,r,i=null!==(t=(null!==(r=e.data().contacts)&&void 0!==r?r:[]).map((function(e){return e.uid})))&&void 0!==t?t:[];if(i.length>0){var o=[].concat(Ye(i),[v.uid]);x.where("userCode","==",n).where("uid","not-in",o).get().then((function(e){e.docs.map((function(e){return p(e.data())}))})).catch((function(e){L(e,"get-contacts-error.")}))}else x.where("userCode","==",n).where("uid","!=",v.uid).get().then((function(e){e.docs.map((function(e){return p(e.data())}))})).catch((function(e){L(e,"get-contacts-error.")}))}})).catch((function(e){L(e,"get-user-error.")}));case 8:a(!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(""),n(""),a(!0),e.next=6,xC.collection("requests").add({createdDate:new Date(Date.now()),to:t,from:SC.currentUser.uid,deleted:0,accepted:0});case 6:a(!1),e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),n("Request not sent."),a(!1),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function P(){}function M(){l(""),n(""),a(!0)}function L(e,t){a(!1);var r=t+" "+e.message;return console.error(e.message),n(r)}return(0,RC.jsxs)("div",{className:"page",children:[(0,RC.jsx)(pB,{history:"/",title:"Contacts"}),(0,RC.jsxs)("div",{className:"container",children:[t&&(0,RC.jsx)(vB,{}),t&&(0,RC.jsx)(sx,{variant:"danger",children:t}),s&&(0,RC.jsx)(sx,{variant:"success",children:s}),C?(0,RC.jsx)(sx,{variant:"danger",children:"camera-not-found."}):b&&(0,RC.jsxs)("section",{className:"mb-dot5",children:[(0,RC.jsx)(sB,{constraints:{facingMode:E?"user":"environment"},onResult:function(e,t){e&&(g(null===e||void 0===e?void 0:e.text),k(!1),f.current.value=y,N()),t&&console.info(t)},style:{width:"100%"}},E?"user":"environment"),(0,RC.jsx)("button",{type:"button",onClick:function(){I(!E)},className:"btn wide",children:(0,RC.jsx)(SN,{})})]}),(0,RC.jsxs)("form",{className:"form-group",onSubmit:N,children:[(0,RC.jsx)("input",{maxLength:"12",className:"form-control",placeholder:"User Code...",ref:f}),(0,RC.jsx)("button",{type:"submit",title:"Search",onError:function(){},children:(0,RC.jsx)(aT,{})}),(0,RC.jsx)("button",{type:"button",title:"Scan",onError:function(){},onClick:function(){return p(null),f.current.value="",void k(!0)},children:(0,RC.jsx)(RN,{})})]}),(0,RC.jsx)("ul",{id:"Users",className:"contacts mt-2",children:o?(0,RC.jsxs)(RC.Fragment,{children:[(0,RC.jsxs)("li",{className:"loading-contact",children:[(0,RC.jsx)("div",{className:"user-icon",children:(0,RC.jsx)(VO,{roundedCircle:!0,src:hT,style:{width:"3em"}})}),(0,RC.jsx)("span",{children:(0,RC.jsx)("strong",{children:"\xa0"})}),(0,RC.jsx)("span",{children:(0,RC.jsx)("small",{children:"\xa0"})})]}),(0,RC.jsxs)("li",{className:"loading-contact",children:[(0,RC.jsx)("div",{className:"user-icon",children:(0,RC.jsx)(VO,{roundedCircle:!0,src:hT,style:{width:"3em"}})}),(0,RC.jsx)("span",{children:(0,RC.jsx)("strong",{children:"\xa0"})}),(0,RC.jsx)("span",{children:(0,RC.jsx)("small",{children:"\xa0"})})]})]}):d?[d].map((function(e,t){var n,r,i=O.filter((function(t){return t.to===e.uid})).length>0;return(0,RC.jsxs)("li",{id:e.uid,children:[(0,RC.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,RC.jsx)(VO,{roundedCircle:!0,onError:function(){return P},src:e&&e.providerData.photoURL||hT,alt:"",style:{width:"3em"}}),(0,RC.jsxs)("h6",{children:["\xa0\xa0",null!==(n=null!==(r=e.displayName)&&void 0!==r?r:e.providerData.displayName)&&void 0!==n?n:e.email]})]}),(0,RC.jsx)(_N,{disabled:i,variant:i?"light":"success",type:"button",onError:function(){return P},onClick:function(){return function(e){return D.apply(this,arguments)}(e.uid)},children:i?"Request Sent":"Send Request"})]},t)})):(0,RC.jsx)("li",{children:"No contacts found..."})})]})]})}var yB=["color","size","title"];function gB(){return gB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gB.apply(this,arguments)}function wB(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var bB=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=wB(e,yB);return r.createElement("svg",gB({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{fillRule:"evenodd",d:"M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"}))}));bB.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},bB.defaultProps={color:"currentColor",size:"1em",title:null};var kB=bB,_B=["color","size","title"];function EB(){return EB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EB.apply(this,arguments)}function IB(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var AB=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=IB(e,_B);return r.createElement("svg",EB({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"}))}));AB.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},AB.defaultProps={color:"currentColor",size:"1em",title:null};var CB=AB,SB=["color","size","title"];function xB(){return xB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xB.apply(this,arguments)}function TB(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var OB=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=TB(e,SB);return r.createElement("svg",xB({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"}))}));OB.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},OB.defaultProps={color:"currentColor",size:"1em",title:null};var NB=OB;function RB(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function DB(e){return RB(1,arguments),e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function PB(e){RB(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function MB(e){if(RB(1,arguments),!DB(e)&&"number"!==typeof e)return!1;var t=PB(e);return!isNaN(Number(t))}var LB={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},BB=function(e,t,n){var r,i=LB[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),null!==n&&void 0!==n&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function FB(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var jB={date:FB({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:FB({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:FB({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},UB={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},VB=function(e,t,n,r){return UB[e]};function zB(e){return function(t,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,a=i.width?String(i.width):o;r=e.formattingValues[a]||e.formattingValues[o]}else{var u=e.defaultWidth,s=i.width?String(i.width):e.defaultWidth;r=e.values[s]||e.values[u]}return r[e.argumentCallback?e.argumentCallback(t):t]}}var HB={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:zB({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:zB({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:zB({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:zB({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:zB({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function GB(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;var a,u=o[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(s)?qB(s,(function(e){return e.test(u)})):WB(s,(function(e){return e.test(u)}));a=e.valueCallback?e.valueCallback(c):c,a=n.valueCallback?n.valueCallback(a):a;var l=t.slice(u.length);return{value:a,rest:l}}}function WB(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function qB(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}var KB,XB={ordinalNumber:(KB={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(KB.matchPattern);if(!n)return null;var r=n[0],i=e.match(KB.parsePattern);if(!i)return null;var o=KB.valueCallback?KB.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;var a=e.slice(r.length);return{value:o,rest:a}}),era:GB({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:GB({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:GB({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:GB({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:GB({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},YB={code:"en-US",formatDistance:BB,formatLong:jB,formatRelative:VB,localize:HB,match:XB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function QB(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function ZB(e,t){RB(2,arguments);var n=PB(e).getTime(),r=QB(t);return new Date(n+r)}function JB(e,t){RB(2,arguments);var n=QB(t);return ZB(e,-n)}var $B=864e5;function eF(e){RB(1,arguments);var t=1,n=PB(e),r=n.getUTCDay(),i=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function tF(e){RB(1,arguments);var t=PB(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=eF(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=eF(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function nF(e){RB(1,arguments);var t=tF(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=eF(n);return r}var rF=6048e5;function iF(e,t){RB(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:QB(i),a=null==n.weekStartsOn?o:QB(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=PB(e),s=u.getUTCDay(),c=(s<a?7:0)+s-a;return u.setUTCDate(u.getUTCDate()-c),u.setUTCHours(0,0,0,0),u}function oF(e,t){RB(1,arguments);var n=PB(e),r=n.getUTCFullYear(),i=t||{},o=i.locale,a=o&&o.options&&o.options.firstWeekContainsDate,u=null==a?1:QB(a),s=null==i.firstWeekContainsDate?u:QB(i.firstWeekContainsDate);if(!(s>=1&&s<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,s),c.setUTCHours(0,0,0,0);var l=iF(c,t),f=new Date(0);f.setUTCFullYear(r,0,s),f.setUTCHours(0,0,0,0);var h=iF(f,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function aF(e,t){RB(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:QB(i),a=null==n.firstWeekContainsDate?o:QB(n.firstWeekContainsDate),u=oF(e,t),s=new Date(0);s.setUTCFullYear(u,0,a),s.setUTCHours(0,0,0,0);var c=iF(s,t);return c}var uF=6048e5;function sF(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var cF={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return sF("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):sF(n+1,2)},d:function(e,t){return sF(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return sF(e.getUTCHours()%12||12,t.length)},H:function(e,t){return sF(e.getUTCHours(),t.length)},m:function(e,t){return sF(e.getUTCMinutes(),t.length)},s:function(e,t){return sF(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return sF(Math.floor(r*Math.pow(10,n-3)),t.length)}},lF="midnight",fF="noon",hF="morning",dF="afternoon",pF="evening",vF="night",mF={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return cF.y(e,t)},Y:function(e,t,n,r){var i=oF(e,r),o=i>0?i:1-i;return"YY"===t?sF(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):sF(o,t.length)},R:function(e,t){return sF(tF(e),t.length)},u:function(e,t){return sF(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return sF(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return sF(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return cF.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return sF(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=function(e,t){RB(1,arguments);var n=PB(e),r=iF(n,t).getTime()-aF(n,t).getTime();return Math.round(r/uF)+1}(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):sF(i,t.length)},I:function(e,t,n){var r=function(e){RB(1,arguments);var t=PB(e),n=eF(t).getTime()-nF(t).getTime();return Math.round(n/rF)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):sF(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):cF.d(e,t)},D:function(e,t,n){var r=function(e){RB(1,arguments);var t=PB(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),i=n-r;return Math.floor(i/$B)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):sF(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return sF(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return sF(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return sF(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?fF:0===i?lF:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?pF:i>=12?dF:i>=4?hF:vF,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return cF.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):cF.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):sF(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):sF(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):cF.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):cF.s(e,t)},S:function(e,t){return cF.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return gF(i);case"XXXX":case"XX":return wF(i);default:return wF(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return gF(i);case"xxxx":case"xx":return wF(i);default:return wF(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+yF(i,":");default:return"GMT"+wF(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+yF(i,":");default:return"GMT"+wF(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return sF(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return sF((r._originalDate||e).getTime(),t.length)}};function yF(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t||"";return n+String(i)+a+sF(o,2)}function gF(e,t){return e%60===0?(e>0?"-":"+")+sF(Math.abs(e)/60,2):wF(e,t)}function wF(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+sF(Math.floor(i/60),2)+n+sF(i%60,2)}var bF=mF;function kF(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function _F(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}var EF={p:_F,P:function(e,t){var n,r=e.match(/(P+)(p+)?/)||[],i=r[1],o=r[2];if(!o)return kF(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",kF(i,t)).replace("{{time}}",_F(o,t))}},IF=EF;function AF(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var CF=["D","DD"],SF=["YY","YYYY"];function xF(e){return-1!==CF.indexOf(e)}function TF(e){return-1!==SF.indexOf(e)}function OF(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var NF=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,RF=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,DF=/^'([^]*?)'?$/,PF=/''/g,MF=/[a-zA-Z]/;function LF(e,t,n){RB(2,arguments);var r=String(t),i=n||{},o=i.locale||YB,a=o.options&&o.options.firstWeekContainsDate,u=null==a?1:QB(a),s=null==i.firstWeekContainsDate?u:QB(i.firstWeekContainsDate);if(!(s>=1&&s<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=o.options&&o.options.weekStartsOn,l=null==c?0:QB(c),f=null==i.weekStartsOn?l:QB(i.weekStartsOn);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var h=PB(e);if(!MB(h))throw new RangeError("Invalid time value");var d=AF(h),p=JB(h,d),v={firstWeekContainsDate:s,weekStartsOn:f,locale:o,_originalDate:h},m=r.match(RF).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,IF[t])(e,o.formatLong,v):e})).join("").match(NF).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return BF(n);var a=bF[r];if(a)return!i.useAdditionalWeekYearTokens&&TF(n)&&OF(n,t,e),!i.useAdditionalDayOfYearTokens&&xF(n)&&OF(n,t,e),a(p,n,o.localize,v);if(r.match(MF))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("");return m}function BF(e){return e.match(DF)[1].replace(PF,"'")}function FF(e){var t=e.index,n=e.len,r=e.message,i=e.previousMessage,o=e.nextMessage,a=r.from===SC.currentUser.uid,u=a?"sent":"recieved",s=!1,c=!1,l=0,f=!1,h=!1,d="",p=0===r.status,v=new Date(1e3*r.createdDate.seconds+r.createdDate.nanoseconds/1e6),m=new Date(Date.now()),y="",g="h:mm a",w=LF(m,"MMM")===LF(v,"MMM"),b=LF(m,"yy")===LF(v,"yy"),k=LF(m,"w")===LF(v,"w"),_=LF(m,"d")===LF(v,"d"),E=LF(m,"H")===LF(v,"H"),I=LF(m,"m")===LF(v,"m"),A=(b&&w&&(v.getDay(),m.getDay()),b&&w&&k&&m.getDay()-v.getDay()===1);w||(y+="MMM d"),b||(y+=", yyyy "),_||(y+="EEE "),k||(y=y.replace("EEE",""),w&&(y+="MMM d ")),m.getDay(),v.getDay(),LF(m,"h"),LF(v,"h");var C="";if(C=(y&&LF(v,y)+" at ")+LF(v,g),A&&(C="Yesterday"+LF(v,y=y.replace("EEE",""))+" at "+LF(v,g)),_){if(E){var S=m.getMinutes()-v.getMinutes();C=1===S?"a minute ago":S+" minutes ago",I&&(C="now")}!E&&m.getHours()-v.getHours()<2&&(C="an hour ago")}t>0&&(f=LF(new Date(1e3*r.createdDate.seconds),"MMM dd yy h:mm")===LF(new Date(1e3*i.createdDate.seconds),"MMM dd yy h:mm"),s=r.from===i.from&&r.from===SC.currentUser.uid||r.from===i.from&&r.from!==SC.currentUser.uid,f?s?(d="bubble-last",l+=1):(d="bubble-first",l=0):(l=0,d="bubble-first")),t<n-1&&(h=LF(new Date(1e3*r.createdDate.seconds),"MMM dd yy h:mm")===LF(new Date(1e3*o.createdDate.seconds),"MMM dd yy h:mm"),c=r.from===o.from&&r.from===SC.currentUser.uid||r.from===o.from&&r.from!==SC.currentUser.uid,h&&l>0&&(d="bubble-"+(c?"middle":"last")));try{return(0,RC.jsxs)(RC.Fragment,{children:[!f&&(0,RC.jsxs)(RC.Fragment,{children:[0!==t&&(0,RC.jsx)("tr",{children:(0,RC.jsx)("td",{style:{lineHeight:"0.5"},children:"\xa0"})}),(0,RC.jsx)("tr",{children:(0,RC.jsx)("td",{children:(0,RC.jsx)("small",{children:C})})})]}),(0,RC.jsx)("tr",{className:d,children:(0,RC.jsx)("td",{children:(0,RC.jsxs)("p",{className:u,children:[r.message," ",0===r.status]})})}),t===n-1&&a&&(0,RC.jsx)("tr",{className:"status",children:(0,RC.jsx)("td",{children:(0,RC.jsx)("small",{children:p?"Delivered":"Seen"})})})]})}catch(Rj){return(0,RC.jsxs)(RC.Fragment,{children:[!f&&(0,RC.jsxs)(RC.Fragment,{children:[0!==t&&(0,RC.jsx)("tr",{children:(0,RC.jsx)("td",{children:"\xa0"})}),(0,RC.jsx)("tr",{children:(0,RC.jsx)("td",{children:(0,RC.jsx)("small",{children:"Can't load timestamp"})})})]}),(0,RC.jsx)("tr",{className:d,children:(0,RC.jsx)("td",{children:(0,RC.jsx)("p",{className:a?"sent":"recieved",children:"Can't load message"})})})]})}}function jF(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c((0,r.useState)(""),2),o=i[0],a=i[1],u=c((0,r.useState)(!1),2),s=u[0],l=u[1],f=c((0,r.useState)(!1),2),h=f[0],d=f[1],p=function(){var e=(0,r.useContext)(k).matches,t=e[e.length-1];return t?t.params:{}}().uid,v=c((0,r.useState)(null),2),m=v[0],y=v[1],g=c((0,r.useState)(null),2),w=g[0],b=g[1],_=c((0,r.useState)(""),2),E=_[0],I=_[1],A=(0,r.useRef)(null),C=(0,r.useRef)(null),S=c((0,r.useState)(!1),2),x=S[0],T=S[1],O=c((0,r.useState)(!1),2),N=O[0],R=O[1],D=c((0,r.useState)(!1),2),P=D[0],M=D[1],L=SC.currentUser.uid+" - "+p,B=p+" - "+SC.currentUser.uid,F=[L,B],j=c((0,r.useState)(!1),2),U=j[0],V=j[1],z=function(){return V(A.current.value.length>0)},H=xC.collection("users"),G=xC.collection("messages").where("senders","in",F);G.get().then((function(e){b(e.docs.map((function(e){return e.data()}))),l(!1)})).finally((function(){})).catch((function(e){ae(e,"get-contact-error.")}));var W=G.where("status","==",0).where("to","==",SC.currentUser.uid),q=c(VN(W),1)[0],K=(null!==q&&void 0!==q?q:[]).length;function X(){return Y.apply(this,arguments)}function Y(){return(Y=re(te().mark((function e(){var t,n,r,i,o,a,u,s;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:4,r=null!==(t=(null!==(n=document.getElementsByClassName("appbar")[0])&&void 0!==n?n:[]).offsetHeight)&&void 0!==t?t:0,i=document.getElementById("Reply").offsetHeight,o=4+r+i,(a=document.getElementById("Conversations")).style.height=window.innerHeight-o+"px",u=a.offsetHeight,s=a.querySelector("table").offsetHeight,a.style.display=s>u?"block":"flex",a.querySelector("table").style.alignSelf=s>u?"unset":"flex-end",R(s>=u);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(),e.next=3,H.doc(p).get().then((function(e){e.exists&&y(e.data())})).finally((function(){})).catch((function(e){ae(e,"get-contact-error.")}));case 3:l(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a(""),n(""),d(!0),!(A.current.value.length>0)){e.next=12;break}return e.next=7,xC.collection("messages").add({createdDate:new Date(Date.now()),message:A.current.value,to:p,from:SC.currentUser.uid,senders:L,status:0}).then((function(){A.current.value="",V(!1)})).catch((function(e){return d(!1),console.error(e),n("Message not sent.")}));case 7:return N||X(),N||ne(),e.next=11,J();case 11:d(!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){C.current.scrollIntoView({behavior:"smooth"}),ne()}W.get().then((function(e){if((K=e.docs.length)>0){var t;T(!0);var n=null!==(t=e.docs.sort((function(e,t){return t.data().createdDate.seconds-e.data().createdDate.seconds})).map((function(e,t){return 0===t?e.data().message:null})).filter((function(e){return e})))&&void 0!==t?t:"";I(n)}})),(0,r.useEffect)((function(){!function(){Q.apply(this,arguments)}()}),[]);var ee=(0,r.useRef)();function ne(){return ie.apply(this,arguments)}function ie(){return(ie=re(te().mark((function e(){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.get().then((function(e){var t=[];e.forEach((function(e){return t.push(e.ref.update({status:1}))})),Promise.all(t)}));case 2:W.get().then((function(e){K=e.docs.length,T(K>0)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){a(""),n(""),l(!0)}function ae(e,t){return l(!1),console.error(e.message),n(t)}function ue(){}return(0,RC.jsxs)("div",{className:"page",children:[m&&(0,RC.jsx)(pB,{history:"/",component:(0,RC.jsxs)("div",{className:"contact contact_small logged-"+(m&&m.isLoggedIn?"in":"out"),children:[(0,RC.jsxs)("div",{className:"user",children:[(0,RC.jsx)("img",{className:"rounded-circle",onError:function(){return ue},src:m&&(m.providerData.photoURL||hT),alt:m&&m.displayName}),(0,RC.jsx)("span",{className:"dot indicator",children:"\u25cf"})]}),(0,RC.jsxs)("div",{className:"content",children:[(0,RC.jsx)("strong",{className:"title",children:m&&(m.displayName||m.providerData.displayName)}),(0,RC.jsx)("span",{className:"tag indicator",children:m&&(m.isLoggedIn?"Online":"Offline")})]})]})}),s?(0,RC.jsx)(mN,{}):(0,RC.jsxs)("div",{id:"Conversations",className:"w-100 text-center",onScroll:function(){if(ee.current){var e=ee.current,t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;Math.floor(t+r+1)===Math.floor(n)&&ne(),M(0===t)}},ref:ee,children:[t&&(0,RC.jsx)(sx,{variant:"danger",children:t}),o&&(0,RC.jsx)(sx,{variant:"success",children:o}),(0,RC.jsx)("table",{children:(0,RC.jsxs)("tbody",{children:[P&&(0,RC.jsx)("tr",{children:(0,RC.jsx)("td",{children:"Retrieving messages..."})}),w&&w.sort((function(e,t){return e.createdDate-t.createdDate})).map((function(e,t){var n=t>0?w[t-1]:null,r=t<w.length-1?w[t+1]:null;return(0,RC.jsx)(FF,{index:t,len:w.length,message:e,previousMessage:n,nextMessage:r,uid:SC.currentUser.uid},t)}))]})}),(0,RC.jsx)("div",{ref:C})]}),(0,RC.jsx)("div",{id:"NewMessages",className:x&&N?"shown":"",children:(0,RC.jsxs)("button",{type:"button",onClick:J,children:[x&&(0,RC.jsxs)("small",{children:[E," "]}),(0,RC.jsx)(kB,{})]})}),(0,RC.jsxs)(tT,{id:"Reply",onSubmit:function(e){return Z.apply(this,arguments)},children:[(0,RC.jsx)($,{className:"link",to:"",children:(0,RC.jsx)(CB,{style:{color:"#198754"}})}),(0,RC.jsxs)("div",{className:"subForm",children:[(0,RC.jsx)(tT.Control,{className:"",type:"text",ref:A,onKeyUp:z,onFocus:z,onBlur:z,autoComplete:"off",placeholder:"Type message..."}),(0,RC.jsx)(_N,{variant:"success",disabled:h,type:"submit",style:{display:U?"block":"none"},children:(0,RC.jsx)(NB,{})})]})]})]})}function UF(){return(0,RC.jsxs)("div",{className:"page",children:[(0,RC.jsx)(pB,{history:"/",title:"Notifications"}),(0,RC.jsx)("div",{className:"container",children:"dasdasd"})]})}var VF=["bsPrefix","className","variant","as"],zF=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.variant,o=e.as,a=void 0===o?"img":o,u=BC(e,VF),s=iS(n,"card-img");return(0,RC.jsx)(a,ct({ref:t,className:jC()(i?"".concat(s,"-").concat(i):s,r)},u))}));zF.displayName="CardImg";var HF=zF,GF=r.createContext(null);GF.displayName="CardHeaderContext";var WF=GF,qF=["bsPrefix","className","as"],KF=r.forwardRef((function(e,t){var n=e.bsPrefix,i=e.className,o=e.as,a=void 0===o?"div":o,u=BC(e,qF),s=iS(n,"card-header"),c=(0,r.useMemo)((function(){return{cardHeaderBsPrefix:s}}),[s]);return(0,RC.jsx)(WF.Provider,{value:c,children:(0,RC.jsx)(a,ct(ct({ref:t},u),{},{className:jC()(i,s)}))})}));KF.displayName="CardHeader";var XF=KF,YF=["bsPrefix","className","bg","text","border","body","children","as"],QF=ZS("h5"),ZF=ZS("h6"),JF=tx("card-body"),$F=tx("card-title",{Component:QF}),ej=tx("card-subtitle",{Component:ZF}),tj=tx("card-link",{Component:"a"}),nj=tx("card-text",{Component:"p"}),rj=tx("card-footer"),ij=tx("card-img-overlay"),oj=r.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.bg,o=e.text,a=e.border,u=e.body,s=e.children,c=e.as,l=void 0===c?"div":c,f=BC(e,YF),h=iS(n,"card");return(0,RC.jsx)(l,ct(ct({ref:t},f),{},{className:jC()(r,h,i&&"bg-".concat(i),o&&"text-".concat(o),a&&"border-".concat(a)),children:u?(0,RC.jsx)(JF,{children:s}):s}))}));oj.displayName="Card",oj.defaultProps={body:!1};var aj=Object.assign(oj,{Img:HF,Title:$F,Subtitle:ej,Body:JF,Link:tj,Text:nj,Header:XF,Footer:rj,ImgOverlay:ij});function uj(){var e=(0,r.useRef)(),t=PC().resetPassword,n=c((0,r.useState)(""),2),i=n[0],o=n[1],a=c((0,r.useState)(""),2),u=a[0],s=a[1],l=c((0,r.useState)(!1),2),f=l[0],h=l[1];function d(){return(d=re(te().mark((function n(r){return te().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,s(""),o(""),h(!0),n.next=7,t(e.current.value);case 7:s("Check your email inbox for instructions."),h(!1),n.next=16;break;case 11:return n.prev=11,n.t0=n.catch(1),h(!1),console.error(n.t0),n.abrupt("return",o("Reset password failed."));case 16:case"end":return n.stop()}}),n,null,[[1,11]])})))).apply(this,arguments)}return(0,RC.jsx)(RC.Fragment,{children:(0,RC.jsx)(FO,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:(0,RC.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[(0,RC.jsx)(aj,{children:(0,RC.jsxs)(aj.Body,{children:[(0,RC.jsx)("h2",{className:"text-center mb-4",children:"Password Reset"}),i&&(0,RC.jsx)(sx,{variant:"danger",children:i}),u&&(0,RC.jsx)(sx,{variant:"success",children:u}),(0,RC.jsxs)(tT,{onSubmit:function(e){return d.apply(this,arguments)},children:[(0,RC.jsxs)(tT.Group,{id:"email",children:[(0,RC.jsx)(tT.Label,{children:"Email"}),(0,RC.jsx)(tT.Control,{type:"email",ref:e,required:!0})]}),(0,RC.jsx)(_N,{disabled:f,className:"w-100 mt-4",type:"submit",children:"Reset Password"})]}),(0,RC.jsx)("div",{className:"w-100 text-center mt-3",children:(0,RC.jsx)($,{to:"/login",children:"Log In"})})]})}),(0,RC.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",(0,RC.jsx)($,{to:"/signup",children:"Sign Up"})]})]})})})}var sj=["color","size","title"];function cj(){return cj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cj.apply(this,arguments)}function lj(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var fj=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=lj(e,sj);return r.createElement("svg",cj({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"}))}));fj.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},fj.defaultProps={color:"currentColor",size:"1em",title:null};var hj=fj,dj=["color","size","title"];function pj(){return pj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pj.apply(this,arguments)}function vj(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var mj=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=vj(e,dj);return r.createElement("svg",pj({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"}))}));mj.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},mj.defaultProps={color:"currentColor",size:"1em",title:null};var yj=mj,gj=["color","size","title"];function wj(){return wj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wj.apply(this,arguments)}function bj(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var kj=(0,r.forwardRef)((function(e,t){var n=e.color,i=e.size,o=e.title,a=bj(e,gj);return r.createElement("svg",wj({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:n},a),o?r.createElement("title",null,o):null,r.createElement("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"}))}));kj.propTypes={color:qS().string,size:qS().oneOfType([qS().string,qS().number]),title:qS().string},kj.defaultProps={color:"currentColor",size:"1em",title:null};var _j=kj;function Ej(){var e=(0,r.useRef)(),t=(0,r.useRef)(),n=PC().login,i=c((0,r.useState)(""),2),o=i[0],a=i[1],u=c((0,r.useState)(!1),2),s=u[0],l=u[1],f=j(),h=c((0,r.useState)(""),2),d=h[0],p=h[1];function v(){return(v=re(te().mark((function r(i){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i.preventDefault(),g(),r.prev=2,r.next=5,n(e.current.value,t.current.value);case 5:f("/"),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),w(r.t0,"Login failed. ("+r.t0.code.replace("auth/","")+")");case 11:case"end":return r.stop()}}),r,null,[[2,8]])})))).apply(this,arguments)}function m(e){return y.apply(this,arguments)}function y(){return(y=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(),null!=t){e.next=4;break}return l(!1),e.abrupt("return",a("Invalid provider."));case 4:return e.prev=4,e.next=7,SC.signInWithPopup(t);case 7:f("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),w(e.t0,"Login failed. ("+e.t0.code.replace("auth/","")+")");case 13:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function g(){p(""),a(""),l(!0)}function w(e,t){return l(!1),console.error(e.message),a(t)}return(0,RC.jsx)("div",{className:"page",children:(0,RC.jsx)("div",{id:"Login",className:"container",style:{maxWidth:"400px"},children:(0,RC.jsxs)("div",{className:"card",children:[(0,RC.jsx)("h2",{className:"text-center",children:"Log In"}),o&&(0,RC.jsx)(sx,{variant:"danger",children:o}),d&&(0,RC.jsx)(sx,{variant:"success",children:d}),(0,RC.jsxs)(tT,{onSubmit:function(e){return v.apply(this,arguments)},children:[(0,RC.jsxs)(tT.Group,{id:"email",children:[(0,RC.jsx)(tT.Label,{children:"Email"}),(0,RC.jsx)(tT.Control,{type:"email",ref:e,required:!0})]}),(0,RC.jsxs)(tT.Group,{id:"password",className:"mt-2",children:[(0,RC.jsx)(tT.Label,{children:"Password"}),(0,RC.jsx)(tT.Control,{type:"password",ref:t,autoComplete:"on",required:!0})]}),(0,RC.jsx)(_N,{disabled:s,variant:"success",className:"w-100 mt-4",type:"submit",children:"Log In"})]}),(0,RC.jsx)("div",{className:"w-100 text-center mt-3",children:(0,RC.jsx)($,{to:"/forgot-password",children:"Forgot Password?"})}),(0,RC.jsxs)(_N,{className:"login-provider mt-4",onClick:function(){return m(TC)},children:[(0,RC.jsx)(hj,{className:"google"})," Continue with Google"]}),(0,RC.jsxs)(_N,{className:"login-provider",onClick:function(){return m(OC)},children:[(0,RC.jsx)(yj,{className:"facebook"})," Continue with Facebook"]}),(0,RC.jsxs)(_N,{className:"login-provider",onClick:function(){return m(NC)},children:[(0,RC.jsx)(_j,{className:"github"})," Continue with GitHub"]}),(0,RC.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",(0,RC.jsx)($,{to:"/signup",children:"Sign Up"})]})]})})})}function Ij(){var e=j();return(0,RC.jsxs)("div",{children:[(0,RC.jsx)(yN,{}),(0,RC.jsx)("div",{id:"LogoutModal",className:"modal",children:(0,RC.jsx)("button",{onClick:function(){e("/")},children:"Cancel"})})]})}function Aj(){var e=(0,r.useRef)(),t=(0,r.useRef)(),n=(0,r.useRef)(),i=PC().signup,o=c((0,r.useState)(""),2),a=o[0],u=o[1],s=c((0,r.useState)(!1),2),l=s[0],f=s[1],h=c((0,r.useState)(""),2),d=h[0],p=h[1];function v(){return(v=re(te().mark((function r(o){return te().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.preventDefault(),t.current.value===n.current.value){r.next=3;break}return r.abrupt("return",u("Passwords do not match."));case 3:return r.prev=3,p(""),u(""),f(!0),r.next=9,i(e.current.value,t.current.value);case 9:p("Registration successful!"),e.current.value="",t.current.value="",n.current.value="",r.next=20;break;case 15:return r.prev=15,r.t0=r.catch(3),f(!1),console.error(r.t0.message),r.abrupt("return",u("Failed to sign in."));case 20:f(!1);case 21:case"end":return r.stop()}}),r,null,[[3,15]])})))).apply(this,arguments)}return(0,RC.jsx)(RC.Fragment,{children:(0,RC.jsx)(FO,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:(0,RC.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[(0,RC.jsx)(aj,{children:(0,RC.jsxs)(aj.Body,{children:[(0,RC.jsx)("h2",{className:"text-center mb-4",children:"Sign Up"}),a&&(0,RC.jsx)(sx,{variant:"danger",children:a}),d&&(0,RC.jsx)(sx,{variant:"success",children:d}),(0,RC.jsxs)(tT,{onSubmit:function(e){return v.apply(this,arguments)},children:[(0,RC.jsxs)(tT.Group,{id:"email",children:[(0,RC.jsx)(tT.Label,{children:"Email"}),(0,RC.jsx)(tT.Control,{type:"email",ref:e,required:!0})]}),(0,RC.jsxs)(tT.Group,{id:"password",className:"mt-2",children:[(0,RC.jsx)(tT.Label,{children:"Password"}),(0,RC.jsx)(tT.Control,{type:"password",ref:t,autoComplete:"on",required:!0})]}),(0,RC.jsxs)(tT.Group,{id:"confirm-password",className:"mt-2",children:[(0,RC.jsx)(tT.Label,{children:"Confirm Password"}),(0,RC.jsx)(tT.Control,{type:"password",ref:n,autoComplete:"on",required:!0})]}),(0,RC.jsx)(_N,{disabled:l,className:"w-100 mt-4",type:"submit",children:"Sign Up"})]})]})}),(0,RC.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",(0,RC.jsx)($,{to:"/login",children:"Log In"})]})]})})})}var Cj=n(925);function Sj(){var e,t=(0,r.useRef)(),n=(0,r.useRef)(),i=(0,r.useRef)(),o=(0,r.useRef)(),a=PC(),u=a.currentUser,s=a.updateEmail,l=a.updatePassword,f=a.updateName,h=c((0,r.useState)(""),2),d=h[0],p=h[1],v=c((0,r.useState)(""),2),m=v[0],y=v[1],g=c((0,r.useState)(!1),2),w=g[0],b=g[1],k=null!==(e=u.displayName)&&void 0!==e?e:u.email,_=!u.providerData.map((function(e){return"password"===e.providerId}))[0],E=c((0,r.useState)(null),2),I=E[0],A=E[1];function C(){return(C=re(te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(),t=xC.collection("users").doc(SC.currentUser.uid),e.next=4,t.get().then((function(e){e.exists&&A(e.data()),b(!1)})).finally((function(){b(!1)})).catch((function(e){T(e,"get-user-error.")}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){}function x(){y(""),p(""),b(!0)}function T(e,t){return b(!1),console.error(e.message),p(t)}return(0,r.useEffect)((function(){!function(){C.apply(this,arguments)}()}),[]),(0,RC.jsxs)("div",{className:"page",children:[(0,RC.jsx)(pB,{history:"/",title:"Profile"}),(0,RC.jsx)("div",{className:"container",children:!w&&(0,RC.jsxs)("div",{className:"card",children:[m&&(0,RC.jsx)(sx,{variant:"success",children:m}),d&&(0,RC.jsx)(sx,{variant:"danger",children:d}),d&&(0,RC.jsx)(vB,{}),I&&(0,RC.jsx)("div",{className:"w-100 text-center",children:(0,RC.jsxs)("div",{style:{background:"white",padding:"16px",display:"flex",columnGap:"1em",justifyContent:"center"},children:[(0,RC.jsx)(VO,{roundedCircle:!0,onError:function(){return S},src:u&&u.photoURL||hT,alt:"",style:{width:"6em"}}),(0,RC.jsx)(Cj.Z,{value:I.userCode,fgColor:"#198754",size:94,title:I.userCode})]})}),(0,RC.jsxs)(tT,{onSubmit:function(e){e.preventDefault();var r=[];return x(),i.current.value!==o.current.value?p("Passwords do not match."):null==t.current.value?p("Display name is required."):(t.current.value!==u.displayName&&r.push(f(t.current.value)),n.current.value!==u.email&&r.push(s(n.current.value)),i.current.value&&r.push(l(i.current.value)),void Promise.all(r).then((function(){y("Profile saved.")})).catch((function(e){b(!1),T(e,"Failed to update")})).finally((function(){b(!1)})))},children:[(0,RC.jsxs)(tT.Group,{id:"displayName",className:"mb-2",children:[(0,RC.jsx)("label",{children:"Name"}),(0,RC.jsx)(tT.Control,{type:"text",ref:t,required:!0,defaultValue:k,disabled:!0})]}),(0,RC.jsxs)(tT.Group,{id:"email",className:"mb-2",children:[(0,RC.jsx)("label",{children:"Email"}),(0,RC.jsx)(tT.Control,{type:"email",ref:n,required:!0,defaultValue:u.email,disabled:_})]}),(0,RC.jsxs)(tT.Group,{id:"password",className:"mb-2",children:[(0,RC.jsx)("label",{children:"Password"}),(0,RC.jsx)(tT.Control,{type:"password",ref:i,autoComplete:"on",placeholder:"Leave blank to keep the same password",disabled:_})]}),(0,RC.jsxs)(tT.Group,{id:"confirm-password",className:"mb-2",children:[(0,RC.jsx)("label",{children:"Confirm Password"}),(0,RC.jsx)(tT.Control,{type:"password",ref:o,autoComplete:"on",placeholder:"Leave blank to keep the same password",disabled:_})]}),(0,RC.jsx)(_N,{className:"w-100",variant:"success",disabled:_||w,type:"submit",children:"Update"})]})]})})]})}function xj(){return(0,RC.jsxs)("div",{children:[(0,RC.jsx)("h1",{children:"404 - Not Found!"}),(0,RC.jsx)($,{to:"/",children:"Go Home"})]})}function Tj(e){var t=e.user,n=e.size,r=e.showIfOnline,i=e.onError,o=e.actions,a=(e.type,e.detail),u=new Date(1e3*a.seconds+a.nanoseconds/1e6),s=Math.abs(u-Date.now());return s-=86400*Math.floor(s/86400),s-=3600*(Math.floor(s/3600)%24),s-=60*(Math.floor(s/60)%60),console.log(s),(0,RC.jsxs)("li",{id:t.uid,className:"contact "+n+" logged-"+(t&&t.isLoggedIn?"in":"out"),children:[(0,RC.jsxs)("div",{className:"user",children:[(0,RC.jsx)("img",{className:"rounded-circle",onError:function(){return i},src:t&&(t.providerData.photoURL||hT),alt:t&&t.displayName}),r&&(0,RC.jsx)("span",{className:"dot indicator",children:"\u25cf"})]}),(0,RC.jsxs)("div",{className:"content",children:[(0,RC.jsxs)("h6",{className:"title"+(a?" flex":""),children:[t&&(t.displayName||t.providerData.displayName),a&&(0,RC.jsx)("small",{className:"detail",children:"date"})]}),r&&(0,RC.jsx)("span",{className:"tag indicator",children:t&&(t.isLoggedIn?"Online":"Offline")}),o]})]})}function Oj(){var e=c((0,r.useState)(""),2),t=e[0],n=e[1],i=c((0,r.useState)(""),2),o=i[0],a=i[1],u=c((0,r.useState)(!1),2),s=u[0],l=u[1],f=c((0,r.useState)(null),2),h=f[0],d=f[1],p=xC.collection("users"),v=xC.collection("requests");function m(){return(m=re(te().mark((function e(){var t,n,r;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(),e.next=4,v.where("to","!=",SC.currentUser.uid).get().then((function(e){return e.docs.map((function(e){return e.data()}))}));case 4:if(t=e.sent,l(!1),t){e.next=8;break}return e.abrupt("return");case 8:return k(),e.next=11,p.where("uid","in",t.map((function(e){return e.from}))).get().then((function(e){return e.docs.map((function(e){return e.data()}))}));case 11:if(n=e.sent,l(!1),n){e.next=15;break}return e.abrupt("return");case 15:r=[],t.forEach((function(e){var t,i=null!==(t=n.filter((function(t){return t.uid===e.from})).map((function(e){return e}))[0])&&void 0!==t?t:null,o={request:e,user:i};i.requested=e.createdDate,r.push(o)})),d(r),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),_(e.t0,"get-user-error.");case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}function y(e){return g.apply(this,arguments)}function g(){return(g=re(te().mark((function e(t){return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.target.getAttribute("title").toLowerCase();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){e.preventDefault();for(var t=e.target.getAttribute("href"),n=document.querySelectorAll(".tab"),r=0;r<n.length;r++)n[r].classList.remove("active");document.querySelectorAll('[href="'+t+'"]')[0].closest(".tab").classList.add("active");for(var i=document.querySelectorAll(".tab-content"),o=0;o<i.length;o++)i[o].classList.remove("active"),i[o].getAttribute("id")===t&&i[o].classList.add("active")}function b(){}function k(){a(""),n(""),l(!0)}function _(e,t){return l(!1),console.error(e.message),n(t)}return(0,r.useEffect)((function(){!function(){m.apply(this,arguments)}()}),[]),(0,RC.jsxs)("div",{className:"page",children:[(0,RC.jsx)(pB,{history:"/",title:"Contacts"}),t&&(0,RC.jsx)(sx,{variant:"danger",children:t}),o&&(0,RC.jsx)(sx,{variant:"success",children:o})," ",(0,RC.jsxs)("div",{className:"tab-menu",children:[(0,RC.jsxs)("ul",{className:"tabs",children:[(0,RC.jsx)("li",{className:"tab active",children:(0,RC.jsx)("a",{href:"#tab-1",onClick:w,children:"Requests"})}),(0,RC.jsx)("li",{className:"tab",children:(0,RC.jsx)("a",{href:"#tab-2",onClick:w,children:"Your Contacts"})})]}),(0,RC.jsxs)("div",{className:"tab-contents",children:[(0,RC.jsxs)("ul",{id:"#tab-1",className:"tab-content contacts active",children:[s&&(0,RC.jsx)(dT,{count:1}),!s&&!h&&(0,RC.jsx)("li",{children:"None"}),!s&&h&&h.sort((function(e,t){return t.request.createdDate-e.request.createdDate})).map((function(e,t){var n=e.user,r=e.request.createdDate;return(0,RC.jsx)(Tj,{user:n,size:"medium",showIfOnline:!1,onError:b,type:"request",detail:r,actions:(0,RC.jsxs)("div",{className:"actions",children:[(0,RC.jsx)("button",{className:"btn btn-theme-success wide",type:"button",title:"Accept",onClick:y,children:"Accept"}),(0,RC.jsx)("button",{className:"btn btn-defafult wide",type:"submit",title:"Delete",onClick:y,children:"Delete"})]})},t)}))]}),(0,RC.jsx)("ul",{id:"#tab-2",className:"tab-content",children:(0,RC.jsx)("li",{children:"Person 1"})})]})]})," "]})}var Nj=function(){return(0,RC.jsx)(RC.Fragment,{children:(0,RC.jsx)(J,{children:(0,RC.jsx)(MC,{children:(0,RC.jsxs)(K,{children:[(0,RC.jsx)(W,{path:"/",element:(0,RC.jsx)(wN,{}),children:(0,RC.jsx)(W,{path:"/",element:(0,RC.jsx)(yN,{})})}),(0,RC.jsx)(W,{path:"/update-profile",element:(0,RC.jsx)(wN,{}),children:(0,RC.jsx)(W,{exact:!0,path:"/update-profile",element:(0,RC.jsx)(Sj,{})})}),(0,RC.jsx)(W,{exact:!0,path:"/signup",element:(0,RC.jsx)(Aj,{})}),(0,RC.jsx)(W,{exact:!0,path:"/login",element:(0,RC.jsx)(Ej,{})}),(0,RC.jsx)(W,{exact:!0,path:"/forgot-password",element:(0,RC.jsx)(uj,{})}),(0,RC.jsx)(W,{exact:!0,path:"/notifications",element:(0,RC.jsx)(UF,{})}),(0,RC.jsx)(W,{exact:!0,path:"/messages",element:(0,RC.jsx)(pT,{})}),(0,RC.jsx)(W,{exact:!0,path:"/addcontact",element:(0,RC.jsx)(mB,{})}),(0,RC.jsx)(W,{path:"/conversation/:uid",element:(0,RC.jsx)(jF,{})}),(0,RC.jsx)(W,{component:xj}),(0,RC.jsx)(W,{exact:!0,path:"/logout",element:(0,RC.jsx)(Ij,{})}),(0,RC.jsx)(W,{exact:!0,path:"/contacts",element:(0,RC.jsx)(Oj,{})})]})})})})};i.createRoot(document.getElementById("root")).render((0,RC.jsx)(r.StrictMode,{children:(0,RC.jsx)(Nj,{})}))}()}();
//# sourceMappingURL=main.daa38993.js.map